(()=>{"use strict";var e={221:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataBase=void 0,t.DataBase=class{constructor(){this._books=new Array,this._stocks=new Array,this._customers=new Array,this._sales=new Array,this._rents=new Array,this._bookSpecifications=new Array,this._cancelSales=new Array}get getBooksList(){return this._books}get getStocksList(){return this._stocks}get getCustomersList(){return this._customers}get getSalesList(){return this._sales}get getRents(){return this._rents}get getBookSpecifications(){return this._bookSpecifications}get getCancaledSales(){return this._cancelSales}}},39:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BookSpecification=void 0,t.BookSpecification=class{constructor(e,t,s,a){this._isbn=e,this._price=t,this._startDate=s,this._endDate=a}get isbn(){return this._isbn}get price(){return this._price}get startDate(){return this._startDate}get endDate(){return this._endDate}set isbn(e){this._isbn=e}set price(e){this._price=e}set startDate(e){this._startDate=e}set endDate(e){this._endDate=e}}},934:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Book=void 0,t.Book=class{constructor(e,t,s,a,o,r){this._name=t,this._author=s,this._isbn=e,this._publishYear=a,this._pages=o,this._bookSpec=r}get isbn(){return this._isbn}get name(){return this._name}get author(){return this._author}get publishYear(){return this._publishYear}get pages(){return this._pages}get bookSpec(){return this._bookSpec}set isbn(e){this._isbn=e}set name(e){this._name=e}set author(e){this._author=e}set publishYear(e){this._publishYear=e}set pages(e){this._pages=e}set bookSpec(e){this._bookSpec=e}}},916:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Customer=void 0,t.Customer=class{constructor(e,t,s,a){this._id=e,this._name=t,this._surName=s,this._phoneNumber=a}get id(){return this._id}get name(){return this._name}get surName(){return this._surName}get phoneNumber(){return this._phoneNumber}set id(e){this._id=e}set name(e){this._name=e}set surName(e){this._surName=e}set phoneNumber(e){this._phoneNumber=e}}},72:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Stock=void 0,t.Stock=class{constructor(e,t,s){this._isbn=e,this._quantity=t,this._shelfNumber=s}get isbn(){return this._isbn}get quantity(){return this._quantity}get shelfNumber(){return this._shelfNumber}set isbn(e){this._isbn=e}set quantity(e){this._quantity=e}set shelfNumber(e){this._shelfNumber=e}}},946:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BookService=void 0,t.BookService=class{constructor(e){this._dataBase=e}get dataBase(){return this._dataBase}set dataBase(e){this._dataBase=e}getBook(e){return this.dataBase.getBooksList.find((t=>t.isbn===e))}addBook(e){try{return this.dataBase.getBooksList.push(e),this.dataBase.getBookSpecifications.push(e.bookSpec),!0}catch(e){return!1}}isValidBook(e){const t=this.getBook(e);return this.dataBase.getBooksList.includes(t)}}},609:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CancelSaleService=void 0,t.CancelSaleService=class{constructor(e){this._dataBase=e}get dataBase(){return this._dataBase}set dataBase(e){this._dataBase=e}cancelSale(e){this.dataBase.getCancaledSales.push(e);let t=this.calculateRefund(e);e.refund=t}calculateRefund(e){let t;return t=this.calculateDiffHours(e.canceledDateTime,e.sale.operationDateTime)>24?.75*e.sale.total:e.sale.total,t}calculateDiffHours(e,t){let s=e.getTime()-t.getTime();return Math.floor(s/1e3/60/60)}}},709:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerService=void 0,t.CustomerService=class{constructor(e){this._dataBase=e}get dataBase(){return this._dataBase}set dataBase(e){this._dataBase=e}addCustomer(e){return this.dataBase.getCustomersList.push(e),!0}getNewCustomerId(){let e=0;return this.dataBase.getCustomersList.length>0&&(e=this.dataBase.getCustomersList.at(this.dataBase.getCustomersList.length-1).id),e+=1,e}getCustomerInfo(e){return this.dataBase.getCustomersList.find((t=>t.id===e))||void 0}isValidCustomer(e){return!!this.dataBase.getCustomersList.find((t=>t.id===e))}}},148:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RentService=void 0,t.RentService=class{constructor(e){this._dataBase=e,this.refundPercent=.75}get dataBase(){return this._dataBase}set dataBase(e){this._dataBase=e}addRent(e){this.dataBase.getRents.push(e)}calculateTotal(e){e.bookAndQuantityMap;let t=0;for(let s of e.bookAndQuantityMap)t+=s[0].bookSpec.price*s[1];return t}generateRentNumber(e){let t=new Date;return"R"+t.getDay().toString+t.getMonth().toString+t.getFullYear().toString+t.getHours().toString+t.getMinutes().toString+t.getSeconds().toString+e.toString}calculateRefund(e){e.refund=e.total*this.refundPercent}}},478:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SaleService=void 0,t.SaleService=class{constructor(e){this._dataBase=e}get dataBase(){return this._dataBase}set dataBase(e){this._dataBase=e}addSale(e){this.dataBase.getSalesList.push(e)}calculateTotal(e){let t=0;for(let s of e.bookAndQuantityMap.entries())t+=s[0].bookSpec.price*s[1];return t}generateSaleNumber(e){let t=new Date;return"S"+t.getDay().toString+t.getMonth().toString+t.getFullYear().toString+t.getHours().toString+t.getMinutes().toString+t.getSeconds().toString+e.toString}getSale(e){let t=this.dataBase.getSalesList.find((t=>t.operationNumber===e));if(t)return t;throw new Error}removeSale(e){let t=this.dataBase.getSalesList.indexOf(e);this.dataBase.getSalesList.splice(t,1)}}},214:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StockService=void 0;const a=s(72);t.StockService=class{constructor(e){this._dataBase=e}get dataBase(){return this._dataBase}set dataBase(e){this._dataBase=e}addStock(e,t,s){try{let o=new a.Stock(e,s,t);return this.dataBase.getStocksList.push(o),!0}catch(e){return console.error(e),!1}}increaseStock(e,t){let s=this.getStock(e);return!!s&&(s.quantity=s.quantity+t,!0)}getStock(e){let t=this.dataBase.getStocksList.find((t=>t.isbn===e));if(t)return t;throw new Error("")}}}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,s),r.exports}(()=>{const e=s(221),t=s(934),a=s(39),o=s(916),r=s(72),i=s(946),n=s(609),u=s(709),c=s(148),l=s(478),d=s(214);let h,g,m,_,S,k,B;function b(e,t){const s=document.getElementById(t),a=document.getElementById(e);s&&a&&a.addEventListener("click",(()=>{"none"===s.style.display?s.style.display="block":s.style.display="none"}))}!function(t){console.log("intiliaze services"),t=new e.DataBase,h=new i.BookService(t),g=new u.CustomerService(t),m=new n.CancelSaleService(t),_=new c.RentService(t),S=new l.SaleService(t),k=new d.StockService(t)}(B),b("addBookMenuItem","addBookSection"),b("bookCardsMenuItem","listBooksSection"),b("addCustomerMenuItem","addCustomerSection"),b("addStockMenuItem","addStockSection"),b("saleBookMenuItem","saleBookSection");const p=document.getElementById("add-book-form");null!=p&&(p.onsubmit=()=>{const e=new FormData(p),s=e.get("bookTitle"),o=e.get("bookAuthor"),r=e.get("bookIsbn"),i=e.get("bookPublishYear"),n=e.get("bookPages"),u=e.get("bookPrice"),c=new Date,l=new Date("Dec 31, 9999 23:59:59"),d=new a.BookSpecification(r,u,c,l),h=new t.Book(r,s,o,i,n,d);for(var g of(B.getBooksList.push(h),alert("Kitap Ekleme İşlemi Başarı İle Tamamlanmıştır."),p.reset(),console.log(h),B.getBooksList))console.log(g.isbn),console.log(g.name),console.log(g.author),console.log(g.publishYear),console.log(g.pages),console.log(g.bookSpec.price);return!1});const f=document.getElementById("add-customer-form");f&&(f.onsubmit=()=>{const e=new FormData(f),t=e.get("customerName"),s=e.get("customerSurname"),a=e.get("customerPhoneNumber"),r=new o.Customer(1,t,s,a);return B.getCustomersList.push(r),alert("Müşteri Ekleme İşlemi Başarı İle Tamamlanmıştır. "),f.reset(),console.log(r),!1});const y=document.getElementById("add-stock-form");if(y){y.onsubmit=()=>{const e=new FormData(y),t=e.get("bookIsbnForAddStock"),s=e.get("stockQuantity"),a=e.get("shelfNumber"),o=new r.Stock(t,s,a);return B.getBooksList.some((e=>e.isbn==t))?(B.getStocksList.push(o),alert(t+" isbn numaralı kitaptan, "+s+" kadar sisteme stok eklenmiştir.")):alert("Stok eklenmeye çalışılan kitap, kayıtlı değildir. Litfen önce kitap ekleyiniz"),!1};const e=document.getElementById("sale-book-form"),t=document.getElementById("btnAddBookToCart"),s=document.getElementById(""),a=document.getElementById("");a&&s&&a.addEventListener("click",(()=>{"none"==s.style.display?s.style.display="block":s.style.display="none"})),t&&t.addEventListener("click",(()=>{const t=new FormData(e);t.get("isbnForSale"),t.get("customerIdForSale"),t.get("quantityForSale")})),e&&(e.onsubmit=()=>{})}})()})();