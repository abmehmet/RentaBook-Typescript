(()=>{"use strict";var t={221:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataBase=void 0;const o=n(758),a=n(51);e.DataBase=class{constructor(){this._books=new Array,this._stocks=new Array,this._customers=new Array,this._sales=new Array,this._rents=new Array,this._bookSpecifications=new Array,this._cancels=new Array,this._saleCart=new a.SaleCart,this._rentCart=new o.RentCart}get getBooksList(){return this._books}get getStocksList(){return this._stocks}get getCustomersList(){return this._customers}get getSalesList(){return this._sales}get getRents(){return this._rents}get getBookSpecifications(){return this._bookSpecifications}get getCancaledSales(){return this._cancels}get getSaleCart(){return this._saleCart}get getRentCart(){return this._rentCart}set setSaleCart(t){this._saleCart=t}set setRentCart(t){this._rentCart=t}}},39:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BookSpecification=void 0,e.BookSpecification=class{constructor(t,e,n,o){this._isbn=t,this._price=e,this._startDate=n,this._endDate=o}get isbn(){return this._isbn}get price(){return this._price}get startDate(){return this._startDate}get endDate(){return this._endDate}set isbn(t){this._isbn=t}set price(t){this._price=t}set startDate(t){this._startDate=t}set endDate(t){this._endDate=t}}},934:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Book=void 0,e.Book=class{constructor(t,e,n,o,a,i){this._name=e,this._author=n,this._isbn=t,this._publishYear=o,this._pages=a,this._bookSpec=i}get isbn(){return this._isbn}get name(){return this._name}get author(){return this._author}get publishYear(){return this._publishYear}get pages(){return this._pages}get bookSpec(){return this._bookSpec}set isbn(t){this._isbn=t}set name(t){this._name=t}set author(t){this._author=t}set publishYear(t){this._publishYear=t}set pages(t){this._pages=t}set bookSpec(t){this._bookSpec=t}}},378:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Cancel=void 0,e.Cancel=class{constructor(t,e,n){this._cancelType=t,this._refund=e,this._canceledDateTime=n}get cancelType(){return this._cancelType}get refund(){return this._refund}get canceledDateTime(){return this._canceledDateTime}set cancelType(t){this._cancelType=t}set refund(t){this._refund=t}set canceledDateTime(t){this._canceledDateTime=t}}},916:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Customer=void 0,e.Customer=class{constructor(t,e,n,o){this._id=t,this._name=e,this._surName=n,this._phoneNumber=o}get id(){return this._id}get name(){return this._name}get surName(){return this._surName}get phoneNumber(){return this._phoneNumber}set id(t){this._id=t}set name(t){this._name=t}set surName(t){this._surName=t}set phoneNumber(t){this._phoneNumber=t}}},758:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RentCart=void 0,e.RentCart=class{constructor(){this.bookAndQuantityMap=new Map}}},961:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Rent=void 0;const o=n(354);class a extends o.Sale{constructor(t,e,n,o,a,i,r){super(t,e,n,o,a),this._refundDate=i,this._refund=r}get refundDate(){return this._refundDate}get refund(){return this._refund}set refundDate(t){this._refundDate=t}set refund(t){this._refund=t}}e.Rent=a},51:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SaleCart=void 0,e.SaleCart=class{constructor(){this.bookAndQuantityMap=new Map}}},354:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sale=void 0,e.Sale=class{constructor(t,e,n,o,a){this._bookAndQuantityMap=new Map,this._bookAndQuantityMap=t,this._operationDateTime=e,this._customerId=n,this._operationNumber=o,this._total=a}get bookAndQuantityMap(){return this._bookAndQuantityMap}get operationDateTime(){return this._operationDateTime}get customerId(){return this._customerId}get operationNumber(){return this._operationNumber}get total(){return this._total}set bookAndQuantityMap(t){this._bookAndQuantityMap=t}set operationDateTime(t){this._operationDateTime=t}set customerId(t){this._customerId=t}set operationNumber(t){this._operationNumber=t}set total(t){this._total=t}}},72:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Stock=void 0,e.Stock=class{constructor(t,e,n){this._isbn=t,this._quantity=e,this._shelfNumber=n}get isbn(){return this._isbn}get quantity(){return this._quantity}get shelfNumber(){return this._shelfNumber}set isbn(t){this._isbn=t}set quantity(t){this._quantity=t}set shelfNumber(t){this._shelfNumber=t}}},607:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.stockService=e.saleService=e.rentService=e.cancelService=e.customerService=e.bookService=void 0;const a=n(221),i=n(934),r=n(39),s=n(378),c=n(916),l=n(961),u=n(354),d=n(72),h=n(946),m=n(943),p=n(709),k=n(148),f=n(478),S=n(214);function b(t,e){const n=document.getElementById(e),o=document.getElementById(t);n&&o&&o.addEventListener("click",(()=>{"none"===n.style.display?n.style.display="block":n.style.display="none"}))}var y;y=new a.DataBase,e.bookService=new h.BookService(y.getBooksList,y.getBookSpecifications),e.customerService=new p.CustomerService(y.getCustomersList),e.cancelService=new m.CancelService(y.getCancaledSales),e.rentService=new k.RentService(y.getRents,y.getRentCart),e.saleService=new f.SaleService(y.getSalesList,y.getSaleCart),e.stockService=new S.StockService(y.getStocksList),console.log("Services intiliazed."),e.customerService.addCustomer(new c.Customer(1,"","","")),e.customerService.addCustomer(new c.Customer(2,"","","")),e.stockService.addStock("123-45","A45-52",10),e.stockService.addStock("123-46","A45-52",10),function(){o(this,void 0,void 0,(function*(){yield e.bookService.initializeDataMock()}))}(),b("addBookMenuItem","addBookSection"),b("showBooksMenuItem","listBooksSection"),b("addCustomerMenuItem","addCustomerSection"),b("addStockMenuItem","addStockSection"),b("saleBookMenuItem","saleBookSection"),b("rentBookMenuItem","rentBookSection"),b("cancelSaleMenuItem","cancelSaleSection"),b("cancelRentMenuItem","cancelRentSection"),b("refundBookMenuItem","refundBookSection");const g=document.getElementById("add-book-form");null!=g&&(g.onsubmit=t=>o(void 0,void 0,void 0,(function*(){t.preventDefault();const n=new FormData(g),o=n.get("bookTitle"),a=n.get("bookAuthor"),s=n.get("bookIsbn"),c=n.get("bookPublishYear"),l=n.get("bookPages"),u=n.get("bookPrice"),d=new Date,h=new Date("Dec 31, 9999 23:59:59");o.match("");const m=new r.BookSpecification(s,u,d,h),p=new i.Book(s,o,a,c,l,m);return(yield e.bookService.addBookMock(p))?(alert(p.isbn+" numaralı kitap Ekleme İşlemi Başarı İle Tamamlanmıştır."),g.reset()):alert(p.isbn+" numaralı kitap Ekleme İşlemi Sırasında Bir Hata oluştu."),!1})));const v=document.getElementById("add-stock-form");v&&(v.onsubmit=t=>o(void 0,void 0,void 0,(function*(){t.preventDefault();const n=new FormData(v),o=n.get("bookIsbnForAddStock"),a=n.get("stockQuantity"),i=n.get("shelfNumber"),r=new d.Stock(o,a,i);return e.bookService.bookList.some((t=>t.isbn==o))?(yield e.stockService.addStockMock(r))&&alert(o+" isbn numaralı kitaptan, "+a+" kadar sisteme stok eklenmiştir."):alert("Stok eklenmeye çalışılan kitap, kayıtlı değildir. Lütfen önce kitap ekleyiniz"),v.reset(),!1})));const _=document.getElementById("add-customer-form");_&&(_.onsubmit=t=>o(void 0,void 0,void 0,(function*(){t.preventDefault();const n=new FormData(_),o=n.get("customerName"),a=n.get("customerSurname"),i=n.get("customerPhoneNumber"),r=new c.Customer(e.customerService.getNewCustomerId(),o,a,i);return yield e.customerService.addCustomerMock(r),alert("Müşteri Ekleme İşlemi Başarı İle Tamamlanmıştır. "),_.reset(),!1})));const C=document.getElementById("sale-book-form");C&&(C.onsubmit=()=>{const t=new FormData(C),n=t.get("isbnForSale"),o=e.bookService.getBook(n),a=parseInt(t.get("customerIdForSale")),i=e.customerService.isValidCustomer(a),r=parseInt(t.get("quantityForSale")),s=e.stockService.getStock(n);try{return o?s?s.quantity>=r?i?e.saleService.addBookToCart(o,r,a):alert(a+" numaralı müşteri kayıtlı değildir."):alert(r+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${n} numaralı kitabın stoğu mevcut değildir.`):alert(n+" numaralı kitap yoktur."),C.reset(),!1}catch(t){alert(t)}}),document.getElementById("btnSale").addEventListener("click",(()=>{0===e.saleService.saleCart.bookAndQuantityMap.size?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):e.saleService.cartToSale()})),document.getElementById("showBooksMenuItem").addEventListener("click",(()=>{e.bookService.listBooks()}));const w=document.getElementById("cancel-sale-form");w&&(w.onsubmit=t=>o(void 0,void 0,void 0,(function*(){t.preventDefault();let n=new Map;n.set(e.bookService.getBook("123-45"),3);let o=new u.Sale(n,new Date,1,"S021122163045",123);e.saleService.saleList.push(o);const a=new FormData(w).get("saleNumberforCancel");let i=e.saleService.getSale(a);if(i){let t=new s.Cancel(i,i.total,new Date);(yield e.cancelService.cancelSaleMock(t))?alert(i.operationNumber+" numaralı satış iptal edilmiştir."):alert(i.operationNumber+" numaralı satış iptal edilirken hata meydana geldi.")}else alert(a+" numaralı satış bulunamamıştır. Tekrar deneyiniz.")})));const M=document.getElementById("cancel-rent-form");M&&(M.onsubmit=t=>o(void 0,void 0,void 0,(function*(){t.preventDefault();let n=new Map;n.set(e.bookService.getBook("123-45"),3);let o=new Date;o.setDate(o.getDate()+14);let a=new l.Rent(n,new Date,1,"R021122163045",123,o,200);e.rentService.rentList.push(a);const i=new FormData(M).get("rentNumberforCancel");e.rentService.getRent(i)})));const L=document.getElementById("rent-book-form");L&&(L.onsubmit=()=>{const t=new FormData(L),n=t.get("isbnForRent"),o=e.bookService.getBook(n),a=parseInt(t.get("customerIdForRent")),i=e.customerService.isValidCustomer(a),r=parseInt(t.get("quantityForRent")),s=e.stockService.getStock(n);try{return o?s?s.quantity>=r?i?e.rentService.addBookToCart(o,r,a):alert(a+" numaralı müşteri kayıtlı değildir."):alert(r+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${n} numaralı kitabın stoğu mevcut değildir.`):alert(n+" numaralı kitap yoktur."),L.reset(),!1}catch(t){alert(t)}}),document.getElementById("btnRent").addEventListener("click",(()=>{0===e.rentService.rentCart.bookAndQuantityMap.size?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):e.rentService.cartToRent()}))},946:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.BookService=void 0;const a=n(607);e.BookService=class{constructor(t,e){this.bookApi="http://localhost:3002/api/books/",this._bookList=t,this._bookSpecList=e}get bookList(){return this._bookList}set bookList(t){this._bookList=t}get bookSpecList(){return this._bookSpecList}set bookSpecList(t){this._bookSpecList=t}getBook(t){return this.bookList.find((e=>e.isbn===t))}addBook(t){try{this.bookList.push(t),this._bookSpecList.push(t.bookSpec)}catch(t){console.log("Kitap eklenirken bir hata meydana geldi.")}}isValidBook(t){const e=this.getBook(t);return this.bookList.includes(e)}initializeDataMock(){return o(this,void 0,void 0,(function*(){try{const t=yield fetch("http://localhost:3002/api/books",{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Hata oluştu, hata kodu: ${t.status} `);const e=yield t.json(),n=JSON.parse(JSON.stringify(e,null,4));this.bookList=n}catch(t){console.error(t)}}))}listBooks(){const t=document.getElementById("listBooks");if(t){let e,n;for(;t.lastChild&&t.children.length>1;)t.removeChild(t.lastChild);this.bookList.forEach((o=>{e=document.createElement("div"),e.className="row-list-book",n=document.createElement("div"),n.className="column-list-book",n.textContent=o.isbn.toString(),e.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=o.name.toString(),e.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=o.author.toString(),e.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=a.stockService.getStockQuantity(o.isbn).toString(),e.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=o.bookSpec.price.toString()+" ₺",e.appendChild(n),t.appendChild(e)}))}}addBookMock(t){return o(this,void 0,void 0,(function*(){try{const e=yield fetch(this.bookApi,{method:"POST",body:JSON.stringify({isbn:t.isbn,name:t.name,author:t.author,pages:t.pages,publishYear:t.publishYear}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(e.ok){const t=yield e.json();return console.log("Mock servisinden dönen cevap =>"+JSON.stringify(t)),!0}throw new Error(`Hata oluştu, hata kodu: ${e.status} `)}catch(t){console.log("Hata Oluştu.")}}))}}},943:function(t,e){var n=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CancelService=void 0,e.CancelService=class{constructor(t){this.cancelSaleApi="http://localhost:3002/api/cancelSale",this.cancelRentApi="http://localhost:3002/api/cancelRent",this._cancelledList=t}get cancelledList(){return this._cancelledList}set cancelledList(t){this._cancelledList=t}calculateDiffHours(t,e){let n=t.getTime()-e.getTime();return Math.floor(n/1e3/60/60)}cancelSale(t){let e=this.calculateCancelSaleRefund(t);t.refund=e,this.cancelledList.push(t)}calculateCancelSaleRefund(t){let e;return e=this.calculateDiffHours(t.canceledDateTime,t.cancelType.operationDateTime)>24?.75*t.cancelType.total:t.cancelType.total,e}cancelSaleMock(t){return n(this,void 0,void 0,(function*(){let e=this.calculateCancelSaleRefund(t);t.refund=e;try{const e=yield fetch(this.cancelSaleApi,{method:"POST",body:JSON.stringify({sale:t.cancelType,refund:t.refund,canceledDateTime:t.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(e.ok){const t=yield e.json();return console.log(t),!0}throw new Error(`Hata oluştu, hata kodu: ${e.status} `)}catch(t){console.log("Hata Oluştu.")}}))}cancelRent(t){let e=this.calculateCancelRentRefund(t);t.refund=e,this.cancelledList.push(t)}calculateCancelRentRefund(t){let e;return e=this.calculateDiffHours(t.canceledDateTime,t.cancelType.operationDateTime)>24?.75*t.cancelType.total:t.cancelType.total,e}cancelRentMock(t){return n(this,void 0,void 0,(function*(){let e=this.calculateCancelRentRefund(t);t.refund=e;try{const e=yield fetch(this.cancelSaleApi,{method:"POST",body:JSON.stringify({sale:t.cancelType,refund:t.refund,canceledDateTime:t.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(e.ok){const t=yield e.json();return console.log(t),!0}throw new Error(`Hata oluştu, hata kodu: ${e.status} `)}catch(t){console.log("Hata Oluştu.")}}))}}},709:function(t,e){var n=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CustomerService=void 0,e.CustomerService=class{constructor(t){this.customerApi="http://localhost:3002/api/customers",this._customerList=t}get customerList(){return this._customerList}set customerList(t){this._customerList=t}addCustomer(t){this.customerList.push(t)}getNewCustomerId(){let t=0;return this.customerList.length>0&&(t=this.customerList.at(this.customerList.length-1).id),t+=1,t}getCustomerInfo(t){return this.customerList.find((e=>e.id===t))||void 0}isValidCustomer(t){return!!this.customerList.some((e=>e.id===t))}addCustomerMock(t){return n(this,void 0,void 0,(function*(){try{const e=yield fetch(this.customerApi,{method:"POST",body:JSON.stringify({id:t.id,name:t.name,surName:t.surName,phoneNumber:t.phoneNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const n=yield e.json();console.log(n)}catch(t){console.log("Hata Oluştu.")}}))}}},148:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.RentService=void 0;const a=n(607),i=n(961),r=n(758);e.RentService=class{constructor(t,e){this.rentApi="http://localhost:3002/api/rents",this._rentList=t,this.refundPercent=.75,this._rentCart=e}get rentList(){return this._rentList}set rentList(t){this._rentList=t}get rentCart(){return this._rentCart}set rentCart(t){this._rentCart=t}addRent(t){this.rentList.push(t)}calculateTotal(t){t.bookAndQuantityMap;let e=0;for(let n of t.bookAndQuantityMap)e+=n[0].bookSpec.price*n[1];return e}generateRentNumber(t){let e=new Date;return"R"+e.getDay().toString+e.getMonth().toString+e.getFullYear().toString+e.getHours().toString+e.getMinutes().toString+e.getSeconds().toString+t.toString}calculateRefund(t){t.refund=t.total*this.refundPercent}getRent(t){return this.rentList.find((e=>e.operationNumber===t))}addBookToCart(t,e,n){if(0===this.rentCart.bookAndQuantityMap.size)this.rentCart.customerId=n;else if(this.rentCart.bookAndQuantityMap.size>0&&this.rentCart.customerId!==n)return alert("Farklı müşteriye kitap kiralanmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;this.rentCart.bookAndQuantityMap.set(t,e),this.updateRentCart()}updateRentCart(){const t=document.getElementById("rentCart"),e=document.getElementById("totalRentAmountTl");if(t){let n,o,a=0;for(;t.lastChild&&t.children.length>1;)t.removeChild(t.lastChild);e.textContent="";for(let t=0;t<this.rentCart.bookAndQuantityMap.size;t++){n=document.createElement("div"),n.className="rent-cart-row";for(let t of this.rentCart.bookAndQuantityMap.entries())o=document.createElement("div"),o.className="rent-cart-column",o.textContent=this.rentCart.customerId.toString(),n.appendChild(o),o=document.createElement("div"),o.className="rent-cart-column",o.textContent=t[0].name,n.appendChild(o),o=document.createElement("div"),o.className="rent-cart-column",o.textContent=t[1].toString(),n.appendChild(o),o=document.createElement("div"),o.className="rent-cart-column",o.textContent=(t[0].bookSpec.price*t[1]).toString(),n.appendChild(o)}if(n&&e){for(let t of this.rentCart.bookAndQuantityMap)a+=t[0].bookSpec.price*t[1];t.appendChild(n),e.textContent=a.toString()+" TL"}}}cartToRent(){let t=this.rentCart,e=new i.Rent;e.bookAndQuantityMap=t.bookAndQuantityMap,e.customerId=t.customerId,e.operationNumber=this.generateRentNumber(t.customerId),e.operationDateTime=new Date,e.total=this.calculateTotal(e);for(let t of e.bookAndQuantityMap)a.stockService.increaseStock(t[0].isbn,-t[1]);this.rentCart=new r.RentCart,this.updateRentCart(),this.addRentMock(e)}addRentMock(t){return o(this,void 0,void 0,(function*(){try{console.log(t.bookAndQuantityMap);const e=yield fetch(this.rentApi,{method:"POST",body:JSON.stringify({bookAndQuantity:t.bookAndQuantityMap,customerId:t.customerId,operationDateTime:t.operationDateTime,operationNumber:t.operationNumber,total:t.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(e.ok){const t=yield e.json();return console.log(t),alert(t.message+" "+t.saleNumber),!0}throw new Error(`Hata oluştu, hata kodu: ${e.status} `)}catch(t){console.log("Hata Oluştu.")}}))}}},478:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SaleService=void 0;const a=n(607),i=n(354),r=n(51);e.SaleService=class{constructor(t,e){this.saleApi="http://localhost:3002/api/sales",this._saleList=t,this._saleCart=e}get saleList(){return this._saleList}set saleList(t){this._saleList=t}get saleCart(){return this._saleCart}set saleCart(t){this._saleCart=t}addSale(t){this.saleList.push(t)}calculateTotal(t){let e=0;for(let n of t.bookAndQuantityMap.entries())e+=n[0].bookSpec.price*n[1];return e}generateSaleNumber(t){let e=new Date;return"S"+e.getDay().toString()+e.getMonth().toString()+e.getFullYear().toString()+e.getHours().toString()+e.getMinutes().toString()+e.getSeconds().toString()+t.toString()}getSale(t){return this.saleList.find((e=>e.operationNumber===t))}removeSale(t){let e=this.saleList.indexOf(t);this.saleList.splice(e,1)}addBookToCart(t,e,n){if(0===this.saleCart.bookAndQuantityMap.size)this.saleCart.customerId=n;else if(this.saleCart.bookAndQuantityMap.size>0&&this.saleCart.customerId!==n)return alert("Farklı müşteriye kitap satılmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;this.saleCart.bookAndQuantityMap.set(t,e),this.updateSaleCart()}updateSaleCart(){const t=document.getElementById("saleCart"),e=document.getElementById("totalSaleAmountTl");if(t){let n,o,a=0;for(;t.lastChild&&t.children.length>1;)t.removeChild(t.lastChild);e.textContent="";for(let t=0;t<this.saleCart.bookAndQuantityMap.size;t++){n=document.createElement("div"),n.className="sale-cart-row";for(let t of this.saleCart.bookAndQuantityMap.entries())o=document.createElement("div"),o.className="sale-cart-column",o.textContent=this.saleCart.customerId.toString(),n.appendChild(o),o=document.createElement("div"),o.className="sale-cart-column",o.textContent=t[0].name,n.appendChild(o),o=document.createElement("div"),o.className="sale-cart-column",o.textContent=t[1].toString(),n.appendChild(o),o=document.createElement("div"),o.className="sale-cart-column",o.textContent=(t[0].bookSpec.price*t[1]).toString(),n.appendChild(o)}if(n&&e){for(let t of this.saleCart.bookAndQuantityMap)a+=t[0].bookSpec.price*t[1];t.appendChild(n),e.textContent=a.toString()+" TL"}}}cartToSale(){let t=this.saleCart,e=new i.Sale;e.bookAndQuantityMap=t.bookAndQuantityMap,e.customerId=t.customerId,e.operationNumber=this.generateSaleNumber(t.customerId),e.operationDateTime=new Date,e.total=this.calculateTotal(e);for(let t of e.bookAndQuantityMap)a.stockService.increaseStock(t[0].isbn,-t[1]);this.addSaleMock(e),this.saleCart=new r.SaleCart,this.updateSaleCart()}addSaleMock(t){return o(this,void 0,void 0,(function*(){try{console.log(t.bookAndQuantityMap);const e=yield fetch(this.saleApi,{method:"POST",body:JSON.stringify({bookAndQuantity:t.bookAndQuantityMap,customerId:t.customerId,operationDateTime:t.operationDateTime,operationNumber:t.operationNumber,total:t.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const n=yield e.json();console.log(n),alert(n.message+" "+n.saleNumber)}catch(t){console.log("Hata Oluştu.")}}))}}},214:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.StockService=void 0;const a=n(72);e.StockService=class{constructor(t){this.stockApi="http://localhost:3002/api/stocks",this._stockList=t}get stockList(){return this._stockList}set stockList(t){this._stockList=t}addStock(t,e,n){try{let o=new a.Stock(t,n,e);return this.stockList.push(o),!0}catch(t){return console.error(t),!1}}increaseStock(t,e){let n=this.getStock(t);return!!n&&(n.quantity=n.quantity+e,!0)}getStock(t){let e=this.stockList.find((e=>e.isbn===t));if(e)return e}getStockQuantity(t){let e=this.getStock(t);return e?e.quantity:0}addStockMock(t){return o(this,void 0,void 0,(function*(){try{const e=yield fetch(this.stockApi,{method:"POST",body:JSON.stringify({isbn:t.isbn,quantity:t.quantity,shelfNumber:t.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(e.ok){const t=yield e.json();return console.log(t),!0}throw new Error(`Hata oluştu, hata kodu: ${e.status} `)}catch(t){console.log("Hata Oluştu."+t)}}))}increaseStockMock(t){return o(this,void 0,void 0,(function*(){try{const e=yield fetch(this.stockApi+"/"+t.isbn,{method:"PUT",body:JSON.stringify({isbn:t.isbn,quantity:t.quantity,shelfNumber:t.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const n=yield e.json();console.log(n),console.log(e.status)}catch(t){console.log("Hata Oluştu.")}}))}}}},e={};!function n(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUUMsSUFBSSxlLENBRXBCLEcsS0NqSkE2SyxFQUEyQixDQUFDLEdBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLENBQUMsR0FPWCxPQUhBRSxFQUFvQkwsR0FBVU0sS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0osR0FHcEVLLEVBQU9ELE9BQ2YsQ0NuQjBCSixDQUFvQixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZGIvZGF0YWJhc2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL2Jvb2stc3BlY2lmaWNhdGlvbi50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vYm9vay50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vY2FuY2VsLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9jdXN0b21lci50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vcmVudC1jYXJ0LnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9yZW50LnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9zYWxlLWNhcnQudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL3NhbGUudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL3N0b2NrLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2UvYm9vay1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2UvY2FuY2VsLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvc2VydmljZS9jdXN0b21lci1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2UvcmVudC1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2Uvc2FsZS1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2Uvc3RvY2stc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgQm9va1NwZWNpZmljYXRpb24gfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2stc3BlY2lmaWNhdGlvblwiO1xuaW1wb3J0IHsgQ2FuY2VsIH0gZnJvbSBcIi4uL2RvbWFpbi9jYW5jZWxcIjtcbmltcG9ydCB7IEN1c3RvbWVyIH0gZnJvbSBcIi4uL2RvbWFpbi9jdXN0b21lclwiO1xuaW1wb3J0IHsgUmVudCB9IGZyb20gXCIuLi9kb21haW4vcmVudFwiO1xuaW1wb3J0IHsgUmVudENhcnQgfSBmcm9tIFwiLi4vZG9tYWluL3JlbnQtY2FydFwiO1xuaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuLi9kb21haW4vc2FsZVwiO1xuaW1wb3J0IHsgU2FsZUNhcnQgfSBmcm9tIFwiLi4vZG9tYWluL3NhbGUtY2FydFwiO1xuaW1wb3J0IHsgU3RvY2sgfSBmcm9tIFwiLi4vZG9tYWluL3N0b2NrXCI7XG5cbmV4cG9ydCBjbGFzcyBEYXRhQmFzZSB7XG5cbiAgICAgcHJpdmF0ZSBfYm9va3M6IEFycmF5PEJvb2s+Oy8vXG4gICAgIHByaXZhdGUgX3N0b2NrczogQXJyYXk8U3RvY2s+O1xuICAgICBwcml2YXRlIF9jdXN0b21lcnM6IEFycmF5PEN1c3RvbWVyPjsvL1xuICAgICBwcml2YXRlIF9zYWxlczogQXJyYXk8U2FsZT47Ly9cbiAgICAgcHJpdmF0ZSBfcmVudHM6IEFycmF5PFJlbnQ+O1xuICAgICBwcml2YXRlIF9ib29rU3BlY2lmaWNhdGlvbnM6IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPjtcbiAgICAgcHJpdmF0ZSBfY2FuY2VsczogQXJyYXk8Q2FuY2VsPjsvL1xuICAgICBwcml2YXRlIF9zYWxlQ2FydDogU2FsZUNhcnQ7XG4gICAgIHByaXZhdGUgX3JlbnRDYXJ0OlJlbnRDYXJ0O1xuXG4gICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgIHRoaXMuX2Jvb2tzID0gbmV3IEFycmF5PEJvb2s+KCk7XG4gICAgICAgICAgdGhpcy5fc3RvY2tzID0gbmV3IEFycmF5PFN0b2NrPigpO1xuICAgICAgICAgIHRoaXMuX2N1c3RvbWVycyA9IG5ldyBBcnJheTxDdXN0b21lcj4oKTtcbiAgICAgICAgICB0aGlzLl9zYWxlcyA9IG5ldyBBcnJheTxTYWxlPigpO1xuICAgICAgICAgIHRoaXMuX3JlbnRzID0gbmV3IEFycmF5PFJlbnQ+KCk7XG4gICAgICAgICAgdGhpcy5fYm9va1NwZWNpZmljYXRpb25zID0gbmV3IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPigpO1xuICAgICAgICAgIHRoaXMuX2NhbmNlbHMgPSBuZXcgQXJyYXk8Q2FuY2VsPigpO1xuICAgICAgICAgIHRoaXMuX3NhbGVDYXJ0ID0gbmV3IFNhbGVDYXJ0O1xuICAgICAgICAgIHRoaXMuX3JlbnRDYXJ0ID0gbmV3IFJlbnRDYXJ0O1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBib29rc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxCb29rPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Qm9va3NMaXN0KCk6IEFycmF5PEJvb2s+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fYm9va3M7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHN0b2Nrc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxTdG9jaz59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFN0b2Nrc0xpc3QoKTogQXJyYXk8U3RvY2s+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fc3RvY2tzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBjdXN0b21lcnNcbiAgICAgICogQHJldHVybiB7QXJyYXk8Q3VzdG9tZXI+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRDdXN0b21lcnNMaXN0KCk6IEFycmF5PEN1c3RvbWVyPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbWVycztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgc2FsZXNcbiAgICAgICogQHJldHVybiB7QXJyYXk8U2FsZT59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFNhbGVzTGlzdCgpOiBBcnJheTxTYWxlPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3NhbGVzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciByZW50c1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxSZW50Pn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0UmVudHMoKTogQXJyYXk8UmVudD4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9yZW50cztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgYm9va1NwZWNpZmljYXRpb25zXG4gICAgICAqIEByZXR1cm4ge0FycmF5PEJvb2tTcGVjaWZpY2F0aW9uPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Qm9va1NwZWNpZmljYXRpb25zKCk6IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9ucztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgY2FuY2VsU2FsZXNcbiAgICAgICogQHJldHVybiB7QXJyYXk8Q2FuY2VsU2FsZT59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldENhbmNhbGVkU2FsZXMoKTogQXJyYXk8Q2FuY2VsPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbHM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHNhbGVDYXJ0XG4gICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGVDYXJ0Pn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0U2FsZUNhcnQoKTogU2FsZUNhcnQge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9zYWxlQ2FydDtcbiAgICAgfVxuXG4gICAgICAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVudENhcnRcbiAgICAgKiBAcmV0dXJuIHtSZW50Q2FydH1cbiAgICAgKi9cblx0cHVibGljIGdldCBnZXRSZW50Q2FydCgpOiBSZW50Q2FydCB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlbnRDYXJ0O1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc2FsZUNhcnRcbiAgICAgKiBAcGFyYW0ge1NhbGVDYXJ0fSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHNldFNhbGVDYXJ0KHZhbHVlOiBTYWxlQ2FydCkge1xuXHRcdHRoaXMuX3NhbGVDYXJ0ID0gdmFsdWU7XG5cdH1cblxuXG5cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZW50Q2FydFxuICAgICAqIEBwYXJhbSB7UmVudENhcnR9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgc2V0UmVudENhcnQodmFsdWU6IFJlbnRDYXJ0KSB7XG5cdFx0dGhpcy5fcmVudENhcnQgPSB2YWx1ZTtcblx0fVxuICAgICBcblxuXG59XG4iLCJleHBvcnQgY2xhc3MgQm9va1NwZWNpZmljYXRpb24ge1xuICAgIHByaXZhdGUgX2lzYm46IHN0cmluZztcbiAgICBwcml2YXRlIF9wcmljZTogbnVtYmVyO1xuICAgIHByaXZhdGUgX3N0YXJ0RGF0ZTogRGF0ZTtcbiAgICBwcml2YXRlIF9lbmREYXRlOiBEYXRlO1xuXG4gICAgY29uc3RydWN0b3IoaXNibjogc3RyaW5nLCBwcmljZTogbnVtYmVyLCBzdGFydERhdGU6IERhdGUsIGVuZERhdGU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5faXNibiA9IGlzYm47XG4gICAgICAgIHRoaXMuX3ByaWNlID0gcHJpY2U7XG4gICAgICAgIHRoaXMuX3N0YXJ0RGF0ZSA9IHN0YXJ0RGF0ZTtcbiAgICAgICAgdGhpcy5fZW5kRGF0ZSA9IGVuZERhdGU7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgaXNiblxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBpc2JuKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2lzYm47XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBwcmljZVxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCBwcmljZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9wcmljZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHN0YXJ0RGF0ZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgc3RhcnREYXRlKCk6IERhdGUge1xuXHRcdHJldHVybiB0aGlzLl9zdGFydERhdGU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBlbmREYXRlXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cblx0cHVibGljIGdldCBlbmREYXRlKCk6IERhdGUge1xuXHRcdHJldHVybiB0aGlzLl9lbmREYXRlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgaXNiblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGlzYm4odmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX2lzYm4gPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHByaWNlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcHJpY2UodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3ByaWNlID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzdGFydERhdGVcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgc3RhcnREYXRlKHZhbHVlOiBEYXRlKSB7XG5cdFx0dGhpcy5fc3RhcnREYXRlID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBlbmREYXRlXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGVuZERhdGUodmFsdWU6IERhdGUpIHtcblx0XHR0aGlzLl9lbmREYXRlID0gdmFsdWU7XG5cdH1cbiAgICBcblxuICAgIFxufSIsImltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4vYm9vay1zcGVjaWZpY2F0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBCb29rIHtcbiAgcHJpdmF0ZSBfaXNibjogc3RyaW5nO1xuICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XG4gIHByaXZhdGUgX2F1dGhvcjogc3RyaW5nO1xuICBwcml2YXRlIF9wdWJsaXNoWWVhcjogc3RyaW5nO1xuICBwcml2YXRlIF9wYWdlczogbnVtYmVyO1xuICBwcml2YXRlIF9ib29rU3BlYzogQm9va1NwZWNpZmljYXRpb247XG5cbiAgY29uc3RydWN0b3IoaXNibjogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGF1dGhvcjogc3RyaW5nLCBwdWJsaXNoWWVhcjogc3RyaW5nLCBwYWdlczogbnVtYmVyLCBib29rU3BlYzogQm9va1NwZWNpZmljYXRpb24pIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9hdXRob3IgPSBhdXRob3I7XG4gICAgdGhpcy5faXNibiA9IGlzYm47XG4gICAgdGhpcy5fcHVibGlzaFllYXIgPSBwdWJsaXNoWWVhcjtcbiAgICB0aGlzLl9wYWdlcyA9IHBhZ2VzO1xuICAgIHRoaXMuX2Jvb2tTcGVjID0gYm9va1NwZWM7XG4gIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGlzYm5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgaXNibigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9pc2JuO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgbmFtZVxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBuYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX25hbWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBhdXRob3JcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgYXV0aG9yKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2F1dGhvcjtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHB1Ymxpc2hZZWFyXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IHB1Ymxpc2hZZWFyKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX3B1Ymxpc2hZZWFyO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcGFnZXNcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcGFnZXMoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fcGFnZXM7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBib29rU3BlY1xuICAgICAqIEByZXR1cm4ge0Jvb2tTcGVjaWZpY2F0aW9ufVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGJvb2tTcGVjKCk6IEJvb2tTcGVjaWZpY2F0aW9uIHtcblx0XHRyZXR1cm4gdGhpcy5fYm9va1NwZWM7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBpc2JuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgaXNibih2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5faXNibiA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IG5hbWUodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX25hbWUgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGF1dGhvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGF1dGhvcih2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fYXV0aG9yID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBwdWJsaXNoWWVhclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHB1Ymxpc2hZZWFyKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9wdWJsaXNoWWVhciA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcGFnZXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBwYWdlcyh2YWx1ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5fcGFnZXMgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGJvb2tTcGVjXG4gICAgICogQHBhcmFtIHtCb29rU3BlY2lmaWNhdGlvbn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBib29rU3BlYyh2YWx1ZTogQm9va1NwZWNpZmljYXRpb24pIHtcblx0XHR0aGlzLl9ib29rU3BlYyA9IHZhbHVlO1xuXHR9XG4gIFxuXG59XG4iLCJpbXBvcnQgeyBTYWxlIH0gZnJvbSBcIi4vc2FsZVwiO1xuXG5leHBvcnQgY2xhc3MgQ2FuY2VsIHtcbiAgICBwcml2YXRlIF9jYW5jZWxUeXBlOiBTYWxlO1xuICAgIHByaXZhdGUgX3JlZnVuZDogbnVtYmVyO1xuICAgIHByaXZhdGUgX2NhbmNlbGVkRGF0ZVRpbWU6IERhdGU7XG5cbiAgICBjb25zdHJ1Y3RvcihjYW5jZWxUeXBlOiBTYWxlLCByZWZ1bmQ6IG51bWJlciwgY2FuY2VsZWREYXRlVGltZTogRGF0ZSkge1xuICAgICAgICB0aGlzLl9jYW5jZWxUeXBlID0gY2FuY2VsVHlwZTtcbiAgICAgICAgdGhpcy5fcmVmdW5kID0gcmVmdW5kO1xuICAgICAgICB0aGlzLl9jYW5jZWxlZERhdGVUaW1lID0gY2FuY2VsZWREYXRlVGltZTtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgY2FuY2VsVHlwZVxuICAgICAqIEByZXR1cm4ge1NhbGV9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgY2FuY2VsVHlwZSgpOiBTYWxlIHtcblx0XHRyZXR1cm4gdGhpcy5fY2FuY2VsVHlwZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHJlZnVuZFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCByZWZ1bmQoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fcmVmdW5kO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgY2FuY2VsZWREYXRlVGltZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgY2FuY2VsZWREYXRlVGltZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gdGhpcy5fY2FuY2VsZWREYXRlVGltZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGNhbmNlbFR5cGVcbiAgICAgKiBAcGFyYW0ge1NhbGV9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgY2FuY2VsVHlwZSh2YWx1ZTogU2FsZSkge1xuXHRcdHRoaXMuX2NhbmNlbFR5cGUgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlZnVuZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHJlZnVuZCh2YWx1ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5fcmVmdW5kID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBjYW5jZWxlZERhdGVUaW1lXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGNhbmNlbGVkRGF0ZVRpbWUodmFsdWU6IERhdGUpIHtcblx0XHR0aGlzLl9jYW5jZWxlZERhdGVUaW1lID0gdmFsdWU7XG5cdH1cbiAgICBcbiAgICBcblxufSIsImV4cG9ydCBjbGFzcyBDdXN0b21lciB7XG4gIHByaXZhdGUgX2lkOiBudW1iZXI7XG4gIHByaXZhdGUgX25hbWU6IHN0cmluZztcbiAgcHJpdmF0ZSBfc3VyTmFtZTogc3RyaW5nO1xuICBwcml2YXRlIF9waG9uZU51bWJlcjogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGlkOiBudW1iZXIsIG5hbWU6IHN0cmluZywgc3VyTmFtZTogc3RyaW5nLCBwaG9uZU51bWJlcjogc3RyaW5nKSB7XG4gICAgdGhpcy5faWQgPSBpZDtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9zdXJOYW1lID0gc3VyTmFtZTtcbiAgICB0aGlzLl9waG9uZU51bWJlciA9IHBob25lTnVtYmVyO1xuICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBpZFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCBpZCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9pZDtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG5hbWVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgbmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9uYW1lO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc3VyTmFtZVxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBzdXJOYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX3N1ck5hbWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBwaG9uZU51bWJlclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBwaG9uZU51bWJlcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9waG9uZU51bWJlcjtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgaWQodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX2lkID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgbmFtZSh2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fbmFtZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc3VyTmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHN1ck5hbWUodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX3N1ck5hbWUgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHBob25lTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcGhvbmVOdW1iZXIodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX3Bob25lTnVtYmVyID0gdmFsdWU7XG5cdH1cblxuXG59XG4iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuXG5leHBvcnQgY2xhc3MgUmVudENhcnQge1xuICAgIGN1c3RvbWVySWQhOiBudW1iZXI7XG4gICAgYm9va0FuZFF1YW50aXR5TWFwOiBNYXA8Qm9vaywgbnVtYmVyPjtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJvb2tBbmRRdWFudGl0eU1hcCA9IG5ldyBNYXA8Qm9vaywgbnVtYmVyPigpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuL3NhbGVcIjtcblxuZXhwb3J0IGNsYXNzIFJlbnQgZXh0ZW5kcyBTYWxlIHtcbiAgICBwcml2YXRlIF9yZWZ1bmREYXRlPzpEYXRlO1xuICAgIHByaXZhdGUgX3JlZnVuZD86bnVtYmVyO1xuXG5cblx0Y29uc3RydWN0b3IoYm9va0FuZFF1YW50aXR5TWFwPzogTWFwPEJvb2ssIG51bWJlcj4sIG9wZXJhdGlvbkRhdGVUaW1lPzogRGF0ZSwgY3VzdG9tZXJJZD86IG51bWJlciwgb3BlcmF0aW9uTnVtYmVyPzogc3RyaW5nLCB0b3RhbD86IG51bWJlcixyZWZ1bmREYXRlPzogRGF0ZSwgcmVmdW5kPzogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKGJvb2tBbmRRdWFudGl0eU1hcCxvcGVyYXRpb25EYXRlVGltZSxjdXN0b21lcklkLG9wZXJhdGlvbk51bWJlcix0b3RhbClcbiAgICAgICAgXG5cdFx0dGhpcy5fcmVmdW5kRGF0ZSA9IHJlZnVuZERhdGU7XG5cdFx0dGhpcy5fcmVmdW5kID0gcmVmdW5kO1xuXHR9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZWZ1bmREYXRlXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cblx0cHVibGljIGdldCByZWZ1bmREYXRlKCk6IERhdGUge1xuXHRcdHJldHVybiB0aGlzLl9yZWZ1bmREYXRlITtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHJlZnVuZFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCByZWZ1bmQoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fcmVmdW5kITtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlZnVuZERhdGVcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcmVmdW5kRGF0ZSh2YWx1ZTogRGF0ZSkge1xuXHRcdHRoaXMuX3JlZnVuZERhdGUgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlZnVuZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHJlZnVuZCh2YWx1ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5fcmVmdW5kID0gdmFsdWU7XG5cdH1cblxuXG4gICAgXG5cbn0iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuXG5leHBvcnQgY2xhc3MgU2FsZUNhcnQge1xuICAgIGN1c3RvbWVySWQhOiBudW1iZXI7XG4gICAgYm9va0FuZFF1YW50aXR5TWFwOiBNYXA8Qm9vaywgbnVtYmVyPjtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJvb2tBbmRRdWFudGl0eU1hcCA9IG5ldyBNYXA8Qm9vaywgbnVtYmVyPigpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuXG5leHBvcnQgY2xhc3MgU2FsZSB7XG5cbiAgICBwcml2YXRlIF9ib29rQW5kUXVhbnRpdHlNYXA/ID0gbmV3IE1hcDxCb29rLCBudW1iZXI+KCk7XG4gICAgcHJpdmF0ZSBfY3VzdG9tZXJJZD86IG51bWJlcjtcbiAgICBwcml2YXRlIF9vcGVyYXRpb25EYXRlVGltZT86IERhdGU7XG4gICAgcHJpdmF0ZSBfb3BlcmF0aW9uTnVtYmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgX3RvdGFsPzogbnVtYmVyO1xuXG5cbiAgICBjb25zdHJ1Y3Rvcihib29rQW5kUXVhbnRpdHlNYXA/OiBNYXA8Qm9vaywgbnVtYmVyPiwgb3BlcmF0aW9uRGF0ZVRpbWU/OiBEYXRlLCBjdXN0b21lcklkPzogbnVtYmVyLCBvcGVyYXRpb25OdW1iZXI/OiBzdHJpbmcsIHRvdGFsPzogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX2Jvb2tBbmRRdWFudGl0eU1hcCA9IGJvb2tBbmRRdWFudGl0eU1hcDtcbiAgICAgICAgdGhpcy5fb3BlcmF0aW9uRGF0ZVRpbWUgPSBvcGVyYXRpb25EYXRlVGltZTtcbiAgICAgICAgdGhpcy5fY3VzdG9tZXJJZCA9IGN1c3RvbWVySWQ7XG4gICAgICAgIHRoaXMuX29wZXJhdGlvbk51bWJlciA9IG9wZXJhdGlvbk51bWJlcjtcbiAgICAgICAgdGhpcy5fdG90YWwgPSB0b3RhbDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBib29rQW5kUXVhbnRpdHlNYXBcbiAgICAgKiBAcmV0dXJuIHtNYXA8Qm9vaywgbnVtYmVyPigpfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgYm9va0FuZFF1YW50aXR5TWFwKCk6IE1hcDxCb29rLCBudW1iZXI+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tBbmRRdWFudGl0eU1hcCE7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgb3BlcmF0aW9uRGF0ZVRpbWVcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgb3BlcmF0aW9uRGF0ZVRpbWUoKTogRGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcGVyYXRpb25EYXRlVGltZSE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGN1c3RvbWVySWRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCBjdXN0b21lcklkKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXN0b21lcklkITtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgb3BlcmF0aW9uTnVtYmVyXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgb3BlcmF0aW9uTnVtYmVyKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcGVyYXRpb25OdW1iZXIhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciB0b3RhbFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHRvdGFsKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl90b3RhbCE7XG4gICAgfVxuXG5cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rQW5kUXVhbnRpdHlNYXBcbiAgICAgKiBAcGFyYW0ge01hcH0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGJvb2tBbmRRdWFudGl0eU1hcCh2YWx1ZTogTWFwPEJvb2ssIG51bWJlcj4pIHtcbiAgICAgICAgdGhpcy5fYm9va0FuZFF1YW50aXR5TWFwID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIG9wZXJhdGlvbkRhdGVUaW1lXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgb3BlcmF0aW9uRGF0ZVRpbWUodmFsdWU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5fb3BlcmF0aW9uRGF0ZVRpbWUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY3VzdG9tZXJJZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgY3VzdG9tZXJJZCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX2N1c3RvbWVySWQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgb3BlcmF0aW9uTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBvcGVyYXRpb25OdW1iZXIodmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9vcGVyYXRpb25OdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgdG90YWxcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHRvdGFsKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fdG90YWwgPSB2YWx1ZTtcbiAgICB9XG5cblxufSIsImV4cG9ydCBjbGFzcyBTdG9jayB7XG4gICAgcHJpdmF0ZSBfaXNibjogc3RyaW5nO1xuICAgIHByaXZhdGUgX3F1YW50aXR5OiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfc2hlbGZOdW1iZXI6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGlzYm4/OiBzdHJpbmcsIHF1YW50aXR5PzogbnVtYmVyLCBzaGVsZk51bWJlcj86IHN0cmluZykge1xuICAgICAgICB0aGlzLl9pc2JuID0gaXNibiE7XG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gcXVhbnRpdHkhO1xuICAgICAgICB0aGlzLl9zaGVsZk51bWJlciA9IHNoZWxmTnVtYmVyITtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGlzYm5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHVibGljIGdldCBpc2JuKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc2JuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBxdWFudGl0eVxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHF1YW50aXR5KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWFudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc2hlbGZOdW1iZXJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHVibGljIGdldCBzaGVsZk51bWJlcigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2hlbGZOdW1iZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlzYm5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGlzYm4odmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9pc2JuID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHF1YW50aXR5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBxdWFudGl0eSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNoZWxmTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBzaGVsZk51bWJlcih2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX3NoZWxmTnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG5cbn0iLCIvLyBleHBvcnQgTk9ERV9PUFRJT05TPS0tb3BlbnNzbC1sZWdhY3ktcHJvdmlkZXJcbmltcG9ydCB7IERhdGFCYXNlIH0gZnJvbSBcIi4vZGIvZGF0YWJhc2VcIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgQm9va1NwZWNpZmljYXRpb24gfSBmcm9tIFwiLi9kb21haW4vYm9vay1zcGVjaWZpY2F0aW9uXCI7XG5pbXBvcnQgeyBDYW5jZWwgfSBmcm9tIFwiLi9kb21haW4vY2FuY2VsXCI7XG5pbXBvcnQgeyBDdXN0b21lciB9IGZyb20gXCIuL2RvbWFpbi9jdXN0b21lclwiO1xuaW1wb3J0IHsgUmVudCB9IGZyb20gXCIuL2RvbWFpbi9yZW50XCI7XG5pbXBvcnQgeyBTYWxlIH0gZnJvbSBcIi4vZG9tYWluL3NhbGVcIjtcbmltcG9ydCB7IFN0b2NrIH0gZnJvbSBcIi4vZG9tYWluL3N0b2NrXCI7XG5pbXBvcnQgeyBCb29rU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvYm9vay1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBDYW5jZWxTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9jYW5jZWwtc2VydmljZVwiO1xuaW1wb3J0IHsgQ3VzdG9tZXJTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9jdXN0b21lci1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBSZW50U2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvcmVudC1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBTYWxlU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2Uvc2FsZS1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBTdG9ja1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL3N0b2NrLXNlcnZpY2VcIjtcblxuZXhwb3J0IGxldCBib29rU2VydmljZTogQm9va1NlcnZpY2U7XG5leHBvcnQgbGV0IGN1c3RvbWVyU2VydmljZTogQ3VzdG9tZXJTZXJ2aWNlO1xuZXhwb3J0IGxldCBjYW5jZWxTZXJ2aWNlOiBDYW5jZWxTZXJ2aWNlO1xuZXhwb3J0IGxldCByZW50U2VydmljZTogUmVudFNlcnZpY2U7XG5leHBvcnQgbGV0IHNhbGVTZXJ2aWNlOiBTYWxlU2VydmljZTtcbmV4cG9ydCBsZXQgc3RvY2tTZXJ2aWNlOiBTdG9ja1NlcnZpY2U7XG5cbmxldCBkYjogRGF0YUJhc2UgPSBuZXcgRGF0YUJhc2UoKTtcbmluaXRpbGlhemVTZXJ2aWNlcyhkYik7XG5pbml0aWxpYXplRGF0YSgpO1xuYWRkTGlzdGVuZXJGb3JNZW51SXRlbXMoKTtcblxuZnVuY3Rpb24gaW5pdGlsaWF6ZVNlcnZpY2VzKGRiOiBEYXRhQmFzZSkge1xuICBib29rU2VydmljZSA9IG5ldyBCb29rU2VydmljZShkYi5nZXRCb29rc0xpc3QsIGRiLmdldEJvb2tTcGVjaWZpY2F0aW9ucyk7XG4gIGN1c3RvbWVyU2VydmljZSA9IG5ldyBDdXN0b21lclNlcnZpY2UoZGIuZ2V0Q3VzdG9tZXJzTGlzdCk7XG4gIGNhbmNlbFNlcnZpY2UgPSBuZXcgQ2FuY2VsU2VydmljZShkYi5nZXRDYW5jYWxlZFNhbGVzKTtcbiAgcmVudFNlcnZpY2UgPSBuZXcgUmVudFNlcnZpY2UoZGIuZ2V0UmVudHMsIGRiLmdldFJlbnRDYXJ0KTtcbiAgc2FsZVNlcnZpY2UgPSBuZXcgU2FsZVNlcnZpY2UoZGIuZ2V0U2FsZXNMaXN0LCBkYi5nZXRTYWxlQ2FydCk7XG4gIHN0b2NrU2VydmljZSA9IG5ldyBTdG9ja1NlcnZpY2UoZGIuZ2V0U3RvY2tzTGlzdCk7XG4gIGNvbnNvbGUubG9nKFwiU2VydmljZXMgaW50aWxpYXplZC5cIik7XG5cbiAgY3VzdG9tZXJTZXJ2aWNlLmFkZEN1c3RvbWVyKG5ldyBDdXN0b21lcigxLCBcIlwiLCBcIlwiLCBcIlwiKSk7XG4gIGN1c3RvbWVyU2VydmljZS5hZGRDdXN0b21lcihuZXcgQ3VzdG9tZXIoMiwgXCJcIiwgXCJcIiwgXCJcIikpO1xuXG4gIHN0b2NrU2VydmljZS5hZGRTdG9jayhcIjEyMy00NVwiLCBcIkE0NS01MlwiLCAxMCk7XG4gIHN0b2NrU2VydmljZS5hZGRTdG9jayhcIjEyMy00NlwiLCBcIkE0NS01MlwiLCAxMCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluaXRpbGlhemVEYXRhKCkge1xuICBhd2FpdCBib29rU2VydmljZS5pbml0aWFsaXplRGF0YU1vY2soKTtcblxuXG59XG5cbmZ1bmN0aW9uIGFkZExpc3RlbmVyRm9yTWVudUl0ZW1zKCkge1xuICAvL3NhbGVTZXJ2aWNlLnVwZGF0ZVNhbGVDYXJ0KCk7XG4gIHNob3dBbmRIaWRlKFwiYWRkQm9va01lbnVJdGVtXCIsIFwiYWRkQm9va1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwic2hvd0Jvb2tzTWVudUl0ZW1cIiwgXCJsaXN0Qm9va3NTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImFkZEN1c3RvbWVyTWVudUl0ZW1cIiwgXCJhZGRDdXN0b21lclNlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwiYWRkU3RvY2tNZW51SXRlbVwiLCBcImFkZFN0b2NrU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJzYWxlQm9va01lbnVJdGVtXCIsIFwic2FsZUJvb2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcInJlbnRCb29rTWVudUl0ZW1cIiwgXCJyZW50Qm9va1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwiY2FuY2VsU2FsZU1lbnVJdGVtXCIsIFwiY2FuY2VsU2FsZVNlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwiY2FuY2VsUmVudE1lbnVJdGVtXCIsIFwiY2FuY2VsUmVudFNlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwicmVmdW5kQm9va01lbnVJdGVtXCIsIFwicmVmdW5kQm9va1NlY3Rpb25cIik7XG59XG5cbmZ1bmN0aW9uIHNob3dBbmRIaWRlKGJ0bklkOiBzdHJpbmcsIGVsZW1lbnRJZDogc3RyaW5nKSB7XG4gIC8vc2FsZVNlcnZpY2UudXBkYXRlU2FsZUNhcnQoKTtcblxuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcbiAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnRuSWQpO1xuXG4gIGlmIChlbGVtZW50ICYmIGJ0bikge1xuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaWYgKGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgYWRkQm9va0Zvcm0gPSA8SFRNTEZvcm1FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLWJvb2stZm9ybVwiKTtcbmlmIChhZGRCb29rRm9ybSAhPSBudWxsKSB7XG4gIGFkZEJvb2tGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShhZGRCb29rRm9ybSk7XG5cbiAgICBjb25zdCB0aXRsZSA9IGZvcm1EYXRhLmdldChcImJvb2tUaXRsZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgYXV0aG9yID0gZm9ybURhdGEuZ2V0KFwiYm9va0F1dGhvclwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgaXNibiA9IGZvcm1EYXRhLmdldChcImJvb2tJc2JuXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBwdWJsaXNoWWVhciA9IGZvcm1EYXRhLmdldChcImJvb2tQdWJsaXNoWWVhclwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcGFnZXMgPSBmb3JtRGF0YS5nZXQoXCJib29rUGFnZXNcIikgYXMgdW5rbm93biBhcyBudW1iZXI7XG4gICAgY29uc3QgcHJpY2UgPSBmb3JtRGF0YS5nZXQoXCJib29rUHJpY2VcIikgYXMgdW5rbm93biBhcyBudW1iZXI7XG4gICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoJ0RlYyAzMSwgOTk5OSAyMzo1OTo1OScpO1xuXG4gICAgdGl0bGUubWF0Y2goXCJcIik7XG5cblxuICAgIGNvbnN0IGJvb2tTcGVjID0gbmV3IEJvb2tTcGVjaWZpY2F0aW9uKGlzYm4sIHByaWNlLCBzdGFydERhdGUsIGVuZERhdGUpO1xuICAgIGNvbnN0IGJvb2sgPSBuZXcgQm9vayhpc2JuLCB0aXRsZSwgYXV0aG9yLCBwdWJsaXNoWWVhciwgcGFnZXMsIGJvb2tTcGVjKTtcbiAgICAvL2Jvb2tTZXJ2aWNlLmFkZEJvb2soYm9vayk7XG5cbiAgICBsZXQgc3VjY2VzcyA9IGF3YWl0IGJvb2tTZXJ2aWNlLmFkZEJvb2tNb2NrKGJvb2spO1xuICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICBhbGVydChib29rLmlzYm4gKyBcIiBudW1hcmFsxLEga2l0YXAgRWtsZW1lIMSwxZ9sZW1pIEJhxZ9hcsSxIMSwbGUgVGFtYW1sYW5txLHFn3TEsXIuXCIpO1xuICAgICAgYWRkQm9va0Zvcm0ucmVzZXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQoYm9vay5pc2JuICsgXCIgbnVtYXJhbMSxIGtpdGFwIEVrbGVtZSDEsMWfbGVtaSBTxLFyYXPEsW5kYSBCaXIgSGF0YSBvbHXFn3R1LlwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7IC8vIHByZXZlbnQgcmVsb2FkXG4gIH07XG59XG5cbmNvbnN0IGFkZFN0b2NrRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLXN0b2NrLWZvcm1cIikpO1xuaWYgKGFkZFN0b2NrRm9ybSkge1xuICBhZGRTdG9ja0Zvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShhZGRTdG9ja0Zvcm0pO1xuXG4gICAgY29uc3QgaXNibiA9IGZvcm1EYXRhLmdldChcImJvb2tJc2JuRm9yQWRkU3RvY2tcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IHF1YW50dGl5ID0gZm9ybURhdGEuZ2V0KFwic3RvY2tRdWFudGl0eVwiKSBhcyB1bmtub3duIGFzIG51bWJlcjtcbiAgICBjb25zdCBzaGVsZk51bWJlciA9IGZvcm1EYXRhLmdldChcInNoZWxmTnVtYmVyXCIpIGFzIHN0cmluZztcblxuICAgIGNvbnN0IHN0b2NrID0gbmV3IFN0b2NrKGlzYm4sIHF1YW50dGl5LCBzaGVsZk51bWJlcik7XG5cbiAgICBjb25zdCBpc0NvbnRhaW5zQm9vayA9IGJvb2tTZXJ2aWNlLmJvb2tMaXN0LnNvbWUoYiA9PiBiLmlzYm4gPT0gaXNibik7XG5cbiAgICBpZiAoIWlzQ29udGFpbnNCb29rKSB7XG4gICAgICBhbGVydChcIlN0b2sgZWtsZW5tZXllIMOnYWzEscWfxLFsYW4ga2l0YXAsIGthecSxdGzEsSBkZcSfaWxkaXIuIEzDvHRmZW4gw7ZuY2Uga2l0YXAgZWtsZXlpbml6XCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGxldCBpc09rID0gYXdhaXQgc3RvY2tTZXJ2aWNlLmFkZFN0b2NrTW9jayhzdG9jayk7XG5cbiAgICAgIGlmIChpc09rKSB7XG4gICAgICAgIGFsZXJ0KGlzYm4gKyBcIiBpc2JuIG51bWFyYWzEsSBraXRhcHRhbiwgXCIgKyBxdWFudHRpeSArIFwiIGthZGFyIHNpc3RlbWUgc3RvayBla2xlbm1pxZ90aXIuXCIpO1xuICAgICAgfVxuXG5cbiAgICB9XG5cbiAgICBhZGRTdG9ja0Zvcm0ucmVzZXQoKTtcbiAgICByZXR1cm4gZmFsc2U7IC8vIHByZXZlbnQgcmVsb2FkXG4gIH07XG59XG5cbi8qKlxuICogTcO8xZ90ZXJpIGVrbGVtZSBmb3JtdSBzdWJtaXQgb2xhecSxbsSxIG1vY2sgY3VzdG9tZXJTZXJ2aWNlIGRla2kgbW9jayBzZXJ2aXNlIGJhxJ9sYWTEsW1cbiAqL1xuY29uc3QgYWRkQ3VzdG9tZXJGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtY3VzdG9tZXItZm9ybVwiKSk7XG5pZiAoYWRkQ3VzdG9tZXJGb3JtKSB7XG4gIGFkZEN1c3RvbWVyRm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGFkZEN1c3RvbWVyRm9ybSk7XG5cbiAgICBjb25zdCBuYW1lID0gZm9ybURhdGEuZ2V0KFwiY3VzdG9tZXJOYW1lXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBzdXJuYW1lID0gZm9ybURhdGEuZ2V0KFwiY3VzdG9tZXJTdXJuYW1lXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBwaG9uZU51bWJlciA9IGZvcm1EYXRhLmdldChcImN1c3RvbWVyUGhvbmVOdW1iZXJcIikgYXMgc3RyaW5nO1xuXG4gICAgY29uc3QgY3VzdG9tZXIgPSBuZXcgQ3VzdG9tZXIoY3VzdG9tZXJTZXJ2aWNlLmdldE5ld0N1c3RvbWVySWQoKSwgbmFtZSwgc3VybmFtZSwgcGhvbmVOdW1iZXIpO1xuICAgIGF3YWl0IGN1c3RvbWVyU2VydmljZS5hZGRDdXN0b21lck1vY2soY3VzdG9tZXIpO1xuXG4gICAgYWxlcnQoXCJNw7zFn3RlcmkgRWtsZW1lIMSwxZ9sZW1pIEJhxZ9hcsSxIMSwbGUgVGFtYW1sYW5txLHFn3TEsXIuIFwiKTtcbiAgICBhZGRDdXN0b21lckZvcm0ucmVzZXQoKTtcbiAgICByZXR1cm4gZmFsc2U7IC8vIHByZXZlbnQgcmVsb2FkXG4gIH07XG59XG5cbi8qKkJ1cmFkYSBtb2NrIHNlcnZpc2kgeW9rIMOnw7xua8O8IGJ1cmFkYSBraXRhcCBzYXTEscWfxLEgeWFwxLFsxLFya2VuLCBraXRhcGxhcsSxIHNlcGV0ZSBla2xpeW9ydXouXG4gKiBTZXBldGUgZWtsZWRpa3RlbiBzb25yYSBidG5TYWxlIGlkbGkgYnV0b251biBjbGljayBldmVudGksIG1vY2sgc2VydmlzaSDDp2HEn8SxcsSxeW9yXG4gKi9cbmNvbnN0IHNhbGVCb29rRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2FsZS1ib29rLWZvcm1cIikpO1xuaWYgKHNhbGVCb29rRm9ybSkge1xuICBzYWxlQm9va0Zvcm0ub25zdWJtaXQgPSAoKSA9PiB7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShzYWxlQm9va0Zvcm0pO1xuXG4gICAgY29uc3QgaXNibiA9IGZvcm1EYXRhLmdldChcImlzYm5Gb3JTYWxlXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBib29rID0gYm9va1NlcnZpY2UuZ2V0Qm9vayhpc2JuKTtcbiAgICBjb25zdCBjdXN0b21lcklkID0gcGFyc2VJbnQoZm9ybURhdGEuZ2V0KFwiY3VzdG9tZXJJZEZvclNhbGVcIikgYXMgc3RyaW5nKTtcbiAgICBjb25zdCBpc1ZhbGlkQ3VzdG9tZXI6IGJvb2xlYW4gPSBjdXN0b21lclNlcnZpY2UuaXNWYWxpZEN1c3RvbWVyKGN1c3RvbWVySWQpO1xuICAgIGNvbnN0IHF1YW50aXR5ID0gcGFyc2VJbnQoZm9ybURhdGEuZ2V0KFwicXVhbnRpdHlGb3JTYWxlXCIpIGFzIHN0cmluZyk7XG5cbiAgICBjb25zdCBzdG9jayA9IHN0b2NrU2VydmljZS5nZXRTdG9jayhpc2JuKSE7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGJvb2spIHtcbiAgICAgICAgaWYgKHN0b2NrKSB7XG4gICAgICAgICAgaWYgKHN0b2NrLnF1YW50aXR5ID49IHF1YW50aXR5KSB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZEN1c3RvbWVyKSB7XG4gICAgICAgICAgICAgIHNhbGVTZXJ2aWNlLmFkZEJvb2tUb0NhcnQoYm9vaywgcXVhbnRpdHksIGN1c3RvbWVySWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYWxlcnQoY3VzdG9tZXJJZCArIFwiIG51bWFyYWzEsSBtw7zFn3Rlcmkga2F5xLF0bMSxIGRlxJ9pbGRpci5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYWxlcnQocXVhbnRpdHkgKyBcIiBrYWRhciBraXRhcCBkw7xra2FuZGEgbWV2Y3V0IGRlxJ9pbGRpci5cIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFsZXJ0KGBEw7xra2FuZGEgJHtpc2JufSBudW1hcmFsxLEga2l0YWLEsW4gc3RvxJ91IG1ldmN1dCBkZcSfaWxkaXIuYCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KGlzYm4gKyBcIiBudW1hcmFsxLEga2l0YXAgeW9rdHVyLlwiKTtcbiAgICAgIH1cblxuICAgICAgc2FsZUJvb2tGb3JtLnJlc2V0KCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEtpdGFwIHNhdMSxxZ/EsSBpw6dpbiBpxZ9sZW0geWFwxLFsxLFya2VuIGtpdGFwbGFyIHNlcGV0ZSBla2xlbml5b3IuXG4gKiBFa2xlbWUgacWfbGVtaSBiaXR0aWt0ZW4gc29ucmEgc2F0xLFuIGFsbSBpacOnaW4gYnUgYnV0b25hIHTEsWtsYW5kxLHEn8SxbmRhIHNlcnZpc2UgZ2lkaXAgc2VwZXR0ZWtpIGtpdGFwbGFyxLFuIHNhdMSxxZ/EsSBnZXLDp2VrbGXFn2l5b3JcbiAqIEJ1cmFkYSBkacSfZXIgYnV0b25sYXJkYSBvbGR1xJ91IGdpYmkgZGlyZWsgbW9jayBzZXJ2aXNpbmUgYmHEn2xhbm1hayB5ZXJpbmUgc2VydmlzZSBnaXRtZWsgZHVydW11bmRhecSxei4gXG4gKiDDh8O8bmvDvCBzZXJ2aXN0ZSBTYWxlIG5lc25lc2luaSBvbHXFn3R1cnVwIG1vY2sgc2VydmlzaW5lIHBhcmFtZXRyZSBvbGFyayBnZcOnaXlvcnV6LlxuICovXG5jb25zdCBidG5TYWxlID0gPEhUTUxCdXR0b25FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0blNhbGVcIikpO1xuYnRuU2FsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBpZiAoc2FsZVNlcnZpY2Uuc2FsZUNhcnQuYm9va0FuZFF1YW50aXR5TWFwLnNpemUgPT09IDApIHtcbiAgICBhbGVydChcIlNlcGV0dGUgw7xyw7xuIHlvay4gTMO8dGZlbiDDtm5jZSDDvHLDvG4gZWtsZXlpbml6XCIpO1xuICB9IGVsc2Uge1xuICAgIHNhbGVTZXJ2aWNlLmNhcnRUb1NhbGUoKTtcbiAgfVxuXG59KTtcblxuLyoqXG4gKiBLaXRhcGxhcsSxIGxpc3RlbGVtZWsgacOnaW4gdMSxa2xhbsSxbGFuIGJ1dG9uIGNsaWNrIGV2ZW50aVxuICovXG5jb25zdCBidG5TaG93Qm9va3NNZW51SXRlbSA9IDxIVE1MRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaG93Qm9va3NNZW51SXRlbVwiKSk7XG5idG5TaG93Qm9va3NNZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBib29rU2VydmljZS5saXN0Qm9va3MoKTtcbn0pXG5cbmNvbnN0IGNhbmNlbFNhbGVGb3JtID0gPEhUTUxGb3JtRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbmNlbC1zYWxlLWZvcm1cIik7XG5pZiAoY2FuY2VsU2FsZUZvcm0pIHtcbiAgY2FuY2VsU2FsZUZvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGxldCBicSA9IG5ldyBNYXA8Qm9vaywgbnVtYmVyPigpOyAvLyBicSA+IGJvb2sgYWJkIHF1YW50aXR5XG4gICAgYnEuc2V0KGJvb2tTZXJ2aWNlLmdldEJvb2soXCIxMjMtNDVcIiksIDMpO1xuXG4gICAgbGV0IGEgPSBuZXcgU2FsZShicSwgbmV3IERhdGUsIDEsIFwiUzAyMTEyMjE2MzA0NVwiLCAxMjMpO1xuICAgIHNhbGVTZXJ2aWNlLnNhbGVMaXN0LnB1c2goYSk7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShjYW5jZWxTYWxlRm9ybSk7XG4gICAgY29uc3Qgc2FsZU51bWJlciA9IGZvcm1EYXRhLmdldChcInNhbGVOdW1iZXJmb3JDYW5jZWxcIikgYXMgc3RyaW5nO1xuXG4gICAgbGV0IHNhbGUgPSBzYWxlU2VydmljZS5nZXRTYWxlKHNhbGVOdW1iZXIpO1xuXG4gICAgaWYgKHNhbGUpIHtcbiAgICAgIGxldCBjYW5jZWxTYWxlOiBDYW5jZWwgPSBuZXcgQ2FuY2VsKHNhbGUsIHNhbGUudG90YWwsIG5ldyBEYXRlKTtcbiAgICAgIGxldCBzdGF0ZSA9IGF3YWl0IGNhbmNlbFNlcnZpY2UuY2FuY2VsU2FsZU1vY2soY2FuY2VsU2FsZSk7XG5cbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICBhbGVydChzYWxlLm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBzYXTEscWfIGlwdGFsIGVkaWxtacWfdGlyLlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KHNhbGUub3BlcmF0aW9uTnVtYmVyICsgXCIgbnVtYXJhbMSxIHNhdMSxxZ8gaXB0YWwgZWRpbGlya2VuIGhhdGEgbWV5ZGFuYSBnZWxkaS5cIik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KHNhbGVOdW1iZXIgKyBcIiBudW1hcmFsxLEgc2F0xLHFnyBidWx1bmFtYW3EscWfdMSxci4gVGVrcmFyIGRlbmV5aW5pei5cIik7XG4gICAgfVxuXG4gIH1cbn1cblxuY29uc3QgY2FuY2VsUmVudEZvcm0gPSA8SFRNTEZvcm1FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FuY2VsLXJlbnQtZm9ybVwiKTtcbmlmIChjYW5jZWxSZW50Rm9ybSkge1xuICBjYW5jZWxSZW50Rm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IGJxID0gbmV3IE1hcDxCb29rLCBudW1iZXI+KCk7IC8vIGJxID4gYm9vayBhYmQgcXVhbnRpdHlcbiAgICBicS5zZXQoYm9va1NlcnZpY2UuZ2V0Qm9vayhcIjEyMy00NVwiKSwgMyk7XG5cbiAgICBsZXQgckRhdGUgPSBuZXcgRGF0ZTtcbiAgICByRGF0ZS5zZXREYXRlKHJEYXRlLmdldERhdGUoKSArIDE0KTtcblxuICAgIGxldCBhID0gbmV3IFJlbnQoYnEsIG5ldyBEYXRlLCAxLCBcIlIwMjExMjIxNjMwNDVcIiwgMTIzLCByRGF0ZSwgMjAwKTtcbiAgICByZW50U2VydmljZS5yZW50TGlzdC5wdXNoKGEpO1xuXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoY2FuY2VsUmVudEZvcm0pO1xuICAgIGNvbnN0IHJlbnROdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJyZW50TnVtYmVyZm9yQ2FuY2VsXCIpIGFzIHN0cmluZztcblxuICAgIGxldCByZW50ID0gcmVudFNlcnZpY2UuZ2V0UmVudChyZW50TnVtYmVyKTtcblxuXG4gIH1cblxufVxuXG4vKipCdXJhZGEgbW9jayBzZXJ2aXNpIHlvayDDp8O8bmvDvCBidXJhZGEga2l0YXAga2lyYWxhbWFzxLEgeWFwxLFsxLFya2VuLCBraXRhcGxhcsSxIHNlcGV0ZSBla2xpeW9ydXouXG4gKiBTZXBldGUgZWtsZWRpa3RlbiBzb25yYSBidG5SZW50IGlkbGkgYnV0b251biBjbGljayBldmVudGksIG1vY2sgc2VydmlzaSDDp2HEn8SxcsSxeW9yXG4gKi9cbmNvbnN0IHJlbnRCb29rRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVudC1ib29rLWZvcm1cIikpO1xuaWYgKHJlbnRCb29rRm9ybSkge1xuICByZW50Qm9va0Zvcm0ub25zdWJtaXQgPSAoKSA9PiB7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShyZW50Qm9va0Zvcm0pO1xuXG4gICAgY29uc3QgaXNibiA9IGZvcm1EYXRhLmdldChcImlzYm5Gb3JSZW50XCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBib29rID0gYm9va1NlcnZpY2UuZ2V0Qm9vayhpc2JuKTtcbiAgICBjb25zdCBjdXN0b21lcklkID0gcGFyc2VJbnQoZm9ybURhdGEuZ2V0KFwiY3VzdG9tZXJJZEZvclJlbnRcIikgYXMgc3RyaW5nKTtcbiAgICBjb25zdCBpc1ZhbGlkQ3VzdG9tZXI6IGJvb2xlYW4gPSBjdXN0b21lclNlcnZpY2UuaXNWYWxpZEN1c3RvbWVyKGN1c3RvbWVySWQpO1xuICAgIGNvbnN0IHF1YW50aXR5ID0gcGFyc2VJbnQoZm9ybURhdGEuZ2V0KFwicXVhbnRpdHlGb3JSZW50XCIpIGFzIHN0cmluZyk7XG5cbiAgICBjb25zdCBzdG9jayA9IHN0b2NrU2VydmljZS5nZXRTdG9jayhpc2JuKSE7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGJvb2spIHtcbiAgICAgICAgaWYgKHN0b2NrKSB7XG4gICAgICAgICAgaWYgKHN0b2NrLnF1YW50aXR5ID49IHF1YW50aXR5KSB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZEN1c3RvbWVyKSB7XG4gICAgICAgICAgICAgIHJlbnRTZXJ2aWNlLmFkZEJvb2tUb0NhcnQoYm9vaywgcXVhbnRpdHksIGN1c3RvbWVySWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYWxlcnQoY3VzdG9tZXJJZCArIFwiIG51bWFyYWzEsSBtw7zFn3Rlcmkga2F5xLF0bMSxIGRlxJ9pbGRpci5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYWxlcnQocXVhbnRpdHkgKyBcIiBrYWRhciBraXRhcCBkw7xra2FuZGEgbWV2Y3V0IGRlxJ9pbGRpci5cIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFsZXJ0KGBEw7xra2FuZGEgJHtpc2JufSBudW1hcmFsxLEga2l0YWLEsW4gc3RvxJ91IG1ldmN1dCBkZcSfaWxkaXIuYCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KGlzYm4gKyBcIiBudW1hcmFsxLEga2l0YXAgeW9rdHVyLlwiKTtcbiAgICAgIH1cblxuICAgICAgcmVudEJvb2tGb3JtLnJlc2V0KCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEtpdGFwIHNhdMSxxZ/EsSBpw6dpbiBpxZ9sZW0geWFwxLFsxLFya2VuIGtpdGFwbGFyIHNlcGV0ZSBla2xlbml5b3IuXG4gKiBFa2xlbWUgacWfbGVtaSBiaXR0aWt0ZW4gc29ucmEgc2F0xLFuIGFsbSBpacOnaW4gYnUgYnV0b25hIHTEsWtsYW5kxLHEn8SxbmRhIHNlcnZpc2UgZ2lkaXAgc2VwZXR0ZWtpIGtpdGFwbGFyxLFuIHNhdMSxxZ/EsSBnZXLDp2VrbGXFn2l5b3JcbiAqIEJ1cmFkYSBkacSfZXIgYnV0b25sYXJkYSBvbGR1xJ91IGdpYmkgZGlyZWsgbW9jayBzZXJ2aXNpbmUgYmHEn2xhbm1hayB5ZXJpbmUgc2VydmlzZSBnaXRtZWsgZHVydW11bmRhecSxei4gXG4gKiDDh8O8bmvDvCBzZXJ2aXN0ZSBTYWxlIG5lc25lc2luaSBvbHXFn3R1cnVwIG1vY2sgc2VydmlzaW5lIHBhcmFtZXRyZSBvbGFyayBnZcOnaXlvcnV6LlxuICovXG5jb25zdCBidG5SZW50ID0gPEhUTUxCdXR0b25FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0blJlbnRcIikpO1xuYnRuUmVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBpZiAocmVudFNlcnZpY2UucmVudENhcnQuYm9va0FuZFF1YW50aXR5TWFwLnNpemUgPT09IDApIHtcbiAgICBhbGVydChcIlNlcGV0dGUgw7xyw7xuIHlvay4gTMO8dGZlbiDDtm5jZSDDvHLDvG4gZWtsZXlpbml6XCIpO1xuICB9IGVsc2Uge1xuICAgIHJlbnRTZXJ2aWNlLmNhcnRUb1JlbnQoKTtcbiAgfVxuXG59KTsiLCIvKipcbiAqIEBhdXRob3IgTWVobWV0IEUuIEFrY2FuIC0gMjEuMTAuMjJcbiAqL1xuaW1wb3J0IHsgc3RvY2tTZXJ2aWNlIH0gZnJvbSBcIi4uXCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rXCI7XG5pbXBvcnQgeyBCb29rU3BlY2lmaWNhdGlvbiB9IGZyb20gXCIuLi9kb21haW4vYm9vay1zcGVjaWZpY2F0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBCb29rU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfYm9va0xpc3Q6IEFycmF5PEJvb2s+O1xuICAgIHByaXZhdGUgX2Jvb2tTcGVjTGlzdDogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+O1xuICAgIGJvb2tBcGk6IHN0cmluZyA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL2Jvb2tzLyc7XG4gICAgY29uc3RydWN0b3IoYm9va0xpc3Q6IEFycmF5PEJvb2s+LCBib29rU3BlY0xpc3Q6IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPikge1xuICAgICAgICB0aGlzLl9ib29rTGlzdCA9IGJvb2tMaXN0O1xuICAgICAgICB0aGlzLl9ib29rU3BlY0xpc3QgPSBib29rU3BlY0xpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGRhdGFCYXNlXG4gICAgICogQHJldHVybiB7RGF0YUJhc2V9XG4gICAgICovXG4gICAgcHVibGljIGdldCBib29rTGlzdCgpOiBBcnJheTxCb29rPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ib29rTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgZGF0YUJhc2VcbiAgICAgKiBAcGFyYW0ge0RhdGFCYXNlfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgYm9va0xpc3QodmFsdWU6IEFycmF5PEJvb2s+KSB7XG4gICAgICAgIHRoaXMuX2Jvb2tMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYm9va1NwZWNMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8Qm9va1NwZWNpZmljYXRpb24+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgYm9va1NwZWNMaXN0KCk6IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ib29rU3BlY0xpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGJvb2tTcGVjTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8Qm9va1NwZWNpZmljYXRpb24+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgYm9va1NwZWNMaXN0KHZhbHVlOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4pIHtcbiAgICAgICAgdGhpcy5fYm9va1NwZWNMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcGFyYW1ldHJlIG9sYXJhayBnZWxlbiBpc2JuIGJpbGdpc2luZSBnw7ZyZSBpbGdpbGkga2l0YWLEsSBidWx1ci5cbiAgICAgKiBAcGFyYW0gaXNibiBCdWx1bmFjYWsgb2xhbiBraXRhYsSxbiBpc2JuIG51bWFyYXPEsVxuICAgICAqIEByZXR1cm5zIGlzYm4gbnVtYXJhc8SxbmEgZ8O2cmUgaWxnaWxpIGtpdGFixLEgQm9vayBuZXNuZXNpIG9sYXJhayBnZXJpIGTDtm5kw7xyw7xyXG4gICAgICovXG4gICAgcHVibGljIGdldEJvb2soaXNibjogc3RyaW5nKTogQm9vayB7XG4gICAgICAgIC8vQnVyYWRhbiBudWxsIGJpciBkZcSfZXIgZGUgZMO2bmViaWxlY2XEn2kgacOnaW4gaGF0YSB2ZXJpeW9yXG4gICAgICAgIC8vYW1hIGJpeiBzb25kYWtpICEgb3BlcmF0w7Zyw7wgaWxlIG51bGwgZGXEn2VyIGTDtm5tZXllY2VrIGRpeWUgZ2FyYW50aSB2ZXJpeW9ydXpcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9va0xpc3QuZmluZChiID0+IGIuaXNibiA9PT0gaXNibikhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcmFtZXRyZSBvbGFyYWsgZ2VsZW4gQm9vayBuZXNuZXNpbmkga2l0YXAgbmVzbmVzaW5lIGVrbGVyXG4gICAgICogQHBhcmFtIG5ld0Jvb2sgZWtsZW5lY2VrIG9sYW4ga2l0YXAgbmVzbmVzaVxuICAgICAqL1xuICAgIHB1YmxpYyBhZGRCb29rKG5ld0Jvb2s6IEJvb2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuYm9va0xpc3QucHVzaChuZXdCb29rKTtcbiAgICAgICAgICAgIHRoaXMuX2Jvb2tTcGVjTGlzdC5wdXNoKG5ld0Jvb2suYm9va1NwZWMpO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiS2l0YXAgZWtsZW5pcmtlbiBiaXIgaGF0YSBtZXlkYW5hIGdlbGRpLlwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpc1ZhbGlkQm9vayhpc2JuOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgYiA9IHRoaXMuZ2V0Qm9vayhpc2JuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9va0xpc3QuaW5jbHVkZXMoYilcbiAgICB9XG5cbiAgICBhc3luYyBpbml0aWFsaXplRGF0YU1vY2soKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL2Jvb2tzJywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgY29uc3QgZ2V0UmVzdWx0ID0gPEJvb2tbXT5KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3VsdCwgbnVsbCwgNCkpO1xuICAgICAgICAgICAgdGhpcy5ib29rTGlzdCA9IGdldFJlc3VsdCBhcyBBcnJheTxCb29rPjtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5ib29rTGlzdCk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGxpc3RCb29rcygpIHtcbiAgICAgICAgY29uc3QgbGlzdEJvb2tzRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsaXN0Qm9va3NcIik7XG5cbiAgICAgICAgaWYgKGxpc3RCb29rc0Rpdikge1xuICAgICAgICAgICAgbGV0IHJvdywgY29sdW1uO1xuXG4gICAgICAgICAgICB3aGlsZSAobGlzdEJvb2tzRGl2Lmxhc3RDaGlsZCAmJiBsaXN0Qm9va3NEaXYuY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGxpc3RCb29rc0Rpdi5yZW1vdmVDaGlsZChsaXN0Qm9va3NEaXYubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5ib29rTGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgICAgIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgcm93LmNsYXNzTmFtZSA9IFwicm93LWxpc3QtYm9va1wiO1xuXG4gICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJjb2x1bW4tbGlzdC1ib29rXCI7XG4gICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gZWxlbWVudC5pc2JuLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbGVtZW50Lm5hbWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVsZW1lbnQuYXV0aG9yLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBzdG9ja1NlcnZpY2UuZ2V0U3RvY2tRdWFudGl0eShlbGVtZW50LmlzYm4pLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbGVtZW50LmJvb2tTcGVjLnByaWNlLnRvU3RyaW5nKCkgKyBcIiDigrpcIjtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGxpc3RCb29rc0Rpdi5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBhc3luYyBhZGRCb29rTW9jayhiOiBCb29rKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuYm9va0FwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaXNibjogYi5pc2JuLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBiLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcjogYi5hdXRob3IsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VzOiBiLnBhZ2VzLFxuICAgICAgICAgICAgICAgICAgICBwdWJsaXNoWWVhcjogYi5wdWJsaXNoWWVhclxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk1vY2sgc2VydmlzaW5kZW4gZMO2bmVuIGNldmFwID0+XCIgKyBKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgQ2FuY2VsIH0gZnJvbSBcIi4uL2RvbWFpbi9jYW5jZWxcIjtcblxuZXhwb3J0IGNsYXNzIENhbmNlbFNlcnZpY2Uge1xuICAgIHByaXZhdGUgX2NhbmNlbGxlZExpc3Q6IEFycmF5PENhbmNlbD47XG4gICAgY2FuY2VsU2FsZUFwaTogc3RyaW5nID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvY2FuY2VsU2FsZSc7XG4gICAgY2FuY2VsUmVudEFwaTogc3RyaW5nID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvY2FuY2VsUmVudCc7XG5cbiAgICBjb25zdHJ1Y3RvcihjYW5jZWxsZWRMaXN0OiBBcnJheTxDYW5jZWw+KSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbGxlZExpc3QgPSBjYW5jZWxsZWRMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjYW5jZWxsZWRTYWxlc0xpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxDYW5jZWxTYWxlPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGNhbmNlbGxlZExpc3QoKTogQXJyYXk8Q2FuY2VsPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW5jZWxsZWRMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBjYW5jZWxsZWRTYWxlc0xpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PENhbmNlbFNhbGU+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgY2FuY2VsbGVkTGlzdCh2YWx1ZTogQXJyYXk8Q2FuY2VsPikge1xuICAgICAgICB0aGlzLl9jYW5jZWxsZWRMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbGN1bGF0ZURpZmZIb3VycyhkMTogRGF0ZSwgZDI6IERhdGUpOiBudW1iZXIge1xuXG4gICAgICAgIGxldCBkaWZmTWlsaXM6IG51bWJlciA9IChkMS5nZXRUaW1lKCkgLSBkMi5nZXRUaW1lKCkpOy8vIG1pbGkgc2Vjb25kc1xuICAgICAgICBsZXQgZGlmZkhvdXIgPSBNYXRoLmZsb29yKGRpZmZNaWxpcyAvIDEwMDAgLyA2MCAvIDYwKTsgLy8gLzEwMDAgPiBzZWNvbmQgLyA2MCA+IG1pbiAvIDYwID4gaG91clxuICAgICAgICByZXR1cm4gZGlmZkhvdXI7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbmNlbFNhbGUoY2FuY2VsOiBDYW5jZWwpOiB2b2lkIHtcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyID0gdGhpcy5jYWxjdWxhdGVDYW5jZWxTYWxlUmVmdW5kKGNhbmNlbCk7XG4gICAgICAgIGNhbmNlbC5yZWZ1bmQgPSByZWZ1bmQ7XG4gICAgICAgIHRoaXMuY2FuY2VsbGVkTGlzdC5wdXNoKGNhbmNlbCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQoY2FuY2VsU2FsZTogQ2FuY2VsKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGRpZmYgPSB0aGlzLmNhbGN1bGF0ZURpZmZIb3VycyhjYW5jZWxTYWxlLmNhbmNlbGVkRGF0ZVRpbWUsIGNhbmNlbFNhbGUuY2FuY2VsVHlwZS5vcGVyYXRpb25EYXRlVGltZSlcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyO1xuXG4gICAgICAgIGlmIChkaWZmID4gMjQpIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IGNhbmNlbFNhbGUuY2FuY2VsVHlwZS50b3RhbCAqIDAuNzU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWZ1bmQgPSBjYW5jZWxTYWxlLmNhbmNlbFR5cGUudG90YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlZnVuZDtcbiAgICB9XG5cbiAgICBhc3luYyBjYW5jZWxTYWxlTW9jayhjYW5jZWxTYWxlOiBDYW5jZWwpIHtcblxuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXIgPSB0aGlzLmNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQoY2FuY2VsU2FsZSk7XG5cbiAgICAgICAgY2FuY2VsU2FsZS5yZWZ1bmQgPSByZWZ1bmQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5jYW5jZWxTYWxlQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBzYWxlOiBjYW5jZWxTYWxlLmNhbmNlbFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJlZnVuZDogY2FuY2VsU2FsZS5yZWZ1bmQsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGVkRGF0ZVRpbWU6IGNhbmNlbFNhbGUuY2FuY2VsZWREYXRlVGltZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL1RvZG8gc2FsZSBtb2NrIHNlcnZpc2luZSBkZWxldGUgaXN0ZcSfaSBhdMSxcCBvIHNhbGUgbmVzbmVzaW5pIHNpbGVjZWtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cblxuXG4gICAgfVxuXG4gICAgcHVibGljIGNhbmNlbFJlbnQoY2FuY2VsOiBDYW5jZWwpIHtcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyID0gdGhpcy5jYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kKGNhbmNlbCk7XG4gICAgICAgIGNhbmNlbC5yZWZ1bmQgPSByZWZ1bmQ7XG4gICAgICAgIHRoaXMuY2FuY2VsbGVkTGlzdC5wdXNoKGNhbmNlbCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbGN1bGF0ZUNhbmNlbFJlbnRSZWZ1bmQoY2FuY2VsUmVudDogQ2FuY2VsKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGRpZmYgPSB0aGlzLmNhbGN1bGF0ZURpZmZIb3VycyhjYW5jZWxSZW50LmNhbmNlbGVkRGF0ZVRpbWUsIGNhbmNlbFJlbnQuY2FuY2VsVHlwZS5vcGVyYXRpb25EYXRlVGltZSlcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyO1xuXG4gICAgICAgIGlmIChkaWZmID4gMjQpIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IGNhbmNlbFJlbnQuY2FuY2VsVHlwZS50b3RhbCAqIDAuNzU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWZ1bmQgPSBjYW5jZWxSZW50LmNhbmNlbFR5cGUudG90YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlZnVuZDtcbiAgICB9XG5cbiAgICBhc3luYyBjYW5jZWxSZW50TW9jayhjYW5jZWxSZW50OiBDYW5jZWwpe1xuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXIgPSB0aGlzLmNhbGN1bGF0ZUNhbmNlbFJlbnRSZWZ1bmQoY2FuY2VsUmVudCk7XG5cbiAgICAgICAgY2FuY2VsUmVudC5yZWZ1bmQgPSByZWZ1bmQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5jYW5jZWxTYWxlQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBzYWxlOiBjYW5jZWxSZW50LmNhbmNlbFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJlZnVuZDogY2FuY2VsUmVudC5yZWZ1bmQsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGVkRGF0ZVRpbWU6IGNhbmNlbFJlbnQuY2FuY2VsZWREYXRlVGltZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL1RvZG8gc2FsZSBtb2NrIHNlcnZpc2luZSBkZWxldGUgaXN0ZcSfaSBhdMSxcCBvIHNhbGUgbmVzbmVzaW5pIHNpbGVjZWtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBDdXN0b21lciB9IGZyb20gXCIuLi9kb21haW4vY3VzdG9tZXJcIjtcblxuZXhwb3J0IGNsYXNzIEN1c3RvbWVyU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfY3VzdG9tZXJMaXN0OiBBcnJheTxDdXN0b21lcj47XG4gICAgcHJpdmF0ZSBjdXN0b21lckFwaTogc3RyaW5nID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL2N1c3RvbWVyc1wiO1xuXG4gICAgY29uc3RydWN0b3IoY3VzdG9tZXJMaXN0OiBBcnJheTxDdXN0b21lcj4pIHtcbiAgICAgICAgdGhpcy5fY3VzdG9tZXJMaXN0ID0gY3VzdG9tZXJMaXN0O1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGN1c3RvbWVyTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PEN1c3RvbWVyPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGN1c3RvbWVyTGlzdCgpOiBBcnJheTxDdXN0b21lcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tZXJMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBjdXN0b21lckxpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PEN1c3RvbWVyPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGN1c3RvbWVyTGlzdCh2YWx1ZTogQXJyYXk8Q3VzdG9tZXI+KSB7XG4gICAgICAgIHRoaXMuX2N1c3RvbWVyTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuXG4gICAgcHVibGljIGFkZEN1c3RvbWVyKG5ld0N1c3RvbWVyOiBDdXN0b21lcikge1xuICAgICAgICB0aGlzLmN1c3RvbWVyTGlzdC5wdXNoKG5ld0N1c3RvbWVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TmV3Q3VzdG9tZXJJZCgpOiBudW1iZXIge1xuICAgICAgICBsZXQgbGFzdEN1c3RvbWVySWQ6IG51bWJlciA9IDA7XG5cbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tZXJMaXN0Lmxlbmd0aCA+IDApIHtcblxuICAgICAgICAgICAgbGFzdEN1c3RvbWVySWQgPSB0aGlzLmN1c3RvbWVyTGlzdC5hdCh0aGlzLmN1c3RvbWVyTGlzdC5sZW5ndGggLSAxKSEuaWQ7XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0Q3VzdG9tZXJJZCA9IGxhc3RDdXN0b21lcklkICsgMTtcblxuICAgICAgICByZXR1cm4gbGFzdEN1c3RvbWVySWQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEN1c3RvbWVySW5mbyhpZDogbnVtYmVyKTogQ3VzdG9tZXIgfCB1bmRlZmluZWQge1xuXG4gICAgICAgIGxldCBjdXN0b21lciA9IHRoaXMuY3VzdG9tZXJMaXN0LmZpbmQoY3VzdG9tZXIgPT4gY3VzdG9tZXIuaWQgPT09IGlkKTtcblxuICAgICAgICBpZiAoY3VzdG9tZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXN0b21lcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaXNWYWxpZEN1c3RvbWVyKGN1c3RvbWVySWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuXG4gICAgICAgIGxldCBpc1ZhbGlkID0gdGhpcy5jdXN0b21lckxpc3Quc29tZShjdXN0b21lciA9PiBjdXN0b21lci5pZCA9PT0gY3VzdG9tZXJJZCk7XG5cbiAgICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgYWRkQ3VzdG9tZXJNb2NrKG5ld0N1c3RvbWVyOiBDdXN0b21lcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmN1c3RvbWVyQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBpZDogbmV3Q3VzdG9tZXIuaWQsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5ld0N1c3RvbWVyLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHN1ck5hbWU6IG5ld0N1c3RvbWVyLnN1ck5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBuZXdDdXN0b21lci5waG9uZU51bWJlclxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IHN0b2NrU2VydmljZSB9IGZyb20gXCIuLlwiO1xuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgUmVudCB9IGZyb20gXCIuLi9kb21haW4vcmVudFwiO1xuaW1wb3J0IHsgUmVudENhcnQgfSBmcm9tIFwiLi4vZG9tYWluL3JlbnQtY2FydFwiO1xuXG5leHBvcnQgY2xhc3MgUmVudFNlcnZpY2Uge1xuICAgIHByaXZhdGUgX3JlbnRMaXN0OiBBcnJheTxSZW50PjtcblxuICAgIHByaXZhdGUgX3JlbnRDYXJ0OiBSZW50Q2FydDtcbiAgICBwdWJsaWMgcmVudEFwaSA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3JlbnRzJztcbiAgICByZWZ1bmRQZXJjZW50OiBudW1iZXI7XG5cblxuICAgIGNvbnN0cnVjdG9yKHJlbnRMaXN0OiBBcnJheTxSZW50PiwgcmVudENhcnQ6IFJlbnRDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3JlbnRMaXN0ID0gcmVudExpc3Q7XG4gICAgICAgIHRoaXMucmVmdW5kUGVyY2VudCA9IDAuNzU7XG4gICAgICAgIHRoaXMuX3JlbnRDYXJ0ID0gcmVudENhcnQ7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVudExpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxSZW50Pn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHJlbnRMaXN0KCk6IEFycmF5PFJlbnQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbnRMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZW50TGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8UmVudD59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCByZW50TGlzdCh2YWx1ZTogQXJyYXk8UmVudD4pIHtcbiAgICAgICAgdGhpcy5fcmVudExpc3QgPSB2YWx1ZTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZW50Q2FydFxuICAgICAqIEByZXR1cm4ge1JlbnRDYXJ0fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcmVudENhcnQoKTogUmVudENhcnQge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVudENhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlbnRDYXJ0XG4gICAgICogQHBhcmFtIHtSZW50Q2FydH0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHJlbnRDYXJ0KHZhbHVlOiBSZW50Q2FydCkge1xuICAgICAgICB0aGlzLl9yZW50Q2FydCA9IHZhbHVlO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgYWRkUmVudChyZW50OiBSZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVudExpc3QucHVzaChyZW50KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlVG90YWwocmVudDogUmVudCk6IG51bWJlciB7XG5cbiAgICAgICAgbGV0IG1hcDogTWFwPEJvb2ssIG51bWJlcj4gPSByZW50LmJvb2tBbmRRdWFudGl0eU1hcDtcblxuICAgICAgICBsZXQgc3ViVG90YWw6IG51bWJlciA9IDA7XG5cbiAgICAgICAgLy9pdCBjYW4gYmUgPT4gbGV0IGVudHJ5IG9mIHJlbnQuYm9va0FuZFF1YW50aXR5TWFwLmVudHJpZXMoKVxuICAgICAgICBmb3IgKGxldCBlbnRyeSBvZiByZW50LmJvb2tBbmRRdWFudGl0eU1hcCkge1xuICAgICAgICAgICAgc3ViVG90YWwgKz0gZW50cnlbMF0uYm9va1NwZWMucHJpY2UgKiBlbnRyeVsxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdWJUb3RhbDtcbiAgICB9XG5cbiAgICAvLyBSMDUxMDIyMTQ1NTA5ID0+IGRvbWFpbi5SZW50IDA1LjEwLjIwMjIgMTQ6NTUuMDlcbiAgICBnZW5lcmF0ZVJlbnROdW1iZXIoY3VzdG9tZXJJZDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IHJlY2VpcHROdW1iZXI6IHN0cmluZyA9IFwiUlwiICsgdG9kYXkuZ2V0RGF5KCkudG9TdHJpbmcgKyB0b2RheS5nZXRNb250aCgpLnRvU3RyaW5nICsgdG9kYXkuZ2V0RnVsbFllYXIoKS50b1N0cmluZyArIHRvZGF5LmdldEhvdXJzKCkudG9TdHJpbmcgKyB0b2RheS5nZXRNaW51dGVzKCkudG9TdHJpbmcgKyB0b2RheS5nZXRTZWNvbmRzKCkudG9TdHJpbmcgKyBjdXN0b21lcklkLnRvU3RyaW5nO1xuXG4gICAgICAgIHJldHVybiByZWNlaXB0TnVtYmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVSZWZ1bmQocmVudDogUmVudCk6IHZvaWQge1xuICAgICAgICByZW50LnJlZnVuZCA9IHJlbnQudG90YWwgKiB0aGlzLnJlZnVuZFBlcmNlbnQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJlbnQocmVudE51bWJlcjogc3RyaW5nKTogUmVudCB7XG4gICAgICAgIGxldCByZW50ID0gdGhpcy5yZW50TGlzdC5maW5kKHMgPT4gcy5vcGVyYXRpb25OdW1iZXIgPT09IHJlbnROdW1iZXIpO1xuICAgICAgICByZXR1cm4gcmVudCE7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZEJvb2tUb0NhcnQoYm9vazogQm9vaywgcXVhbnRpdHk6IG51bWJlciwgY3VzdG9tZXJJZDogbnVtYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbnRDYXJ0LmJvb2tBbmRRdWFudGl0eU1hcC5zaXplID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlbnRDYXJ0LmN1c3RvbWVySWQgPSBjdXN0b21lcklkO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVudENhcnQuYm9va0FuZFF1YW50aXR5TWFwLnNpemUgPiAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW50Q2FydC5jdXN0b21lcklkICE9PSBjdXN0b21lcklkKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJGYXJrbMSxIG3DvMWfdGVyaXllIGtpdGFwIGtpcmFsYW5tYXlhIMOnYWzEscWfxLFsxLF5b3IuIEzDvHRmZW4gdGVrIG3DvMWfdGVyaSBpw6dpbiBpxZ9sZW0geWFwxLFuxLF6XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVudENhcnQuYm9va0FuZFF1YW50aXR5TWFwLnNldChib29rLCBxdWFudGl0eSk7XG4gICAgICAgIHRoaXMudXBkYXRlUmVudENhcnQoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlUmVudENhcnQoKSB7XG4gICAgICAgIGNvbnN0IHJlbnRDYXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZW50Q2FydFwiKTtcbiAgICAgICAgY29uc3Qgc3ViVG90YWxTcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b3RhbFJlbnRBbW91bnRUbFwiKTtcblxuICAgICAgICBpZiAocmVudENhcnQpIHtcblxuICAgICAgICAgICAgbGV0IHJvdywgY29sdW1uLCBzdWJUb3RhbDogbnVtYmVyID0gMDtcblxuICAgICAgICAgICAgd2hpbGUgKHJlbnRDYXJ0Lmxhc3RDaGlsZCAmJiByZW50Q2FydC5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgcmVudENhcnQucmVtb3ZlQ2hpbGQocmVudENhcnQubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YlRvdGFsU3BhbiEudGV4dENvbnRlbnQgPSBcIlwiO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yZW50Q2FydC5ib29rQW5kUXVhbnRpdHlNYXAuc2l6ZTsgaW5kZXgrKykge1xuXG4gICAgICAgICAgICAgICAgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtcm93XCI7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlbnRyeSBvZiB0aGlzLnJlbnRDYXJ0LmJvb2tBbmRRdWFudGl0eU1hcC5lbnRyaWVzKCkpIHtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IHRoaXMucmVudENhcnQuY3VzdG9tZXJJZC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVudHJ5WzBdLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gZW50cnlbMV0udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwicmVudC1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSAoZW50cnlbMF0uYm9va1NwZWMucHJpY2UgKiBlbnRyeVsxXSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocm93ICYmIHN1YlRvdGFsU3Bhbikge1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLnJlbnRDYXJ0LmJvb2tBbmRRdWFudGl0eU1hcCkge1xuICAgICAgICAgICAgICAgICAgICBzdWJUb3RhbCArPSB0WzBdLmJvb2tTcGVjLnByaWNlICogdFsxXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZW50Q2FydC5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgICAgIHN1YlRvdGFsU3Bhbi50ZXh0Q29udGVudCA9IHN1YlRvdGFsLnRvU3RyaW5nKCkgKyBcIiBUTFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuXG4gICAgfVxuXG4gICAgcHVibGljIGNhcnRUb1JlbnQoKSB7XG4gICAgICAgIGxldCByZW50Q2FydDogUmVudENhcnQgPSB0aGlzLnJlbnRDYXJ0O1xuICAgICAgICBsZXQgcmVudCA9IG5ldyBSZW50KCk7XG5cbiAgICAgICAgcmVudC5ib29rQW5kUXVhbnRpdHlNYXAgPSByZW50Q2FydC5ib29rQW5kUXVhbnRpdHlNYXA7XG4gICAgICAgIHJlbnQuY3VzdG9tZXJJZCA9IHJlbnRDYXJ0LmN1c3RvbWVySWQ7XG4gICAgICAgIHJlbnQub3BlcmF0aW9uTnVtYmVyID0gdGhpcy5nZW5lcmF0ZVJlbnROdW1iZXIocmVudENhcnQuY3VzdG9tZXJJZCk7XG4gICAgICAgIHJlbnQub3BlcmF0aW9uRGF0ZVRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICByZW50LnRvdGFsID0gdGhpcy5jYWxjdWxhdGVUb3RhbChyZW50KTtcblxuICAgICAgICBmb3IgKGxldCBxIG9mIHJlbnQuYm9va0FuZFF1YW50aXR5TWFwKSB7XG4gICAgICAgICAgICBzdG9ja1NlcnZpY2UuaW5jcmVhc2VTdG9jayhxWzBdLmlzYm4sIC1xWzFdKVxuICAgICAgICB9XG5cblxuICAgICAgICB0aGlzLnJlbnRDYXJ0ID0gbmV3IFJlbnRDYXJ0OyAvLyBzZXBldGkgYm/Fn2FsdFxuICAgICAgICB0aGlzLnVwZGF0ZVJlbnRDYXJ0KCk7XG5cbiAgICAgICAgbGV0IHN1Y2Nlc3MgPSB0aGlzLmFkZFJlbnRNb2NrKHJlbnQpO1xuICAgIH1cblxuICAgIGFzeW5jIGFkZFJlbnRNb2NrKHI6IFJlbnQpOiBQcm9taXNlPEJvb2xlYW4gfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHIuYm9va0FuZFF1YW50aXR5TWFwKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnJlbnRBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGJvb2tBbmRRdWFudGl0eTogci5ib29rQW5kUXVhbnRpdHlNYXAsXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbWVySWQ6IHIuY3VzdG9tZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uRGF0ZVRpbWU6IHIub3BlcmF0aW9uRGF0ZVRpbWUsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbk51bWJlcjogci5vcGVyYXRpb25OdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiByLnRvdGFsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgYWxlcnQocmVzdWx0Lm1lc3NhZ2UgKyBcIiBcIiArIHJlc3VsdC5zYWxlTnVtYmVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufSIsImltcG9ydCB7IHN0b2NrU2VydmljZSB9IGZyb20gXCIuLlwiO1xuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuLi9kb21haW4vc2FsZVwiO1xuaW1wb3J0IHsgU2FsZUNhcnQgfSBmcm9tIFwiLi4vZG9tYWluL3NhbGUtY2FydFwiO1xuXG5leHBvcnQgY2xhc3MgU2FsZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgX3NhbGVMaXN0OiBBcnJheTxTYWxlPjtcbiAgICBwcml2YXRlIF9zYWxlQ2FydDogU2FsZUNhcnQ7XG4gICAgcHVibGljIHNhbGVBcGkgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS9zYWxlcyc7XG5cbiAgICBjb25zdHJ1Y3RvcihzYWxlTGlzdDogQXJyYXk8U2FsZT4sIHNhbGVDYXJ0OiBTYWxlQ2FydCkge1xuICAgICAgICB0aGlzLl9zYWxlTGlzdCA9IHNhbGVMaXN0O1xuICAgICAgICB0aGlzLl9zYWxlQ2FydCA9IHNhbGVDYXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzYWxlTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGU+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgc2FsZUxpc3QoKTogQXJyYXk8U2FsZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2FsZUxpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNhbGVMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxTYWxlPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHNhbGVMaXN0KHZhbHVlOiBBcnJheTxTYWxlPikge1xuICAgICAgICB0aGlzLl9zYWxlTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzYWxlQ2FydFxuICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGVDYXJ0Pn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHNhbGVDYXJ0KCk6IFNhbGVDYXJ0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NhbGVDYXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzYWxlQ2FydFxuICAgICAqIEBwYXJhbSB7QXJyYXk8U2FsZUNhcnQ+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgc2FsZUNhcnQodmFsdWU6IFNhbGVDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3NhbGVDYXJ0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFNhbGUoc2FsZTogU2FsZSk6IHZvaWQge1xuICAgICAgICB0aGlzLnNhbGVMaXN0LnB1c2goc2FsZSk7XG5cbiAgICB9XG5cbiAgICBjYWxjdWxhdGVUb3RhbChzYWxlOiBTYWxlKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHN1YlRvdGFsID0gMC4wO1xuXG4gICAgICAgIGZvciAobGV0IGVudHJ5IG9mIHNhbGUuYm9va0FuZFF1YW50aXR5TWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgc3ViVG90YWwgKz0gZW50cnlbMF0uYm9va1NwZWMucHJpY2UgKiBlbnRyeVsxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdWJUb3RhbDtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZVNhbGVOdW1iZXIoY3VzdG9tZXJJZDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IHJlY2VpcHROdW1iZXI6IHN0cmluZyA9IFwiU1wiICsgdG9kYXkuZ2V0RGF5KCkudG9TdHJpbmcoKSArIHRvZGF5LmdldE1vbnRoKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldEhvdXJzKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldE1pbnV0ZXMoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0U2Vjb25kcygpLnRvU3RyaW5nKCkgKyBjdXN0b21lcklkLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgcmV0dXJuIHJlY2VpcHROdW1iZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNhbGUoc2FsZU51bWJlcjogc3RyaW5nKTogU2FsZSB7XG4gICAgICAgIGxldCBzYWxlID0gdGhpcy5zYWxlTGlzdC5maW5kKHMgPT4gcy5vcGVyYXRpb25OdW1iZXIgPT09IHNhbGVOdW1iZXIpO1xuICAgICAgICByZXR1cm4gc2FsZSE7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZVNhbGUoc2FsZTogU2FsZSkge1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnNhbGVMaXN0LmluZGV4T2Yoc2FsZSk7XG4gICAgICAgIHRoaXMuc2FsZUxpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQm9va1RvQ2FydChib29rOiBCb29rLCBxdWFudGl0eTogbnVtYmVyLCBjdXN0b21lcklkOiBudW1iZXIpIHtcblxuICAgICAgICBpZiAodGhpcy5zYWxlQ2FydC5ib29rQW5kUXVhbnRpdHlNYXAuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zYWxlQ2FydC5jdXN0b21lcklkID0gY3VzdG9tZXJJZDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNhbGVDYXJ0LmJvb2tBbmRRdWFudGl0eU1hcC5zaXplID4gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2FsZUNhcnQuY3VzdG9tZXJJZCAhPT0gY3VzdG9tZXJJZCkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRmFya2zEsSBtw7zFn3Rlcml5ZSBraXRhcCBzYXTEsWxtYXlhIMOnYWzEscWfxLFsxLF5b3IuIEzDvHRmZW4gdGVrIG3DvMWfdGVyaSBpw6dpbiBpxZ9sZW0geWFwxLFuxLF6XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2FsZUNhcnQuYm9va0FuZFF1YW50aXR5TWFwLnNldChib29rLCBxdWFudGl0eSk7XG4gICAgICAgIHRoaXMudXBkYXRlU2FsZUNhcnQoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlU2FsZUNhcnQoKSB7XG4gICAgICAgIGNvbnN0IHNhbGVDYXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzYWxlQ2FydFwiKTtcbiAgICAgICAgY29uc3Qgc3ViVG90YWxTcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b3RhbFNhbGVBbW91bnRUbFwiKTtcblxuICAgICAgICBpZiAoc2FsZUNhcnQpIHtcblxuICAgICAgICAgICAgbGV0IHJvdywgY29sdW1uLCBzdWJUb3RhbDogbnVtYmVyID0gMDtcblxuICAgICAgICAgICAgd2hpbGUgKHNhbGVDYXJ0Lmxhc3RDaGlsZCAmJiBzYWxlQ2FydC5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgc2FsZUNhcnQucmVtb3ZlQ2hpbGQoc2FsZUNhcnQubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YlRvdGFsU3BhbiEudGV4dENvbnRlbnQgPSBcIlwiO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5zYWxlQ2FydC5ib29rQW5kUXVhbnRpdHlNYXAuc2l6ZTsgaW5kZXgrKykge1xuXG4gICAgICAgICAgICAgICAgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gXCJzYWxlLWNhcnQtcm93XCI7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlbnRyeSBvZiB0aGlzLnNhbGVDYXJ0LmJvb2tBbmRRdWFudGl0eU1hcC5lbnRyaWVzKCkpIHtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJzYWxlLWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IHRoaXMuc2FsZUNhcnQuY3VzdG9tZXJJZC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJzYWxlLWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVudHJ5WzBdLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gZW50cnlbMV0udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSAoZW50cnlbMF0uYm9va1NwZWMucHJpY2UgKiBlbnRyeVsxXSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocm93ICYmIHN1YlRvdGFsU3Bhbikge1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLnNhbGVDYXJ0LmJvb2tBbmRRdWFudGl0eU1hcCkge1xuICAgICAgICAgICAgICAgICAgICBzdWJUb3RhbCArPSB0WzBdLmJvb2tTcGVjLnByaWNlICogdFsxXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzYWxlQ2FydC5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgICAgIHN1YlRvdGFsU3Bhbi50ZXh0Q29udGVudCA9IHN1YlRvdGFsLnRvU3RyaW5nKCkgKyBcIiBUTFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGNhcnRUb1NhbGUoKSB7XG4gICAgICAgIGxldCBzYWxlQ2FydDogU2FsZUNhcnQgPSB0aGlzLnNhbGVDYXJ0O1xuICAgICAgICBsZXQgc2FsZSA9IG5ldyBTYWxlKCk7XG5cbiAgICAgICAgc2FsZS5ib29rQW5kUXVhbnRpdHlNYXAgPSBzYWxlQ2FydC5ib29rQW5kUXVhbnRpdHlNYXA7XG4gICAgICAgIHNhbGUuY3VzdG9tZXJJZCA9IHNhbGVDYXJ0LmN1c3RvbWVySWQ7XG4gICAgICAgIHNhbGUub3BlcmF0aW9uTnVtYmVyID0gdGhpcy5nZW5lcmF0ZVNhbGVOdW1iZXIoc2FsZUNhcnQuY3VzdG9tZXJJZCk7XG4gICAgICAgIHNhbGUub3BlcmF0aW9uRGF0ZVRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBzYWxlLnRvdGFsID0gdGhpcy5jYWxjdWxhdGVUb3RhbChzYWxlKTtcblxuICAgICAgICBmb3IgKGxldCBxIG9mIHNhbGUuYm9va0FuZFF1YW50aXR5TWFwKSB7XG4gICAgICAgICAgICBzdG9ja1NlcnZpY2UuaW5jcmVhc2VTdG9jayhxWzBdLmlzYm4sIC1xWzFdKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hZGRTYWxlTW9jayhzYWxlKTtcbiAgICAgICAgdGhpcy5zYWxlQ2FydCA9IG5ldyBTYWxlQ2FydDsgLy8gc2VwZXRpIGJvxZ9hbHRcbiAgICAgICAgdGhpcy51cGRhdGVTYWxlQ2FydCgpO1xuICAgIH1cblxuICAgIGFzeW5jIGFkZFNhbGVNb2NrKHM6IFNhbGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHMuYm9va0FuZFF1YW50aXR5TWFwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnNhbGVBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGJvb2tBbmRRdWFudGl0eTogcy5ib29rQW5kUXVhbnRpdHlNYXAsXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbWVySWQ6IHMuY3VzdG9tZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uRGF0ZVRpbWU6IHMub3BlcmF0aW9uRGF0ZVRpbWUsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbk51bWJlcjogcy5vcGVyYXRpb25OdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiBzLnRvdGFsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWxlcnQocmVzdWx0Lm1lc3NhZ2UgKyBcIiBcIisgcmVzdWx0LnNhbGVOdW1iZXIpO1xuXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbiIsImltcG9ydCB7IFN0b2NrIH0gZnJvbSBcIi4uL2RvbWFpbi9zdG9ja1wiO1xuXG5leHBvcnQgY2xhc3MgU3RvY2tTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9zdG9ja0xpc3Q6IEFycmF5PFN0b2NrPjtcbiAgICBwcml2YXRlIHN0b2NrQXBpOiBzdHJpbmcgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvc3RvY2tzXCI7XG5cbiAgICBjb25zdHJ1Y3RvcihzdG9ja0xpc3Q6IEFycmF5PFN0b2NrPikge1xuICAgICAgICB0aGlzLl9zdG9ja0xpc3QgPSBzdG9ja0xpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHN0b2NrTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PFN0b2NrPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHN0b2NrTGlzdCgpOiBBcnJheTxTdG9jaz4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RvY2tMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzdG9ja0xpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PFN0b2NrPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHN0b2NrTGlzdCh2YWx1ZTogQXJyYXk8U3RvY2s+KSB7XG4gICAgICAgIHRoaXMuX3N0b2NrTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwIGhlbsO8eiBla2xlbmRpa3RlbiBzb25yYSBoZW1lbiBnaXJpeW9yLFxuICAgICAqIEVsaW1pemRlIGhpw6cgc3RvY2sga2F5ZMSxL25lc25lc2kgeW9rLCB5ZW5pIGthecSxdC9uZXNuZSBvbHXFn3R1cnV5b3J1elxuICAgICAqIFllbmkgZWtsZW5lbiBraXRhYmEgc3RvayBla2xlbWUgacWfbGVtaVxuICAgICAqIEBwYXJhbSBpc2JuICBzdG9rIGVrbGVuZWNlayBvbGFuIGtpdGFixLFuIGlzYm4gbnVtYXJhc8SxXG4gICAgICogQHBhcmFtIHNoZWxmTnVtYmVyIHN0b2sgZWtsZW5lY2VrIG9sYW4ga2l0YWLEsW4gcmFmIG51bWFyYXPEsVxuICAgICAqIEBwYXJhbSBxdWFudGl0eSBraXRhcGRhbiBrYcOnIGFkZXQgc3RvxJ9hIGVrbGVuZWNla1xuICAgICAqL1xuICAgIHB1YmxpYyBhZGRTdG9jayhpc2JuOiBzdHJpbmcsIHNoZWxmTnVtYmVyOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgbGV0IG5ld1N0b2NrID0gbmV3IFN0b2NrKGlzYm4sIHF1YW50aXR5LCBzaGVsZk51bWJlcik7XG4gICAgICAgICAgICB0aGlzLnN0b2NrTGlzdC5wdXNoKG5ld1N0b2NrKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBLaXRhcCB6YXRlbiBla2xpLCBoYWxpaGF6xLFyZGEgdmFyLCBkYWhhIHNvbnJhIHllbmkga2l0YXBsYXIgZ2VsZGksc3RvayBhcnTEsXJtYSBpxZ9sZW1pLFxuICAgICAqIEBwYXJhbSBpc2JuIHN0b2sgZWtsZW5lY2VrIG9sYW4ga2l0YWLEsW4gaXNibiBudW1hcmFzxLFcbiAgICAgKiBAcGFyYW0gcXVhbnRpdHkgc3RvayBla2xlbmVjZWsgb2xhbiBraXRhYsSxbiBhZGVkaVxuICAgICAqIEByZXR1cm5zIGnFn2xlbSBnZXLDp2VrbGXFn21lc2kgZHVydW11bmRhIHRydWUsIGRpxJ9lciBkdXJ1bWRhIGZhbHNlIGTDtm5lclxuICAgICAqL1xuICAgIHB1YmxpYyBpbmNyZWFzZVN0b2NrKGlzYm46IHN0cmluZywgcXVhbnRpdHk6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgc3RvY2sgPSB0aGlzLmdldFN0b2NrKGlzYm4pO1xuICAgICAgICBpZiAoc3RvY2spIHtcbiAgICAgICAgICAgIHN0b2NrLnF1YW50aXR5ID0gKHN0b2NrLnF1YW50aXR5ICsgcXVhbnRpdHkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzdG9jayBuZXNuZXNpbmkgZ2VyaSBkw7ZuZMO8csO8clxuICAgICAqIEBwYXJhbSBpc2JuIHN0b2NrIG5lc25lc2kgZ2V0aXJpbGVjZWsgb2xhbiBuZXNuZW5pbiBpc2JuIG5vc3UsXG4gICAgICogQHJldHVybnMgZGIgb2xhbiBzdG9jayBuZXNuZW5zaSBnZXJpIGTDtm5lciwgZGIgZGUgeW9rIGlzZSB0aHJvdyBpbGUgaGF0YSBmxLFybGF0xLFybMSxclxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTdG9jayhpc2JuOiBzdHJpbmcpIHtcbiAgICAgICAgbGV0IHN0b2NrID0gdGhpcy5zdG9ja0xpc3QuZmluZChzID0+IHMuaXNibiA9PT0gaXNibik7XG4gICAgICAgIGlmIChzdG9jaykge1xuICAgICAgICAgICAgcmV0dXJuIHN0b2NrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldFN0b2NrUXVhbnRpdHkoaXNibjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHM6IFN0b2NrID0gdGhpcy5nZXRTdG9jayhpc2JuKSE7XG5cbiAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICAgIHJldHVybiBzLnF1YW50aXR5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFxJ9lciBzdG9rIG5lc25lc2kgeW9rIGlzZSBzdG9rIG5lc25lc2ksIGJlbGlydGlsZW4gYWRldCBrYWRhciBzdG9rIGJpbGdpc2kgaWxlIGJlcmFiZXIgZWtsZW5peW9yLlxuICAgICAqIMSwxZ90ZSBidSBvbHXFn3R1cm1hL2NyZWF0ZSBpxZ9sZW1pIGJ1cmFkYSB5YXDEsWzEsXlvci5cbiAgICAgKiBAcGFyYW0gcyBpbmRleC50cyBkb3N5YXPEsW5kYW4gZ2VsZW4gc3RvayBuZXNuZXNpXG4gICAgICovXG4gICAgYXN5bmMgYWRkU3RvY2tNb2NrKHM6IFN0b2NrKTogUHJvbWlzZTxCb29sZWFuIHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuc3RvY2tBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGlzYm46IHMuaXNibixcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IHMucXVhbnRpdHksXG4gICAgICAgICAgICAgICAgICAgIHNoZWxmTnVtYmVyOiBzLnNoZWxmTnVtYmVyXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyArIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0b2sgZWtsZW5pcmtlbiBlxJ9lciBzdG9rIG5lc25lc2kgZGFoYSDDtm5jZWRlbiB2YXIgaXNlLCBzdG9rIGFydMSxcsSxbcSxbsSxIHB1dCBpbGUgeWFwYWNhxJ/EsXpcbiAgICAgKiBAcGFyYW0gcyBpbmRleC50cyBkb3N5YXPEsW5kYW4gZ2VsZW4gc3RvayBuZXNuZXNpXG4gICAgICovXG4gICAgYXN5bmMgaW5jcmVhc2VTdG9ja01vY2soczogU3RvY2spIHtcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnN0b2NrQXBpICsgXCIvXCIgKyBzLmlzYm4sIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaXNibjogcy5pc2JuLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogcy5xdWFudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgc2hlbGZOdW1iZXI6IHMuc2hlbGZOdW1iZXJcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInRoaXMiLCJfYm9va3MiLCJBcnJheSIsIl9zdG9ja3MiLCJfY3VzdG9tZXJzIiwiX3NhbGVzIiwiX3JlbnRzIiwiX2Jvb2tTcGVjaWZpY2F0aW9ucyIsIl9jYW5jZWxzIiwiX3NhbGVDYXJ0IiwiU2FsZUNhcnQiLCJfcmVudENhcnQiLCJSZW50Q2FydCIsImdldEJvb2tzTGlzdCIsImdldFN0b2Nrc0xpc3QiLCJnZXRDdXN0b21lcnNMaXN0IiwiZ2V0U2FsZXNMaXN0IiwiZ2V0UmVudHMiLCJnZXRCb29rU3BlY2lmaWNhdGlvbnMiLCJnZXRDYW5jYWxlZFNhbGVzIiwiZ2V0U2FsZUNhcnQiLCJnZXRSZW50Q2FydCIsInNldFNhbGVDYXJ0IiwidmFsdWUiLCJzZXRSZW50Q2FydCIsImlzYm4iLCJwcmljZSIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJfaXNibiIsIl9wcmljZSIsIl9zdGFydERhdGUiLCJfZW5kRGF0ZSIsIm5hbWUiLCJhdXRob3IiLCJwdWJsaXNoWWVhciIsInBhZ2VzIiwiYm9va1NwZWMiLCJfbmFtZSIsIl9hdXRob3IiLCJfcHVibGlzaFllYXIiLCJfcGFnZXMiLCJfYm9va1NwZWMiLCJjYW5jZWxUeXBlIiwicmVmdW5kIiwiY2FuY2VsZWREYXRlVGltZSIsIl9jYW5jZWxUeXBlIiwiX3JlZnVuZCIsIl9jYW5jZWxlZERhdGVUaW1lIiwiaWQiLCJzdXJOYW1lIiwicGhvbmVOdW1iZXIiLCJfaWQiLCJfc3VyTmFtZSIsIl9waG9uZU51bWJlciIsImJvb2tBbmRRdWFudGl0eU1hcCIsIk1hcCIsIlJlbnQiLCJTYWxlIiwib3BlcmF0aW9uRGF0ZVRpbWUiLCJjdXN0b21lcklkIiwib3BlcmF0aW9uTnVtYmVyIiwidG90YWwiLCJyZWZ1bmREYXRlIiwic3VwZXIiLCJfcmVmdW5kRGF0ZSIsIl9ib29rQW5kUXVhbnRpdHlNYXAiLCJfb3BlcmF0aW9uRGF0ZVRpbWUiLCJfY3VzdG9tZXJJZCIsIl9vcGVyYXRpb25OdW1iZXIiLCJfdG90YWwiLCJxdWFudGl0eSIsInNoZWxmTnVtYmVyIiwiX3F1YW50aXR5IiwiX3NoZWxmTnVtYmVyIiwic2hvd0FuZEhpZGUiLCJidG5JZCIsImVsZW1lbnRJZCIsImVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0eWxlIiwiZGlzcGxheSIsImRiIiwiRGF0YUJhc2UiLCJib29rU2VydmljZSIsIkJvb2tTZXJ2aWNlIiwiY3VzdG9tZXJTZXJ2aWNlIiwiQ3VzdG9tZXJTZXJ2aWNlIiwiY2FuY2VsU2VydmljZSIsIkNhbmNlbFNlcnZpY2UiLCJyZW50U2VydmljZSIsIlJlbnRTZXJ2aWNlIiwic2FsZVNlcnZpY2UiLCJTYWxlU2VydmljZSIsInN0b2NrU2VydmljZSIsIlN0b2NrU2VydmljZSIsImNvbnNvbGUiLCJsb2ciLCJhZGRDdXN0b21lciIsIkN1c3RvbWVyIiwiYWRkU3RvY2siLCJpbml0aWFsaXplRGF0YU1vY2siLCJpbml0aWxpYXplRGF0YSIsImFkZEJvb2tGb3JtIiwib25zdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwidGl0bGUiLCJnZXQiLCJEYXRlIiwibWF0Y2giLCJCb29rU3BlY2lmaWNhdGlvbiIsImJvb2siLCJCb29rIiwiYWRkQm9va01vY2siLCJhbGVydCIsInJlc2V0IiwiYWRkU3RvY2tGb3JtIiwicXVhbnR0aXkiLCJzdG9jayIsIlN0b2NrIiwiYm9va0xpc3QiLCJzb21lIiwiYiIsImFkZFN0b2NrTW9jayIsImFkZEN1c3RvbWVyRm9ybSIsInN1cm5hbWUiLCJjdXN0b21lciIsImdldE5ld0N1c3RvbWVySWQiLCJhZGRDdXN0b21lck1vY2siLCJzYWxlQm9va0Zvcm0iLCJnZXRCb29rIiwicGFyc2VJbnQiLCJpc1ZhbGlkQ3VzdG9tZXIiLCJnZXRTdG9jayIsImFkZEJvb2tUb0NhcnQiLCJlcnJvciIsInNhbGVDYXJ0Iiwic2l6ZSIsImNhcnRUb1NhbGUiLCJsaXN0Qm9va3MiLCJjYW5jZWxTYWxlRm9ybSIsImJxIiwic2V0IiwiYSIsInNhbGVMaXN0IiwicHVzaCIsInNhbGVOdW1iZXIiLCJzYWxlIiwiZ2V0U2FsZSIsImNhbmNlbFNhbGUiLCJDYW5jZWwiLCJjYW5jZWxTYWxlTW9jayIsImNhbmNlbFJlbnRGb3JtIiwickRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInJlbnRMaXN0IiwicmVudE51bWJlciIsImdldFJlbnQiLCJyZW50Qm9va0Zvcm0iLCJyZW50Q2FydCIsImNhcnRUb1JlbnQiLCJib29rU3BlY0xpc3QiLCJib29rQXBpIiwiX2Jvb2tMaXN0IiwiX2Jvb2tTcGVjTGlzdCIsImZpbmQiLCJhZGRCb29rIiwibmV3Qm9vayIsIkV4Y2VwdGlvbiIsImlzVmFsaWRCb29rIiwiaW5jbHVkZXMiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkFjY2VwdCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJyZXN1bHQiLCJqc29uIiwiZ2V0UmVzdWx0IiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwibGlzdEJvb2tzRGl2Iiwicm93IiwiY29sdW1uIiwibGFzdENoaWxkIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJyZW1vdmVDaGlsZCIsImZvckVhY2giLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwidGV4dENvbnRlbnQiLCJ0b1N0cmluZyIsImFwcGVuZENoaWxkIiwiZ2V0U3RvY2tRdWFudGl0eSIsImJvZHkiLCJjYW5jZWxsZWRMaXN0IiwiY2FuY2VsU2FsZUFwaSIsImNhbmNlbFJlbnRBcGkiLCJfY2FuY2VsbGVkTGlzdCIsImNhbGN1bGF0ZURpZmZIb3VycyIsImQxIiwiZDIiLCJkaWZmTWlsaXMiLCJnZXRUaW1lIiwiTWF0aCIsImZsb29yIiwiY2FuY2VsIiwiY2FsY3VsYXRlQ2FuY2VsU2FsZVJlZnVuZCIsImNhbmNlbFJlbnQiLCJjYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kIiwiY2FuY2VsUmVudE1vY2siLCJjdXN0b21lckxpc3QiLCJjdXN0b21lckFwaSIsIl9jdXN0b21lckxpc3QiLCJuZXdDdXN0b21lciIsImxhc3RDdXN0b21lcklkIiwiYXQiLCJnZXRDdXN0b21lckluZm8iLCJyZW50QXBpIiwiX3JlbnRMaXN0IiwicmVmdW5kUGVyY2VudCIsImFkZFJlbnQiLCJyZW50IiwiY2FsY3VsYXRlVG90YWwiLCJzdWJUb3RhbCIsImVudHJ5IiwiZ2VuZXJhdGVSZW50TnVtYmVyIiwidG9kYXkiLCJnZXREYXkiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsImNhbGN1bGF0ZVJlZnVuZCIsInMiLCJ1cGRhdGVSZW50Q2FydCIsInN1YlRvdGFsU3BhbiIsImluZGV4IiwiZW50cmllcyIsInQiLCJxIiwiaW5jcmVhc2VTdG9jayIsImFkZFJlbnRNb2NrIiwiciIsImJvb2tBbmRRdWFudGl0eSIsIm1lc3NhZ2UiLCJzYWxlQXBpIiwiX3NhbGVMaXN0IiwiYWRkU2FsZSIsImdlbmVyYXRlU2FsZU51bWJlciIsInJlbW92ZVNhbGUiLCJpbmRleE9mIiwic3BsaWNlIiwidXBkYXRlU2FsZUNhcnQiLCJhZGRTYWxlTW9jayIsInN0b2NrTGlzdCIsInN0b2NrQXBpIiwiX3N0b2NrTGlzdCIsIm5ld1N0b2NrIiwiaW5jcmVhc2VTdG9ja01vY2siLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiXSwic291cmNlUm9vdCI6IiJ9