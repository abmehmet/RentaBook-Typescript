(()=>{"use strict";var e={221:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataBase=void 0;const n=o(758),r=o(51);t.DataBase=class{constructor(){this._books=new Array,this._stocks=new Array,this._customers=new Array,this._sales=new Array,this._rents=new Array,this._bookSpecifications=new Array,this._cancels=new Array,this._saleCart=new r.SaleCart,this._rentCart=new n.RentCart}get getBooksList(){return this._books}get getStocksList(){return this._stocks}get getCustomersList(){return this._customers}get getSalesList(){return this._sales}get getRents(){return this._rents}get getBookSpecifications(){return this._bookSpecifications}get getCancaledSales(){return this._cancels}get getSaleCart(){return this._saleCart}get getRentCart(){return this._rentCart}set setSaleCart(e){this._saleCart=e}set setRentCart(e){this._rentCart=e}}},39:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BookSpecification=void 0,t.BookSpecification=class{constructor(e,t,o,n){this._isbn=e,this._price=t,this._startDate=o,this._endDate=n}get isbn(){return this._isbn}get price(){return this._price}get startDate(){return this._startDate}get endDate(){return this._endDate}set isbn(e){this._isbn=e}set price(e){this._price=e}set startDate(e){this._startDate=e}set endDate(e){this._endDate=e}}},934:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Book=void 0,t.Book=class{constructor(e,t,o,n,r,a){this._name=t,this._author=o,this._isbn=e,this._publishYear=n,this._pages=r,this._bookSpecification=a}get isbn(){return this._isbn}get name(){return this._name}get author(){return this._author}get publishYear(){return this._publishYear}get pages(){return this._pages}get bookSpecification(){return this._bookSpecification}set isbn(e){this._isbn=e}set name(e){this._name=e}set author(e){this._author=e}set publishYear(e){this._publishYear=e}set pages(e){this._pages=e}set bookSpecification(e){this._bookSpecification=e}}},378:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cancel=void 0,t.Cancel=class{constructor(e,t,o){this._cancelType=e,this._refund=t,this._canceledDateTime=o}get cancelType(){return this._cancelType}get refund(){return this._refund}get canceledDateTime(){return this._canceledDateTime}set cancelType(e){this._cancelType=e}set refund(e){this._refund=e}set canceledDateTime(e){this._canceledDateTime=e}}},916:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Customer=void 0,t.Customer=class{constructor(e,t,o){this._name=e,this._surName=t,this._phoneNumber=o}get name(){return this._name}get surName(){return this._surName}get phoneNumber(){return this._phoneNumber}set name(e){this._name=e}set surName(e){this._surName=e}set phoneNumber(e){this._phoneNumber=e}}},767:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrderBookItems=void 0,t.OrderBookItems=class{constructor(e,t){this._book=e,this._quantity=t}get book(){return this._book}get quantity(){return this._quantity}set book(e){this._book=e}set quantity(e){this._quantity=e}toJSON(){return{book:this._book,quantity:this._quantity}}}},758:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RentCart=void 0,t.RentCart=class{constructor(){this.orderBookItems=new Array}}},961:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Rent=void 0;const n=o(354);class r extends n.Sale{constructor(e,t,o,n,r,a,i){super(e,o,t,n,r),this._refundDate=a,this._refund=i}get refundDate(){return this._refundDate}get refund(){return this._refund}set refundDate(e){this._refundDate=e}set refund(e){this._refund=e}}t.Rent=r},51:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SaleCart=void 0,t.SaleCart=class{constructor(){this.orderBookItems=new Array}}},354:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Sale=void 0,t.Sale=class{constructor(e,t,o,n,r){this._orderBookItems=e,this._customerId=t,this._operationDateTime=o,this._operationNumber=n,this._total=r}get orderBookItems(){return this._orderBookItems}get customerId(){return this._customerId}get operationDateTime(){return this._operationDateTime}get operationNumber(){return this._operationNumber}get total(){return this._total}set orderBookItems(e){this._orderBookItems=e}set customerId(e){this._customerId=e}set operationDateTime(e){this._operationDateTime=e}set operationNumber(e){this._operationNumber=e}set total(e){this._total=e}}},72:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Stock=void 0,t.Stock=class{constructor(e,t,o){this._isbn=e,this._quantity=t,this._shelfNumber=o}get isbn(){return this._isbn}get quantity(){return this._quantity}get shelfNumber(){return this._shelfNumber}set isbn(e){this._isbn=e}set quantity(e){this._quantity=e}set shelfNumber(e){this._shelfNumber=e}}},607:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.stockService=t.saleService=t.rentService=t.cancelService=t.customerService=t.bookService=void 0;const r=o(221),a=o(934),i=o(39),s=o(378),c=o(916),l=o(961),u=o(354),d=o(767),h=o(72),m=o(946),p=o(943),k=o(709),f=o(148),S=o(478),g=o(214);function b(e,t){const o=document.getElementById(t),n=document.getElementById(e);o&&n&&n.addEventListener("click",(()=>{"none"===o.style.display?o.style.display="block":o.style.display="none"}))}var y;y=new r.DataBase,t.bookService=new m.BookService(y.getBooksList,y.getBookSpecifications),t.customerService=new k.CustomerService(y.getCustomersList),t.cancelService=new p.CancelService(y.getCancaledSales),t.rentService=new f.RentService(y.getRents,y.getRentCart),t.saleService=new S.SaleService(y.getSalesList,y.getSaleCart),t.stockService=new g.StockService(y.getStocksList),console.log("Services intiliazed."),t.customerService.addCustomer(new c.Customer("","","")),t.customerService.addCustomer(new c.Customer("","","")),t.stockService.addStock("123-45","A45-52",10),t.stockService.addStock("123-46","A45-52",10),function(){n(this,void 0,void 0,(function*(){yield t.bookService.initializeDataMock()}))}(),b("addBookMenuItem","addBookSection"),b("showBooksMenuItem","listBooksSection"),b("addCustomerMenuItem","addCustomerSection"),b("addStockMenuItem","addStockSection"),b("saleBookMenuItem","saleBookSection"),b("rentBookMenuItem","rentBookSection"),b("cancelSaleMenuItem","cancelSaleSection"),b("cancelRentMenuItem","cancelRentSection"),b("refundBookMenuItem","refundBookSection"),b("rentNow","rentBookSection");const v=document.getElementById("add-book-form");null!=v&&(v.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(v),n=o.get("bookTitle"),r=o.get("bookAuthor"),s=o.get("bookIsbn"),c=o.get("bookPublishYear"),l=o.get("bookPages"),u=o.get("bookPrice"),d=new Date,h=new Date("Dec 31, 9999 23:59:59");n.match("");const m=new i.BookSpecification(s,u,d,h),p=new a.Book(s,n,r,c,l,m);return(yield t.bookService.addBookMock(p))?(alert(p.isbn+" numaralı kitap Ekleme İşlemi Başarı İle Tamamlanmıştır."),v.reset()):alert(p.isbn+" numaralı kitap Ekleme İşlemi Sırasında Bir Hata oluştu."),!1})));const _=document.getElementById("add-stock-form");_&&(_.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(_),n=o.get("bookIsbnForAddStock"),r=o.get("stockQuantity"),a=o.get("shelfNumber"),i=new h.Stock(n,r,a);return t.bookService.bookList.some((e=>e.isbn==n))?(yield t.stockService.addStockMock(i))&&alert(n+" isbn numaralı kitaptan, "+r+" kadar sisteme stok eklenmiştir."):alert("Stok eklenmeye çalışılan kitap, kayıtlı değildir. Lütfen önce kitap ekleyiniz"),_.reset(),!1})));const C=document.getElementById("add-customer-form");C&&(C.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(C),n=o.get("customerName"),r=o.get("customerSurname"),a=o.get("customerPhoneNumber"),i=new c.Customer(n,r,a);return(yield t.customerService.addCustomerMock(i))?(alert("Müşteri Ekleme İşlemi Başarı İle Tamamlanmıştır. "),C.reset()):alert("Müşteri Ekleme İşlemi Sırasında bir hata ile karşılıldı. "),!1})));const w=document.getElementById("sale-book-form");w&&(w.onsubmit=()=>{const e=new FormData(w),o=e.get("isbnForSale"),n=t.bookService.getBook(o),r=parseInt(e.get("customerIdForSale")),a=parseInt(e.get("quantityForSale")),i=t.stockService.getStock(o);try{return n?i?i.quantity>=a?t.saleService.addBookToCart(n,a,r):alert(a+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${o} numaralı kitabın stoğu mevcut değildir.`):alert(o+" numaralı kitap yoktur."),w.reset(),!1}catch(e){alert(e)}}),document.getElementById("btnSale").addEventListener("click",(()=>{0===t.saleService.saleCart.orderBookItems.length?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):t.saleService.cartToSale()})),document.getElementById("showBooksMenuItem").addEventListener("click",(()=>{t.bookService.listBooks()}));const B=document.getElementById("cancel-sale-form");B&&(B.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();let o=new Array;o.push(new d.OrderBookItems(t.bookService.getBook("123-45"),3));let n=new u.Sale(o,1,new Date,"S021122163045",123);t.saleService.saleList.push(n);const r=new FormData(B).get("saleNumberforCancel");let a=t.saleService.getSale(r);if(a){let e=new s.Cancel(a,a.total,new Date);(yield t.cancelService.cancelSaleMock(e))?alert(a.operationNumber+" numaralı satış iptal edilmiştir."):alert(a.operationNumber+" numaralı satış iptal edilirken hata meydana geldi.")}else alert(r+" numaralı satış bulunamamıştır. Tekrar deneyiniz.")})));const D=document.getElementById("cancel-rent-form");D&&(D.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();let o=new Array;o.push(new d.OrderBookItems(t.bookService.getBook("123-45"),3));let n=new Date;n.setDate(n.getDate()+14);let r=new l.Rent(o,new Date,1,"R021122163045",123,n,200);t.rentService.rentList.push(r);const a=new FormData(D).get("rentNumberforCancel");let i=t.rentService.getRent(a);if(i){let e=new s.Cancel(i,i.total,new Date);(yield t.cancelService.cancelRentMock(e))?alert(i.operationNumber+" numaralı kiralama iptal edilmiştir."):alert(i.operationNumber+" numaralı kiralama iptal edilirken hata meydana geldi.")}else alert(a+" numaralı kiralma bulunamamıştır. Tekrar deneyiniz.")})));const I=document.getElementById("rent-book-form");I&&(I.onsubmit=()=>{const e=new FormData(I),o=e.get("isbnForRent"),n=t.bookService.getBook(o),r=parseInt(e.get("customerIdForRent")),a=parseInt(e.get("quantityForRent")),i=t.stockService.getStock(o);try{return n?i?i.quantity>=a?t.rentService.addBookToCart(n,a,r):alert(a+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${o} numaralı kitabın stoğu mevcut değildir.`):alert(o+" numaralı kitap yoktur."),I.reset(),!1}catch(e){alert(e)}}),document.getElementById("btnRent").addEventListener("click",(()=>{0===t.rentService.rentCart.orderBookItems.length?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):t.rentService.cartToRent()}));const N=document.getElementById("refund-book-form");N&&(N.onsubmit=e=>n(void 0,void 0,void 0,(function*(){let o=new Array;o.push(new d.OrderBookItems(t.bookService.getBook("123-45"),3));let n=new Date;n.setDate(n.getDate()+23);let r=new l.Rent(o,new Date,1,"R021122163045",123,n,0);r.refund=t.rentService.calculateRefundAmount(r),t.rentService.rentList.push(r),e.preventDefault();const a=new FormData(N).get("rentNumberforRefund");let i=t.rentService.getRent(a);if(i){let e=yield t.rentService.refundRentMock(i);e?(alert(i.operationNumber+" numaralı kiralama geri alınmıştır."),alert("Geri ödeme miktarı:"+e+" ₺ .")):alert(i.operationNumber+" numaralı kiralama iptal edilirken hata meydana geldi.")}else alert(a+" numaralı kiralama bulunamamıştır. Tekrar deneyiniz.")})))},946:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BookService=void 0;const r=o(607);t.BookService=class{constructor(e,t){this.bookApi="http://localhost:3002/api/v1/books",this._bookList=e,this._bookSpecification=t}get bookList(){return this._bookList}get bookSpecification(){return this._bookSpecification}set bookList(e){this._bookList=e}set bookSpecification(e){this._bookSpecification=e}getBook(e){return this.bookList.find((t=>t.isbn===e))}addBook(e){try{this.bookList.push(e),this.bookSpecification.push(e.bookSpecification)}catch(e){console.log("Kitap eklenirken bir hata meydana geldi.")}}isValidBook(e){const t=this.getBook(e);return this.bookList.includes(t)}initializeDataMock(){return n(this,void 0,void 0,(function*(){try{const e=yield fetch(this.bookApi,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const t=yield e.json(),o=JSON.parse(JSON.stringify(t,null,4));this.bookList=o}catch(e){console.error(e)}}))}listBooks(){const e=document.getElementById("listBooks");if(e){let t,o;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);this.bookList.forEach((n=>{t=document.createElement("div"),t.className="row-list-book",o=document.createElement("div"),o.className="column-list-book",o.textContent=n.isbn.toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=n.name.toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=n.author.toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=r.stockService.getStockQuantity(n.isbn).toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=n.bookSpecification.price.toString()+" ₺",t.appendChild(o),e.appendChild(t)}))}}addBookMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.bookApi,{method:"POST",body:JSON.stringify({isbn:e.isbn,name:e.name,author:e.author,pages:e.pages,publishYear:e.publishYear,bookSpecification:{isbn:e.bookSpecification.isbn,price:e.bookSpecification.price,startDate:e.bookSpecification.startDate,endDate:e.bookSpecification.endDate}}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log("Rest servisinden dönen cevap =>"),console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},943:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelService=void 0,t.CancelService=class{constructor(e){this.cancelSaleApi="http://localhost:3002/api/v1/cancelSale",this.cancelRentApi="http://localhost:3002/api/v1/cancelRent",this._cancelledList=e}get cancelledList(){return this._cancelledList}set cancelledList(e){this._cancelledList=e}calculateDiffHours(e,t){let o=e.getTime()-t.getTime();return Math.floor(o/1e3/60/60)}cancelSale(e){let t=this.calculateCancelSaleRefund(e);e.refund=t,this.cancelledList.push(e)}calculateCancelSaleRefund(e){let t;return t=this.calculateDiffHours(e.canceledDateTime,e.cancelType.operationDateTime)>24?.75*e.cancelType.total:e.cancelType.total,t}cancelSaleMock(e){return o(this,void 0,void 0,(function*(){let t=this.calculateCancelSaleRefund(e);e.refund=t;try{const t=yield fetch(this.cancelSaleApi,{method:"POST",body:JSON.stringify({sale:e.cancelType,refund:e.refund,canceledDateTime:e.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}cancelRent(e){let t=this.calculateCancelRentRefund(e);e.refund=t,this.cancelledList.push(e)}calculateCancelRentRefund(e){let t;return t=this.calculateDiffHours(e.canceledDateTime,e.cancelType.operationDateTime)>24?.75*e.cancelType.total:e.cancelType.total,t}cancelRentMock(e){return o(this,void 0,void 0,(function*(){let t=this.calculateCancelRentRefund(e);e.refund=t;try{const t=yield fetch(this.cancelRentApi,{method:"POST",body:JSON.stringify({rent:e.cancelType,refund:e.refund,canceledDateTime:e.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},709:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerService=void 0,t.CustomerService=class{constructor(e){this.customerApi="http://localhost:3002/api/v1/customers",this._customerList=e}get customerList(){return this._customerList}set customerList(e){this._customerList=e}addCustomer(e){this.customerList.push(e)}addCustomerMock(e){return o(this,void 0,void 0,(function*(){try{const t=yield fetch(this.customerApi,{method:"POST",body:JSON.stringify({name:e.name,surName:e.surName,phoneNumber:e.phoneNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log("Rest servisinden dönen cevap =>"),console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},148:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RentService=void 0;const r=o(607),a=o(961),i=o(758),s=o(767);t.RentService=class{constructor(e,t){this.rentApi="http://localhost:3002/api/v1/rents",this._rentList=e,this.refundPercent=.75,this._rentCart=t}get rentList(){return this._rentList}set rentList(e){this._rentList=e}get rentCart(){return this._rentCart}set rentCart(e){this._rentCart=e}addRent(e){this.rentList.push(e)}calculateTotal(e){let t=0;for(let o of e.orderBookItems)t+=o.book.bookSpecification.price*o.quantity;return t}generateRentNumber(e){let t=new Date;return"R"+t.getDay().toString()+t.getMonth().toString()+t.getFullYear().toString()+t.getHours().toString()+t.getMinutes().toString()+t.getSeconds().toString()+e.toString()}calculateDiffHours(e,t){let o=e.getTime()-t.getTime();return Math.floor(o/1e3/60/60)}calculateRefund(e){e.refund=e.total*this.refundPercent}calculateRefundAmount(e){let t,o=this.calculateDiffHours(e.refundDate,e.operationDateTime)/24;if(o<=14)t=.75*e.total;else if(o<=24){let n=.75-.05*(o-14);t=e.total*n}else t=.25*e.total;return t}getRent(e){return this.rentList.find((t=>t.operationNumber===e))}addBookToCart(e,t,o){if(0===this.rentCart.orderBookItems.length)this.rentCart.customerId=o;else if(this.rentCart.orderBookItems.length>0&&this.rentCart.customerId!==o)return alert("Farklı müşteriye kitap kiralanmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;this.rentCart.orderBookItems.push(new s.OrderBookItems(e,t)),this.updateRentCart()}updateRentCart(){const e=document.getElementById("rentCart"),t=document.getElementById("totalRentAmountTl");if(e){let o,n,r=0;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.textContent="";for(let e=0;e<this.rentCart.orderBookItems.length;e++){o=document.createElement("div"),o.className="rent-cart-row";for(let e of this.rentCart.orderBookItems)n=document.createElement("div"),n.className="rent-cart-column",n.textContent=this.rentCart.customerId.toString(),o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=e.book.name,o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=e.quantity.toString(),o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=(e.book.bookSpecification.price*e.quantity).toString(),o.appendChild(n)}if(o&&t){for(let e of this.rentCart.orderBookItems)r+=e.book.bookSpecification.price*e.quantity;e.appendChild(o),t.textContent=r.toString()+" TL"}}}cartToRent(){let e=this.rentCart,t=new a.Rent;t.orderBookItems=e.orderBookItems,t.customerId=e.customerId,t.operationNumber=this.generateRentNumber(e.customerId),t.operationDateTime=new Date,t.total=this.calculateTotal(t);let o=new Date;o.setDate(o.getDate()+14),t.refundDate=o,this.calculateRefund(t);for(let e of t.orderBookItems)r.stockService.increaseStock(e.book.isbn,-e.quantity);this.rentCart=new i.RentCart,this.updateRentCart(),this.addRentMock(t)}addRentMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.rentApi,{method:"POST",body:JSON.stringify({orderBookItems:Array.from(e.orderBookItems),customerId:e.customerId,operationDateTime:e.operationDateTime,operationNumber:e.operationNumber,total:e.total,refundDate:e.refundDate,refund:e.refund}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!t.ok)throw new Error(`Hata oluştu, hata kodu: ${t.status} `);{const o=yield t.json();console.log("Rest apidan dönen cevap:\n"),console.log(o),alert("Kitap kiralama işlemi başarıyla gerçekleşmiştir."),alert("Fişinizi kaybetneyiniz. Fiş numaranız: "+e.operationNumber)}}catch(e){console.log("Hata Oluştu."),alert("Kitap kiralama işlemi sırasında bir hata oluştu. Lütfen tekrar deneyiniz.")}}))}refundRentMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.rentApi+"/"+e.operationNumber,{method:"PATCH",body:JSON.stringify({refundDate:e.refundDate,refund:e.refund}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const o=yield t.json();return console.log(o),e.refund}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},478:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SaleService=void 0;const r=o(607),a=o(354),i=o(767),s=o(51);t.SaleService=class{constructor(e,t){this.saleApi="http://localhost:3002/api/v1/sales",this._saleList=e,this._saleCart=t}get saleList(){return this._saleList}set saleList(e){this._saleList=e}get saleCart(){return this._saleCart}set saleCart(e){this._saleCart=e}addSale(e){this.saleList.push(e)}calculateTotal(e){let t=0;for(let o of e.orderBookItems)t+=o.book.bookSpecification.price*o.quantity;return t}generateSaleNumber(e){let t=new Date;return"S"+t.getDay().toString()+t.getMonth().toString()+t.getFullYear().toString()+t.getHours().toString()+t.getMinutes().toString()+t.getSeconds().toString()+e.toString()}getSale(e){return this.saleList.find((t=>t.operationNumber===e))}removeSale(e){let t=this.saleList.indexOf(e);this.saleList.splice(t,1)}addBookToCart(e,t,o){if(0===this.saleCart.orderBookItems.length)this.saleCart.customerId=o;else if(this.saleCart.orderBookItems.length>0&&this.saleCart.customerId!==o)return alert("Farklı müşteriye kitap satılmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;let n=new i.OrderBookItems(e,t);this.saleCart.orderBookItems.push(n),this.updateSaleCart()}updateSaleCart(){const e=document.getElementById("saleCart"),t=document.getElementById("totalSaleAmountTl");if(e){let o,n,r=0;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.textContent="";for(let e=0;e<this.saleCart.orderBookItems.length;e++){o=document.createElement("div"),o.className="sale-cart-row";for(let e of this.saleCart.orderBookItems)n=document.createElement("div"),n.className="sale-cart-column",n.textContent=this.saleCart.customerId.toString(),o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=e.book.name,o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=e.quantity.toString(),o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=(e.book.bookSpecification.price*e.quantity).toString(),o.appendChild(n)}if(o&&t){for(let e of this.saleCart.orderBookItems)r+=e.book.bookSpecification.price*e.quantity;e.appendChild(o),t.textContent=r.toString()+" TL"}}}cartToSale(){let e=this.saleCart,t=new a.Sale;t.orderBookItems=e.orderBookItems,t.customerId=e.customerId,t.operationNumber=this.generateSaleNumber(e.customerId),t.operationDateTime=new Date,t.total=this.calculateTotal(t);for(let e of t.orderBookItems)r.stockService.increaseStock(e.book.isbn,-e.quantity);let o=this.addSaleMock(t);return this.saleCart=new s.SaleCart,this.updateSaleCart(),o}addSaleMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.saleApi,{method:"POST",body:JSON.stringify({orderBookItems:Array.from(e.orderBookItems),customerId:e.customerId,operationDateTime:e.operationDateTime,operationNumber:e.operationNumber,total:e.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(console.log(t),t.ok){const o=yield t.json();return console.log("Rest apidan dönen cevap:\n"),console.log(o),alert("Kitap satış işlemi başarıyla gerçekleşmiştir."),alert("Fişinizi kaybetmeyiniz. Fiş Numarası: "+e.operationNumber),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},214:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StockService=void 0;const r=o(72);t.StockService=class{constructor(e){this.stockApi="http://localhost:3002/api/stocks",this._stockList=e}get stockList(){return this._stockList}set stockList(e){this._stockList=e}addStock(e,t,o){try{let n=new r.Stock(e,o,t);return this.stockList.push(n),!0}catch(e){return console.error(e),!1}}increaseStock(e,t){let o=this.getStock(e);return!!o&&(o.quantity=o.quantity+t,!0)}getStock(e){let t=this.stockList.find((t=>t.isbn===e));if(t)return t}getStockQuantity(e){let t=this.getStock(e);return t?t.quantity:0}addStockMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.stockApi,{method:"POST",body:JSON.stringify({isbn:e.isbn,quantity:e.quantity,shelfNumber:e.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu."+e)}}))}increaseStockMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.stockApi+"/"+e.isbn,{method:"PUT",body:JSON.stringify({isbn:e.isbn,quantity:e.quantity,shelfNumber:e.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!t.ok)throw new Error(`Hata oluştu, hata kodu: ${t.status} `);const o=yield t.json();console.log(o),console.log(t.status)}catch(e){console.log("Hata Oluştu.")}}))}}}},t={};!function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SkEySyxFQUEyQixDQUFDLEdBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLENBQUMsR0FPWCxPQUhBRSxFQUFvQkwsR0FBVU0sS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0osR0FHcEVLLEVBQU9ELE9BQ2YsQ0NuQjBCSixDQUFvQixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZGIvZGF0YWJhc2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL2Jvb2stc3BlY2lmaWNhdGlvbi50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vYm9vay50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vY2FuY2VsLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9jdXN0b21lci50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vb3JkZXItYm9vay1pdGVtLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9yZW50LWNhcnQudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL3JlbnQudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL3NhbGUtY2FydC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vc2FsZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vc3RvY2sudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvc2VydmljZS9ib29rLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvc2VydmljZS9jYW5jZWwtc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL2N1c3RvbWVyLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvc2VydmljZS9yZW50LXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvc2VydmljZS9zYWxlLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvc2VydmljZS9zdG9jay1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rXCI7XG5pbXBvcnQgeyBCb29rU3BlY2lmaWNhdGlvbiB9IGZyb20gXCIuLi9kb21haW4vYm9vay1zcGVjaWZpY2F0aW9uXCI7XG5pbXBvcnQgeyBDYW5jZWwgfSBmcm9tIFwiLi4vZG9tYWluL2NhbmNlbFwiO1xuaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi4vZG9tYWluL2N1c3RvbWVyXCI7XG5pbXBvcnQgeyBSZW50IH0gZnJvbSBcIi4uL2RvbWFpbi9yZW50XCI7XG5pbXBvcnQgeyBSZW50Q2FydCB9IGZyb20gXCIuLi9kb21haW4vcmVudC1jYXJ0XCI7XG5pbXBvcnQgeyBTYWxlIH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlXCI7XG5pbXBvcnQgeyBTYWxlQ2FydCB9IGZyb20gXCIuLi9kb21haW4vc2FsZS1jYXJ0XCI7XG5pbXBvcnQgeyBTdG9jayB9IGZyb20gXCIuLi9kb21haW4vc3RvY2tcIjtcblxuZXhwb3J0IGNsYXNzIERhdGFCYXNlIHtcblxuICAgICBwcml2YXRlIF9ib29rczogQXJyYXk8Qm9vaz47Ly9cbiAgICAgcHJpdmF0ZSBfc3RvY2tzOiBBcnJheTxTdG9jaz47XG4gICAgIHByaXZhdGUgX2N1c3RvbWVyczogQXJyYXk8Q3VzdG9tZXI+Oy8vXG4gICAgIHByaXZhdGUgX3NhbGVzOiBBcnJheTxTYWxlPjsvL1xuICAgICBwcml2YXRlIF9yZW50czogQXJyYXk8UmVudD47XG4gICAgIHByaXZhdGUgX2Jvb2tTcGVjaWZpY2F0aW9uczogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+O1xuICAgICBwcml2YXRlIF9jYW5jZWxzOiBBcnJheTxDYW5jZWw+Oy8vXG4gICAgIHByaXZhdGUgX3NhbGVDYXJ0OiBTYWxlQ2FydDtcbiAgICAgcHJpdmF0ZSBfcmVudENhcnQ6UmVudENhcnQ7XG5cbiAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgdGhpcy5fYm9va3MgPSBuZXcgQXJyYXk8Qm9vaz4oKTtcbiAgICAgICAgICB0aGlzLl9zdG9ja3MgPSBuZXcgQXJyYXk8U3RvY2s+KCk7XG4gICAgICAgICAgdGhpcy5fY3VzdG9tZXJzID0gbmV3IEFycmF5PEN1c3RvbWVyPigpO1xuICAgICAgICAgIHRoaXMuX3NhbGVzID0gbmV3IEFycmF5PFNhbGU+KCk7XG4gICAgICAgICAgdGhpcy5fcmVudHMgPSBuZXcgQXJyYXk8UmVudD4oKTtcbiAgICAgICAgICB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbnMgPSBuZXcgQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+KCk7XG4gICAgICAgICAgdGhpcy5fY2FuY2VscyA9IG5ldyBBcnJheTxDYW5jZWw+KCk7XG4gICAgICAgICAgdGhpcy5fc2FsZUNhcnQgPSBuZXcgU2FsZUNhcnQoKTtcbiAgICAgICAgICB0aGlzLl9yZW50Q2FydCA9IG5ldyBSZW50Q2FydDtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgYm9va3NcbiAgICAgICogQHJldHVybiB7QXJyYXk8Qm9vaz59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldEJvb2tzTGlzdCgpOiBBcnJheTxCb29rPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBzdG9ja3NcbiAgICAgICogQHJldHVybiB7QXJyYXk8U3RvY2s+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRTdG9ja3NMaXN0KCk6IEFycmF5PFN0b2NrPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3N0b2NrcztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgY3VzdG9tZXJzXG4gICAgICAqIEByZXR1cm4ge0FycmF5PEN1c3RvbWVyPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Q3VzdG9tZXJzTGlzdCgpOiBBcnJheTxDdXN0b21lcj4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jdXN0b21lcnM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHNhbGVzXG4gICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGU+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRTYWxlc0xpc3QoKTogQXJyYXk8U2FsZT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9zYWxlcztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgcmVudHNcbiAgICAgICogQHJldHVybiB7QXJyYXk8UmVudD59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFJlbnRzKCk6IEFycmF5PFJlbnQ+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fcmVudHM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIGJvb2tTcGVjaWZpY2F0aW9uc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxCb29rU3BlY2lmaWNhdGlvbj59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldEJvb2tTcGVjaWZpY2F0aW9ucygpOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbnM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIGNhbmNlbFNhbGVzXG4gICAgICAqIEByZXR1cm4ge0FycmF5PENhbmNlbFNhbGU+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRDYW5jYWxlZFNhbGVzKCk6IEFycmF5PENhbmNlbD4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jYW5jZWxzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBzYWxlQ2FydFxuICAgICAgKiBAcmV0dXJuIHtBcnJheTxTYWxlQ2FydD59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFNhbGVDYXJ0KCk6IFNhbGVDYXJ0IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fc2FsZUNhcnQ7XG4gICAgIH1cblxuICAgICAgICAgLyoqXG4gICAgICogR2V0dGVyIHJlbnRDYXJ0XG4gICAgICogQHJldHVybiB7UmVudENhcnR9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgZ2V0UmVudENhcnQoKTogUmVudENhcnQge1xuXHRcdHJldHVybiB0aGlzLl9yZW50Q2FydDtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNhbGVDYXJ0XG4gICAgICogQHBhcmFtIHtTYWxlQ2FydH0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBzZXRTYWxlQ2FydCh2YWx1ZTogU2FsZUNhcnQpIHtcblx0XHR0aGlzLl9zYWxlQ2FydCA9IHZhbHVlO1xuXHR9XG5cblxuXG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVudENhcnRcbiAgICAgKiBAcGFyYW0ge1JlbnRDYXJ0fSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHNldFJlbnRDYXJ0KHZhbHVlOiBSZW50Q2FydCkge1xuXHRcdHRoaXMuX3JlbnRDYXJ0ID0gdmFsdWU7XG5cdH1cbiAgICAgXG5cblxufVxuIiwiZXhwb3J0IGNsYXNzIEJvb2tTcGVjaWZpY2F0aW9uIHtcbiAgICBwcml2YXRlIF9pc2JuOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfcHJpY2U6IG51bWJlcjtcbiAgICBwcml2YXRlIF9zdGFydERhdGU6IERhdGU7XG4gICAgcHJpdmF0ZSBfZW5kRGF0ZTogRGF0ZTtcblxuICAgIGNvbnN0cnVjdG9yKGlzYm46IHN0cmluZywgcHJpY2U6IG51bWJlciwgc3RhcnREYXRlOiBEYXRlLCBlbmREYXRlOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuX2lzYm4gPSBpc2JuO1xuICAgICAgICB0aGlzLl9wcmljZSA9IHByaWNlO1xuICAgICAgICB0aGlzLl9zdGFydERhdGUgPSBzdGFydERhdGU7XG4gICAgICAgIHRoaXMuX2VuZERhdGUgPSBlbmREYXRlO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGlzYm5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgaXNibigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9pc2JuO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcHJpY2VcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcHJpY2UoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fcHJpY2U7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzdGFydERhdGVcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IHN0YXJ0RGF0ZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gdGhpcy5fc3RhcnREYXRlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgZW5kRGF0ZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgZW5kRGF0ZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gdGhpcy5fZW5kRGF0ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlzYm5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBpc2JuKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9pc2JuID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBwcmljZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHByaWNlKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLl9wcmljZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc3RhcnREYXRlXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHN0YXJ0RGF0ZSh2YWx1ZTogRGF0ZSkge1xuXHRcdHRoaXMuX3N0YXJ0RGF0ZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgZW5kRGF0ZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBlbmREYXRlKHZhbHVlOiBEYXRlKSB7XG5cdFx0dGhpcy5fZW5kRGF0ZSA9IHZhbHVlO1xuXHR9XG4gICAgXG5cbiAgICBcbn0iLCJpbXBvcnQgeyBCb29rU3BlY2lmaWNhdGlvbiB9IGZyb20gXCIuL2Jvb2stc3BlY2lmaWNhdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgQm9vayB7XG4gIHByaXZhdGUgX2lzYm46IHN0cmluZztcbiAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nO1xuICBwcml2YXRlIF9hdXRob3I6IHN0cmluZztcbiAgcHJpdmF0ZSBfcHVibGlzaFllYXI6IHN0cmluZztcbiAgcHJpdmF0ZSBfcGFnZXM6IG51bWJlcjtcbiAgcHJpdmF0ZSBfYm9va1NwZWNpZmljYXRpb246IEJvb2tTcGVjaWZpY2F0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKGlzYm46IHN0cmluZywgbmFtZTogc3RyaW5nLCBhdXRob3I6IHN0cmluZywgcHVibGlzaFllYXI6IHN0cmluZywgcGFnZXM6IG51bWJlciwgYm9va1NwZWNpZmljYXRpb246IEJvb2tTcGVjaWZpY2F0aW9uKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fYXV0aG9yID0gYXV0aG9yO1xuICAgIHRoaXMuX2lzYm4gPSBpc2JuO1xuICAgIHRoaXMuX3B1Ymxpc2hZZWFyID0gcHVibGlzaFllYXI7XG4gICAgdGhpcy5fcGFnZXMgPSBwYWdlcztcbiAgICB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbiA9IGJvb2tTcGVjaWZpY2F0aW9uO1xuICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgaXNiblxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBpc2JuKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2lzYm47XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBuYW1lXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fbmFtZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGF1dGhvclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBhdXRob3IoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fYXV0aG9yO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcHVibGlzaFllYXJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcHVibGlzaFllYXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fcHVibGlzaFllYXI7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBwYWdlc1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCBwYWdlcygpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9wYWdlcztcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGJvb2tTcGVjaWZpY2F0aW9uXG4gICAgICogQHJldHVybiB7Qm9va1NwZWNpZmljYXRpb259XG4gICAgICovXG5cdHB1YmxpYyBnZXQgYm9va1NwZWNpZmljYXRpb24oKTogQm9va1NwZWNpZmljYXRpb24ge1xuXHRcdHJldHVybiB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbjtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlzYm5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBpc2JuKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9pc2JuID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgbmFtZSh2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fbmFtZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgYXV0aG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgYXV0aG9yKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9hdXRob3IgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHB1Ymxpc2hZZWFyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcHVibGlzaFllYXIodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX3B1Ymxpc2hZZWFyID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBwYWdlc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHBhZ2VzKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLl9wYWdlcyA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgYm9va1NwZWNpZmljYXRpb25cbiAgICAgKiBAcGFyYW0ge0Jvb2tTcGVjaWZpY2F0aW9ufSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGJvb2tTcGVjaWZpY2F0aW9uKHZhbHVlOiBCb29rU3BlY2lmaWNhdGlvbikge1xuXHRcdHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9uID0gdmFsdWU7XG5cdH1cbn1cbiIsImltcG9ydCB7IFNhbGUgfSBmcm9tIFwiLi9zYWxlXCI7XG5cbmV4cG9ydCBjbGFzcyBDYW5jZWwge1xuICAgIHByaXZhdGUgX2NhbmNlbFR5cGU6IFNhbGU7XG4gICAgcHJpdmF0ZSBfcmVmdW5kOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfY2FuY2VsZWREYXRlVGltZTogRGF0ZTtcblxuICAgIGNvbnN0cnVjdG9yKGNhbmNlbFR5cGU6IFNhbGUsIHJlZnVuZDogbnVtYmVyLCBjYW5jZWxlZERhdGVUaW1lOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbFR5cGUgPSBjYW5jZWxUeXBlO1xuICAgICAgICB0aGlzLl9yZWZ1bmQgPSByZWZ1bmQ7XG4gICAgICAgIHRoaXMuX2NhbmNlbGVkRGF0ZVRpbWUgPSBjYW5jZWxlZERhdGVUaW1lO1xuICAgIH07XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjYW5jZWxUeXBlXG4gICAgICogQHJldHVybiB7U2FsZX1cbiAgICAgKi9cblx0cHVibGljIGdldCBjYW5jZWxUeXBlKCk6IFNhbGUge1xuXHRcdHJldHVybiB0aGlzLl9jYW5jZWxUeXBlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVmdW5kXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IHJlZnVuZCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9yZWZ1bmQ7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjYW5jZWxlZERhdGVUaW1lXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cblx0cHVibGljIGdldCBjYW5jZWxlZERhdGVUaW1lKCk6IERhdGUge1xuXHRcdHJldHVybiB0aGlzLl9jYW5jZWxlZERhdGVUaW1lO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY2FuY2VsVHlwZVxuICAgICAqIEBwYXJhbSB7U2FsZX0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBjYW5jZWxUeXBlKHZhbHVlOiBTYWxlKSB7XG5cdFx0dGhpcy5fY2FuY2VsVHlwZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVmdW5kXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcmVmdW5kKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLl9yZWZ1bmQgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGNhbmNlbGVkRGF0ZVRpbWVcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgY2FuY2VsZWREYXRlVGltZSh2YWx1ZTogRGF0ZSkge1xuXHRcdHRoaXMuX2NhbmNlbGVkRGF0ZVRpbWUgPSB2YWx1ZTtcblx0fVxuICAgIFxuICAgIFxuXG59IiwiZXhwb3J0IGNsYXNzIEN1c3RvbWVyIHtcbiAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nO1xuICBwcml2YXRlIF9zdXJOYW1lOiBzdHJpbmc7XG4gIHByaXZhdGUgX3Bob25lTnVtYmVyOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBzdXJOYW1lOiBzdHJpbmcsIHBob25lTnVtYmVyOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9zdXJOYW1lID0gc3VyTmFtZTtcbiAgICB0aGlzLl9waG9uZU51bWJlciA9IHBob25lTnVtYmVyO1xuICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgbmFtZVxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBuYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX25hbWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzdXJOYW1lXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IHN1ck5hbWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fc3VyTmFtZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHBob25lTnVtYmVyXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IHBob25lTnVtYmVyKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX3Bob25lTnVtYmVyO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IG5hbWUodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX25hbWUgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHN1ck5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBzdXJOYW1lKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9zdXJOYW1lID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBwaG9uZU51bWJlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHBob25lTnVtYmVyKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9waG9uZU51bWJlciA9IHZhbHVlO1xuXHR9XG5cblxufVxuIiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcblxuZXhwb3J0IGNsYXNzIE9yZGVyQm9va0l0ZW1zIHtcbiAgICBwcml2YXRlIF9ib29rOiBCb29rO1xuICAgIHByaXZhdGUgX3F1YW50aXR5OiBudW1iZXI7XG5cblxuICAgIGNvbnN0cnVjdG9yKGJvb2s6IEJvb2ssIHF1YW50aXR5OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fYm9vayA9IGJvb2s7XG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gcXVhbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGJvb2tcbiAgICAgKiBAcmV0dXJuIHtCb29rfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgYm9vaygpOiBCb29rIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2s7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHF1YW50aXR5XG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcXVhbnRpdHkoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1YW50aXR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rXG4gICAgICogQHBhcmFtIHtCb29rfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgYm9vayh2YWx1ZTogQm9vaykge1xuICAgICAgICB0aGlzLl9ib29rID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHF1YW50aXR5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBxdWFudGl0eSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvb2s6IHRoaXMuX2Jvb2ssXG4gICAgICAgICAgICBxdWFudGl0eTogdGhpcy5fcXVhbnRpdHksXG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgTGlzdEZvcm1hdCB9IGZyb20gXCJ0eXBlc2NyaXB0XCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuaW1wb3J0IHsgT3JkZXJCb29rSXRlbXMgfSBmcm9tIFwiLi9vcmRlci1ib29rLWl0ZW1cIjtcblxuZXhwb3J0IGNsYXNzIFJlbnRDYXJ0IHtcbiAgICBjdXN0b21lcklkITogbnVtYmVyO1xuICAgIG9yZGVyQm9va0l0ZW1zOiBBcnJheTxPcmRlckJvb2tJdGVtcz47XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vcmRlckJvb2tJdGVtcyA9IG5ldyBBcnJheTxPcmRlckJvb2tJdGVtcz4oKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuL3NhbGVcIjtcbmltcG9ydCB7IE9yZGVyQm9va0l0ZW1zIH0gZnJvbSBcIi4vb3JkZXItYm9vay1pdGVtXCI7XG5cbmV4cG9ydCBjbGFzcyBSZW50IGV4dGVuZHMgU2FsZSB7XG4gICAgcHJpdmF0ZSBfcmVmdW5kRGF0ZT86IERhdGU7XG4gICAgcHJpdmF0ZSBfcmVmdW5kPzogbnVtYmVyO1xuXG5cbiAgICBjb25zdHJ1Y3RvcihzYWxlQm9va0l0ZW1zPzogQXJyYXk8T3JkZXJCb29rSXRlbXM+LCBvcGVyYXRpb25EYXRlVGltZT86IERhdGUsIGN1c3RvbWVySWQ/OiBudW1iZXIsIG9wZXJhdGlvbk51bWJlcj86IHN0cmluZywgdG90YWw/OiBudW1iZXIsIHJlZnVuZERhdGU/OiBEYXRlLCByZWZ1bmQ/OiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoc2FsZUJvb2tJdGVtcywgY3VzdG9tZXJJZCwgb3BlcmF0aW9uRGF0ZVRpbWUsIG9wZXJhdGlvbk51bWJlciwgdG90YWwpXG5cbiAgICAgICAgdGhpcy5fcmVmdW5kRGF0ZSA9IHJlZnVuZERhdGU7XG4gICAgICAgIHRoaXMuX3JlZnVuZCA9IHJlZnVuZDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZWZ1bmREYXRlXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHJlZnVuZERhdGUoKTogRGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZ1bmREYXRlITtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVmdW5kXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcmVmdW5kKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZ1bmQhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZWZ1bmREYXRlXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcmVmdW5kRGF0ZSh2YWx1ZTogRGF0ZSkge1xuICAgICAgICB0aGlzLl9yZWZ1bmREYXRlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlZnVuZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcmVmdW5kKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fcmVmdW5kID0gdmFsdWU7XG4gICAgfVxuXG5cblxuXG59IiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcbmltcG9ydCB7IE9yZGVyQm9va0l0ZW1zIH0gZnJvbSBcIi4vb3JkZXItYm9vay1pdGVtXCI7XG5cbmV4cG9ydCBjbGFzcyBTYWxlQ2FydCB7XG4gICAgY3VzdG9tZXJJZCE6IG51bWJlcjtcbiAgICBvcmRlckJvb2tJdGVtczogQXJyYXk8T3JkZXJCb29rSXRlbXM+O1xuXG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5vcmRlckJvb2tJdGVtcyA9IG5ldyBBcnJheTxPcmRlckJvb2tJdGVtcz47XG5cdH1cblxuXG5cblxuXG59IiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcbmltcG9ydCB7IE9yZGVyQm9va0l0ZW1zIH0gZnJvbSBcIi4vb3JkZXItYm9vay1pdGVtXCI7XG5cbmV4cG9ydCBjbGFzcyBTYWxlIHtcbiAgICBwcml2YXRlIF9vcmRlckJvb2tJdGVtcz86IEFycmF5PE9yZGVyQm9va0l0ZW1zPjtcbiAgICBwcml2YXRlIF9jdXN0b21lcklkPzogbnVtYmVyO1xuICAgIHByaXZhdGUgX29wZXJhdGlvbkRhdGVUaW1lPzogRGF0ZTtcbiAgICBwcml2YXRlIF9vcGVyYXRpb25OdW1iZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfdG90YWw/OiBudW1iZXI7XG5cblxuXHRjb25zdHJ1Y3RvcihvcmRlckJvb2tJdGVtcz86IEFycmF5PE9yZGVyQm9va0l0ZW1zPiwgY3VzdG9tZXJJZD86IG51bWJlciwgb3BlcmF0aW9uRGF0ZVRpbWU/OiBEYXRlLCBvcGVyYXRpb25OdW1iZXI/OiBzdHJpbmcsIHRvdGFsPzogbnVtYmVyKSB7XG5cdFx0dGhpcy5fb3JkZXJCb29rSXRlbXMgPSBvcmRlckJvb2tJdGVtcztcblx0XHR0aGlzLl9jdXN0b21lcklkID0gY3VzdG9tZXJJZDtcblx0XHR0aGlzLl9vcGVyYXRpb25EYXRlVGltZSA9IG9wZXJhdGlvbkRhdGVUaW1lO1xuXHRcdHRoaXMuX29wZXJhdGlvbk51bWJlciA9IG9wZXJhdGlvbk51bWJlcjtcblx0XHR0aGlzLl90b3RhbCA9IHRvdGFsO1xuXHR9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBvcmRlckJvb2tJdGVtc1xuICAgICAqIEByZXR1cm4ge0FycmF5PE9yZGVyQm9va0l0ZW1zPn1cbiAgICAgKi9cblx0cHVibGljIGdldCBvcmRlckJvb2tJdGVtcygpOiBBcnJheTxPcmRlckJvb2tJdGVtcz4ge1xuXHRcdHJldHVybiB0aGlzLl9vcmRlckJvb2tJdGVtcyE7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjdXN0b21lcklkXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGN1c3RvbWVySWQoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fY3VzdG9tZXJJZCE7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBvcGVyYXRpb25EYXRlVGltZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgb3BlcmF0aW9uRGF0ZVRpbWUoKTogRGF0ZSB7XG5cdFx0cmV0dXJuIHRoaXMuX29wZXJhdGlvbkRhdGVUaW1lITtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG9wZXJhdGlvbk51bWJlclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBvcGVyYXRpb25OdW1iZXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fb3BlcmF0aW9uTnVtYmVyITtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHRvdGFsXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IHRvdGFsKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3RvdGFsITtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIG9yZGVyQm9va0l0ZW1zXG4gICAgICogQHBhcmFtIHtBcnJheTxPcmRlckJvb2tJdGVtcz59IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgb3JkZXJCb29rSXRlbXModmFsdWU6IEFycmF5PE9yZGVyQm9va0l0ZW1zPikge1xuXHRcdHRoaXMuX29yZGVyQm9va0l0ZW1zID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBjdXN0b21lcklkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgY3VzdG9tZXJJZCh2YWx1ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5fY3VzdG9tZXJJZCA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgb3BlcmF0aW9uRGF0ZVRpbWVcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgb3BlcmF0aW9uRGF0ZVRpbWUodmFsdWU6IERhdGUpIHtcblx0XHR0aGlzLl9vcGVyYXRpb25EYXRlVGltZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgb3BlcmF0aW9uTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgb3BlcmF0aW9uTnVtYmVyKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9vcGVyYXRpb25OdW1iZXIgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHRvdGFsXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgdG90YWwodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3RvdGFsID0gdmFsdWU7XG5cdH1cblx0XG4gICAgXG59IiwiZXhwb3J0IGNsYXNzIFN0b2NrIHtcbiAgICBwcml2YXRlIF9pc2JuOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfcXVhbnRpdHk6IG51bWJlcjtcbiAgICBwcml2YXRlIF9zaGVsZk51bWJlcjogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoaXNibj86IHN0cmluZywgcXVhbnRpdHk/OiBudW1iZXIsIHNoZWxmTnVtYmVyPzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX2lzYm4gPSBpc2JuITtcbiAgICAgICAgdGhpcy5fcXVhbnRpdHkgPSBxdWFudGl0eSE7XG4gICAgICAgIHRoaXMuX3NoZWxmTnVtYmVyID0gc2hlbGZOdW1iZXIhO1xuICAgIH1cblxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgaXNiblxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGlzYm4oKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzYm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHF1YW50aXR5XG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcXVhbnRpdHkoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1YW50aXR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzaGVsZk51bWJlclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHNoZWxmTnVtYmVyKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaGVsZk51bWJlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgaXNiblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgaXNibih2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX2lzYm4gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcXVhbnRpdHlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHF1YW50aXR5KHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fcXVhbnRpdHkgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc2hlbGZOdW1iZXJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHNoZWxmTnVtYmVyKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fc2hlbGZOdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cblxufSIsIi8vIGV4cG9ydCBOT0RFX09QVElPTlM9LS1vcGVuc3NsLWxlZ2FjeS1wcm92aWRlclxuaW1wb3J0IHsgRGF0YUJhc2UgfSBmcm9tIFwiLi9kYi9kYXRhYmFzZVwiO1xuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2RvbWFpbi9ib29rXCI7XG5pbXBvcnQgeyBCb29rU3BlY2lmaWNhdGlvbiB9IGZyb20gXCIuL2RvbWFpbi9ib29rLXNwZWNpZmljYXRpb25cIjtcbmltcG9ydCB7IENhbmNlbCB9IGZyb20gXCIuL2RvbWFpbi9jYW5jZWxcIjtcbmltcG9ydCB7IEN1c3RvbWVyIH0gZnJvbSBcIi4vZG9tYWluL2N1c3RvbWVyXCI7XG5pbXBvcnQgeyBSZW50IH0gZnJvbSBcIi4vZG9tYWluL3JlbnRcIjtcbmltcG9ydCB7IFNhbGUgfSBmcm9tIFwiLi9kb21haW4vc2FsZVwiO1xuaW1wb3J0IHsgT3JkZXJCb29rSXRlbXMgfSBmcm9tIFwiLi9kb21haW4vb3JkZXItYm9vay1pdGVtXCI7XG5pbXBvcnQgeyBTdG9jayB9IGZyb20gXCIuL2RvbWFpbi9zdG9ja1wiO1xuaW1wb3J0IHsgQm9va1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL2Jvb2stc2VydmljZVwiO1xuaW1wb3J0IHsgQ2FuY2VsU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvY2FuY2VsLXNlcnZpY2VcIjtcbmltcG9ydCB7IEN1c3RvbWVyU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvY3VzdG9tZXItc2VydmljZVwiO1xuaW1wb3J0IHsgUmVudFNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL3JlbnQtc2VydmljZVwiO1xuaW1wb3J0IHsgU2FsZVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL3NhbGUtc2VydmljZVwiO1xuaW1wb3J0IHsgU3RvY2tTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9zdG9jay1zZXJ2aWNlXCI7XG5cbmV4cG9ydCBsZXQgYm9va1NlcnZpY2U6IEJvb2tTZXJ2aWNlO1xuZXhwb3J0IGxldCBjdXN0b21lclNlcnZpY2U6IEN1c3RvbWVyU2VydmljZTtcbmV4cG9ydCBsZXQgY2FuY2VsU2VydmljZTogQ2FuY2VsU2VydmljZTtcbmV4cG9ydCBsZXQgcmVudFNlcnZpY2U6IFJlbnRTZXJ2aWNlO1xuZXhwb3J0IGxldCBzYWxlU2VydmljZTogU2FsZVNlcnZpY2U7XG5leHBvcnQgbGV0IHN0b2NrU2VydmljZTogU3RvY2tTZXJ2aWNlO1xuXG5sZXQgZGI6IERhdGFCYXNlID0gbmV3IERhdGFCYXNlKCk7XG5pbml0aWxpYXplU2VydmljZXMoZGIpO1xuaW5pdGlsaWF6ZURhdGEoKTtcbmFkZExpc3RlbmVyRm9yTWVudUl0ZW1zKCk7XG5cbmZ1bmN0aW9uIGluaXRpbGlhemVTZXJ2aWNlcyhkYjogRGF0YUJhc2UpIHtcbiAgYm9va1NlcnZpY2UgPSBuZXcgQm9va1NlcnZpY2UoZGIuZ2V0Qm9va3NMaXN0LCBkYi5nZXRCb29rU3BlY2lmaWNhdGlvbnMpO1xuICBjdXN0b21lclNlcnZpY2UgPSBuZXcgQ3VzdG9tZXJTZXJ2aWNlKGRiLmdldEN1c3RvbWVyc0xpc3QpO1xuICBjYW5jZWxTZXJ2aWNlID0gbmV3IENhbmNlbFNlcnZpY2UoZGIuZ2V0Q2FuY2FsZWRTYWxlcyk7XG4gIHJlbnRTZXJ2aWNlID0gbmV3IFJlbnRTZXJ2aWNlKGRiLmdldFJlbnRzLCBkYi5nZXRSZW50Q2FydCk7XG4gIHNhbGVTZXJ2aWNlID0gbmV3IFNhbGVTZXJ2aWNlKGRiLmdldFNhbGVzTGlzdCwgZGIuZ2V0U2FsZUNhcnQpO1xuICBzdG9ja1NlcnZpY2UgPSBuZXcgU3RvY2tTZXJ2aWNlKGRiLmdldFN0b2Nrc0xpc3QpO1xuICBjb25zb2xlLmxvZyhcIlNlcnZpY2VzIGludGlsaWF6ZWQuXCIpO1xuXG4gIGN1c3RvbWVyU2VydmljZS5hZGRDdXN0b21lcihuZXcgQ3VzdG9tZXIoXCJcIiwgXCJcIiwgXCJcIikpO1xuICBjdXN0b21lclNlcnZpY2UuYWRkQ3VzdG9tZXIobmV3IEN1c3RvbWVyKFwiXCIsIFwiXCIsIFwiXCIpKTtcblxuICBzdG9ja1NlcnZpY2UuYWRkU3RvY2soXCIxMjMtNDVcIiwgXCJBNDUtNTJcIiwgMTApO1xuICBzdG9ja1NlcnZpY2UuYWRkU3RvY2soXCIxMjMtNDZcIiwgXCJBNDUtNTJcIiwgMTApO1xufVxuXG5hc3luYyBmdW5jdGlvbiBpbml0aWxpYXplRGF0YSgpIHtcbiAgYXdhaXQgYm9va1NlcnZpY2UuaW5pdGlhbGl6ZURhdGFNb2NrKCk7XG59XG5cbmZ1bmN0aW9uIGFkZExpc3RlbmVyRm9yTWVudUl0ZW1zKCkge1xuICAvL3NhbGVTZXJ2aWNlLnVwZGF0ZVNhbGVDYXJ0KCk7XG4gIHNob3dBbmRIaWRlKFwiYWRkQm9va01lbnVJdGVtXCIsIFwiYWRkQm9va1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwic2hvd0Jvb2tzTWVudUl0ZW1cIiwgXCJsaXN0Qm9va3NTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImFkZEN1c3RvbWVyTWVudUl0ZW1cIiwgXCJhZGRDdXN0b21lclNlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwiYWRkU3RvY2tNZW51SXRlbVwiLCBcImFkZFN0b2NrU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJzYWxlQm9va01lbnVJdGVtXCIsIFwic2FsZUJvb2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcInJlbnRCb29rTWVudUl0ZW1cIiwgXCJyZW50Qm9va1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwiY2FuY2VsU2FsZU1lbnVJdGVtXCIsIFwiY2FuY2VsU2FsZVNlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwiY2FuY2VsUmVudE1lbnVJdGVtXCIsIFwiY2FuY2VsUmVudFNlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwicmVmdW5kQm9va01lbnVJdGVtXCIsIFwicmVmdW5kQm9va1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwicmVudE5vd1wiLCBcInJlbnRCb29rU2VjdGlvblwiKTtcblxufVxuXG5mdW5jdGlvbiBzaG93QW5kSGlkZShidG5JZDogc3RyaW5nLCBlbGVtZW50SWQ6IHN0cmluZykge1xuICAvL3NhbGVTZXJ2aWNlLnVwZGF0ZVNhbGVDYXJ0KCk7XG5cbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG4gIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ0bklkKTtcblxuICBpZiAoZWxlbWVudCAmJiBidG4pIHtcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmIChlbGVtZW50LnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IGFkZEJvb2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1ib29rLWZvcm1cIik7XG5pZiAoYWRkQm9va0Zvcm0gIT0gbnVsbCkge1xuICBhZGRCb29rRm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoYWRkQm9va0Zvcm0pO1xuXG4gICAgY29uc3QgdGl0bGUgPSBmb3JtRGF0YS5nZXQoXCJib29rVGl0bGVcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGF1dGhvciA9IGZvcm1EYXRhLmdldChcImJvb2tBdXRob3JcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJib29rSXNiblwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcHVibGlzaFllYXIgPSBmb3JtRGF0YS5nZXQoXCJib29rUHVibGlzaFllYXJcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IHBhZ2VzID0gZm9ybURhdGEuZ2V0KFwiYm9va1BhZ2VzXCIpIGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgIGNvbnN0IHByaWNlID0gZm9ybURhdGEuZ2V0KFwiYm9va1ByaWNlXCIpIGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKCdEZWMgMzEsIDk5OTkgMjM6NTk6NTknKTtcblxuICAgIHRpdGxlLm1hdGNoKFwiXCIpO1xuXG5cbiAgICBjb25zdCBib29rU3BlYyA9IG5ldyBCb29rU3BlY2lmaWNhdGlvbihpc2JuLCBwcmljZSwgc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICBjb25zdCBib29rID0gbmV3IEJvb2soaXNibiwgdGl0bGUsIGF1dGhvciwgcHVibGlzaFllYXIsIHBhZ2VzLCBib29rU3BlYyk7XG4gICAgLy9ib29rU2VydmljZS5hZGRCb29rKGJvb2spO1xuXG4gICAgbGV0IHN1Y2Nlc3MgPSBhd2FpdCBib29rU2VydmljZS5hZGRCb29rTW9jayhib29rKTtcbiAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgYWxlcnQoYm9vay5pc2JuICsgXCIgbnVtYXJhbMSxIGtpdGFwIEVrbGVtZSDEsMWfbGVtaSBCYcWfYXLEsSDEsGxlIFRhbWFtbGFubcSxxZ90xLFyLlwiKTtcbiAgICAgIGFkZEJvb2tGb3JtLnJlc2V0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KGJvb2suaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCBFa2xlbWUgxLDFn2xlbWkgU8SxcmFzxLFuZGEgQmlyIEhhdGEgb2x1xZ90dS5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlOyAvLyBwcmV2ZW50IHJlbG9hZFxuICB9O1xufVxuXG5jb25zdCBhZGRTdG9ja0Zvcm0gPSA8SFRNTEZvcm1FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1zdG9jay1mb3JtXCIpKTtcbmlmIChhZGRTdG9ja0Zvcm0pIHtcbiAgYWRkU3RvY2tGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoYWRkU3RvY2tGb3JtKTtcblxuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJib29rSXNibkZvckFkZFN0b2NrXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBxdWFudHRpeSA9IGZvcm1EYXRhLmdldChcInN0b2NrUXVhbnRpdHlcIikgYXMgdW5rbm93biBhcyBudW1iZXI7XG4gICAgY29uc3Qgc2hlbGZOdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJzaGVsZk51bWJlclwiKSBhcyBzdHJpbmc7XG5cbiAgICBjb25zdCBzdG9jayA9IG5ldyBTdG9jayhpc2JuLCBxdWFudHRpeSwgc2hlbGZOdW1iZXIpO1xuXG4gICAgY29uc3QgaXNDb250YWluc0Jvb2sgPSBib29rU2VydmljZS5ib29rTGlzdC5zb21lKGIgPT4gYi5pc2JuID09IGlzYm4pO1xuXG4gICAgaWYgKCFpc0NvbnRhaW5zQm9vaykge1xuICAgICAgYWxlcnQoXCJTdG9rIGVrbGVubWV5ZSDDp2FsxLHFn8SxbGFuIGtpdGFwLCBrYXnEsXRsxLEgZGXEn2lsZGlyLiBMw7x0ZmVuIMO2bmNlIGtpdGFwIGVrbGV5aW5pelwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsZXQgaXNPayA9IGF3YWl0IHN0b2NrU2VydmljZS5hZGRTdG9ja01vY2soc3RvY2spO1xuXG4gICAgICBpZiAoaXNPaykge1xuICAgICAgICBhbGVydChpc2JuICsgXCIgaXNibiBudW1hcmFsxLEga2l0YXB0YW4sIFwiICsgcXVhbnR0aXkgKyBcIiBrYWRhciBzaXN0ZW1lIHN0b2sgZWtsZW5tacWfdGlyLlwiKTtcbiAgICAgIH1cblxuXG4gICAgfVxuXG4gICAgYWRkU3RvY2tGb3JtLnJlc2V0KCk7XG4gICAgcmV0dXJuIGZhbHNlOyAvLyBwcmV2ZW50IHJlbG9hZFxuICB9O1xufVxuXG4vKipcbiAqIE3DvMWfdGVyaSBla2xlbWUgZm9ybXUgc3VibWl0IG9sYXnEsW7EsSBtb2NrIGN1c3RvbWVyU2VydmljZSBkZWtpIG1vY2sgc2VydmlzZSBiYcSfbGFkxLFtXG4gKi9cbmNvbnN0IGFkZEN1c3RvbWVyRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLWN1c3RvbWVyLWZvcm1cIikpO1xuaWYgKGFkZEN1c3RvbWVyRm9ybSkge1xuICBhZGRDdXN0b21lckZvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShhZGRDdXN0b21lckZvcm0pO1xuXG4gICAgY29uc3QgbmFtZSA9IGZvcm1EYXRhLmdldChcImN1c3RvbWVyTmFtZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3Qgc3VybmFtZSA9IGZvcm1EYXRhLmdldChcImN1c3RvbWVyU3VybmFtZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcGhvbmVOdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJjdXN0b21lclBob25lTnVtYmVyXCIpIGFzIHN0cmluZztcblxuICAgIGNvbnN0IGN1c3RvbWVyID0gbmV3IEN1c3RvbWVyKG5hbWUsIHN1cm5hbWUsIHBob25lTnVtYmVyKTtcbiAgICBsZXQgc3VjY2VzcyA9IGF3YWl0IGN1c3RvbWVyU2VydmljZS5hZGRDdXN0b21lck1vY2soY3VzdG9tZXIpO1xuXG4gICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgIGFsZXJ0KFwiTcO8xZ90ZXJpIEVrbGVtZSDEsMWfbGVtaSBCYcWfYXLEsSDEsGxlIFRhbWFtbGFubcSxxZ90xLFyLiBcIik7XG4gICAgICBhZGRDdXN0b21lckZvcm0ucmVzZXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQoXCJNw7zFn3RlcmkgRWtsZW1lIMSwxZ9sZW1pIFPEsXJhc8SxbmRhIGJpciBoYXRhIGlsZSBrYXLFn8SxbMSxbGTEsS4gXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTsgLy8gcHJldmVudCByZWxvYWRcbiAgfTtcbn1cblxuLyoqQnVyYWRhIG1vY2sgc2VydmlzaSB5b2sgw6fDvG5rw7wgYnVyYWRhIGtpdGFwIHNhdMSxxZ/EsSB5YXDEsWzEsXJrZW4sIGtpdGFwbGFyxLEgc2VwZXRlIGVrbGl5b3J1ei5cbiAqIFNlcGV0ZSBla2xlZGlrdGVuIHNvbnJhIGJ0blNhbGUgaWRsaSBidXRvbnVuIGNsaWNrIGV2ZW50aSwgbW9jayBzZXJ2aXNpIMOnYcSfxLFyxLF5b3JcbiAqL1xuY29uc3Qgc2FsZUJvb2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzYWxlLWJvb2stZm9ybVwiKSk7XG5pZiAoc2FsZUJvb2tGb3JtKSB7XG4gIHNhbGVCb29rRm9ybS5vbnN1Ym1pdCA9ICgpID0+IHtcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKHNhbGVCb29rRm9ybSk7XG5cbiAgICBjb25zdCBpc2JuID0gZm9ybURhdGEuZ2V0KFwiaXNibkZvclNhbGVcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGJvb2sgPSBib29rU2VydmljZS5nZXRCb29rKGlzYm4pO1xuICAgIGNvbnN0IGN1c3RvbWVySWQgPSBwYXJzZUludChmb3JtRGF0YS5nZXQoXCJjdXN0b21lcklkRm9yU2FsZVwiKSBhcyBzdHJpbmcpO1xuICAgIC8vaXNWYWxpZEN1c3RvbWVyIHJlc3Qgc2VydmlzdGVuIGTDtmVuZW4gdmVyaXllIGfDtnJlIMWfZWtpbGxlbmVjZWtcbiAgICBjb25zdCBpc1ZhbGlkQ3VzdG9tZXI6IGJvb2xlYW4gPSB0cnVlOyAvL2N1c3RvbWVyU2VydmljZS5pc1ZhbGlkQ3VzdG9tZXIoY3VzdG9tZXJJZCk7XG4gICAgY29uc3QgcXVhbnRpdHkgPSBwYXJzZUludChmb3JtRGF0YS5nZXQoXCJxdWFudGl0eUZvclNhbGVcIikgYXMgc3RyaW5nKTtcblxuICAgIGNvbnN0IHN0b2NrID0gc3RvY2tTZXJ2aWNlLmdldFN0b2NrKGlzYm4pITtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoYm9vaykge1xuICAgICAgICBpZiAoc3RvY2spIHtcbiAgICAgICAgICBpZiAoc3RvY2sucXVhbnRpdHkgPj0gcXVhbnRpdHkpIHtcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkQ3VzdG9tZXIpIHtcbiAgICAgICAgICAgICAgc2FsZVNlcnZpY2UuYWRkQm9va1RvQ2FydChib29rLCBxdWFudGl0eSwgY3VzdG9tZXJJZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhbGVydChjdXN0b21lcklkICsgXCIgbnVtYXJhbMSxIG3DvMWfdGVyaSBrYXnEsXRsxLEgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhbGVydChxdWFudGl0eSArIFwiIGthZGFyIGtpdGFwIGTDvGtrYW5kYSBtZXZjdXQgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxlcnQoYETDvGtrYW5kYSAke2lzYm59IG51bWFyYWzEsSBraXRhYsSxbiBzdG/En3UgbWV2Y3V0IGRlxJ9pbGRpci5gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQoaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCB5b2t0dXIuXCIpO1xuICAgICAgfVxuXG4gICAgICBzYWxlQm9va0Zvcm0ucmVzZXQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvcik7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogS2l0YXAgc2F0xLHFn8SxIGnDp2luIGnFn2xlbSB5YXDEsWzEsXJrZW4ga2l0YXBsYXIgc2VwZXRlIGVrbGVuaXlvci5cbiAqIEVrbGVtZSBpxZ9sZW1pIGJpdHRpa3RlbiBzb25yYSBzYXTEsW4gYWxtIGnDp2luIGJ1IGJ1dG9uYSB0xLFrbGFuZMSxxJ/EsW5kYSBzZXJ2aXNlIGdpZGlwIHNlcGV0dGVraSBraXRhcGxhcsSxbiBzYXTEscWfxLEgZ2Vyw6dla2xlxZ9peW9yXG4gKiBCdXJhZGEgZGnEn2VyIGJ1dG9ubGFyZGEgb2xkdcSfdSBnaWJpIGRpcmVrIG1vY2sgc2VydmlzaW5lIGJhxJ9sYW5tYWsgeWVyaW5lIHNlcnZpc2UgZ2l0bWVrIGR1cnVtdW5kYXnEsXouIFxuICogw4fDvG5rw7wgc2VydmlzdGUgU2FsZSBuZXNuZXNpbmkgb2x1xZ90dXJ1cCBtb2NrIHNlcnZpc2luZSBwYXJhbWV0cmUgb2xhcmFrIGdlw6dpeW9ydXouXG4gKi9cbmNvbnN0IGJ0blNhbGUgPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuU2FsZVwiKSk7XG5idG5TYWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGlmIChzYWxlU2VydmljZS5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPT09IDApIHtcblxuICAgIGFsZXJ0KFwiU2VwZXR0ZSDDvHLDvG4geW9rLiBMw7x0ZmVuIMO2bmNlIMO8csO8biBla2xleWluaXpcIik7XG4gIH0gZWxzZSB7XG4gICAgc2FsZVNlcnZpY2UuY2FydFRvU2FsZSgpO1xuICB9XG5cbn0pO1xuXG4vKipcbiAqIEtpdGFwbGFyxLEgbGlzdGVsZW1layBpw6dpbiB0xLFrbGFuxLFsYW4gYnV0b24gY2xpY2sgZXZlbnRpXG4gKi9cbmNvbnN0IGJ0blNob3dCb29rc01lbnVJdGVtID0gPEhUTUxFbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3dCb29rc01lbnVJdGVtXCIpKTtcbmJ0blNob3dCb29rc01lbnVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGJvb2tTZXJ2aWNlLmxpc3RCb29rcygpO1xufSlcblxuY29uc3QgY2FuY2VsU2FsZUZvcm0gPSA8SFRNTEZvcm1FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FuY2VsLXNhbGUtZm9ybVwiKTtcbmlmIChjYW5jZWxTYWxlRm9ybSkge1xuICBjYW5jZWxTYWxlRm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gxLBwdGFsIGnFn2xlbWluaW4gw6dhbMSxxZ9hYmlsbWVzaSBpw6dpbiDDtm5jZSBzYXTEscWfIHZlcmlzaSBla2xlZGltLCBzb25yYSBzYXTEscWfIGlwdGFsaSBpxZ9sZW1pIMOnYWzEscWfxLF5b3JcbiAgICBsZXQgc2JpID0gbmV3IEFycmF5PE9yZGVyQm9va0l0ZW1zPjtcbiAgICBzYmkucHVzaChuZXcgT3JkZXJCb29rSXRlbXMoYm9va1NlcnZpY2UuZ2V0Qm9vayhcIjEyMy00NVwiKSwgMykpXG5cbiAgICBsZXQgYSA9IG5ldyBTYWxlKHNiaSwgMSwgbmV3IERhdGUsIFwiUzAyMTEyMjE2MzA0NVwiLCAxMjMpO1xuICAgIHNhbGVTZXJ2aWNlLnNhbGVMaXN0LnB1c2goYSk7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShjYW5jZWxTYWxlRm9ybSk7XG4gICAgY29uc3Qgc2FsZU51bWJlciA9IGZvcm1EYXRhLmdldChcInNhbGVOdW1iZXJmb3JDYW5jZWxcIikgYXMgc3RyaW5nO1xuXG4gICAgbGV0IHNhbGUgPSBzYWxlU2VydmljZS5nZXRTYWxlKHNhbGVOdW1iZXIpO1xuXG4gICAgaWYgKHNhbGUpIHtcbiAgICAgIGxldCBjYW5jZWxTYWxlOiBDYW5jZWwgPSBuZXcgQ2FuY2VsKHNhbGUsIHNhbGUudG90YWwsIG5ldyBEYXRlKTtcbiAgICAgIGxldCBzdGF0ZSA9IGF3YWl0IGNhbmNlbFNlcnZpY2UuY2FuY2VsU2FsZU1vY2soY2FuY2VsU2FsZSk7XG5cbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICBhbGVydChzYWxlLm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBzYXTEscWfIGlwdGFsIGVkaWxtacWfdGlyLlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KHNhbGUub3BlcmF0aW9uTnVtYmVyICsgXCIgbnVtYXJhbMSxIHNhdMSxxZ8gaXB0YWwgZWRpbGlya2VuIGhhdGEgbWV5ZGFuYSBnZWxkaS5cIik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KHNhbGVOdW1iZXIgKyBcIiBudW1hcmFsxLEgc2F0xLHFnyBidWx1bmFtYW3EscWfdMSxci4gVGVrcmFyIGRlbmV5aW5pei5cIik7XG4gICAgfVxuXG4gIH1cbn1cblxuY29uc3QgY2FuY2VsUmVudEZvcm0gPSA8SFRNTEZvcm1FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FuY2VsLXJlbnQtZm9ybVwiKTtcbmlmIChjYW5jZWxSZW50Rm9ybSkge1xuICBjYW5jZWxSZW50Rm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gS2lyYWxhbWEgaXB0YWxpbmluIMOnYWzEscWfYWJpbG1lc2kgacOnaW4gw7ZuY2UgdmVyaSBla2xlZGltLCBzb25yYSBpcHRhbCBpxZ9sZW1pIMOnYWzEscWfxLF5b3JcbiAgICBsZXQgc2JpID0gbmV3IEFycmF5PE9yZGVyQm9va0l0ZW1zPjtcbiAgICBzYmkucHVzaChuZXcgT3JkZXJCb29rSXRlbXMoYm9va1NlcnZpY2UuZ2V0Qm9vayhcIjEyMy00NVwiKSwgMykpO1xuXG4gICAgbGV0IHJEYXRlID0gbmV3IERhdGU7XG4gICAgckRhdGUuc2V0RGF0ZShyRGF0ZS5nZXREYXRlKCkgKyAxNCk7XG5cbiAgICBsZXQgYSA9IG5ldyBSZW50KHNiaSwgbmV3IERhdGUsIDEsIFwiUjAyMTEyMjE2MzA0NVwiLCAxMjMsIHJEYXRlLCAyMDApO1xuICAgIHJlbnRTZXJ2aWNlLnJlbnRMaXN0LnB1c2goYSk7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShjYW5jZWxSZW50Rm9ybSk7XG4gICAgY29uc3QgcmVudE51bWJlciA9IGZvcm1EYXRhLmdldChcInJlbnROdW1iZXJmb3JDYW5jZWxcIikgYXMgc3RyaW5nO1xuXG4gICAgbGV0IHJlbnQgPSByZW50U2VydmljZS5nZXRSZW50KHJlbnROdW1iZXIpO1xuXG4gICAgaWYgKHJlbnQpIHtcbiAgICAgIGxldCBjYW5jZWxSZW50OiBDYW5jZWwgPSBuZXcgQ2FuY2VsKHJlbnQsIHJlbnQudG90YWwsIG5ldyBEYXRlKTtcbiAgICAgIGxldCBzdGF0ZSA9IGF3YWl0IGNhbmNlbFNlcnZpY2UuY2FuY2VsUmVudE1vY2soY2FuY2VsUmVudCk7XG5cbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICBhbGVydChyZW50Lm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbGFtYSBpcHRhbCBlZGlsbWnFn3Rpci5cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChyZW50Lm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbGFtYSBpcHRhbCBlZGlsaXJrZW4gaGF0YSBtZXlkYW5hIGdlbGRpLlwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQocmVudE51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbG1hIGJ1bHVuYW1hbcSxxZ90xLFyLiBUZWtyYXIgZGVuZXlpbml6LlwiKTtcbiAgICB9XG5cbiAgfVxuXG59XG5cbi8qKkJ1cmFkYSBtb2NrIHNlcnZpc2kgeW9rIMOnw7xua8O8IGJ1cmFkYSBraXRhcCBraXJhbGFtYXPEsSB5YXDEsWzEsXJrZW4sIGtpdGFwbGFyxLEgc2VwZXRlIGVrbGl5b3J1ei5cbiAqIFNlcGV0ZSBla2xlZGlrdGVuIHNvbnJhIGJ0blJlbnQgaWRsaSBidXRvbnVuIGNsaWNrIGV2ZW50aSwgbW9jayBzZXJ2aXNpIMOnYcSfxLFyxLF5b3JcbiAqL1xuY29uc3QgcmVudEJvb2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZW50LWJvb2stZm9ybVwiKSk7XG5pZiAocmVudEJvb2tGb3JtKSB7XG4gIHJlbnRCb29rRm9ybS5vbnN1Ym1pdCA9ICgpID0+IHtcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKHJlbnRCb29rRm9ybSk7XG5cbiAgICBjb25zdCBpc2JuID0gZm9ybURhdGEuZ2V0KFwiaXNibkZvclJlbnRcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGJvb2sgPSBib29rU2VydmljZS5nZXRCb29rKGlzYm4pO1xuICAgIGNvbnN0IGN1c3RvbWVySWQgPSBwYXJzZUludChmb3JtRGF0YS5nZXQoXCJjdXN0b21lcklkRm9yUmVudFwiKSBhcyBzdHJpbmcpO1xuICAgIC8vaXNWYWxpZEN1c3RvbWVyIHJlc3Qgc2VydmlzdGVuIGTDtmVuZW4gdmVyaXllIGfDtnJlIMWfZWtpbGxlbmVjZWtcbiAgICBjb25zdCBpc1ZhbGlkQ3VzdG9tZXI6IGJvb2xlYW4gPSB0cnVlOyAvL2N1c3RvbWVyU2VydmljZS5pc1ZhbGlkQ3VzdG9tZXIoY3VzdG9tZXJJZCk7XG4gICAgY29uc3QgcXVhbnRpdHkgPSBwYXJzZUludChmb3JtRGF0YS5nZXQoXCJxdWFudGl0eUZvclJlbnRcIikgYXMgc3RyaW5nKTtcbiAgICBjb25zdCBzdG9jayA9IHN0b2NrU2VydmljZS5nZXRTdG9jayhpc2JuKSE7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGJvb2spIHtcbiAgICAgICAgaWYgKHN0b2NrKSB7XG4gICAgICAgICAgaWYgKHN0b2NrLnF1YW50aXR5ID49IHF1YW50aXR5KSB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZEN1c3RvbWVyKSB7XG4gICAgICAgICAgICAgIHJlbnRTZXJ2aWNlLmFkZEJvb2tUb0NhcnQoYm9vaywgcXVhbnRpdHksIGN1c3RvbWVySWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYWxlcnQoY3VzdG9tZXJJZCArIFwiIG51bWFyYWzEsSBtw7zFn3Rlcmkga2F5xLF0bMSxIGRlxJ9pbGRpci5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYWxlcnQocXVhbnRpdHkgKyBcIiBrYWRhciBraXRhcCBkw7xra2FuZGEgbWV2Y3V0IGRlxJ9pbGRpci5cIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFsZXJ0KGBEw7xra2FuZGEgJHtpc2JufSBudW1hcmFsxLEga2l0YWLEsW4gc3RvxJ91IG1ldmN1dCBkZcSfaWxkaXIuYCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KGlzYm4gKyBcIiBudW1hcmFsxLEga2l0YXAgeW9rdHVyLlwiKTtcbiAgICAgIH1cblxuICAgICAgcmVudEJvb2tGb3JtLnJlc2V0KCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEtpdGFwIHNhdMSxxZ/EsSBpw6dpbiBpxZ9sZW0geWFwxLFsxLFya2VuIGtpdGFwbGFyIHNlcGV0ZSBla2xlbml5b3IuXG4gKiBFa2xlbWUgacWfbGVtaSBiaXR0aWt0ZW4gc29ucmEgc2F0xLFuIGFsbSBpacOnaW4gYnUgYnV0b25hIHTEsWtsYW5kxLHEn8SxbmRhIHNlcnZpc2UgZ2lkaXAgc2VwZXR0ZWtpIGtpdGFwbGFyxLFuIHNhdMSxxZ/EsSBnZXLDp2VrbGXFn2l5b3JcbiAqIEJ1cmFkYSBkacSfZXIgYnV0b25sYXJkYSBvbGR1xJ91IGdpYmkgZGlyZWsgbW9jayBzZXJ2aXNpbmUgYmHEn2xhbm1hayB5ZXJpbmUgc2VydmlzZSBnaXRtZWsgZHVydW11bmRhecSxei4gXG4gKiDDh8O8bmvDvCBzZXJ2aXN0ZSBTYWxlIG5lc25lc2luaSBvbHXFn3R1cnVwIG1vY2sgc2VydmlzaW5lIHBhcmFtZXRyZSBvbGFyayBnZcOnaXlvcnV6LlxuICovXG5jb25zdCBidG5SZW50ID0gPEhUTUxCdXR0b25FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0blJlbnRcIikpO1xuYnRuUmVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBpZiAocmVudFNlcnZpY2UucmVudENhcnQub3JkZXJCb29rSXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgYWxlcnQoXCJTZXBldHRlIMO8csO8biB5b2suIEzDvHRmZW4gw7ZuY2Ugw7xyw7xuIGVrbGV5aW5pelwiKTtcbiAgfSBlbHNlIHtcbiAgICByZW50U2VydmljZS5jYXJ0VG9SZW50KCk7XG4gIH1cblxufSk7XG5cbmNvbnN0IHJlZnVuZEJvb2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZWZ1bmQtYm9vay1mb3JtXCIpKTtcbmlmIChyZWZ1bmRCb29rRm9ybSkge1xuICByZWZ1bmRCb29rRm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG5cbiAgICAvLyBLaXJhbGFtYSBpxZ9sZW1pbmRlbiBnZXJpIMO2ZGVtZSBpxZ9sZW1pIMOnYWzEscWfYWJpbG1lc2kgacOnaW4gw7ZuY2Uga2lyYWxhbWEgdmVyaXNpIGVrbGVkaW0sIFxuICAgIC8vIFNvbnJhIGdlcmkgw7ZkZW1lIGnFn2xlbWkgw6dhbMSxxZ/EsXlvclxuICAgIGxldCBzYmkgPSBuZXcgQXJyYXk8T3JkZXJCb29rSXRlbXM+O1xuICAgIHNiaS5wdXNoKG5ldyBPcmRlckJvb2tJdGVtcyhib29rU2VydmljZS5nZXRCb29rKFwiMTIzLTQ1XCIpLCAzKSlcblxuICAgIGxldCByRGF0ZSA9IG5ldyBEYXRlO1xuICAgIHJEYXRlLnNldERhdGUockRhdGUuZ2V0RGF0ZSgpICsgMjMpO1xuXG4gICAgbGV0IGEgPSBuZXcgUmVudChzYmksIG5ldyBEYXRlLCAxLCBcIlIwMjExMjIxNjMwNDVcIiwgMTIzLCByRGF0ZSwgMCk7XG4gICAgYS5yZWZ1bmQgPSByZW50U2VydmljZS5jYWxjdWxhdGVSZWZ1bmRBbW91bnQoYSk7XG5cbiAgICByZW50U2VydmljZS5yZW50TGlzdC5wdXNoKGEpO1xuICAgIC8vVmVyaSBHaXJpxZ9pIHNvbiBhbGFuxLFcblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShyZWZ1bmRCb29rRm9ybSk7XG4gICAgY29uc3QgcmVudE51bWJlciA9IGZvcm1EYXRhLmdldChcInJlbnROdW1iZXJmb3JSZWZ1bmRcIikgYXMgc3RyaW5nO1xuXG4gICAgbGV0IHJlbnQgPSByZW50U2VydmljZS5nZXRSZW50KHJlbnROdW1iZXIpO1xuICAgIGlmIChyZW50KSB7XG5cbiAgICAgIGxldCByZWZ1bmQgPSBhd2FpdCByZW50U2VydmljZS5yZWZ1bmRSZW50TW9jayhyZW50KTtcblxuICAgICAgaWYgKHJlZnVuZCkge1xuICAgICAgICBhbGVydChyZW50Lm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbGFtYSBnZXJpIGFsxLFubcSxxZ90xLFyLlwiKTtcbiAgICAgICAgYWxlcnQoXCJHZXJpIMO2ZGVtZSBtaWt0YXLEsTpcIiArIHJlZnVuZCArIFwiIOKCuiAuXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChyZW50Lm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbGFtYSBpcHRhbCBlZGlsaXJrZW4gaGF0YSBtZXlkYW5hIGdlbGRpLlwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQocmVudE51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbGFtYSBidWx1bmFtYW3EscWfdMSxci4gVGVrcmFyIGRlbmV5aW5pei5cIik7XG4gICAgfVxuXG4gIH07XG59IiwiLyoqXG4gKiBAYXV0aG9yIE1laG1ldCBFLiBBa2NhbiAtIDIxLjEwLjIyXG4gKi9cbmltcG9ydCB7IHN0b2NrU2VydmljZSB9IGZyb20gXCIuLlwiO1xuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgQm9va1NwZWNpZmljYXRpb24gfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2stc3BlY2lmaWNhdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgQm9va1NlcnZpY2Uge1xuICAgIHByaXZhdGUgX2Jvb2tMaXN0OiBBcnJheTxCb29rPjtcbiAgICBwcml2YXRlIF9ib29rU3BlY2lmaWNhdGlvbjogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+O1xuICAgIGJvb2tBcGk6IHN0cmluZyA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL2Jvb2tzJztcblxuICAgIGNvbnN0cnVjdG9yKGJvb2tMaXN0OiBBcnJheTxCb29rPiwgYm9va1NwZWNpZmljYXRpb246IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPikge1xuICAgICAgICB0aGlzLl9ib29rTGlzdCA9IGJvb2tMaXN0O1xuICAgICAgICB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbiA9IGJvb2tTcGVjaWZpY2F0aW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBib29rTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PEJvb2s+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgYm9va0xpc3QoKTogQXJyYXk8Qm9vaz4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYm9va0xpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGJvb2tTcGVjaWZpY2F0aW9uXG4gICAgICogQHJldHVybiB7QXJyYXk8Qm9va1NwZWNpZmljYXRpb24+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgYm9va1NwZWNpZmljYXRpb24oKTogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8Qm9vaz59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBib29rTGlzdCh2YWx1ZTogQXJyYXk8Qm9vaz4pIHtcbiAgICAgICAgdGhpcy5fYm9va0xpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgYm9va1NwZWNpZmljYXRpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5PEJvb2tTcGVjaWZpY2F0aW9uPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGJvb2tTcGVjaWZpY2F0aW9uKHZhbHVlOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4pIHtcbiAgICAgICAgdGhpcy5fYm9va1NwZWNpZmljYXRpb24gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBwYXJhbWV0cmUgb2xhcmFrIGdlbGVuIGlzYm4gYmlsZ2lzaW5lIGfDtnJlIGlsZ2lsaSBraXRhYsSxIGJ1bHVyLlxuICAgICAqIEBwYXJhbSBpc2JuIEJ1bHVuYWNhayBvbGFuIGtpdGFixLFuIGlzYm4gbnVtYXJhc8SxXG4gICAgICogQHJldHVybnMgaXNibiBudW1hcmFzxLFuYSBnw7ZyZSBpbGdpbGkga2l0YWLEsSBCb29rIG5lc25lc2kgb2xhcmFrIGdlcmkgZMO2bmTDvHLDvHJcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0Qm9vayhpc2JuOiBzdHJpbmcpOiBCb29rIHtcbiAgICAgICAgLy9CdXJhZGFuIG51bGwgYmlyIGRlxJ9lciBkZSBkw7ZuZWJpbGVjZcSfaSBpw6dpbiBoYXRhIHZlcml5b3JcbiAgICAgICAgLy9hbWEgYml6IHNvbmRha2kgISBvcGVyYXTDtnLDvCBpbGUgbnVsbCBkZcSfZXIgZMO2bm1leWVjZWsgZGl5ZSBnYXJhbnRpIHZlcml5b3J1elxuICAgICAgICByZXR1cm4gdGhpcy5ib29rTGlzdC5maW5kKGIgPT4gYi5pc2JuID09PSBpc2JuKSE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyYW1ldHJlIG9sYXJhayBnZWxlbiBCb29rIG5lc25lc2luaSBraXRhcCBuZXNuZXNpbmUgZWtsZXJcbiAgICAgKiBAcGFyYW0gbmV3Qm9vayBla2xlbmVjZWsgb2xhbiBraXRhcCBuZXNuZXNpXG4gICAgICovXG4gICAgcHVibGljIGFkZEJvb2sobmV3Qm9vazogQm9vaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5ib29rTGlzdC5wdXNoKG5ld0Jvb2spO1xuICAgICAgICAgICAgdGhpcy5ib29rU3BlY2lmaWNhdGlvbi5wdXNoKG5ld0Jvb2suYm9va1NwZWNpZmljYXRpb24pO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiS2l0YXAgZWtsZW5pcmtlbiBiaXIgaGF0YSBtZXlkYW5hIGdlbGRpLlwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpc1ZhbGlkQm9vayhpc2JuOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgYiA9IHRoaXMuZ2V0Qm9vayhpc2JuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9va0xpc3QuaW5jbHVkZXMoYilcbiAgICB9XG5cbiAgICBhc3luYyBpbml0aWFsaXplRGF0YU1vY2soKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuYm9va0FwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgY29uc3QgZ2V0UmVzdWx0ID0gPEJvb2tbXT5KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3VsdCwgbnVsbCwgNCkpO1xuICAgICAgICAgICAgdGhpcy5ib29rTGlzdCA9IGdldFJlc3VsdCBhcyBBcnJheTxCb29rPjtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGxpc3RCb29rcygpIHtcbiAgICAgICAgY29uc3QgbGlzdEJvb2tzRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsaXN0Qm9va3NcIik7XG5cbiAgICAgICAgaWYgKGxpc3RCb29rc0Rpdikge1xuICAgICAgICAgICAgbGV0IHJvdywgY29sdW1uO1xuXG4gICAgICAgICAgICB3aGlsZSAobGlzdEJvb2tzRGl2Lmxhc3RDaGlsZCAmJiBsaXN0Qm9va3NEaXYuY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGxpc3RCb29rc0Rpdi5yZW1vdmVDaGlsZChsaXN0Qm9va3NEaXYubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5ib29rTGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgICAgIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgcm93LmNsYXNzTmFtZSA9IFwicm93LWxpc3QtYm9va1wiO1xuXG4gICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJjb2x1bW4tbGlzdC1ib29rXCI7XG4gICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gZWxlbWVudC5pc2JuLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbGVtZW50Lm5hbWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVsZW1lbnQuYXV0aG9yLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBzdG9ja1NlcnZpY2UuZ2V0U3RvY2tRdWFudGl0eShlbGVtZW50LmlzYm4pLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbGVtZW50LmJvb2tTcGVjaWZpY2F0aW9uLnByaWNlLnRvU3RyaW5nKCkgKyBcIiDigrpcIjtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGxpc3RCb29rc0Rpdi5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBhc3luYyBhZGRCb29rTW9jayhiOiBCb29rKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuYm9va0FwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaXNibjogYi5pc2JuLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBiLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcjogYi5hdXRob3IsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VzOiBiLnBhZ2VzLFxuICAgICAgICAgICAgICAgICAgICBwdWJsaXNoWWVhcjogYi5wdWJsaXNoWWVhcixcbiAgICAgICAgICAgICAgICAgICAgYm9va1NwZWNpZmljYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzYm46IGIuYm9va1NwZWNpZmljYXRpb24uaXNibixcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiBiLmJvb2tTcGVjaWZpY2F0aW9uLnByaWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnREYXRlOiBiLmJvb2tTcGVjaWZpY2F0aW9uLnN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZERhdGU6IGIuYm9va1NwZWNpZmljYXRpb24uZW5kRGF0ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVzdCBzZXJ2aXNpbmRlbiBkw7ZuZW4gY2V2YXAgPT5cIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgQ2FuY2VsIH0gZnJvbSBcIi4uL2RvbWFpbi9jYW5jZWxcIjtcblxuZXhwb3J0IGNsYXNzIENhbmNlbFNlcnZpY2Uge1xuICAgIHByaXZhdGUgX2NhbmNlbGxlZExpc3Q6IEFycmF5PENhbmNlbD47XG4gICAgY2FuY2VsU2FsZUFwaTogc3RyaW5nID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvdjEvY2FuY2VsU2FsZSc7XG4gICAgY2FuY2VsUmVudEFwaTogc3RyaW5nID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvdjEvY2FuY2VsUmVudCc7XG5cbiAgICBjb25zdHJ1Y3RvcihjYW5jZWxsZWRMaXN0OiBBcnJheTxDYW5jZWw+KSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbGxlZExpc3QgPSBjYW5jZWxsZWRMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjYW5jZWxsZWRTYWxlc0xpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxDYW5jZWxTYWxlPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGNhbmNlbGxlZExpc3QoKTogQXJyYXk8Q2FuY2VsPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW5jZWxsZWRMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBjYW5jZWxsZWRTYWxlc0xpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PENhbmNlbFNhbGU+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgY2FuY2VsbGVkTGlzdCh2YWx1ZTogQXJyYXk8Q2FuY2VsPikge1xuICAgICAgICB0aGlzLl9jYW5jZWxsZWRMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbGN1bGF0ZURpZmZIb3VycyhkMTogRGF0ZSwgZDI6IERhdGUpOiBudW1iZXIge1xuXG4gICAgICAgIGxldCBkaWZmTWlsaXM6IG51bWJlciA9IChkMS5nZXRUaW1lKCkgLSBkMi5nZXRUaW1lKCkpOy8vIG1pbGkgc2Vjb25kc1xuICAgICAgICBsZXQgZGlmZkhvdXIgPSBNYXRoLmZsb29yKGRpZmZNaWxpcyAvIDEwMDAgLyA2MCAvIDYwKTsgLy8gLzEwMDAgPiBzZWNvbmQgLyA2MCA+IG1pbiAvIDYwID4gaG91clxuICAgICAgICByZXR1cm4gZGlmZkhvdXI7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbmNlbFNhbGUoY2FuY2VsOiBDYW5jZWwpOiB2b2lkIHtcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyID0gdGhpcy5jYWxjdWxhdGVDYW5jZWxTYWxlUmVmdW5kKGNhbmNlbCk7XG4gICAgICAgIGNhbmNlbC5yZWZ1bmQgPSByZWZ1bmQ7XG4gICAgICAgIHRoaXMuY2FuY2VsbGVkTGlzdC5wdXNoKGNhbmNlbCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQoY2FuY2VsU2FsZTogQ2FuY2VsKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGRpZmYgPSB0aGlzLmNhbGN1bGF0ZURpZmZIb3VycyhjYW5jZWxTYWxlLmNhbmNlbGVkRGF0ZVRpbWUsIGNhbmNlbFNhbGUuY2FuY2VsVHlwZS5vcGVyYXRpb25EYXRlVGltZSlcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyO1xuXG4gICAgICAgIGlmIChkaWZmID4gMjQpIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IGNhbmNlbFNhbGUuY2FuY2VsVHlwZS50b3RhbCAqIDAuNzU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWZ1bmQgPSBjYW5jZWxTYWxlLmNhbmNlbFR5cGUudG90YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlZnVuZDtcbiAgICB9XG5cbiAgICBhc3luYyBjYW5jZWxTYWxlTW9jayhjYW5jZWxTYWxlOiBDYW5jZWwpIHtcblxuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXIgPSB0aGlzLmNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQoY2FuY2VsU2FsZSk7XG5cbiAgICAgICAgY2FuY2VsU2FsZS5yZWZ1bmQgPSByZWZ1bmQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5jYW5jZWxTYWxlQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBzYWxlOiBjYW5jZWxTYWxlLmNhbmNlbFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJlZnVuZDogY2FuY2VsU2FsZS5yZWZ1bmQsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGVkRGF0ZVRpbWU6IGNhbmNlbFNhbGUuY2FuY2VsZWREYXRlVGltZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL1RvZG8gc2FsZSBtb2NrIHNlcnZpc2luZSBkZWxldGUgaXN0ZcSfaSBhdMSxcCBvIHNhbGUgbmVzbmVzaW5pIHNpbGVjZWtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cblxuXG4gICAgfVxuXG4gICAgcHVibGljIGNhbmNlbFJlbnQoY2FuY2VsOiBDYW5jZWwpIHtcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyID0gdGhpcy5jYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kKGNhbmNlbCk7XG4gICAgICAgIGNhbmNlbC5yZWZ1bmQgPSByZWZ1bmQ7XG4gICAgICAgIHRoaXMuY2FuY2VsbGVkTGlzdC5wdXNoKGNhbmNlbCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbGN1bGF0ZUNhbmNlbFJlbnRSZWZ1bmQoY2FuY2VsUmVudDogQ2FuY2VsKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGRpZmYgPSB0aGlzLmNhbGN1bGF0ZURpZmZIb3VycyhjYW5jZWxSZW50LmNhbmNlbGVkRGF0ZVRpbWUsIGNhbmNlbFJlbnQuY2FuY2VsVHlwZS5vcGVyYXRpb25EYXRlVGltZSlcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyO1xuXG4gICAgICAgIGlmIChkaWZmID4gMjQpIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IGNhbmNlbFJlbnQuY2FuY2VsVHlwZS50b3RhbCAqIDAuNzU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWZ1bmQgPSBjYW5jZWxSZW50LmNhbmNlbFR5cGUudG90YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlZnVuZDtcbiAgICB9XG5cbiAgICBhc3luYyBjYW5jZWxSZW50TW9jayhjYW5jZWxSZW50OiBDYW5jZWwpe1xuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXIgPSB0aGlzLmNhbGN1bGF0ZUNhbmNlbFJlbnRSZWZ1bmQoY2FuY2VsUmVudCk7XG5cbiAgICAgICAgY2FuY2VsUmVudC5yZWZ1bmQgPSByZWZ1bmQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5jYW5jZWxSZW50QXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICByZW50OiBjYW5jZWxSZW50LmNhbmNlbFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJlZnVuZDogY2FuY2VsUmVudC5yZWZ1bmQsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGVkRGF0ZVRpbWU6IGNhbmNlbFJlbnQuY2FuY2VsZWREYXRlVGltZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL1RvZG8gc2FsZSBtb2NrIHNlcnZpc2luZSBkZWxldGUgaXN0ZcSfaSBhdMSxcCBvIHNhbGUgbmVzbmVzaW5pIHNpbGVjZWtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBDdXN0b21lciB9IGZyb20gXCIuLi9kb21haW4vY3VzdG9tZXJcIjtcblxuZXhwb3J0IGNsYXNzIEN1c3RvbWVyU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfY3VzdG9tZXJMaXN0OiBBcnJheTxDdXN0b21lcj47XG4gICAgcHJpdmF0ZSBjdXN0b21lckFwaTogc3RyaW5nID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL2N1c3RvbWVyc1wiO1xuXG4gICAgY29uc3RydWN0b3IoY3VzdG9tZXJMaXN0OiBBcnJheTxDdXN0b21lcj4pIHtcbiAgICAgICAgdGhpcy5fY3VzdG9tZXJMaXN0ID0gY3VzdG9tZXJMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjdXN0b21lckxpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxDdXN0b21lcj59XG4gICAgICovXG4gICAgcHVibGljIGdldCBjdXN0b21lckxpc3QoKTogQXJyYXk8Q3VzdG9tZXI+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbWVyTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY3VzdG9tZXJMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxDdXN0b21lcj59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBjdXN0b21lckxpc3QodmFsdWU6IEFycmF5PEN1c3RvbWVyPikge1xuICAgICAgICB0aGlzLl9jdXN0b21lckxpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQ3VzdG9tZXIobmV3Q3VzdG9tZXI6IEN1c3RvbWVyKSB7XG4gICAgICAgIHRoaXMuY3VzdG9tZXJMaXN0LnB1c2gobmV3Q3VzdG9tZXIpO1xuICAgIH1cblxuICAgIC8qXG4gICAgICAgIHB1YmxpYyBnZXRDdXN0b21lckluZm8oaWQ6IG51bWJlcik6IEN1c3RvbWVyIHwgdW5kZWZpbmVkIHtcbiAgICBcbiAgICAgICAgICAgIGxldCBjdXN0b21lciA9IHRoaXMuY3VzdG9tZXJMaXN0LmZpbmQoY3VzdG9tZXIgPT4gY3VzdG9tZXIuaWQgPT09IGlkKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChjdXN0b21lcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21lcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICBwdWJsaWMgaXNWYWxpZEN1c3RvbWVyKGN1c3RvbWVySWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIFxuICAgICAgICAgICAgbGV0IGlzVmFsaWQgPSB0aGlzLmN1c3RvbWVyTGlzdC5zb21lKGN1c3RvbWVyID0+IGN1c3RvbWVyLmlkID09PSBjdXN0b21lcklkKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICovXG5cbiAgICBhc3luYyBhZGRDdXN0b21lck1vY2sobmV3Q3VzdG9tZXI6IEN1c3RvbWVyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuY3VzdG9tZXJBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5ld0N1c3RvbWVyLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHN1ck5hbWU6IG5ld0N1c3RvbWVyLnN1ck5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBuZXdDdXN0b21lci5waG9uZU51bWJlclxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlc3Qgc2VydmlzaW5kZW4gZMO2bmVuIGNldmFwID0+XCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IHN0b2NrU2VydmljZSB9IGZyb20gXCIuLlwiO1xuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgUmVudCB9IGZyb20gXCIuLi9kb21haW4vcmVudFwiO1xuaW1wb3J0IHsgUmVudENhcnQgfSBmcm9tIFwiLi4vZG9tYWluL3JlbnQtY2FydFwiO1xuaW1wb3J0IHsgT3JkZXJCb29rSXRlbXMgfSBmcm9tIFwiLi4vZG9tYWluL29yZGVyLWJvb2staXRlbVwiO1xuXG5leHBvcnQgY2xhc3MgUmVudFNlcnZpY2Uge1xuICAgIHByaXZhdGUgX3JlbnRMaXN0OiBBcnJheTxSZW50PjtcblxuICAgIHByaXZhdGUgX3JlbnRDYXJ0OiBSZW50Q2FydDtcbiAgICBwdWJsaWMgcmVudEFwaSA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL3JlbnRzJztcbiAgICByZWZ1bmRQZXJjZW50OiBudW1iZXI7XG5cblxuICAgIGNvbnN0cnVjdG9yKHJlbnRMaXN0OiBBcnJheTxSZW50PiwgcmVudENhcnQ6IFJlbnRDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3JlbnRMaXN0ID0gcmVudExpc3Q7XG4gICAgICAgIHRoaXMucmVmdW5kUGVyY2VudCA9IDAuNzU7XG4gICAgICAgIHRoaXMuX3JlbnRDYXJ0ID0gcmVudENhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHJlbnRMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8UmVudD59XG4gICAgICovXG4gICAgcHVibGljIGdldCByZW50TGlzdCgpOiBBcnJheTxSZW50PiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW50TGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVudExpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PFJlbnQ+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcmVudExpc3QodmFsdWU6IEFycmF5PFJlbnQ+KSB7XG4gICAgICAgIHRoaXMuX3JlbnRMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHJlbnRDYXJ0XG4gICAgICogQHJldHVybiB7UmVudENhcnR9XG4gICAgICovXG4gICAgcHVibGljIGdldCByZW50Q2FydCgpOiBSZW50Q2FydCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW50Q2FydDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVudENhcnRcbiAgICAgKiBAcGFyYW0ge1JlbnRDYXJ0fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcmVudENhcnQodmFsdWU6IFJlbnRDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3JlbnRDYXJ0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFJlbnQocmVudDogUmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbnRMaXN0LnB1c2gocmVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2l0YXBsYXLEsW4gaGVwc2kgc2VwZXRlIGVrbGVuZGlrdGVuIHNvbnJhIHRvcGxtYSDDvGNyZXRpIGhlc2FwbGF1YW4gZm9ua3NpeW9uXG4gICAgICogQHBhcmFtIHJlbnQgS2l0YXBsYXLEsW4gbGlzdGVzaW5pbiBidWx1bmR1xJ91IG5lc25lXG4gICAgICogQHJldHVybnMgVG9wbGFtIMO8Y3JldFxuICAgICAqL1xuICAgIHB1YmxpYyBjYWxjdWxhdGVUb3RhbChyZW50OiBSZW50KTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHN1YlRvdGFsOiBudW1iZXIgPSAwO1xuXG4gICAgICAgIC8vaXQgY2FuIGJlID0+IGxldCBlbnRyeSBvZiByZW50LmJvb2tBbmRRdWFudGl0eU1hcC5lbnRyaWVzKClcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiByZW50Lm9yZGVyQm9va0l0ZW1zKSB7XG4gICAgICAgICAgICBzdWJUb3RhbCArPSBpdGVtLmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiBpdGVtLnF1YW50aXR5XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3ViVG90YWw7XG4gICAgfVxuXG4gICAgLy8gUjA1MTAyMjE0NTUwOSA9PiBkb21haW4uUmVudCAwNS4xMC4yMDIyIDE0OjU1LjA5XG4gICAgZ2VuZXJhdGVSZW50TnVtYmVyKGN1c3RvbWVySWQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGxldCByZWNlaXB0TnVtYmVyOiBzdHJpbmcgPSBcIlJcIiArIHRvZGF5LmdldERheSgpLnRvU3RyaW5nKCkgK1xuICAgICAgICAgICAgdG9kYXkuZ2V0TW9udGgoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICtcbiAgICAgICAgICAgIHRvZGF5LmdldEhvdXJzKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldE1pbnV0ZXMoKS50b1N0cmluZygpICtcbiAgICAgICAgICAgIHRvZGF5LmdldFNlY29uZHMoKS50b1N0cmluZygpICsgY3VzdG9tZXJJZC50b1N0cmluZygpO1xuXG4gICAgICAgIHJldHVybiByZWNlaXB0TnVtYmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBkMSBLaXRhcGxhxLFuIGtpcmFsxLFrIG9sYXJhayBhbMSxbmTEscSfxLEgdGFyaWhcbiAgICAgKiBAcGFyYW0gZDIgS2l0YXBsYXLEsW4gZ2VyaSBnZXRpcmlsZGnEn2kgdGFyaWhcbiAgICAgKiBAcmV0dXJucyDEsGtpIHRhcmloIGFyYXPEsW5kYWtpIGZhcmsgKHNhYXQgb2xhcmFrKVxuICAgICAqL1xuICAgIHB1YmxpYyBjYWxjdWxhdGVEaWZmSG91cnMoZDE6IERhdGUsIGQyOiBEYXRlKTogbnVtYmVyIHtcblxuICAgICAgICBsZXQgZGlmZk1pbGlzOiBudW1iZXIgPSAoZDEuZ2V0VGltZSgpIC0gZDIuZ2V0VGltZSgpKTsvLyBtaWxpIHNlY29uZHNcbiAgICAgICAgbGV0IGRpZmZIb3VyID0gTWF0aC5mbG9vcihkaWZmTWlsaXMgLyAxMDAwIC8gNjAgLyA2MCk7IC8vIC8xMDAwID4gc2Vjb25kIC8gNjAgPiBtaW4gLyA2MCA+IGhvdXJcbiAgICAgICAgcmV0dXJuIGRpZmZIb3VyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwIGlsayBraXJhbGFuZMSxxJ/EsSBhbmRhLCB6YW1hbsSxbmRhIGdldGlyaWxkacSfaSBnaWJpIGTDvMWfw7xuw7xsZXJlayB2ZXJpbGVjZWsgb2xhbiB2YXJzYXnEsWxhbiBnZXJpIMO2ZGVtZSBtaWt0YXLEsVxuICAgICAqIEBwYXJhbSByZW50IEhlc2FwbGFuYWNhayBvbGFuIGdlcmkgw7ZkZW1lIG1pa3RhcsSxbsSxbiBpw6dpbmRlIGJ1bHVuZHXEn3UgbmVzbmVcbiAgICAgKi9cbiAgICBwdWJsaWMgY2FsY3VsYXRlUmVmdW5kKHJlbnQ6IFJlbnQpOiB2b2lkIHtcbiAgICAgICAgcmVudC5yZWZ1bmQgPSByZW50LnRvdGFsICogdGhpcy5yZWZ1bmRQZXJjZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwIGtpcmFsYW5kxLEsIG9rdW5kdSB2ZSBnZXJpIGdldGlyaWxkacSfaSB6YW1hbiBuZSBrYWRhciBnZXJpIMO2ZGVtZSB2ZXJpbGVjZcSfaW5pIGhlc2FwbGFyXG4gICAgICogQHBhcmFtIHJlbnQgSGVzYXBsYW5hY2FrIG9sYW4gZ2VyaSDDtmRlbWUgbWlrdGFyxLFuxLFuIGnDp2luZGUgYnVsdW5kdcSfdSBuZXNuZVxuICAgICAqIEByZXR1cm5zIEdlcmkgw7ZkZW1lIG1pa3RhcsSxXG4gICAgICovXG4gICAgcHVibGljIGNhbGN1bGF0ZVJlZnVuZEFtb3VudChyZW50OiBSZW50KTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGRpZmYgPSB0aGlzLmNhbGN1bGF0ZURpZmZIb3VycyhyZW50LnJlZnVuZERhdGUsIHJlbnQub3BlcmF0aW9uRGF0ZVRpbWUpIC8gMjQ7XG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlcjtcblxuICAgICAgICBpZiAoZGlmZiA8PSAxNCkge1xuICAgICAgICAgICAgcmVmdW5kID0gcmVudC50b3RhbCAqIDAuNzU7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlmZiA8PSAyNCkge1xuICAgICAgICAgICAgbGV0IGZpbmUgPSAoMC43NSAtICgoZGlmZiAtIDE0KSAqIDAuMDUpKTtcbiAgICAgICAgICAgIHJlZnVuZCA9IHJlbnQudG90YWwgKiBmaW5lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVmdW5kID0gcmVudC50b3RhbCAqIDAuMjU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVmdW5kO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSZW50KHJlbnROdW1iZXI6IHN0cmluZyk6IFJlbnQge1xuICAgICAgICBsZXQgcmVudCA9IHRoaXMucmVudExpc3QuZmluZChzID0+IHMub3BlcmF0aW9uTnVtYmVyID09PSByZW50TnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHJlbnQhO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRCb29rVG9DYXJ0KGJvb2s6IEJvb2ssIHF1YW50aXR5OiBudW1iZXIsIGN1c3RvbWVySWQ6IG51bWJlcikge1xuICAgICAgICBpZiAodGhpcy5yZW50Q2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVudENhcnQuY3VzdG9tZXJJZCA9IGN1c3RvbWVySWQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZW50Q2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW50Q2FydC5jdXN0b21lcklkICE9PSBjdXN0b21lcklkKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJGYXJrbMSxIG3DvMWfdGVyaXllIGtpdGFwIGtpcmFsYW5tYXlhIMOnYWzEscWfxLFsxLF5b3IuIEzDvHRmZW4gdGVrIG3DvMWfdGVyaSBpw6dpbiBpxZ9sZW0geWFwxLFuxLF6XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVudENhcnQub3JkZXJCb29rSXRlbXMucHVzaChuZXcgT3JkZXJCb29rSXRlbXMoYm9vaywgcXVhbnRpdHkpKVxuICAgICAgICB0aGlzLnVwZGF0ZVJlbnRDYXJ0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZVJlbnRDYXJ0KCkge1xuICAgICAgICBjb25zdCByZW50Q2FydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVudENhcnRcIik7XG4gICAgICAgIGNvbnN0IHN1YlRvdGFsU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG90YWxSZW50QW1vdW50VGxcIik7XG5cbiAgICAgICAgaWYgKHJlbnRDYXJ0KSB7XG5cbiAgICAgICAgICAgIGxldCByb3csIGNvbHVtbiwgc3ViVG90YWw6IG51bWJlciA9IDA7XG5cbiAgICAgICAgICAgIHdoaWxlIChyZW50Q2FydC5sYXN0Q2hpbGQgJiYgcmVudENhcnQuY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHJlbnRDYXJ0LnJlbW92ZUNoaWxkKHJlbnRDYXJ0Lmxhc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJUb3RhbFNwYW4hLnRleHRDb250ZW50ID0gXCJcIjtcblxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucmVudENhcnQub3JkZXJCb29rSXRlbXMubGVuZ3RoOyBpbmRleCsrKSB7XG5cbiAgICAgICAgICAgICAgICByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1yb3dcIjtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5yZW50Q2FydC5vcmRlckJvb2tJdGVtcykge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gdGhpcy5yZW50Q2FydC5jdXN0b21lcklkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gaXRlbS5ib29rLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gaXRlbS5xdWFudGl0eS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IChpdGVtLmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiBpdGVtLnF1YW50aXR5KS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyb3cgJiYgc3ViVG90YWxTcGFuKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0IG9mIHRoaXMucmVudENhcnQub3JkZXJCb29rSXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViVG90YWwgKz0gdC5ib29rLmJvb2tTcGVjaWZpY2F0aW9uLnByaWNlICogdC5xdWFudGl0eTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZW50Q2FydC5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgICAgIHN1YlRvdGFsU3Bhbi50ZXh0Q29udGVudCA9IHN1YlRvdGFsLnRvU3RyaW5nKCkgKyBcIiBUTFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuXG4gICAgfVxuXG4gICAgcHVibGljIGNhcnRUb1JlbnQoKSB7XG4gICAgICAgIGxldCByZW50Q2FydDogUmVudENhcnQgPSB0aGlzLnJlbnRDYXJ0O1xuICAgICAgICBsZXQgcmVudCA9IG5ldyBSZW50KCk7XG5cbiAgICAgICAgcmVudC5vcmRlckJvb2tJdGVtcyA9IHJlbnRDYXJ0Lm9yZGVyQm9va0l0ZW1zO1xuICAgICAgICByZW50LmN1c3RvbWVySWQgPSByZW50Q2FydC5jdXN0b21lcklkO1xuICAgICAgICByZW50Lm9wZXJhdGlvbk51bWJlciA9IHRoaXMuZ2VuZXJhdGVSZW50TnVtYmVyKHJlbnRDYXJ0LmN1c3RvbWVySWQpO1xuICAgICAgICByZW50Lm9wZXJhdGlvbkRhdGVUaW1lID0gbmV3IERhdGUoKTtcbiAgICAgICAgcmVudC50b3RhbCA9IHRoaXMuY2FsY3VsYXRlVG90YWwocmVudCk7XG4gICAgICAgIGxldCByRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJEYXRlLnNldERhdGUockRhdGUuZ2V0RGF0ZSgpICsgMTQpO1xuICAgICAgICByZW50LnJlZnVuZERhdGUgPSByRGF0ZTtcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVSZWZ1bmQocmVudCk7XG5cbiAgICAgICAgZm9yIChsZXQgaSBvZiByZW50Lm9yZGVyQm9va0l0ZW1zKSB7XG4gICAgICAgICAgICBzdG9ja1NlcnZpY2UuaW5jcmVhc2VTdG9jayhpLmJvb2suaXNibiwgLWkucXVhbnRpdHkpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbnRDYXJ0ID0gbmV3IFJlbnRDYXJ0OyAvLyBzZXBldGkgYm/Fn2FsdFxuICAgICAgICB0aGlzLnVwZGF0ZVJlbnRDYXJ0KCk7XG4gICAgICAgIHRoaXMuYWRkUmVudE1vY2socmVudCk7XG4gICAgfVxuXG4gICAgYXN5bmMgYWRkUmVudE1vY2socjogUmVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnJlbnRBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIG9yZGVyQm9va0l0ZW1zOiBBcnJheS5mcm9tKHIub3JkZXJCb29rSXRlbXMpLFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21lcklkOiByLmN1c3RvbWVySWQsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbkRhdGVUaW1lOiByLm9wZXJhdGlvbkRhdGVUaW1lLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25OdW1iZXI6IHIub3BlcmF0aW9uTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbDogci50b3RhbCxcbiAgICAgICAgICAgICAgICAgICAgcmVmdW5kRGF0ZTogci5yZWZ1bmREYXRlLFxuICAgICAgICAgICAgICAgICAgICByZWZ1bmQ6IHIucmVmdW5kXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVzdCBhcGlkYW4gZMO2bmVuIGNldmFwOlxcblwiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiS2l0YXAga2lyYWxhbWEgacWfbGVtaSBiYcWfYXLEsXlsYSBnZXLDp2VrbGXFn21pxZ90aXIuXCIpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRmnFn2luaXppIGtheWJldG5leWluaXouIEZpxZ8gbnVtYXJhbsSxejogXCIgKyByLm9wZXJhdGlvbk51bWJlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICAgICAgYWxlcnQoXCJLaXRhcCBraXJhbGFtYSBpxZ9sZW1pIHPEsXJhc8SxbmRhIGJpciBoYXRhIG9sdcWfdHUuIEzDvHRmZW4gdGVrcmFyIGRlbmV5aW5pei5cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyByZWZ1bmRSZW50TW9jayhyOiBSZW50KSB7XG4gICAgICAgIC8vUEFUQ0ggQmVsaXJsaSBiaXIga2F5bmFrdGFraSB2ZXJpbGVyaW4gYmlyIGvEsXNtxLFuxLFuIGRlxJ9pxZ90aXJpbG1lc2kgacOnaW4ga3VsbGFuxLFsYW4gbWV0b2R0dXIuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMucmVudEFwaSArIFwiL1wiICsgci5vcGVyYXRpb25OdW1iZXIsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICByZWZ1bmREYXRlOiByLnJlZnVuZERhdGUsXG4gICAgICAgICAgICAgICAgICAgIHJlZnVuZDogci5yZWZ1bmRcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gci5yZWZ1bmQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxuXG59IiwiaW1wb3J0IHsgc3RvY2tTZXJ2aWNlIH0gZnJvbSBcIi4uXCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rXCI7XG5pbXBvcnQgeyBTYWxlIH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlXCI7XG5pbXBvcnQgeyBPcmRlckJvb2tJdGVtcyB9IGZyb20gXCIuLi9kb21haW4vb3JkZXItYm9vay1pdGVtXCI7XG5pbXBvcnQgeyBTYWxlQ2FydCB9IGZyb20gXCIuLi9kb21haW4vc2FsZS1jYXJ0XCI7XG5cbmV4cG9ydCBjbGFzcyBTYWxlU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfc2FsZUxpc3Q6IEFycmF5PFNhbGU+O1xuICAgIHByaXZhdGUgX3NhbGVDYXJ0OiBTYWxlQ2FydDtcbiAgICBwdWJsaWMgc2FsZUFwaSA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL3NhbGVzJztcblxuICAgIGNvbnN0cnVjdG9yKHNhbGVMaXN0OiBBcnJheTxTYWxlPiwgc2FsZUNhcnQ6IFNhbGVDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3NhbGVMaXN0ID0gc2FsZUxpc3Q7XG4gICAgICAgIHRoaXMuX3NhbGVDYXJ0ID0gc2FsZUNhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHNhbGVMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8U2FsZT59XG4gICAgICovXG4gICAgcHVibGljIGdldCBzYWxlTGlzdCgpOiBBcnJheTxTYWxlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zYWxlTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc2FsZUxpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PFNhbGU+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgc2FsZUxpc3QodmFsdWU6IEFycmF5PFNhbGU+KSB7XG4gICAgICAgIHRoaXMuX3NhbGVMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHNhbGVDYXJ0XG4gICAgICogQHJldHVybiB7QXJyYXk8U2FsZUNhcnQ+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgc2FsZUNhcnQoKTogU2FsZUNhcnQge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2FsZUNhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNhbGVDYXJ0XG4gICAgICogQHBhcmFtIHtBcnJheTxTYWxlQ2FydD59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBzYWxlQ2FydCh2YWx1ZTogU2FsZUNhcnQpIHtcbiAgICAgICAgdGhpcy5fc2FsZUNhcnQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkU2FsZShzYWxlOiBTYWxlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2FsZUxpc3QucHVzaChzYWxlKTtcblxuICAgIH1cblxuICAgIGNhbGN1bGF0ZVRvdGFsKHNhbGU6IFNhbGUpOiBudW1iZXIge1xuICAgICAgICBsZXQgc3ViVG90YWwgPSAwLjA7XG5cbiAgICAgICAgZm9yIChsZXQgZW50cnkgb2Ygc2FsZS5vcmRlckJvb2tJdGVtcykge1xuICAgICAgICAgICAgc3ViVG90YWwgKz0gZW50cnkuYm9vay5ib29rU3BlY2lmaWNhdGlvbi5wcmljZSAqIGVudHJ5LnF1YW50aXR5O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1YlRvdGFsO1xuICAgIH1cblxuICAgIGdlbmVyYXRlU2FsZU51bWJlcihjdXN0b21lcklkOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBsZXQgcmVjZWlwdE51bWJlcjogc3RyaW5nID0gXCJTXCIgKyB0b2RheS5nZXREYXkoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0TW9udGgoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0SG91cnMoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRTZWNvbmRzKCkudG9TdHJpbmcoKSArIGN1c3RvbWVySWQudG9TdHJpbmcoKTtcblxuICAgICAgICByZXR1cm4gcmVjZWlwdE51bWJlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U2FsZShzYWxlTnVtYmVyOiBzdHJpbmcpOiBTYWxlIHtcbiAgICAgICAgbGV0IHNhbGUgPSB0aGlzLnNhbGVMaXN0LmZpbmQocyA9PiBzLm9wZXJhdGlvbk51bWJlciA9PT0gc2FsZU51bWJlcik7XG4gICAgICAgIHJldHVybiBzYWxlITtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlU2FsZShzYWxlOiBTYWxlKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuc2FsZUxpc3QuaW5kZXhPZihzYWxlKTtcbiAgICAgICAgdGhpcy5zYWxlTGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRCb29rVG9DYXJ0KGJvb2s6IEJvb2ssIHF1YW50aXR5OiBudW1iZXIsIGN1c3RvbWVySWQ6IG51bWJlcikge1xuXG4gICAgICAgIGlmICh0aGlzLnNhbGVDYXJ0Lm9yZGVyQm9va0l0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zYWxlQ2FydC5jdXN0b21lcklkID0gY3VzdG9tZXJJZDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNhbGVDYXJ0Lm9yZGVyQm9va0l0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNhbGVDYXJ0LmN1c3RvbWVySWQgIT09IGN1c3RvbWVySWQpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkZhcmtsxLEgbcO8xZ90ZXJpeWUga2l0YXAgc2F0xLFsbWF5YSDDp2FsxLHFn8SxbMSxeW9yLiBMw7x0ZmVuIHRlayBtw7zFn3RlcmkgacOnaW4gacWfbGVtIHlhcMSxbsSxelwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9yZGVyQm9va0l0ZW1zOiBPcmRlckJvb2tJdGVtcyA9IG5ldyBPcmRlckJvb2tJdGVtcyhib29rLCBxdWFudGl0eSk7XG4gICAgICAgIHRoaXMuc2FsZUNhcnQub3JkZXJCb29rSXRlbXMucHVzaChvcmRlckJvb2tJdGVtcyk7XG4gICAgICAgIHRoaXMudXBkYXRlU2FsZUNhcnQoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlU2FsZUNhcnQoKSB7XG4gICAgICAgIGNvbnN0IHNhbGVDYXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzYWxlQ2FydFwiKTtcbiAgICAgICAgY29uc3Qgc3ViVG90YWxTcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b3RhbFNhbGVBbW91bnRUbFwiKTtcblxuICAgICAgICBpZiAoc2FsZUNhcnQpIHtcblxuICAgICAgICAgICAgbGV0IHJvdywgY29sdW1uLCBzdWJUb3RhbDogbnVtYmVyID0gMDtcblxuICAgICAgICAgICAgd2hpbGUgKHNhbGVDYXJ0Lmxhc3RDaGlsZCAmJiBzYWxlQ2FydC5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgc2FsZUNhcnQucmVtb3ZlQ2hpbGQoc2FsZUNhcnQubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YlRvdGFsU3BhbiEudGV4dENvbnRlbnQgPSBcIlwiO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGg7IGluZGV4KyspIHtcblxuICAgICAgICAgICAgICAgIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgcm93LmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LXJvd1wiO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLnNhbGVDYXJ0Lm9yZGVyQm9va0l0ZW1zKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSB0aGlzLnNhbGVDYXJ0LmN1c3RvbWVySWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBpdGVtLmJvb2submFtZTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBpdGVtLnF1YW50aXR5LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gKGl0ZW0uYm9vay5ib29rU3BlY2lmaWNhdGlvbi5wcmljZSAqIGl0ZW0ucXVhbnRpdHkpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJvdyAmJiBzdWJUb3RhbFNwYW4pIHtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBzdWJUb3RhbCArPSB0LmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiB0LnF1YW50aXR5O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNhbGVDYXJ0LmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICAgICAgICAgc3ViVG90YWxTcGFuLnRleHRDb250ZW50ID0gc3ViVG90YWwudG9TdHJpbmcoKSArIFwiIFRMXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgY2FydFRvU2FsZSgpOiBhbnkge1xuICAgICAgICBsZXQgc2FsZUNhcnQ6IFNhbGVDYXJ0ID0gdGhpcy5zYWxlQ2FydDtcbiAgICAgICAgbGV0IHNhbGUgPSBuZXcgU2FsZSgpO1xuXG4gICAgICAgIHNhbGUub3JkZXJCb29rSXRlbXMgPSBzYWxlQ2FydC5vcmRlckJvb2tJdGVtcztcbiAgICAgICAgc2FsZS5jdXN0b21lcklkID0gc2FsZUNhcnQuY3VzdG9tZXJJZDtcbiAgICAgICAgc2FsZS5vcGVyYXRpb25OdW1iZXIgPSB0aGlzLmdlbmVyYXRlU2FsZU51bWJlcihzYWxlQ2FydC5jdXN0b21lcklkKTtcbiAgICAgICAgc2FsZS5vcGVyYXRpb25EYXRlVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHNhbGUudG90YWwgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsKHNhbGUpO1xuXG4gICAgICAgIGZvciAobGV0IHEgb2Ygc2FsZS5vcmRlckJvb2tJdGVtcykge1xuICAgICAgICAgICAgc3RvY2tTZXJ2aWNlLmluY3JlYXNlU3RvY2socS5ib29rLmlzYm4sIC0gcS5xdWFudGl0eSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzdWNjZXNzID0gdGhpcy5hZGRTYWxlTW9jayhzYWxlKTtcbiAgICAgICAgdGhpcy5zYWxlQ2FydCA9IG5ldyBTYWxlQ2FydCgpOyAvLyBzZXBldGkgYm/Fn2FsdFxuICAgICAgICB0aGlzLnVwZGF0ZVNhbGVDYXJ0KCk7XG4gICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIH1cblxuICAgIGFzeW5jIGFkZFNhbGVNb2NrKHM6IFNhbGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5zYWxlQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBvcmRlckJvb2tJdGVtczogQXJyYXkuZnJvbShzLm9yZGVyQm9va0l0ZW1zKSxcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJJZDogcy5jdXN0b21lcklkLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25EYXRlVGltZTogcy5vcGVyYXRpb25EYXRlVGltZSxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uTnVtYmVyOiBzLm9wZXJhdGlvbk51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6IHMudG90YWxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlc3QgYXBpZGFuIGTDtm5lbiBjZXZhcDpcXG5cIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBhbGVydChcIktpdGFwIHNhdMSxxZ8gacWfbGVtaSBiYcWfYXLEsXlsYSBnZXLDp2VrbGXFn21pxZ90aXIuXCIpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRmnFn2luaXppIGtheWJldG1leWluaXouIEZpxZ8gTnVtYXJhc8SxOiBcIiArIHMub3BlcmF0aW9uTnVtYmVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbiIsImltcG9ydCB7IFN0b2NrIH0gZnJvbSBcIi4uL2RvbWFpbi9zdG9ja1wiO1xuXG5leHBvcnQgY2xhc3MgU3RvY2tTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9zdG9ja0xpc3Q6IEFycmF5PFN0b2NrPjtcbiAgICBwcml2YXRlIHN0b2NrQXBpOiBzdHJpbmcgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvc3RvY2tzXCI7XG5cbiAgICBjb25zdHJ1Y3RvcihzdG9ja0xpc3Q6IEFycmF5PFN0b2NrPikge1xuICAgICAgICB0aGlzLl9zdG9ja0xpc3QgPSBzdG9ja0xpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHN0b2NrTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PFN0b2NrPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHN0b2NrTGlzdCgpOiBBcnJheTxTdG9jaz4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RvY2tMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzdG9ja0xpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PFN0b2NrPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHN0b2NrTGlzdCh2YWx1ZTogQXJyYXk8U3RvY2s+KSB7XG4gICAgICAgIHRoaXMuX3N0b2NrTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKiAhYXR0ZW50aW9uLCAqaW1wb3J0YW50LCA/cXVlc3Rpb24sIFRPRE9cbiAgICAgKiAhIMOWbmNlbGlrbGUgaW5jcmVhc2VTdG9jayBmb25rc2l5b251bmRhbiBmYXJrbMSxIGJpciBpxZ8geWFwxLF5b3IsXG4gICAgICogKiBLaXRhcCBoZW7DvHogZWtsZW5kaWt0ZW4gc29ucmEgaGVtZW4gZ2lyaXlvcixcbiAgICAgKiA/IEtpdGFwIGlsayBkZWZhIGVrbGVuZGl5c2UgYnUgZm9ua3NpeW9uIG11IMOnYWzEscWfYWNhayA/IEVWRVQuXG4gICAgICogVE9ETyBpbmNyZWFzZVN0b2NrIGZvbmtzaXlvbnVudSBpbmNlbGVcbiAgICAgKiBFbGltaXpkZSBoacOnIHN0b2NrIGtheWTEsS9uZXNuZXNpIHlvaywgeWVuaSBrYXnEsXQvbmVzbmUgb2x1xZ90dXJ1eW9ydXpcbiAgICAgKiBZZW5pIGVrbGVuZW4ga2l0YWJhIHN0b2sgZWtsZW1lIGnFn2xlbWlcbiAgICAgKiBAcGFyYW0gaXNibiAgc3RvayBla2xlbmVjZWsgb2xhbiBraXRhYsSxbiBpc2JuIG51bWFyYXPEsVxuICAgICAqIEBwYXJhbSBzaGVsZk51bWJlciBzdG9rIGVrbGVuZWNlayBvbGFuIGtpdGFixLFuIHJhZiBudW1hcmFzxLFcbiAgICAgKiBAcGFyYW0gcXVhbnRpdHkga2l0YXBkYW4ga2HDpyBhZGV0IHN0b8SfYSBla2xlbmVjZWtcbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkU3RvY2soaXNibjogc3RyaW5nLCBzaGVsZk51bWJlcjogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIGxldCBuZXdTdG9jayA9IG5ldyBTdG9jayhpc2JuLCBxdWFudGl0eSwgc2hlbGZOdW1iZXIpO1xuICAgICAgICAgICAgdGhpcy5zdG9ja0xpc3QucHVzaChuZXdTdG9jayk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2l0YXAgemF0ZW4gZWtsaSwgaGFsaWhhesSxcmRhIHZhciwgZGFoYSBzb25yYSB5ZW5pIGtpdGFwbGFyIGdlbGRpLHN0b2sgYXJ0xLFybWEgacWfbGVtaSxcbiAgICAgKiBAcGFyYW0gaXNibiBzdG9rIGVrbGVuZWNlayBvbGFuIGtpdGFixLFuIGlzYm4gbnVtYXJhc8SxXG4gICAgICogQHBhcmFtIHF1YW50aXR5IHN0b2sgZWtsZW5lY2VrIG9sYW4ga2l0YWLEsW4gYWRlZGlcbiAgICAgKiBAcmV0dXJucyBpxZ9sZW0gZ2Vyw6dla2xlxZ9tZXNpIGR1cnVtdW5kYSB0cnVlLCBkacSfZXIgZHVydW1kYSBmYWxzZSBkw7ZuZXJcbiAgICAgKi9cbiAgICBwdWJsaWMgaW5jcmVhc2VTdG9jayhpc2JuOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IHN0b2NrID0gdGhpcy5nZXRTdG9jayhpc2JuKTtcbiAgICAgICAgaWYgKHN0b2NrKSB7XG4gICAgICAgICAgICBzdG9jay5xdWFudGl0eSA9IChzdG9jay5xdWFudGl0eSArIHF1YW50aXR5KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc3RvY2sgbmVzbmVzaW5pIGdlcmkgZMO2bmTDvHLDvHJcbiAgICAgKiBAcGFyYW0gaXNibiBzdG9jayBuZXNuZXNpIGdldGlyaWxlY2VrIG9sYW4gbmVzbmVuaW4gaXNibiBub3N1LFxuICAgICAqIEByZXR1cm5zIGRiIG9sYW4gc3RvY2sgbmVzbmVuc2kgZ2VyaSBkw7ZuZXIsIGRiIGRlIHlvayBpc2UgdGhyb3cgaWxlIGhhdGEgZsSxcmxhdMSxcmzEsXJcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U3RvY2soaXNibjogc3RyaW5nKSB7XG4gICAgICAgIGxldCBzdG9jayA9IHRoaXMuc3RvY2tMaXN0LmZpbmQocyA9PiBzLmlzYm4gPT09IGlzYm4pO1xuICAgICAgICBpZiAoc3RvY2spIHtcbiAgICAgICAgICAgIHJldHVybiBzdG9jaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTdG9ja1F1YW50aXR5KGlzYm46IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIGxldCBzOiBTdG9jayA9IHRoaXMuZ2V0U3RvY2soaXNibikhO1xuXG4gICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICByZXR1cm4gcy5xdWFudGl0eTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRcSfZXIgc3RvayBuZXNuZXNpIHlvayBpc2Ugc3RvayBuZXNuZXNpLCBiZWxpcnRpbGVuIGFkZXQga2FkYXIgc3RvayBiaWxnaXNpIGlsZSBiZXJhYmVyIGVrbGVuaXlvci5cbiAgICAgKiDEsMWfdGUgYnUgb2x1xZ90dXJtYS9jcmVhdGUgacWfbGVtaSBidXJhZGEgeWFwxLFsxLF5b3IuXG4gICAgICogQHBhcmFtIHMgaW5kZXgudHMgZG9zeWFzxLFuZGFuIGdlbGVuIHN0b2sgbmVzbmVzaVxuICAgICAqL1xuICAgIGFzeW5jIGFkZFN0b2NrTW9jayhzOiBTdG9jayk6IFByb21pc2U8Qm9vbGVhbiB8IHVuZGVmaW5lZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnN0b2NrQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBpc2JuOiBzLmlzYm4sXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiBzLnF1YW50aXR5LFxuICAgICAgICAgICAgICAgICAgICBzaGVsZk51bWJlcjogcy5zaGVsZk51bWJlclxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicgKyBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdG9rIGVrbGVuaXJrZW4gZcSfZXIgc3RvayBuZXNuZXNpIGRhaGEgw7ZuY2VkZW4gdmFyIGlzZSwgc3RvayBhcnTEsXLEsW3EsW7EsSBwdXQgaWxlIHlhcGFjYcSfxLF6XG4gICAgICogQHBhcmFtIHMgaW5kZXgudHMgZG9zeWFzxLFuZGFuIGdlbGVuIHN0b2sgbmVzbmVzaVxuICAgICAqL1xuICAgIGFzeW5jIGluY3JlYXNlU3RvY2tNb2NrKHM6IFN0b2NrKSB7XG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5zdG9ja0FwaSArIFwiL1wiICsgcy5pc2JuLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGlzYm46IHMuaXNibixcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IHMucXVhbnRpdHksXG4gICAgICAgICAgICAgICAgICAgIHNoZWxmTnVtYmVyOiBzLnNoZWxmTnVtYmVyXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwNyk7XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJ0aGlzIiwiX2Jvb2tzIiwiQXJyYXkiLCJfc3RvY2tzIiwiX2N1c3RvbWVycyIsIl9zYWxlcyIsIl9yZW50cyIsIl9ib29rU3BlY2lmaWNhdGlvbnMiLCJfY2FuY2VscyIsIl9zYWxlQ2FydCIsIlNhbGVDYXJ0IiwiX3JlbnRDYXJ0IiwiUmVudENhcnQiLCJnZXRCb29rc0xpc3QiLCJnZXRTdG9ja3NMaXN0IiwiZ2V0Q3VzdG9tZXJzTGlzdCIsImdldFNhbGVzTGlzdCIsImdldFJlbnRzIiwiZ2V0Qm9va1NwZWNpZmljYXRpb25zIiwiZ2V0Q2FuY2FsZWRTYWxlcyIsImdldFNhbGVDYXJ0IiwiZ2V0UmVudENhcnQiLCJzZXRTYWxlQ2FydCIsInZhbHVlIiwic2V0UmVudENhcnQiLCJpc2JuIiwicHJpY2UiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiX2lzYm4iLCJfcHJpY2UiLCJfc3RhcnREYXRlIiwiX2VuZERhdGUiLCJuYW1lIiwiYXV0aG9yIiwicHVibGlzaFllYXIiLCJwYWdlcyIsImJvb2tTcGVjaWZpY2F0aW9uIiwiX25hbWUiLCJfYXV0aG9yIiwiX3B1Ymxpc2hZZWFyIiwiX3BhZ2VzIiwiX2Jvb2tTcGVjaWZpY2F0aW9uIiwiY2FuY2VsVHlwZSIsInJlZnVuZCIsImNhbmNlbGVkRGF0ZVRpbWUiLCJfY2FuY2VsVHlwZSIsIl9yZWZ1bmQiLCJfY2FuY2VsZWREYXRlVGltZSIsInN1ck5hbWUiLCJwaG9uZU51bWJlciIsIl9zdXJOYW1lIiwiX3Bob25lTnVtYmVyIiwiYm9vayIsInF1YW50aXR5IiwiX2Jvb2siLCJfcXVhbnRpdHkiLCJ0b0pTT04iLCJvcmRlckJvb2tJdGVtcyIsIlJlbnQiLCJTYWxlIiwic2FsZUJvb2tJdGVtcyIsIm9wZXJhdGlvbkRhdGVUaW1lIiwiY3VzdG9tZXJJZCIsIm9wZXJhdGlvbk51bWJlciIsInRvdGFsIiwicmVmdW5kRGF0ZSIsInN1cGVyIiwiX3JlZnVuZERhdGUiLCJfb3JkZXJCb29rSXRlbXMiLCJfY3VzdG9tZXJJZCIsIl9vcGVyYXRpb25EYXRlVGltZSIsIl9vcGVyYXRpb25OdW1iZXIiLCJfdG90YWwiLCJzaGVsZk51bWJlciIsIl9zaGVsZk51bWJlciIsInNob3dBbmRIaWRlIiwiYnRuSWQiLCJlbGVtZW50SWQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdHlsZSIsImRpc3BsYXkiLCJkYiIsIkRhdGFCYXNlIiwiYm9va1NlcnZpY2UiLCJCb29rU2VydmljZSIsImN1c3RvbWVyU2VydmljZSIsIkN1c3RvbWVyU2VydmljZSIsImNhbmNlbFNlcnZpY2UiLCJDYW5jZWxTZXJ2aWNlIiwicmVudFNlcnZpY2UiLCJSZW50U2VydmljZSIsInNhbGVTZXJ2aWNlIiwiU2FsZVNlcnZpY2UiLCJzdG9ja1NlcnZpY2UiLCJTdG9ja1NlcnZpY2UiLCJjb25zb2xlIiwibG9nIiwiYWRkQ3VzdG9tZXIiLCJDdXN0b21lciIsImFkZFN0b2NrIiwiaW5pdGlhbGl6ZURhdGFNb2NrIiwiaW5pdGlsaWF6ZURhdGEiLCJhZGRCb29rRm9ybSIsIm9uc3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInRpdGxlIiwiZ2V0IiwiRGF0ZSIsIm1hdGNoIiwiYm9va1NwZWMiLCJCb29rU3BlY2lmaWNhdGlvbiIsIkJvb2siLCJhZGRCb29rTW9jayIsImFsZXJ0IiwicmVzZXQiLCJhZGRTdG9ja0Zvcm0iLCJxdWFudHRpeSIsInN0b2NrIiwiU3RvY2siLCJib29rTGlzdCIsInNvbWUiLCJiIiwiYWRkU3RvY2tNb2NrIiwiYWRkQ3VzdG9tZXJGb3JtIiwic3VybmFtZSIsImN1c3RvbWVyIiwiYWRkQ3VzdG9tZXJNb2NrIiwic2FsZUJvb2tGb3JtIiwiZ2V0Qm9vayIsInBhcnNlSW50IiwiZ2V0U3RvY2siLCJhZGRCb29rVG9DYXJ0IiwiZXJyb3IiLCJzYWxlQ2FydCIsImxlbmd0aCIsImNhcnRUb1NhbGUiLCJsaXN0Qm9va3MiLCJjYW5jZWxTYWxlRm9ybSIsInNiaSIsInB1c2giLCJPcmRlckJvb2tJdGVtcyIsImEiLCJzYWxlTGlzdCIsInNhbGVOdW1iZXIiLCJzYWxlIiwiZ2V0U2FsZSIsImNhbmNlbFNhbGUiLCJDYW5jZWwiLCJjYW5jZWxTYWxlTW9jayIsImNhbmNlbFJlbnRGb3JtIiwickRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInJlbnRMaXN0IiwicmVudE51bWJlciIsInJlbnQiLCJnZXRSZW50IiwiY2FuY2VsUmVudCIsImNhbmNlbFJlbnRNb2NrIiwicmVudEJvb2tGb3JtIiwicmVudENhcnQiLCJjYXJ0VG9SZW50IiwicmVmdW5kQm9va0Zvcm0iLCJjYWxjdWxhdGVSZWZ1bmRBbW91bnQiLCJyZWZ1bmRSZW50TW9jayIsImJvb2tBcGkiLCJfYm9va0xpc3QiLCJmaW5kIiwiYWRkQm9vayIsIm5ld0Jvb2siLCJFeGNlcHRpb24iLCJpc1ZhbGlkQm9vayIsImluY2x1ZGVzIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBY2NlcHQiLCJvayIsIkVycm9yIiwic3RhdHVzIiwicmVzdWx0IiwianNvbiIsImdldFJlc3VsdCIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImxpc3RCb29rc0RpdiIsInJvdyIsImNvbHVtbiIsImxhc3RDaGlsZCIsImNoaWxkcmVuIiwicmVtb3ZlQ2hpbGQiLCJmb3JFYWNoIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInRleHRDb250ZW50IiwidG9TdHJpbmciLCJhcHBlbmRDaGlsZCIsImdldFN0b2NrUXVhbnRpdHkiLCJib2R5IiwiY2FuY2VsbGVkTGlzdCIsImNhbmNlbFNhbGVBcGkiLCJjYW5jZWxSZW50QXBpIiwiX2NhbmNlbGxlZExpc3QiLCJjYWxjdWxhdGVEaWZmSG91cnMiLCJkMSIsImQyIiwiZGlmZk1pbGlzIiwiZ2V0VGltZSIsIk1hdGgiLCJmbG9vciIsImNhbmNlbCIsImNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQiLCJjYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kIiwiY3VzdG9tZXJMaXN0IiwiY3VzdG9tZXJBcGkiLCJfY3VzdG9tZXJMaXN0IiwibmV3Q3VzdG9tZXIiLCJyZW50QXBpIiwiX3JlbnRMaXN0IiwicmVmdW5kUGVyY2VudCIsImFkZFJlbnQiLCJjYWxjdWxhdGVUb3RhbCIsInN1YlRvdGFsIiwiaXRlbSIsImdlbmVyYXRlUmVudE51bWJlciIsInRvZGF5IiwiZ2V0RGF5IiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJjYWxjdWxhdGVSZWZ1bmQiLCJkaWZmIiwiZmluZSIsInMiLCJ1cGRhdGVSZW50Q2FydCIsInN1YlRvdGFsU3BhbiIsImluZGV4IiwidCIsImkiLCJpbmNyZWFzZVN0b2NrIiwiYWRkUmVudE1vY2siLCJyIiwiZnJvbSIsInNhbGVBcGkiLCJfc2FsZUxpc3QiLCJhZGRTYWxlIiwiZW50cnkiLCJnZW5lcmF0ZVNhbGVOdW1iZXIiLCJyZW1vdmVTYWxlIiwiaW5kZXhPZiIsInNwbGljZSIsInVwZGF0ZVNhbGVDYXJ0IiwicSIsInN1Y2Nlc3MiLCJhZGRTYWxlTW9jayIsInN0b2NrTGlzdCIsInN0b2NrQXBpIiwiX3N0b2NrTGlzdCIsIm5ld1N0b2NrIiwiaW5jcmVhc2VTdG9ja01vY2siLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiXSwic291cmNlUm9vdCI6IiJ9