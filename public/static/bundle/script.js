(()=>{"use strict";var e={221:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataBase=void 0;const n=o(758),r=o(51);t.DataBase=class{constructor(){this._books=new Array,this._stocks=new Array,this._customers=new Array,this._sales=new Array,this._rents=new Array,this._bookSpecifications=new Array,this._cancels=new Array,this._saleCart=new r.SaleCart,this._rentCart=new n.RentCart}get getBooksList(){return this._books}get getStocksList(){return this._stocks}get getCustomersList(){return this._customers}get getSalesList(){return this._sales}get getRents(){return this._rents}get getBookSpecifications(){return this._bookSpecifications}get getCancaledSales(){return this._cancels}get getSaleCart(){return this._saleCart}get getRentCart(){return this._rentCart}set setSaleCart(e){this._saleCart=e}set setRentCart(e){this._rentCart=e}}},39:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BookSpecification=void 0,t.BookSpecification=class{constructor(e,t,o,n){this._isbn=e,this._price=t,this._startDate=o,this._endDate=n}get id(){return this._id}set id(e){this._id=e}get isbn(){return this._isbn}get price(){return this._price}get startDate(){return this._startDate}get endDate(){return this._endDate}set isbn(e){this._isbn=e}set price(e){this._price=e}set startDate(e){this._startDate=e}set endDate(e){this._endDate=e}}},934:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Book=void 0,t.Book=class{constructor(e,t,o,n,r,i){this._name=t,this._author=o,this._isbn=e,this._publishYear=n,this._pages=r,this._bookSpecification=i}get id(){return this._id}set id(e){this._id=e}get isbn(){return this._isbn}get name(){return this._name}get author(){return this._author}get publishYear(){return this._publishYear}get pages(){return this._pages}get bookSpecification(){return this._bookSpecification}set isbn(e){this._isbn=e}set name(e){this._name=e}set author(e){this._author=e}set publishYear(e){this._publishYear=e}set pages(e){this._pages=e}set bookSpecification(e){this._bookSpecification=e}}},378:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cancel=void 0,t.Cancel=class{constructor(e,t,o){this._cancelType=e,this._refund=t,this._canceledDateTime=o}get cancelType(){return this._cancelType}get refund(){return this._refund}get canceledDateTime(){return this._canceledDateTime}set cancelType(e){this._cancelType=e}set refund(e){this._refund=e}set canceledDateTime(e){this._canceledDateTime=e}}},916:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Customer=void 0,t.Customer=class{constructor(e,t,o){this._name=e,this._surName=t,this._phoneNumber=o}get name(){return this._name}get surName(){return this._surName}get phoneNumber(){return this._phoneNumber}set name(e){this._name=e}set surName(e){this._surName=e}set phoneNumber(e){this._phoneNumber=e}}},767:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrderBookItems=void 0,t.OrderBookItems=class{constructor(e,t){this._book=e,this._quantity=t}get book(){return this._book}get quantity(){return this._quantity}set book(e){this._book=e}set quantity(e){this._quantity=e}toJSON(){return{book:this._book,quantity:this._quantity}}}},758:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RentCart=void 0,t.RentCart=class{constructor(){this.orderBookItems=new Array}}},961:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Rent=void 0;const n=o(354);class r extends n.Sale{constructor(e,t,o,n,r,i,a){super(e,o,t,n,r),this._refundDate=i,this._refund=a}get refundDate(){return this._refundDate}get refund(){return this._refund}set refundDate(e){this._refundDate=e}set refund(e){this._refund=e}}t.Rent=r},51:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SaleCart=void 0,t.SaleCart=class{constructor(){this.orderBookItems=new Array}}},354:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Sale=void 0,t.Sale=class{constructor(e,t,o,n,r){this._orderBookItems=e,this._customerId=t,this._operationDateTime=o,this._operationNumber=n,this._total=r}get orderBookItems(){return this._orderBookItems}get customerId(){return this._customerId}get operationDateTime(){return this._operationDateTime}get operationNumber(){return this._operationNumber}get total(){return this._total}set orderBookItems(e){this._orderBookItems=e}set customerId(e){this._customerId=e}set operationDateTime(e){this._operationDateTime=e}set operationNumber(e){this._operationNumber=e}set total(e){this._total=e}}},72:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Stock=void 0,t.Stock=class{constructor(e,t,o){this._isbn=e,this._quantity=t,this._shelfNumber=o}get isbn(){return this._isbn}get quantity(){return this._quantity}get shelfNumber(){return this._shelfNumber}set isbn(e){this._isbn=e}set quantity(e){this._quantity=e}set shelfNumber(e){this._shelfNumber=e}}},607:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.stockService=t.saleService=t.rentService=t.cancelService=t.customerService=t.bookService=void 0;const r=o(221),i=o(934),a=o(39),s=o(378),c=o(916),l=o(961),u=o(767),d=o(72),h=o(946),m=o(943),p=o(709),k=o(148),f=o(478),S=o(214);function g(e,t){const o=document.getElementById(t),n=document.getElementById(e);o&&n&&n.addEventListener("click",(()=>{"none"===o.style.display?o.style.display="block":o.style.display="none"}))}var b;b=new r.DataBase,t.bookService=new h.BookService(b.getBooksList,b.getBookSpecifications),t.customerService=new p.CustomerService(b.getCustomersList),t.cancelService=new m.CancelService(b.getCancaledSales),t.rentService=new k.RentService(b.getRents,b.getRentCart),t.saleService=new f.SaleService(b.getSalesList,b.getSaleCart),t.stockService=new S.StockService(b.getStocksList),console.log("Services intiliazed."),t.customerService.addCustomer(new c.Customer("","","")),t.customerService.addCustomer(new c.Customer("","","")),t.stockService.addStock("123-45","A45-52",10),t.stockService.addStock("123-46","A45-52",10),function(){n(this,void 0,void 0,(function*(){yield t.bookService.initializeDataMock()}))}(),g("addBookMenuItem","addBookSection"),g("showBooksMenuItem","listBooksSection"),g("addCustomerMenuItem","addCustomerSection"),g("addStockMenuItem","addStockSection"),g("saleBookMenuItem","saleBookSection"),g("rentBookMenuItem","rentBookSection"),g("cancelSaleMenuItem","cancelSaleSection"),g("cancelRentMenuItem","cancelRentSection"),g("refundBookMenuItem","refundBookSection"),g("rentNow","rentBookSection");const y=document.getElementById("add-book-form");null!=y&&(y.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(y),n=o.get("bookTitle"),r=o.get("bookAuthor"),s=o.get("bookIsbn"),c=o.get("bookPublishYear"),l=o.get("bookPages"),u=o.get("bookPrice"),d=new Date,h=new Date("Dec 31, 9999 23:59:59");n.match("");const m=new a.BookSpecification(s,u,d,h),p=new i.Book(s,n,r,c,l,m);return(yield t.bookService.addBookMock(p))?(alert(p.isbn+" numaralı kitap Ekleme İşlemi Başarı İle Tamamlanmıştır."),y.reset()):alert(p.isbn+" numaralı kitap Ekleme İşlemi Sırasında Bir Hata oluştu."),!1})));const v=document.getElementById("add-stock-form");v&&(v.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(v),n=o.get("bookIsbnForAddStock"),r=o.get("stockQuantity"),i=o.get("shelfNumber"),a=new d.Stock(n,r,i);return t.bookService.bookList.some((e=>e.isbn==n))?(yield t.stockService.addStockMock(a))&&alert(n+" isbn numaralı kitaptan, "+r+" kadar sisteme stok eklenmiştir."):alert("Stok eklenmeye çalışılan kitap, kayıtlı değildir. Lütfen önce kitap ekleyiniz"),v.reset(),!1})));const _=document.getElementById("add-customer-form");_&&(_.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(_),n=o.get("customerName"),r=o.get("customerSurname"),i=o.get("customerPhoneNumber"),a=new c.Customer(n,r,i);return(yield t.customerService.addCustomerMock(a))?(alert("Müşteri Ekleme İşlemi Başarı İle Tamamlanmıştır. "),_.reset()):alert("Müşteri Ekleme İşlemi Sırasında bir hata ile karşılıldı. "),!1})));const C=document.getElementById("sale-book-form");C&&(C.onsubmit=()=>{const e=new FormData(C),o=e.get("isbnForSale"),n=t.bookService.getBook(o),r=parseInt(e.get("customerIdForSale")),i=parseInt(e.get("quantityForSale")),a=t.stockService.getStock(o);try{return n?a?a.quantity>=i?t.saleService.addBookToCart(n,i,r):alert(i+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${o} numaralı kitabın stoğu mevcut değildir.`):alert(o+" numaralı kitap yoktur."),C.reset(),!1}catch(e){alert(e)}}),document.getElementById("btnSale").addEventListener("click",(()=>{0===t.saleService.saleCart.orderBookItems.length?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):t.saleService.cartToSale()})),document.getElementById("showBooksMenuItem").addEventListener("click",(()=>{t.bookService.listBooks()}));const w=document.getElementById("cancel-sale-form");w&&(w.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(w).get("saleNumberforCancel");let n=yield t.saleService.getSaleMock(o),r=new s.Cancel(n,n.total,new Date);(yield t.cancelService.cancelSaleMock(r))?alert(n.operationNumber+" numaralı satış iptal edilmiştir."):alert(n.operationNumber+" numaralı satış iptal edilirken hata meydana geldi.")})));const B=document.getElementById("cancel-rent-form");B&&(B.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();let o=new Array;o.push(new u.OrderBookItems(t.bookService.getBook("123-45"),3));let n=new Date;n.setDate(n.getDate()+14);let r=new l.Rent(o,new Date,1,"R021122163045",123,n,200);t.rentService.rentList.push(r);const i=new FormData(B).get("rentNumberforCancel");let a=t.rentService.getRent(i);if(a){let e=new s.Cancel(a,a.total,new Date);(yield t.cancelService.cancelRentMock(e))?alert(a.operationNumber+" numaralı kiralama iptal edilmiştir."):alert(a.operationNumber+" numaralı kiralama iptal edilirken hata meydana geldi.")}else alert(i+" numaralı kiralma bulunamamıştır. Tekrar deneyiniz.")})));const D=document.getElementById("rent-book-form");D&&(D.onsubmit=()=>{const e=new FormData(D),o=e.get("isbnForRent"),n=t.bookService.getBook(o),r=parseInt(e.get("customerIdForRent")),i=parseInt(e.get("quantityForRent")),a=t.stockService.getStock(o);try{return n?a?a.quantity>=i?t.rentService.addBookToCart(n,i,r):alert(i+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${o} numaralı kitabın stoğu mevcut değildir.`):alert(o+" numaralı kitap yoktur."),D.reset(),!1}catch(e){alert(e)}}),document.getElementById("btnRent").addEventListener("click",(()=>{0===t.rentService.rentCart.orderBookItems.length?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):t.rentService.cartToRent()}));const I=document.getElementById("refund-book-form");I&&(I.onsubmit=e=>n(void 0,void 0,void 0,(function*(){let o=new Array;o.push(new u.OrderBookItems(t.bookService.getBook("123-45"),3));let n=new Date;n.setDate(n.getDate()+23);let r=new l.Rent(o,new Date,1,"R021122163045",123,n,0);r.refund=t.rentService.calculateRefundAmount(r),t.rentService.rentList.push(r),e.preventDefault();const i=new FormData(I).get("rentNumberforRefund");let a=t.rentService.getRent(i);if(a){let e=yield t.rentService.refundRentMock(a);e?(alert(a.operationNumber+" numaralı kiralama geri alınmıştır."),alert("Geri ödeme miktarı:"+e+" ₺ .")):alert(a.operationNumber+" numaralı kiralama iptal edilirken hata meydana geldi.")}else alert(i+" numaralı kiralama bulunamamıştır. Tekrar deneyiniz.")})))},946:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BookService=void 0;const r=o(607);t.BookService=class{constructor(e,t){this.bookApi="http://localhost:3002/api/v1/books",this._bookList=e,this._bookSpecification=t}get bookList(){return this._bookList}get bookSpecification(){return this._bookSpecification}set bookList(e){this._bookList=e}set bookSpecification(e){this._bookSpecification=e}getBook(e){return this.bookList.find((t=>t.isbn===e))}addBook(e){try{this.bookList.push(e),this.bookSpecification.push(e.bookSpecification)}catch(e){console.log("Kitap eklenirken bir hata meydana geldi.")}}isValidBook(e){const t=this.getBook(e);return this.bookList.includes(t)}initializeDataMock(){return n(this,void 0,void 0,(function*(){const e=yield fetch(this.bookApi,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const t=yield e.json(),o=JSON.parse(JSON.stringify(t,null,4));this.bookList=o,console.log(this.bookList)}))}listBooks(){const e=document.getElementById("listBooks");if(e){let t,o;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);this.initializeDataMock(),this.bookList.forEach((n=>{t=document.createElement("div"),t.className="row-list-book",o=document.createElement("div"),o.className="column-list-book",o.textContent=n.isbn.toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=n.name.toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=n.author.toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=r.stockService.getStockQuantity(n.isbn).toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=n.bookSpecification.price.toString()+" ₺",t.appendChild(o),e.appendChild(t)}))}}addBookMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.bookApi,{method:"POST",body:JSON.stringify({isbn:e.isbn,name:e.name,author:e.author,pages:e.pages,publishYear:e.publishYear,bookSpecification:{isbn:e.bookSpecification.isbn,price:e.bookSpecification.price,startDate:e.bookSpecification.startDate,endDate:e.bookSpecification.endDate}}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log("Rest servisinden dönen cevap =>"),console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},943:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelService=void 0,t.CancelService=class{constructor(e){this.cancelSaleApi="http://localhost:3002/api/v1/cancelSale",this.cancelRentApi="http://localhost:3002/api/v1/cancelRent",this._cancelledList=e}get cancelledList(){return this._cancelledList}set cancelledList(e){this._cancelledList=e}calculateDiffHours(e,t){let o=e.getTime()-t.getTime();return Math.floor(o/1e3/60/60)}cancelSale(e){let t=this.calculateCancelSaleRefund(e);e.refund=t,this.cancelledList.push(e)}calculateCancelSaleRefund(e){let t;return t=this.calculateDiffHours(e.canceledDateTime,e.cancelType.operationDateTime)>24?.75*e.cancelType.total:e.cancelType.total,t}cancelSaleMock(e){return o(this,void 0,void 0,(function*(){let t=this.calculateCancelSaleRefund(e);e.refund=t;const o=yield fetch(this.cancelSaleApi,{method:"POST",body:JSON.stringify({cancelType:e.cancelType,refund:e.refund,canceledDateTime:e.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(o.ok){const e=yield o.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${o.status} `)}))}cancelRent(e){let t=this.calculateCancelRentRefund(e);e.refund=t,this.cancelledList.push(e)}calculateCancelRentRefund(e){let t;return t=this.calculateDiffHours(e.canceledDateTime,e.cancelType.operationDateTime)>24?.75*e.cancelType.total:e.cancelType.total,t}cancelRentMock(e){return o(this,void 0,void 0,(function*(){let t=this.calculateCancelRentRefund(e);e.refund=t;try{const t=yield fetch(this.cancelRentApi,{method:"POST",body:JSON.stringify({rent:e.cancelType,refund:e.refund,canceledDateTime:e.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},709:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerService=void 0,t.CustomerService=class{constructor(e){this.customerApi="http://localhost:3002/api/v1/customers",this._customerList=e}get customerList(){return this._customerList}set customerList(e){this._customerList=e}addCustomer(e){this.customerList.push(e)}addCustomerMock(e){return o(this,void 0,void 0,(function*(){try{const t=yield fetch(this.customerApi,{method:"POST",body:JSON.stringify({name:e.name,surName:e.surName,phoneNumber:e.phoneNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log("Rest servisinden dönen cevap =>"),console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},148:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RentService=void 0;const r=o(607),i=o(961),a=o(758),s=o(767);t.RentService=class{constructor(e,t){this.rentApi="http://localhost:3002/api/v1/rents",this._rentList=e,this.refundPercent=.75,this._rentCart=t}get rentList(){return this._rentList}set rentList(e){this._rentList=e}get rentCart(){return this._rentCart}set rentCart(e){this._rentCart=e}addRent(e){this.rentList.push(e)}calculateTotal(e){let t=0;for(let o of e.orderBookItems)t+=o.book.bookSpecification.price*o.quantity;return t}generateRentNumber(e){let t=new Date;return"R"+t.getDay().toString()+t.getMonth().toString()+t.getFullYear().toString()+t.getHours().toString()+t.getMinutes().toString()+t.getSeconds().toString()+e.toString()}calculateDiffHours(e,t){let o=e.getTime()-t.getTime();return Math.floor(o/1e3/60/60)}calculateRefund(e){e.refund=e.total*this.refundPercent}calculateRefundAmount(e){let t,o=this.calculateDiffHours(e.refundDate,e.operationDateTime)/24;if(o<=14)t=.75*e.total;else if(o<=24){let n=.75-.05*(o-14);t=e.total*n}else t=.25*e.total;return t}getRent(e){return this.rentList.find((t=>t.operationNumber===e))}addBookToCart(e,t,o){if(0===this.rentCart.orderBookItems.length)this.rentCart.customerId=o;else if(this.rentCart.orderBookItems.length>0&&this.rentCart.customerId!==o)return alert("Farklı müşteriye kitap kiralanmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;this.rentCart.orderBookItems.push(new s.OrderBookItems(e,t)),this.updateRentCart()}updateRentCart(){const e=document.getElementById("rentCart"),t=document.getElementById("totalRentAmountTl");if(e){let o,n,r=0;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.textContent="";for(let e=0;e<this.rentCart.orderBookItems.length;e++){o=document.createElement("div"),o.className="rent-cart-row";for(let e of this.rentCart.orderBookItems)n=document.createElement("div"),n.className="rent-cart-column",n.textContent=this.rentCart.customerId.toString(),o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=e.book.name,o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=e.quantity.toString(),o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=(e.book.bookSpecification.price*e.quantity).toString(),o.appendChild(n)}if(o&&t){for(let e of this.rentCart.orderBookItems)r+=e.book.bookSpecification.price*e.quantity;e.appendChild(o),t.textContent=r.toString()+" TL"}}}cartToRent(){let e=this.rentCart,t=new i.Rent;t.orderBookItems=e.orderBookItems,t.customerId=e.customerId,t.operationNumber=this.generateRentNumber(e.customerId),t.operationDateTime=new Date,t.total=this.calculateTotal(t);let o=new Date;o.setDate(o.getDate()+14),t.refundDate=o,this.calculateRefund(t);for(let e of t.orderBookItems)r.stockService.increaseStock(e.book.isbn,-e.quantity);this.rentCart=new a.RentCart,this.updateRentCart(),this.addRentMock(t)}addRentMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.rentApi,{method:"POST",body:JSON.stringify({orderBookItems:Array.from(e.orderBookItems),customerId:e.customerId,operationDateTime:e.operationDateTime,operationNumber:e.operationNumber,total:e.total,refundDate:e.refundDate,refund:e.refund}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!t.ok)throw new Error(`Hata oluştu, hata kodu: ${t.status} `);{const o=yield t.json();console.log("Rest apidan dönen cevap:\n"),console.log(o),alert("Kitap kiralama işlemi başarıyla gerçekleşmiştir."),alert("Fişinizi kaybetneyiniz. Fiş numaranız: "+e.operationNumber)}}catch(e){console.log("Hata Oluştu."),alert("Kitap kiralama işlemi sırasında bir hata oluştu. Lütfen tekrar deneyiniz.")}}))}refundRentMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.rentApi+"/"+e.operationNumber,{method:"PATCH",body:JSON.stringify({refundDate:e.refundDate,refund:e.refund}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const o=yield t.json();return console.log(o),e.refund}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},478:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SaleService=void 0;const r=o(607),i=o(354),a=o(767),s=o(51);t.SaleService=class{constructor(e,t){this.saleApi="http://localhost:3002/api/v1/sales",this._saleList=e,this._saleCart=t}get saleList(){return this._saleList}set saleList(e){this._saleList=e}get saleCart(){return this._saleCart}set saleCart(e){this._saleCart=e}addSale(e){this.saleList.push(e)}calculateTotal(e){let t=0;for(let o of e.orderBookItems)t+=o.book.bookSpecification.price*o.quantity;return t}generateSaleNumber(e){let t=new Date;return"S"+t.getDay().toString()+t.getMonth().toString()+t.getFullYear().toString()+t.getHours().toString()+t.getMinutes().toString()+t.getSeconds().toString()+e.toString()}getSale(e){return this.saleList.find((t=>t.operationNumber===e))}removeSale(e){let t=this.saleList.indexOf(e);this.saleList.splice(t,1)}addBookToCart(e,t,o){if(0===this.saleCart.orderBookItems.length)this.saleCart.customerId=o;else if(this.saleCart.orderBookItems.length>0&&this.saleCart.customerId!==o)return alert("Farklı müşteriye kitap satılmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;let n=new a.OrderBookItems(e,t);this.saleCart.orderBookItems.push(n),this.updateSaleCart()}updateSaleCart(){const e=document.getElementById("saleCart"),t=document.getElementById("totalSaleAmountTl");if(e){let o,n,r=0;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.textContent="";for(let e=0;e<this.saleCart.orderBookItems.length;e++){o=document.createElement("div"),o.className="sale-cart-row";for(let e of this.saleCart.orderBookItems)n=document.createElement("div"),n.className="sale-cart-column",n.textContent=this.saleCart.customerId.toString(),o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=e.book.name,o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=e.quantity.toString(),o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=(e.book.bookSpecification.price*e.quantity).toString(),o.appendChild(n)}if(o&&t){for(let e of this.saleCart.orderBookItems)r+=e.book.bookSpecification.price*e.quantity;e.appendChild(o),t.textContent=r.toString()+" TL"}}}cartToSale(){let e=this.saleCart,t=new i.Sale;t.orderBookItems=e.orderBookItems,t.customerId=e.customerId,t.operationNumber=this.generateSaleNumber(e.customerId),t.operationDateTime=new Date,t.total=this.calculateTotal(t);for(let e of t.orderBookItems)r.stockService.increaseStock(e.book.isbn,-e.quantity);let o=this.addSaleMock(t);return this.saleCart=new s.SaleCart,this.updateSaleCart(),o}addSaleMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.saleApi,{method:"POST",body:JSON.stringify({orderBookItems:Array.from(e.orderBookItems),customerId:e.customerId,operationDateTime:e.operationDateTime,operationNumber:e.operationNumber,total:e.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(console.log(t),t.ok){const o=yield t.json();return console.log("Rest apidan dönen cevap:\n"),console.log(o),alert("Kitap satış işlemi başarıyla gerçekleşmiştir."),alert("Fişinizi kaybetmeyiniz. Fiş Numarası: "+e.operationNumber),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}getSaleMock(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(this.saleApi+"/"+e,{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Hata oluştu, hata kodu: ${t.status} `);const o=yield t.json(),n=JSON.parse(JSON.stringify(o,null,4));return new i.Sale(n.orderBookItems,n.customerId,n.operationDateTime,n.operationNumber,n.total)}))}}},214:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StockService=void 0;const r=o(72);t.StockService=class{constructor(e){this.stockApi="http://localhost:3002/api/stocks",this._stockList=e}get stockList(){return this._stockList}set stockList(e){this._stockList=e}addStock(e,t,o){try{let n=new r.Stock(e,o,t);return this.stockList.push(n),!0}catch(e){return console.error(e),!1}}increaseStock(e,t){let o=this.getStock(e);return!!o&&(o.quantity=o.quantity+t,!0)}getStock(e){let t=this.stockList.find((t=>t.isbn===e));if(t)return t}getStockQuantity(e){let t=this.getStock(e);return t?t.quantity:0}addStockMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.stockApi,{method:"POST",body:JSON.stringify({isbn:e.isbn,quantity:e.quantity,shelfNumber:e.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu."+e)}}))}increaseStockMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.stockApi+"/"+e.isbn,{method:"PUT",body:JSON.stringify({isbn:e.isbn,quantity:e.quantity,shelfNumber:e.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!t.ok)throw new Error(`Hata oluştu, hata kodu: ${t.status} `);const o=yield t.json();console.log(o),console.log(t.status)}catch(e){console.log("Hata Oluştu.")}}))}}}},t={};!function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0IsWUFBYTBLLEVBQUUxSyxjQUVuQjZHLFFBQVMsQ0FDTCxlQUFnQixtQkFDaEJDLE9BQVEsc0JBSWhCLElBQUtKLEVBQVNLLEdBQ1YsTUFBTSxJQUFJQyxNQUFNLDJCQUEyQk4sRUFBU08sV0FHeEQsTUFBTUMsUUFBZ0JSLEVBQVNTLE9BQy9CekYsUUFBUUMsSUFBSXVGLEdBQ1p4RixRQUFRQyxJQUFJK0UsRUFBU08sTyxDQUN2QixNQUFPVixHQUNMN0UsUUFBUUMsSUFBSSxlLENBRXBCLEcsS0NwSkE0SyxFQUEyQixDQUFDLEdBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLENBQUMsR0FPWCxPQUhBRSxFQUFvQkwsR0FBVU0sS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0osR0FHcEVLLEVBQU9ELE9BQ2YsQ0NuQjBCSixDQUFvQixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZGIvZGF0YWJhc2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL2Jvb2stc3BlY2lmaWNhdGlvbi50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vYm9vay50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vY2FuY2VsLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9jdXN0b21lci50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vb3JkZXItYm9vay1pdGVtLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9yZW50LWNhcnQudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL3JlbnQudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL3NhbGUtY2FydC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vc2FsZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vc3RvY2sudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvc2VydmljZS9ib29rLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvc2VydmljZS9jYW5jZWwtc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL2N1c3RvbWVyLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvc2VydmljZS9yZW50LXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvc2VydmljZS9zYWxlLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvc2VydmljZS9zdG9jay1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rXCI7XG5pbXBvcnQgeyBCb29rU3BlY2lmaWNhdGlvbiB9IGZyb20gXCIuLi9kb21haW4vYm9vay1zcGVjaWZpY2F0aW9uXCI7XG5pbXBvcnQgeyBDYW5jZWwgfSBmcm9tIFwiLi4vZG9tYWluL2NhbmNlbFwiO1xuaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi4vZG9tYWluL2N1c3RvbWVyXCI7XG5pbXBvcnQgeyBSZW50IH0gZnJvbSBcIi4uL2RvbWFpbi9yZW50XCI7XG5pbXBvcnQgeyBSZW50Q2FydCB9IGZyb20gXCIuLi9kb21haW4vcmVudC1jYXJ0XCI7XG5pbXBvcnQgeyBTYWxlIH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlXCI7XG5pbXBvcnQgeyBTYWxlQ2FydCB9IGZyb20gXCIuLi9kb21haW4vc2FsZS1jYXJ0XCI7XG5pbXBvcnQgeyBTdG9jayB9IGZyb20gXCIuLi9kb21haW4vc3RvY2tcIjtcblxuZXhwb3J0IGNsYXNzIERhdGFCYXNlIHtcblxuICAgICBwcml2YXRlIF9ib29rczogQXJyYXk8Qm9vaz47Ly9cbiAgICAgcHJpdmF0ZSBfc3RvY2tzOiBBcnJheTxTdG9jaz47XG4gICAgIHByaXZhdGUgX2N1c3RvbWVyczogQXJyYXk8Q3VzdG9tZXI+Oy8vXG4gICAgIHByaXZhdGUgX3NhbGVzOiBBcnJheTxTYWxlPjsvL1xuICAgICBwcml2YXRlIF9yZW50czogQXJyYXk8UmVudD47XG4gICAgIHByaXZhdGUgX2Jvb2tTcGVjaWZpY2F0aW9uczogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+O1xuICAgICBwcml2YXRlIF9jYW5jZWxzOiBBcnJheTxDYW5jZWw+Oy8vXG4gICAgIHByaXZhdGUgX3NhbGVDYXJ0OiBTYWxlQ2FydDtcbiAgICAgcHJpdmF0ZSBfcmVudENhcnQ6UmVudENhcnQ7XG5cbiAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgdGhpcy5fYm9va3MgPSBuZXcgQXJyYXk8Qm9vaz4oKTtcbiAgICAgICAgICB0aGlzLl9zdG9ja3MgPSBuZXcgQXJyYXk8U3RvY2s+KCk7XG4gICAgICAgICAgdGhpcy5fY3VzdG9tZXJzID0gbmV3IEFycmF5PEN1c3RvbWVyPigpO1xuICAgICAgICAgIHRoaXMuX3NhbGVzID0gbmV3IEFycmF5PFNhbGU+KCk7XG4gICAgICAgICAgdGhpcy5fcmVudHMgPSBuZXcgQXJyYXk8UmVudD4oKTtcbiAgICAgICAgICB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbnMgPSBuZXcgQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+KCk7XG4gICAgICAgICAgdGhpcy5fY2FuY2VscyA9IG5ldyBBcnJheTxDYW5jZWw+KCk7XG4gICAgICAgICAgdGhpcy5fc2FsZUNhcnQgPSBuZXcgU2FsZUNhcnQoKTtcbiAgICAgICAgICB0aGlzLl9yZW50Q2FydCA9IG5ldyBSZW50Q2FydDtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgYm9va3NcbiAgICAgICogQHJldHVybiB7QXJyYXk8Qm9vaz59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldEJvb2tzTGlzdCgpOiBBcnJheTxCb29rPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBzdG9ja3NcbiAgICAgICogQHJldHVybiB7QXJyYXk8U3RvY2s+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRTdG9ja3NMaXN0KCk6IEFycmF5PFN0b2NrPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3N0b2NrcztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgY3VzdG9tZXJzXG4gICAgICAqIEByZXR1cm4ge0FycmF5PEN1c3RvbWVyPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Q3VzdG9tZXJzTGlzdCgpOiBBcnJheTxDdXN0b21lcj4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jdXN0b21lcnM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHNhbGVzXG4gICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGU+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRTYWxlc0xpc3QoKTogQXJyYXk8U2FsZT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9zYWxlcztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgcmVudHNcbiAgICAgICogQHJldHVybiB7QXJyYXk8UmVudD59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFJlbnRzKCk6IEFycmF5PFJlbnQ+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fcmVudHM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIGJvb2tTcGVjaWZpY2F0aW9uc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxCb29rU3BlY2lmaWNhdGlvbj59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldEJvb2tTcGVjaWZpY2F0aW9ucygpOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbnM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIGNhbmNlbFNhbGVzXG4gICAgICAqIEByZXR1cm4ge0FycmF5PENhbmNlbFNhbGU+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRDYW5jYWxlZFNhbGVzKCk6IEFycmF5PENhbmNlbD4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jYW5jZWxzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBzYWxlQ2FydFxuICAgICAgKiBAcmV0dXJuIHtBcnJheTxTYWxlQ2FydD59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFNhbGVDYXJ0KCk6IFNhbGVDYXJ0IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fc2FsZUNhcnQ7XG4gICAgIH1cblxuICAgICAgICAgLyoqXG4gICAgICogR2V0dGVyIHJlbnRDYXJ0XG4gICAgICogQHJldHVybiB7UmVudENhcnR9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgZ2V0UmVudENhcnQoKTogUmVudENhcnQge1xuXHRcdHJldHVybiB0aGlzLl9yZW50Q2FydDtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNhbGVDYXJ0XG4gICAgICogQHBhcmFtIHtTYWxlQ2FydH0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBzZXRTYWxlQ2FydCh2YWx1ZTogU2FsZUNhcnQpIHtcblx0XHR0aGlzLl9zYWxlQ2FydCA9IHZhbHVlO1xuXHR9XG5cblxuXG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVudENhcnRcbiAgICAgKiBAcGFyYW0ge1JlbnRDYXJ0fSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHNldFJlbnRDYXJ0KHZhbHVlOiBSZW50Q2FydCkge1xuXHRcdHRoaXMuX3JlbnRDYXJ0ID0gdmFsdWU7XG5cdH1cbiAgICAgXG5cblxufVxuIiwiZXhwb3J0IGNsYXNzIEJvb2tTcGVjaWZpY2F0aW9uIHtcbiAgICBwcml2YXRlIF9pZDogbnVtYmVyO1xuICAgIHByaXZhdGUgX2lzYm46IHN0cmluZztcbiAgICBwcml2YXRlIF9wcmljZTogbnVtYmVyO1xuICAgIHByaXZhdGUgX3N0YXJ0RGF0ZTogRGF0ZTtcbiAgICBwcml2YXRlIF9lbmREYXRlOiBEYXRlO1xuXG4gICAgY29uc3RydWN0b3IoaXNibjogc3RyaW5nLCBwcmljZTogbnVtYmVyLCBzdGFydERhdGU6IERhdGUsIGVuZERhdGU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5faXNibiA9IGlzYm47XG4gICAgICAgIHRoaXMuX3ByaWNlID0gcHJpY2U7XG4gICAgICAgIHRoaXMuX3N0YXJ0RGF0ZSA9IHN0YXJ0RGF0ZTtcbiAgICAgICAgdGhpcy5fZW5kRGF0ZSA9IGVuZERhdGU7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgaWRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgaWQoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5faWQ7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBpZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGlkKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLl9pZCA9IHZhbHVlO1xuXHR9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBpc2JuXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgaXNibigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNibjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcHJpY2VcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCBwcmljZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJpY2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHN0YXJ0RGF0ZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG4gICAgcHVibGljIGdldCBzdGFydERhdGUoKTogRGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdGFydERhdGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGVuZERhdGVcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgZW5kRGF0ZSgpOiBEYXRlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZERhdGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlzYm5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGlzYm4odmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9pc2JuID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHByaWNlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBwcmljZSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3ByaWNlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHN0YXJ0RGF0ZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHN0YXJ0RGF0ZSh2YWx1ZTogRGF0ZSkge1xuICAgICAgICB0aGlzLl9zdGFydERhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgZW5kRGF0ZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGVuZERhdGUodmFsdWU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5fZW5kRGF0ZSA9IHZhbHVlO1xuICAgIH1cblxuXG5cbn0iLCJpbXBvcnQgeyBCb29rU3BlY2lmaWNhdGlvbiB9IGZyb20gXCIuL2Jvb2stc3BlY2lmaWNhdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgQm9vayB7XG4gICAgIHByaXZhdGUgX2lkOiBudW1iZXI7XG4gICAgIHByaXZhdGUgX2lzYm46IHN0cmluZztcbiAgICAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nO1xuICAgICBwcml2YXRlIF9hdXRob3I6IHN0cmluZztcbiAgICAgcHJpdmF0ZSBfcHVibGlzaFllYXI6IHN0cmluZztcbiAgICAgcHJpdmF0ZSBfcGFnZXM6IG51bWJlcjtcbiAgICAgcHJpdmF0ZSBfYm9va1NwZWNpZmljYXRpb246IEJvb2tTcGVjaWZpY2F0aW9uO1xuXG4gICAgIGNvbnN0cnVjdG9yKGlzYm46IHN0cmluZywgbmFtZTogc3RyaW5nLCBhdXRob3I6IHN0cmluZywgcHVibGlzaFllYXI6IHN0cmluZywgcGFnZXM6IG51bWJlciwgYm9va1NwZWNpZmljYXRpb246IEJvb2tTcGVjaWZpY2F0aW9uKSB7XG4gICAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgICAgICAgdGhpcy5fYXV0aG9yID0gYXV0aG9yO1xuICAgICAgICAgIHRoaXMuX2lzYm4gPSBpc2JuO1xuICAgICAgICAgIHRoaXMuX3B1Ymxpc2hZZWFyID0gcHVibGlzaFllYXI7XG4gICAgICAgICAgdGhpcy5fcGFnZXMgPSBwYWdlcztcbiAgICAgICAgICB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbiA9IGJvb2tTcGVjaWZpY2F0aW9uO1xuICAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBpZFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCBpZCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9pZDtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgaWQodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX2lkID0gdmFsdWU7XG5cdH1cblxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgaXNiblxuICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGlzYm4oKTogc3RyaW5nIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5faXNibjtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgbmFtZVxuICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgYXV0aG9yXG4gICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgYXV0aG9yKCk6IHN0cmluZyB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2F1dGhvcjtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgcHVibGlzaFllYXJcbiAgICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBwdWJsaXNoWWVhcigpOiBzdHJpbmcge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9wdWJsaXNoWWVhcjtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgcGFnZXNcbiAgICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBwYWdlcygpOiBudW1iZXIge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9wYWdlcztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgYm9va1NwZWNpZmljYXRpb25cbiAgICAgICogQHJldHVybiB7Qm9va1NwZWNpZmljYXRpb259XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGJvb2tTcGVjaWZpY2F0aW9uKCk6IEJvb2tTcGVjaWZpY2F0aW9uIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fYm9va1NwZWNpZmljYXRpb247XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogU2V0dGVyIGlzYm5cbiAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICAqL1xuICAgICBwdWJsaWMgc2V0IGlzYm4odmFsdWU6IHN0cmluZykge1xuICAgICAgICAgIHRoaXMuX2lzYm4gPSB2YWx1ZTtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBTZXR0ZXIgbmFtZVxuICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgICovXG4gICAgIHB1YmxpYyBzZXQgbmFtZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgICAgdGhpcy5fbmFtZSA9IHZhbHVlO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIFNldHRlciBhdXRob3JcbiAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICAqL1xuICAgICBwdWJsaWMgc2V0IGF1dGhvcih2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgICAgdGhpcy5fYXV0aG9yID0gdmFsdWU7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogU2V0dGVyIHB1Ymxpc2hZZWFyXG4gICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAgKi9cbiAgICAgcHVibGljIHNldCBwdWJsaXNoWWVhcih2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgICAgdGhpcy5fcHVibGlzaFllYXIgPSB2YWx1ZTtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBTZXR0ZXIgcGFnZXNcbiAgICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICAqL1xuICAgICBwdWJsaWMgc2V0IHBhZ2VzKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgICB0aGlzLl9wYWdlcyA9IHZhbHVlO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIFNldHRlciBib29rU3BlY2lmaWNhdGlvblxuICAgICAgKiBAcGFyYW0ge0Jvb2tTcGVjaWZpY2F0aW9ufSB2YWx1ZVxuICAgICAgKi9cbiAgICAgcHVibGljIHNldCBib29rU3BlY2lmaWNhdGlvbih2YWx1ZTogQm9va1NwZWNpZmljYXRpb24pIHtcbiAgICAgICAgICB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbiA9IHZhbHVlO1xuICAgICB9XG59XG4iLCJpbXBvcnQgeyBTYWxlIH0gZnJvbSBcIi4vc2FsZVwiO1xuXG5leHBvcnQgY2xhc3MgQ2FuY2VsIHtcbiAgICBwcml2YXRlIF9jYW5jZWxUeXBlOiBTYWxlO1xuICAgIHByaXZhdGUgX3JlZnVuZDogbnVtYmVyO1xuICAgIHByaXZhdGUgX2NhbmNlbGVkRGF0ZVRpbWU6IERhdGU7XG5cbiAgICBjb25zdHJ1Y3RvcihjYW5jZWxUeXBlOiBTYWxlLCByZWZ1bmQ6IG51bWJlciwgY2FuY2VsZWREYXRlVGltZTogRGF0ZSkge1xuICAgICAgICB0aGlzLl9jYW5jZWxUeXBlID0gY2FuY2VsVHlwZTtcbiAgICAgICAgdGhpcy5fcmVmdW5kID0gcmVmdW5kO1xuICAgICAgICB0aGlzLl9jYW5jZWxlZERhdGVUaW1lID0gY2FuY2VsZWREYXRlVGltZTtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgY2FuY2VsVHlwZVxuICAgICAqIEByZXR1cm4ge1NhbGV9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgY2FuY2VsVHlwZSgpOiBTYWxlIHtcblx0XHRyZXR1cm4gdGhpcy5fY2FuY2VsVHlwZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHJlZnVuZFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCByZWZ1bmQoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fcmVmdW5kO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgY2FuY2VsZWREYXRlVGltZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgY2FuY2VsZWREYXRlVGltZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gdGhpcy5fY2FuY2VsZWREYXRlVGltZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGNhbmNlbFR5cGVcbiAgICAgKiBAcGFyYW0ge1NhbGV9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgY2FuY2VsVHlwZSh2YWx1ZTogU2FsZSkge1xuXHRcdHRoaXMuX2NhbmNlbFR5cGUgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlZnVuZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHJlZnVuZCh2YWx1ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5fcmVmdW5kID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBjYW5jZWxlZERhdGVUaW1lXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGNhbmNlbGVkRGF0ZVRpbWUodmFsdWU6IERhdGUpIHtcblx0XHR0aGlzLl9jYW5jZWxlZERhdGVUaW1lID0gdmFsdWU7XG5cdH1cbiAgICBcbiAgICBcblxufSIsImV4cG9ydCBjbGFzcyBDdXN0b21lciB7XG4gIHByaXZhdGUgX25hbWU6IHN0cmluZztcbiAgcHJpdmF0ZSBfc3VyTmFtZTogc3RyaW5nO1xuICBwcml2YXRlIF9waG9uZU51bWJlcjogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgc3VyTmFtZTogc3RyaW5nLCBwaG9uZU51bWJlcjogc3RyaW5nKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fc3VyTmFtZSA9IHN1ck5hbWU7XG4gICAgdGhpcy5fcGhvbmVOdW1iZXIgPSBwaG9uZU51bWJlcjtcbiAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG5hbWVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgbmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9uYW1lO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc3VyTmFtZVxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBzdXJOYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX3N1ck5hbWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBwaG9uZU51bWJlclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBwaG9uZU51bWJlcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9waG9uZU51bWJlcjtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBuYW1lKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9uYW1lID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzdXJOYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgc3VyTmFtZSh2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fc3VyTmFtZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcGhvbmVOdW1iZXJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBwaG9uZU51bWJlcih2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fcGhvbmVOdW1iZXIgPSB2YWx1ZTtcblx0fVxuXG5cbn1cbiIsImltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi9ib29rXCI7XG5cbmV4cG9ydCBjbGFzcyBPcmRlckJvb2tJdGVtcyB7XG4gICAgcHJpdmF0ZSBfYm9vazogQm9vaztcbiAgICBwcml2YXRlIF9xdWFudGl0eTogbnVtYmVyO1xuXG5cbiAgICBjb25zdHJ1Y3Rvcihib29rOiBCb29rLCBxdWFudGl0eTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX2Jvb2sgPSBib29rO1xuICAgICAgICB0aGlzLl9xdWFudGl0eSA9IHF1YW50aXR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBib29rXG4gICAgICogQHJldHVybiB7Qm9va31cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGJvb2soKTogQm9vayB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ib29rO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBxdWFudGl0eVxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHF1YW50aXR5KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWFudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgYm9va1xuICAgICAqIEBwYXJhbSB7Qm9va30gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGJvb2sodmFsdWU6IEJvb2spIHtcbiAgICAgICAgdGhpcy5fYm9vayA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBxdWFudGl0eVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcXVhbnRpdHkodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9xdWFudGl0eSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBib29rOiB0aGlzLl9ib29rLFxuICAgICAgICAgICAgcXVhbnRpdHk6IHRoaXMuX3F1YW50aXR5LFxuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IExpc3RGb3JtYXQgfSBmcm9tIFwidHlwZXNjcmlwdFwiO1xuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcbmltcG9ydCB7IE9yZGVyQm9va0l0ZW1zIH0gZnJvbSBcIi4vb3JkZXItYm9vay1pdGVtXCI7XG5cbmV4cG9ydCBjbGFzcyBSZW50Q2FydCB7XG4gICAgY3VzdG9tZXJJZCE6IG51bWJlcjtcbiAgICBvcmRlckJvb2tJdGVtczogQXJyYXk8T3JkZXJCb29rSXRlbXM+O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub3JkZXJCb29rSXRlbXMgPSBuZXcgQXJyYXk8T3JkZXJCb29rSXRlbXM+KCk7XG4gICAgfVxufSIsImltcG9ydCB7IFNhbGUgfSBmcm9tIFwiLi9zYWxlXCI7XG5pbXBvcnQgeyBPcmRlckJvb2tJdGVtcyB9IGZyb20gXCIuL29yZGVyLWJvb2staXRlbVwiO1xuXG5leHBvcnQgY2xhc3MgUmVudCBleHRlbmRzIFNhbGUge1xuICAgIHByaXZhdGUgX3JlZnVuZERhdGU/OiBEYXRlO1xuICAgIHByaXZhdGUgX3JlZnVuZD86IG51bWJlcjtcblxuXG4gICAgY29uc3RydWN0b3Ioc2FsZUJvb2tJdGVtcz86IEFycmF5PE9yZGVyQm9va0l0ZW1zPiwgb3BlcmF0aW9uRGF0ZVRpbWU/OiBEYXRlLCBjdXN0b21lcklkPzogbnVtYmVyLCBvcGVyYXRpb25OdW1iZXI/OiBzdHJpbmcsIHRvdGFsPzogbnVtYmVyLCByZWZ1bmREYXRlPzogRGF0ZSwgcmVmdW5kPzogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKHNhbGVCb29rSXRlbXMsIGN1c3RvbWVySWQsIG9wZXJhdGlvbkRhdGVUaW1lLCBvcGVyYXRpb25OdW1iZXIsIHRvdGFsKVxuXG4gICAgICAgIHRoaXMuX3JlZnVuZERhdGUgPSByZWZ1bmREYXRlO1xuICAgICAgICB0aGlzLl9yZWZ1bmQgPSByZWZ1bmQ7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVmdW5kRGF0ZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG4gICAgcHVibGljIGdldCByZWZ1bmREYXRlKCk6IERhdGUge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmdW5kRGF0ZSE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHJlZnVuZFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHJlZnVuZCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmdW5kITtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVmdW5kRGF0ZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHJlZnVuZERhdGUodmFsdWU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5fcmVmdW5kRGF0ZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZWZ1bmRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHJlZnVuZCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3JlZnVuZCA9IHZhbHVlO1xuICAgIH1cblxuXG5cblxufSIsImltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi9ib29rXCI7XG5pbXBvcnQgeyBPcmRlckJvb2tJdGVtcyB9IGZyb20gXCIuL29yZGVyLWJvb2staXRlbVwiO1xuXG5leHBvcnQgY2xhc3MgU2FsZUNhcnQge1xuICAgIGN1c3RvbWVySWQhOiBudW1iZXI7XG4gICAgb3JkZXJCb29rSXRlbXM6IEFycmF5PE9yZGVyQm9va0l0ZW1zPjtcblxuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMub3JkZXJCb29rSXRlbXMgPSBuZXcgQXJyYXk8T3JkZXJCb29rSXRlbXM+O1xuXHR9XG5cblxuXG5cblxufSIsImltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi9ib29rXCI7XG5pbXBvcnQgeyBPcmRlckJvb2tJdGVtcyB9IGZyb20gXCIuL29yZGVyLWJvb2staXRlbVwiO1xuXG5leHBvcnQgY2xhc3MgU2FsZSB7XG4gICAgcHJpdmF0ZSBfb3JkZXJCb29rSXRlbXM/OiBBcnJheTxPcmRlckJvb2tJdGVtcz47XG4gICAgcHJpdmF0ZSBfY3VzdG9tZXJJZD86IG51bWJlcjtcbiAgICBwcml2YXRlIF9vcGVyYXRpb25EYXRlVGltZT86IERhdGU7XG4gICAgcHJpdmF0ZSBfb3BlcmF0aW9uTnVtYmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgX3RvdGFsPzogbnVtYmVyO1xuXG5cblx0Y29uc3RydWN0b3Iob3JkZXJCb29rSXRlbXM/OiBBcnJheTxPcmRlckJvb2tJdGVtcz4sIGN1c3RvbWVySWQ/OiBudW1iZXIsIG9wZXJhdGlvbkRhdGVUaW1lPzogRGF0ZSwgb3BlcmF0aW9uTnVtYmVyPzogc3RyaW5nLCB0b3RhbD86IG51bWJlcikge1xuXHRcdHRoaXMuX29yZGVyQm9va0l0ZW1zID0gb3JkZXJCb29rSXRlbXM7XG5cdFx0dGhpcy5fY3VzdG9tZXJJZCA9IGN1c3RvbWVySWQ7XG5cdFx0dGhpcy5fb3BlcmF0aW9uRGF0ZVRpbWUgPSBvcGVyYXRpb25EYXRlVGltZTtcblx0XHR0aGlzLl9vcGVyYXRpb25OdW1iZXIgPSBvcGVyYXRpb25OdW1iZXI7XG5cdFx0dGhpcy5fdG90YWwgPSB0b3RhbDtcblx0fVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgb3JkZXJCb29rSXRlbXNcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxPcmRlckJvb2tJdGVtcz59XG4gICAgICovXG5cdHB1YmxpYyBnZXQgb3JkZXJCb29rSXRlbXMoKTogQXJyYXk8T3JkZXJCb29rSXRlbXM+IHtcblx0XHRyZXR1cm4gdGhpcy5fb3JkZXJCb29rSXRlbXMhO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgY3VzdG9tZXJJZFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCBjdXN0b21lcklkKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2N1c3RvbWVySWQhO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgb3BlcmF0aW9uRGF0ZVRpbWVcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IG9wZXJhdGlvbkRhdGVUaW1lKCk6IERhdGUge1xuXHRcdHJldHVybiB0aGlzLl9vcGVyYXRpb25EYXRlVGltZSE7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBvcGVyYXRpb25OdW1iZXJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgb3BlcmF0aW9uTnVtYmVyKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX29wZXJhdGlvbk51bWJlciE7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciB0b3RhbFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCB0b3RhbCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl90b3RhbCE7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBvcmRlckJvb2tJdGVtc1xuICAgICAqIEBwYXJhbSB7QXJyYXk8T3JkZXJCb29rSXRlbXM+fSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IG9yZGVyQm9va0l0ZW1zKHZhbHVlOiBBcnJheTxPcmRlckJvb2tJdGVtcz4pIHtcblx0XHR0aGlzLl9vcmRlckJvb2tJdGVtcyA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY3VzdG9tZXJJZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGN1c3RvbWVySWQodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX2N1c3RvbWVySWQgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIG9wZXJhdGlvbkRhdGVUaW1lXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IG9wZXJhdGlvbkRhdGVUaW1lKHZhbHVlOiBEYXRlKSB7XG5cdFx0dGhpcy5fb3BlcmF0aW9uRGF0ZVRpbWUgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIG9wZXJhdGlvbk51bWJlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IG9wZXJhdGlvbk51bWJlcih2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fb3BlcmF0aW9uTnVtYmVyID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciB0b3RhbFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHRvdGFsKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLl90b3RhbCA9IHZhbHVlO1xuXHR9XG5cdFxuICAgIFxufSIsImV4cG9ydCBjbGFzcyBTdG9jayB7XG4gICAgcHJpdmF0ZSBfaXNibjogc3RyaW5nO1xuICAgIHByaXZhdGUgX3F1YW50aXR5OiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfc2hlbGZOdW1iZXI6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGlzYm4/OiBzdHJpbmcsIHF1YW50aXR5PzogbnVtYmVyLCBzaGVsZk51bWJlcj86IHN0cmluZykge1xuICAgICAgICB0aGlzLl9pc2JuID0gaXNibiE7XG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gcXVhbnRpdHkhO1xuICAgICAgICB0aGlzLl9zaGVsZk51bWJlciA9IHNoZWxmTnVtYmVyITtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGlzYm5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHVibGljIGdldCBpc2JuKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc2JuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBxdWFudGl0eVxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHF1YW50aXR5KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWFudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc2hlbGZOdW1iZXJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHVibGljIGdldCBzaGVsZk51bWJlcigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2hlbGZOdW1iZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlzYm5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGlzYm4odmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9pc2JuID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHF1YW50aXR5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBxdWFudGl0eSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNoZWxmTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBzaGVsZk51bWJlcih2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX3NoZWxmTnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG5cbn0iLCIvLyBleHBvcnQgTk9ERV9PUFRJT05TPS0tb3BlbnNzbC1sZWdhY3ktcHJvdmlkZXJcbmltcG9ydCB7IERhdGFCYXNlIH0gZnJvbSBcIi4vZGIvZGF0YWJhc2VcIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgQm9va1NwZWNpZmljYXRpb24gfSBmcm9tIFwiLi9kb21haW4vYm9vay1zcGVjaWZpY2F0aW9uXCI7XG5pbXBvcnQgeyBDYW5jZWwgfSBmcm9tIFwiLi9kb21haW4vY2FuY2VsXCI7XG5pbXBvcnQgeyBDdXN0b21lciB9IGZyb20gXCIuL2RvbWFpbi9jdXN0b21lclwiO1xuaW1wb3J0IHsgUmVudCB9IGZyb20gXCIuL2RvbWFpbi9yZW50XCI7XG5pbXBvcnQgeyBTYWxlIH0gZnJvbSBcIi4vZG9tYWluL3NhbGVcIjtcbmltcG9ydCB7IE9yZGVyQm9va0l0ZW1zIH0gZnJvbSBcIi4vZG9tYWluL29yZGVyLWJvb2staXRlbVwiO1xuaW1wb3J0IHsgU3RvY2sgfSBmcm9tIFwiLi9kb21haW4vc3RvY2tcIjtcbmltcG9ydCB7IEJvb2tTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9ib29rLXNlcnZpY2VcIjtcbmltcG9ydCB7IENhbmNlbFNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL2NhbmNlbC1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBDdXN0b21lclNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL2N1c3RvbWVyLXNlcnZpY2VcIjtcbmltcG9ydCB7IFJlbnRTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9yZW50LXNlcnZpY2VcIjtcbmltcG9ydCB7IFNhbGVTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9zYWxlLXNlcnZpY2VcIjtcbmltcG9ydCB7IFN0b2NrU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2Uvc3RvY2stc2VydmljZVwiO1xuXG5leHBvcnQgbGV0IGJvb2tTZXJ2aWNlOiBCb29rU2VydmljZTtcbmV4cG9ydCBsZXQgY3VzdG9tZXJTZXJ2aWNlOiBDdXN0b21lclNlcnZpY2U7XG5leHBvcnQgbGV0IGNhbmNlbFNlcnZpY2U6IENhbmNlbFNlcnZpY2U7XG5leHBvcnQgbGV0IHJlbnRTZXJ2aWNlOiBSZW50U2VydmljZTtcbmV4cG9ydCBsZXQgc2FsZVNlcnZpY2U6IFNhbGVTZXJ2aWNlO1xuZXhwb3J0IGxldCBzdG9ja1NlcnZpY2U6IFN0b2NrU2VydmljZTtcblxubGV0IGRiOiBEYXRhQmFzZSA9IG5ldyBEYXRhQmFzZSgpO1xuaW5pdGlsaWF6ZVNlcnZpY2VzKGRiKTtcbmluaXRpbGlhemVEYXRhKCk7XG5hZGRMaXN0ZW5lckZvck1lbnVJdGVtcygpO1xuXG5mdW5jdGlvbiBpbml0aWxpYXplU2VydmljZXMoZGI6IERhdGFCYXNlKSB7XG4gIGJvb2tTZXJ2aWNlID0gbmV3IEJvb2tTZXJ2aWNlKGRiLmdldEJvb2tzTGlzdCwgZGIuZ2V0Qm9va1NwZWNpZmljYXRpb25zKTtcbiAgY3VzdG9tZXJTZXJ2aWNlID0gbmV3IEN1c3RvbWVyU2VydmljZShkYi5nZXRDdXN0b21lcnNMaXN0KTtcbiAgY2FuY2VsU2VydmljZSA9IG5ldyBDYW5jZWxTZXJ2aWNlKGRiLmdldENhbmNhbGVkU2FsZXMpO1xuICByZW50U2VydmljZSA9IG5ldyBSZW50U2VydmljZShkYi5nZXRSZW50cywgZGIuZ2V0UmVudENhcnQpO1xuICBzYWxlU2VydmljZSA9IG5ldyBTYWxlU2VydmljZShkYi5nZXRTYWxlc0xpc3QsIGRiLmdldFNhbGVDYXJ0KTtcbiAgc3RvY2tTZXJ2aWNlID0gbmV3IFN0b2NrU2VydmljZShkYi5nZXRTdG9ja3NMaXN0KTtcbiAgY29uc29sZS5sb2coXCJTZXJ2aWNlcyBpbnRpbGlhemVkLlwiKTtcblxuICBjdXN0b21lclNlcnZpY2UuYWRkQ3VzdG9tZXIobmV3IEN1c3RvbWVyKFwiXCIsIFwiXCIsIFwiXCIpKTtcbiAgY3VzdG9tZXJTZXJ2aWNlLmFkZEN1c3RvbWVyKG5ldyBDdXN0b21lcihcIlwiLCBcIlwiLCBcIlwiKSk7XG5cbiAgc3RvY2tTZXJ2aWNlLmFkZFN0b2NrKFwiMTIzLTQ1XCIsIFwiQTQ1LTUyXCIsIDEwKTtcbiAgc3RvY2tTZXJ2aWNlLmFkZFN0b2NrKFwiMTIzLTQ2XCIsIFwiQTQ1LTUyXCIsIDEwKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gaW5pdGlsaWF6ZURhdGEoKSB7XG4gIGF3YWl0IGJvb2tTZXJ2aWNlLmluaXRpYWxpemVEYXRhTW9jaygpO1xufVxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lckZvck1lbnVJdGVtcygpIHtcbiAgLy9zYWxlU2VydmljZS51cGRhdGVTYWxlQ2FydCgpO1xuICBzaG93QW5kSGlkZShcImFkZEJvb2tNZW51SXRlbVwiLCBcImFkZEJvb2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcInNob3dCb29rc01lbnVJdGVtXCIsIFwibGlzdEJvb2tzU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJhZGRDdXN0b21lck1lbnVJdGVtXCIsIFwiYWRkQ3VzdG9tZXJTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImFkZFN0b2NrTWVudUl0ZW1cIiwgXCJhZGRTdG9ja1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwic2FsZUJvb2tNZW51SXRlbVwiLCBcInNhbGVCb29rU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJyZW50Qm9va01lbnVJdGVtXCIsIFwicmVudEJvb2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImNhbmNlbFNhbGVNZW51SXRlbVwiLCBcImNhbmNlbFNhbGVTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImNhbmNlbFJlbnRNZW51SXRlbVwiLCBcImNhbmNlbFJlbnRTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcInJlZnVuZEJvb2tNZW51SXRlbVwiLCBcInJlZnVuZEJvb2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcInJlbnROb3dcIiwgXCJyZW50Qm9va1NlY3Rpb25cIik7XG5cbn1cblxuZnVuY3Rpb24gc2hvd0FuZEhpZGUoYnRuSWQ6IHN0cmluZywgZWxlbWVudElkOiBzdHJpbmcpIHtcbiAgLy9zYWxlU2VydmljZS51cGRhdGVTYWxlQ2FydCgpO1xuXG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidG5JZCk7XG5cbiAgaWYgKGVsZW1lbnQgJiYgYnRuKSB7XG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBpZiAoZWxlbWVudC5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIikge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBhZGRCb29rRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtYm9vay1mb3JtXCIpO1xuaWYgKGFkZEJvb2tGb3JtICE9IG51bGwpIHtcbiAgYWRkQm9va0Zvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGFkZEJvb2tGb3JtKTtcblxuICAgIGNvbnN0IHRpdGxlID0gZm9ybURhdGEuZ2V0KFwiYm9va1RpdGxlXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBhdXRob3IgPSBmb3JtRGF0YS5nZXQoXCJib29rQXV0aG9yXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBpc2JuID0gZm9ybURhdGEuZ2V0KFwiYm9va0lzYm5cIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IHB1Ymxpc2hZZWFyID0gZm9ybURhdGEuZ2V0KFwiYm9va1B1Ymxpc2hZZWFyXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBwYWdlcyA9IGZvcm1EYXRhLmdldChcImJvb2tQYWdlc1wiKSBhcyB1bmtub3duIGFzIG51bWJlcjtcbiAgICBjb25zdCBwcmljZSA9IGZvcm1EYXRhLmdldChcImJvb2tQcmljZVwiKSBhcyB1bmtub3duIGFzIG51bWJlcjtcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZSgnRGVjIDMxLCA5OTk5IDIzOjU5OjU5Jyk7XG5cbiAgICB0aXRsZS5tYXRjaChcIlwiKTtcblxuXG4gICAgY29uc3QgYm9va1NwZWMgPSBuZXcgQm9va1NwZWNpZmljYXRpb24oaXNibiwgcHJpY2UsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG4gICAgY29uc3QgYm9vayA9IG5ldyBCb29rKGlzYm4sIHRpdGxlLCBhdXRob3IsIHB1Ymxpc2hZZWFyLCBwYWdlcywgYm9va1NwZWMpO1xuICAgIC8vYm9va1NlcnZpY2UuYWRkQm9vayhib29rKTtcblxuICAgIGxldCBzdWNjZXNzID0gYXdhaXQgYm9va1NlcnZpY2UuYWRkQm9va01vY2soYm9vayk7XG4gICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgIGFsZXJ0KGJvb2suaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCBFa2xlbWUgxLDFn2xlbWkgQmHFn2FyxLEgxLBsZSBUYW1hbWxhbm3EscWfdMSxci5cIik7XG4gICAgICBhZGRCb29rRm9ybS5yZXNldCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydChib29rLmlzYm4gKyBcIiBudW1hcmFsxLEga2l0YXAgRWtsZW1lIMSwxZ9sZW1pIFPEsXJhc8SxbmRhIEJpciBIYXRhIG9sdcWfdHUuXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTsgLy8gcHJldmVudCByZWxvYWRcbiAgfTtcbn1cblxuY29uc3QgYWRkU3RvY2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtc3RvY2stZm9ybVwiKSk7XG5pZiAoYWRkU3RvY2tGb3JtKSB7XG4gIGFkZFN0b2NrRm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGFkZFN0b2NrRm9ybSk7XG5cbiAgICBjb25zdCBpc2JuID0gZm9ybURhdGEuZ2V0KFwiYm9va0lzYm5Gb3JBZGRTdG9ja1wiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcXVhbnR0aXkgPSBmb3JtRGF0YS5nZXQoXCJzdG9ja1F1YW50aXR5XCIpIGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgIGNvbnN0IHNoZWxmTnVtYmVyID0gZm9ybURhdGEuZ2V0KFwic2hlbGZOdW1iZXJcIikgYXMgc3RyaW5nO1xuXG4gICAgY29uc3Qgc3RvY2sgPSBuZXcgU3RvY2soaXNibiwgcXVhbnR0aXksIHNoZWxmTnVtYmVyKTtcblxuICAgIGNvbnN0IGlzQ29udGFpbnNCb29rID0gYm9va1NlcnZpY2UuYm9va0xpc3Quc29tZShiID0+IGIuaXNibiA9PSBpc2JuKTtcblxuICAgIGlmICghaXNDb250YWluc0Jvb2spIHtcbiAgICAgIGFsZXJ0KFwiU3RvayBla2xlbm1leWUgw6dhbMSxxZ/EsWxhbiBraXRhcCwga2F5xLF0bMSxIGRlxJ9pbGRpci4gTMO8dGZlbiDDtm5jZSBraXRhcCBla2xleWluaXpcIik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbGV0IGlzT2sgPSBhd2FpdCBzdG9ja1NlcnZpY2UuYWRkU3RvY2tNb2NrKHN0b2NrKTtcblxuICAgICAgaWYgKGlzT2spIHtcbiAgICAgICAgYWxlcnQoaXNibiArIFwiIGlzYm4gbnVtYXJhbMSxIGtpdGFwdGFuLCBcIiArIHF1YW50dGl5ICsgXCIga2FkYXIgc2lzdGVtZSBzdG9rIGVrbGVubWnFn3Rpci5cIik7XG4gICAgICB9XG5cblxuICAgIH1cblxuICAgIGFkZFN0b2NrRm9ybS5yZXNldCgpO1xuICAgIHJldHVybiBmYWxzZTsgLy8gcHJldmVudCByZWxvYWRcbiAgfTtcbn1cblxuLyoqXG4gKiBNw7zFn3RlcmkgZWtsZW1lIGZvcm11IHN1Ym1pdCBvbGF5xLFuxLEgbW9jayBjdXN0b21lclNlcnZpY2UgZGVraSBtb2NrIHNlcnZpc2UgYmHEn2xhZMSxbVxuICovXG5jb25zdCBhZGRDdXN0b21lckZvcm0gPSA8SFRNTEZvcm1FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1jdXN0b21lci1mb3JtXCIpKTtcbmlmIChhZGRDdXN0b21lckZvcm0pIHtcbiAgYWRkQ3VzdG9tZXJGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoYWRkQ3VzdG9tZXJGb3JtKTtcblxuICAgIGNvbnN0IG5hbWUgPSBmb3JtRGF0YS5nZXQoXCJjdXN0b21lck5hbWVcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IHN1cm5hbWUgPSBmb3JtRGF0YS5nZXQoXCJjdXN0b21lclN1cm5hbWVcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IHBob25lTnVtYmVyID0gZm9ybURhdGEuZ2V0KFwiY3VzdG9tZXJQaG9uZU51bWJlclwiKSBhcyBzdHJpbmc7XG5cbiAgICBjb25zdCBjdXN0b21lciA9IG5ldyBDdXN0b21lcihuYW1lLCBzdXJuYW1lLCBwaG9uZU51bWJlcik7XG4gICAgbGV0IHN1Y2Nlc3MgPSBhd2FpdCBjdXN0b21lclNlcnZpY2UuYWRkQ3VzdG9tZXJNb2NrKGN1c3RvbWVyKTtcblxuICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICBhbGVydChcIk3DvMWfdGVyaSBFa2xlbWUgxLDFn2xlbWkgQmHFn2FyxLEgxLBsZSBUYW1hbWxhbm3EscWfdMSxci4gXCIpO1xuICAgICAgYWRkQ3VzdG9tZXJGb3JtLnJlc2V0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KFwiTcO8xZ90ZXJpIEVrbGVtZSDEsMWfbGVtaSBTxLFyYXPEsW5kYSBiaXIgaGF0YSBpbGUga2FyxZ/EsWzEsWxkxLEuIFwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7IC8vIHByZXZlbnQgcmVsb2FkXG4gIH07XG59XG5cbi8qKkJ1cmFkYSBtb2NrIHNlcnZpc2kgeW9rIMOnw7xua8O8IGJ1cmFkYSBraXRhcCBzYXTEscWfxLEgeWFwxLFsxLFya2VuLCBraXRhcGxhcsSxIHNlcGV0ZSBla2xpeW9ydXouXG4gKiBTZXBldGUgZWtsZWRpa3RlbiBzb25yYSBidG5TYWxlIGlkbGkgYnV0b251biBjbGljayBldmVudGksIG1vY2sgc2VydmlzaSDDp2HEn8SxcsSxeW9yXG4gKi9cbmNvbnN0IHNhbGVCb29rRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2FsZS1ib29rLWZvcm1cIikpO1xuaWYgKHNhbGVCb29rRm9ybSkge1xuICBzYWxlQm9va0Zvcm0ub25zdWJtaXQgPSAoKSA9PiB7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShzYWxlQm9va0Zvcm0pO1xuXG4gICAgY29uc3QgaXNibiA9IGZvcm1EYXRhLmdldChcImlzYm5Gb3JTYWxlXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBib29rID0gYm9va1NlcnZpY2UuZ2V0Qm9vayhpc2JuKTtcbiAgICBjb25zdCBjdXN0b21lcklkID0gcGFyc2VJbnQoZm9ybURhdGEuZ2V0KFwiY3VzdG9tZXJJZEZvclNhbGVcIikgYXMgc3RyaW5nKTtcbiAgICAvL2lzVmFsaWRDdXN0b21lciByZXN0IHNlcnZpc3RlbiBkw7ZlbmVuIHZlcml5ZSBnw7ZyZSDFn2VraWxsZW5lY2VrXG4gICAgY29uc3QgaXNWYWxpZEN1c3RvbWVyOiBib29sZWFuID0gdHJ1ZTsgLy9jdXN0b21lclNlcnZpY2UuaXNWYWxpZEN1c3RvbWVyKGN1c3RvbWVySWQpO1xuICAgIGNvbnN0IHF1YW50aXR5ID0gcGFyc2VJbnQoZm9ybURhdGEuZ2V0KFwicXVhbnRpdHlGb3JTYWxlXCIpIGFzIHN0cmluZyk7XG5cbiAgICBjb25zdCBzdG9jayA9IHN0b2NrU2VydmljZS5nZXRTdG9jayhpc2JuKSE7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGJvb2spIHtcbiAgICAgICAgaWYgKHN0b2NrKSB7XG4gICAgICAgICAgaWYgKHN0b2NrLnF1YW50aXR5ID49IHF1YW50aXR5KSB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZEN1c3RvbWVyKSB7XG4gICAgICAgICAgICAgIHNhbGVTZXJ2aWNlLmFkZEJvb2tUb0NhcnQoYm9vaywgcXVhbnRpdHksIGN1c3RvbWVySWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYWxlcnQoY3VzdG9tZXJJZCArIFwiIG51bWFyYWzEsSBtw7zFn3Rlcmkga2F5xLF0bMSxIGRlxJ9pbGRpci5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYWxlcnQocXVhbnRpdHkgKyBcIiBrYWRhciBraXRhcCBkw7xra2FuZGEgbWV2Y3V0IGRlxJ9pbGRpci5cIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFsZXJ0KGBEw7xra2FuZGEgJHtpc2JufSBudW1hcmFsxLEga2l0YWLEsW4gc3RvxJ91IG1ldmN1dCBkZcSfaWxkaXIuYCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KGlzYm4gKyBcIiBudW1hcmFsxLEga2l0YXAgeW9rdHVyLlwiKTtcbiAgICAgIH1cblxuICAgICAgc2FsZUJvb2tGb3JtLnJlc2V0KCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEtpdGFwIHNhdMSxxZ/EsSBpw6dpbiBpxZ9sZW0geWFwxLFsxLFya2VuIGtpdGFwbGFyIHNlcGV0ZSBla2xlbml5b3IuXG4gKiBFa2xlbWUgacWfbGVtaSBiaXR0aWt0ZW4gc29ucmEgc2F0xLFuIGFsbSBpw6dpbiBidSBidXRvbmEgdMSxa2xhbmTEscSfxLFuZGEgc2VydmlzZSBnaWRpcCBzZXBldHRla2kga2l0YXBsYXLEsW4gc2F0xLHFn8SxIGdlcsOnZWtsZcWfaXlvclxuICogQnVyYWRhIGRpxJ9lciBidXRvbmxhcmRhIG9sZHXEn3UgZ2liaSBkaXJlayBtb2NrIHNlcnZpc2luZSBiYcSfbGFubWFrIHllcmluZSBzZXJ2aXNlIGdpdG1layBkdXJ1bXVuZGF5xLF6LiBcbiAqIMOHw7xua8O8IHNlcnZpc3RlIFNhbGUgbmVzbmVzaW5pIG9sdcWfdHVydXAgbW9jayBzZXJ2aXNpbmUgcGFyYW1ldHJlIG9sYXJhayBnZcOnaXlvcnV6LlxuICovXG5jb25zdCBidG5TYWxlID0gPEhUTUxCdXR0b25FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0blNhbGVcIikpO1xuYnRuU2FsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBpZiAoc2FsZVNlcnZpY2Uuc2FsZUNhcnQub3JkZXJCb29rSXRlbXMubGVuZ3RoID09PSAwKSB7XG5cbiAgICBhbGVydChcIlNlcGV0dGUgw7xyw7xuIHlvay4gTMO8dGZlbiDDtm5jZSDDvHLDvG4gZWtsZXlpbml6XCIpO1xuICB9IGVsc2Uge1xuICAgIHNhbGVTZXJ2aWNlLmNhcnRUb1NhbGUoKTtcbiAgfVxuXG59KTtcblxuLyoqXG4gKiBLaXRhcGxhcsSxIGxpc3RlbGVtZWsgacOnaW4gdMSxa2xhbsSxbGFuIGJ1dG9uIGNsaWNrIGV2ZW50aVxuICovXG5jb25zdCBidG5TaG93Qm9va3NNZW51SXRlbSA9IDxIVE1MRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaG93Qm9va3NNZW51SXRlbVwiKSk7XG5idG5TaG93Qm9va3NNZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBib29rU2VydmljZS5saXN0Qm9va3MoKTtcbn0pXG5cbmNvbnN0IGNhbmNlbFNhbGVGb3JtID0gPEhUTUxGb3JtRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbmNlbC1zYWxlLWZvcm1cIik7XG5pZiAoY2FuY2VsU2FsZUZvcm0pIHtcbiAgY2FuY2VsU2FsZUZvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGNhbmNlbFNhbGVGb3JtKTtcbiAgICBjb25zdCBzYWxlTnVtYmVyID0gZm9ybURhdGEuZ2V0KFwic2FsZU51bWJlcmZvckNhbmNlbFwiKSBhcyBzdHJpbmc7XG5cbiAgICAvLyDEsHB0YWwgacWfbGVtaW5pbiDDp2FsxLHFn2FiaWxtZXNpIGnDp2luIMO2bmNlIHNhdMSxxZ8gdmVyaXNpbmkgc2VydmlzdGVuIMOnYcSfxLFyZMSxbVxuICAgIGxldCBzYWxlID0gYXdhaXQgc2FsZVNlcnZpY2UuZ2V0U2FsZU1vY2soc2FsZU51bWJlcik7XG4gICAgbGV0IGNhbmNlbFNhbGU6IENhbmNlbCA9IG5ldyBDYW5jZWwoc2FsZSwgc2FsZS50b3RhbCwgbmV3IERhdGUpO1xuICAgIGxldCBzdGF0ZSA9IGF3YWl0IGNhbmNlbFNlcnZpY2UuY2FuY2VsU2FsZU1vY2soY2FuY2VsU2FsZSk7XG4gICAgXG4gICAgaWYgKHN0YXRlKSB7XG4gICAgICBhbGVydChzYWxlLm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBzYXTEscWfIGlwdGFsIGVkaWxtacWfdGlyLlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQoc2FsZS5vcGVyYXRpb25OdW1iZXIgKyBcIiBudW1hcmFsxLEgc2F0xLHFnyBpcHRhbCBlZGlsaXJrZW4gaGF0YSBtZXlkYW5hIGdlbGRpLlwiKTtcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgY2FuY2VsUmVudEZvcm0gPSA8SFRNTEZvcm1FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FuY2VsLXJlbnQtZm9ybVwiKTtcbmlmIChjYW5jZWxSZW50Rm9ybSkge1xuICBjYW5jZWxSZW50Rm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gS2lyYWxhbWEgaXB0YWxpbmluIMOnYWzEscWfYWJpbG1lc2kgacOnaW4gw7ZuY2UgdmVyaSBla2xlZGltLCBzb25yYSBpcHRhbCBpxZ9sZW1pIMOnYWzEscWfxLF5b3JcbiAgICBsZXQgc2JpID0gbmV3IEFycmF5PE9yZGVyQm9va0l0ZW1zPjtcbiAgICBzYmkucHVzaChuZXcgT3JkZXJCb29rSXRlbXMoYm9va1NlcnZpY2UuZ2V0Qm9vayhcIjEyMy00NVwiKSwgMykpO1xuXG4gICAgbGV0IHJEYXRlID0gbmV3IERhdGU7XG4gICAgckRhdGUuc2V0RGF0ZShyRGF0ZS5nZXREYXRlKCkgKyAxNCk7XG5cbiAgICBsZXQgYSA9IG5ldyBSZW50KHNiaSwgbmV3IERhdGUsIDEsIFwiUjAyMTEyMjE2MzA0NVwiLCAxMjMsIHJEYXRlLCAyMDApO1xuICAgIHJlbnRTZXJ2aWNlLnJlbnRMaXN0LnB1c2goYSk7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShjYW5jZWxSZW50Rm9ybSk7XG4gICAgY29uc3QgcmVudE51bWJlciA9IGZvcm1EYXRhLmdldChcInJlbnROdW1iZXJmb3JDYW5jZWxcIikgYXMgc3RyaW5nO1xuXG4gICAgbGV0IHJlbnQgPSByZW50U2VydmljZS5nZXRSZW50KHJlbnROdW1iZXIpO1xuXG4gICAgaWYgKHJlbnQpIHtcbiAgICAgIGxldCBjYW5jZWxSZW50OiBDYW5jZWwgPSBuZXcgQ2FuY2VsKHJlbnQsIHJlbnQudG90YWwsIG5ldyBEYXRlKTtcbiAgICAgIGxldCBzdGF0ZSA9IGF3YWl0IGNhbmNlbFNlcnZpY2UuY2FuY2VsUmVudE1vY2soY2FuY2VsUmVudCk7XG5cbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICBhbGVydChyZW50Lm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbGFtYSBpcHRhbCBlZGlsbWnFn3Rpci5cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChyZW50Lm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbGFtYSBpcHRhbCBlZGlsaXJrZW4gaGF0YSBtZXlkYW5hIGdlbGRpLlwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQocmVudE51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbG1hIGJ1bHVuYW1hbcSxxZ90xLFyLiBUZWtyYXIgZGVuZXlpbml6LlwiKTtcbiAgICB9XG5cbiAgfVxuXG59XG5cbi8qKkJ1cmFkYSBtb2NrIHNlcnZpc2kgeW9rIMOnw7xua8O8IGJ1cmFkYSBraXRhcCBraXJhbGFtYXPEsSB5YXDEsWzEsXJrZW4sIGtpdGFwbGFyxLEgc2VwZXRlIGVrbGl5b3J1ei5cbiAqIFNlcGV0ZSBla2xlZGlrdGVuIHNvbnJhIGJ0blJlbnQgaWRsaSBidXRvbnVuIGNsaWNrIGV2ZW50aSwgbW9jayBzZXJ2aXNpIMOnYcSfxLFyxLF5b3JcbiAqL1xuY29uc3QgcmVudEJvb2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZW50LWJvb2stZm9ybVwiKSk7XG5pZiAocmVudEJvb2tGb3JtKSB7XG4gIHJlbnRCb29rRm9ybS5vbnN1Ym1pdCA9ICgpID0+IHtcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKHJlbnRCb29rRm9ybSk7XG5cbiAgICBjb25zdCBpc2JuID0gZm9ybURhdGEuZ2V0KFwiaXNibkZvclJlbnRcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGJvb2sgPSBib29rU2VydmljZS5nZXRCb29rKGlzYm4pO1xuICAgIGNvbnN0IGN1c3RvbWVySWQgPSBwYXJzZUludChmb3JtRGF0YS5nZXQoXCJjdXN0b21lcklkRm9yUmVudFwiKSBhcyBzdHJpbmcpO1xuICAgIC8vaXNWYWxpZEN1c3RvbWVyIHJlc3Qgc2VydmlzdGVuIGTDtmVuZW4gdmVyaXllIGfDtnJlIMWfZWtpbGxlbmVjZWtcbiAgICBjb25zdCBpc1ZhbGlkQ3VzdG9tZXI6IGJvb2xlYW4gPSB0cnVlOyAvL2N1c3RvbWVyU2VydmljZS5pc1ZhbGlkQ3VzdG9tZXIoY3VzdG9tZXJJZCk7XG4gICAgY29uc3QgcXVhbnRpdHkgPSBwYXJzZUludChmb3JtRGF0YS5nZXQoXCJxdWFudGl0eUZvclJlbnRcIikgYXMgc3RyaW5nKTtcbiAgICBjb25zdCBzdG9jayA9IHN0b2NrU2VydmljZS5nZXRTdG9jayhpc2JuKSE7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGJvb2spIHtcbiAgICAgICAgaWYgKHN0b2NrKSB7XG4gICAgICAgICAgaWYgKHN0b2NrLnF1YW50aXR5ID49IHF1YW50aXR5KSB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZEN1c3RvbWVyKSB7XG4gICAgICAgICAgICAgIHJlbnRTZXJ2aWNlLmFkZEJvb2tUb0NhcnQoYm9vaywgcXVhbnRpdHksIGN1c3RvbWVySWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYWxlcnQoY3VzdG9tZXJJZCArIFwiIG51bWFyYWzEsSBtw7zFn3Rlcmkga2F5xLF0bMSxIGRlxJ9pbGRpci5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYWxlcnQocXVhbnRpdHkgKyBcIiBrYWRhciBraXRhcCBkw7xra2FuZGEgbWV2Y3V0IGRlxJ9pbGRpci5cIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFsZXJ0KGBEw7xra2FuZGEgJHtpc2JufSBudW1hcmFsxLEga2l0YWLEsW4gc3RvxJ91IG1ldmN1dCBkZcSfaWxkaXIuYCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KGlzYm4gKyBcIiBudW1hcmFsxLEga2l0YXAgeW9rdHVyLlwiKTtcbiAgICAgIH1cblxuICAgICAgcmVudEJvb2tGb3JtLnJlc2V0KCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEtpdGFwIHNhdMSxxZ/EsSBpw6dpbiBpxZ9sZW0geWFwxLFsxLFya2VuIGtpdGFwbGFyIHNlcGV0ZSBla2xlbml5b3IuXG4gKiBFa2xlbWUgacWfbGVtaSBiaXR0aWt0ZW4gc29ucmEgc2F0xLFuIGFsbSBpacOnaW4gYnUgYnV0b25hIHTEsWtsYW5kxLHEn8SxbmRhIHNlcnZpc2UgZ2lkaXAgc2VwZXR0ZWtpIGtpdGFwbGFyxLFuIHNhdMSxxZ/EsSBnZXLDp2VrbGXFn2l5b3JcbiAqIEJ1cmFkYSBkacSfZXIgYnV0b25sYXJkYSBvbGR1xJ91IGdpYmkgZGlyZWsgbW9jayBzZXJ2aXNpbmUgYmHEn2xhbm1hayB5ZXJpbmUgc2VydmlzZSBnaXRtZWsgZHVydW11bmRhecSxei4gXG4gKiDDh8O8bmvDvCBzZXJ2aXN0ZSBTYWxlIG5lc25lc2luaSBvbHXFn3R1cnVwIG1vY2sgc2VydmlzaW5lIHBhcmFtZXRyZSBvbGFyayBnZcOnaXlvcnV6LlxuICovXG5jb25zdCBidG5SZW50ID0gPEhUTUxCdXR0b25FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0blJlbnRcIikpO1xuYnRuUmVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBpZiAocmVudFNlcnZpY2UucmVudENhcnQub3JkZXJCb29rSXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgYWxlcnQoXCJTZXBldHRlIMO8csO8biB5b2suIEzDvHRmZW4gw7ZuY2Ugw7xyw7xuIGVrbGV5aW5pelwiKTtcbiAgfSBlbHNlIHtcbiAgICByZW50U2VydmljZS5jYXJ0VG9SZW50KCk7XG4gIH1cblxufSk7XG5cbmNvbnN0IHJlZnVuZEJvb2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZWZ1bmQtYm9vay1mb3JtXCIpKTtcbmlmIChyZWZ1bmRCb29rRm9ybSkge1xuICByZWZ1bmRCb29rRm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG5cbiAgICAvLyBLaXJhbGFtYSBpxZ9sZW1pbmRlbiBnZXJpIMO2ZGVtZSBpxZ9sZW1pIMOnYWzEscWfYWJpbG1lc2kgacOnaW4gw7ZuY2Uga2lyYWxhbWEgdmVyaXNpIGVrbGVkaW0sIFxuICAgIC8vIFNvbnJhIGdlcmkgw7ZkZW1lIGnFn2xlbWkgw6dhbMSxxZ/EsXlvclxuICAgIGxldCBzYmkgPSBuZXcgQXJyYXk8T3JkZXJCb29rSXRlbXM+O1xuICAgIHNiaS5wdXNoKG5ldyBPcmRlckJvb2tJdGVtcyhib29rU2VydmljZS5nZXRCb29rKFwiMTIzLTQ1XCIpLCAzKSlcblxuICAgIGxldCByRGF0ZSA9IG5ldyBEYXRlO1xuICAgIHJEYXRlLnNldERhdGUockRhdGUuZ2V0RGF0ZSgpICsgMjMpO1xuXG4gICAgbGV0IGEgPSBuZXcgUmVudChzYmksIG5ldyBEYXRlLCAxLCBcIlIwMjExMjIxNjMwNDVcIiwgMTIzLCByRGF0ZSwgMCk7XG4gICAgYS5yZWZ1bmQgPSByZW50U2VydmljZS5jYWxjdWxhdGVSZWZ1bmRBbW91bnQoYSk7XG5cbiAgICByZW50U2VydmljZS5yZW50TGlzdC5wdXNoKGEpO1xuICAgIC8vVmVyaSBHaXJpxZ9pIHNvbiBhbGFuxLFcblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShyZWZ1bmRCb29rRm9ybSk7XG4gICAgY29uc3QgcmVudE51bWJlciA9IGZvcm1EYXRhLmdldChcInJlbnROdW1iZXJmb3JSZWZ1bmRcIikgYXMgc3RyaW5nO1xuXG4gICAgbGV0IHJlbnQgPSByZW50U2VydmljZS5nZXRSZW50KHJlbnROdW1iZXIpO1xuICAgIGlmIChyZW50KSB7XG5cbiAgICAgIGxldCByZWZ1bmQgPSBhd2FpdCByZW50U2VydmljZS5yZWZ1bmRSZW50TW9jayhyZW50KTtcblxuICAgICAgaWYgKHJlZnVuZCkge1xuICAgICAgICBhbGVydChyZW50Lm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbGFtYSBnZXJpIGFsxLFubcSxxZ90xLFyLlwiKTtcbiAgICAgICAgYWxlcnQoXCJHZXJpIMO2ZGVtZSBtaWt0YXLEsTpcIiArIHJlZnVuZCArIFwiIOKCuiAuXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChyZW50Lm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbGFtYSBpcHRhbCBlZGlsaXJrZW4gaGF0YSBtZXlkYW5hIGdlbGRpLlwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQocmVudE51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbGFtYSBidWx1bmFtYW3EscWfdMSxci4gVGVrcmFyIGRlbmV5aW5pei5cIik7XG4gICAgfVxuXG4gIH07XG59IiwiLyoqXG4gKiBAYXV0aG9yIE1laG1ldCBFLiBBa2NhbiAtIDIxLjEwLjIyXG4gKi9cbmltcG9ydCB7IHN0b2NrU2VydmljZSB9IGZyb20gXCIuLlwiO1xuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgQm9va1NwZWNpZmljYXRpb24gfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2stc3BlY2lmaWNhdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgQm9va1NlcnZpY2Uge1xuICAgIHByaXZhdGUgX2Jvb2tMaXN0OiBBcnJheTxCb29rPjtcbiAgICBwcml2YXRlIF9ib29rU3BlY2lmaWNhdGlvbjogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+O1xuICAgIGJvb2tBcGk6IHN0cmluZyA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL2Jvb2tzJztcblxuICAgIGNvbnN0cnVjdG9yKGJvb2tMaXN0OiBBcnJheTxCb29rPiwgYm9va1NwZWNpZmljYXRpb246IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPikge1xuICAgICAgICB0aGlzLl9ib29rTGlzdCA9IGJvb2tMaXN0O1xuICAgICAgICB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbiA9IGJvb2tTcGVjaWZpY2F0aW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBib29rTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PEJvb2s+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgYm9va0xpc3QoKTogQXJyYXk8Qm9vaz4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYm9va0xpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGJvb2tTcGVjaWZpY2F0aW9uXG4gICAgICogQHJldHVybiB7QXJyYXk8Qm9va1NwZWNpZmljYXRpb24+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgYm9va1NwZWNpZmljYXRpb24oKTogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8Qm9vaz59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBib29rTGlzdCh2YWx1ZTogQXJyYXk8Qm9vaz4pIHtcbiAgICAgICAgdGhpcy5fYm9va0xpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgYm9va1NwZWNpZmljYXRpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5PEJvb2tTcGVjaWZpY2F0aW9uPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGJvb2tTcGVjaWZpY2F0aW9uKHZhbHVlOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4pIHtcbiAgICAgICAgdGhpcy5fYm9va1NwZWNpZmljYXRpb24gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBwYXJhbWV0cmUgb2xhcmFrIGdlbGVuIGlzYm4gYmlsZ2lzaW5lIGfDtnJlIGlsZ2lsaSBraXRhYsSxIGJ1bHVyLlxuICAgICAqIEBwYXJhbSBpc2JuIEJ1bHVuYWNhayBvbGFuIGtpdGFixLFuIGlzYm4gbnVtYXJhc8SxXG4gICAgICogQHJldHVybnMgaXNibiBudW1hcmFzxLFuYSBnw7ZyZSBpbGdpbGkga2l0YWLEsSBCb29rIG5lc25lc2kgb2xhcmFrIGdlcmkgZMO2bmTDvHLDvHJcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0Qm9vayhpc2JuOiBzdHJpbmcpOiBCb29rIHtcbiAgICAgICAgLy9CdXJhZGFuIG51bGwgYmlyIGRlxJ9lciBkZSBkw7ZuZWJpbGVjZcSfaSBpw6dpbiBoYXRhIHZlcml5b3JcbiAgICAgICAgLy9hbWEgYml6IHNvbmRha2kgISBvcGVyYXTDtnLDvCBpbGUgbnVsbCBkZcSfZXIgZMO2bm1leWVjZWsgZGl5ZSBnYXJhbnRpIHZlcml5b3J1elxuICAgICAgICByZXR1cm4gdGhpcy5ib29rTGlzdC5maW5kKGIgPT4gYi5pc2JuID09PSBpc2JuKSE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyYW1ldHJlIG9sYXJhayBnZWxlbiBCb29rIG5lc25lc2luaSBraXRhcCBuZXNuZXNpbmUgZWtsZXJcbiAgICAgKiBAcGFyYW0gbmV3Qm9vayBla2xlbmVjZWsgb2xhbiBraXRhcCBuZXNuZXNpXG4gICAgICovXG4gICAgcHVibGljIGFkZEJvb2sobmV3Qm9vazogQm9vaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5ib29rTGlzdC5wdXNoKG5ld0Jvb2spO1xuICAgICAgICAgICAgdGhpcy5ib29rU3BlY2lmaWNhdGlvbi5wdXNoKG5ld0Jvb2suYm9va1NwZWNpZmljYXRpb24pO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiS2l0YXAgZWtsZW5pcmtlbiBiaXIgaGF0YSBtZXlkYW5hIGdlbGRpLlwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpc1ZhbGlkQm9vayhpc2JuOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgYiA9IHRoaXMuZ2V0Qm9vayhpc2JuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9va0xpc3QuaW5jbHVkZXMoYilcbiAgICB9XG5cbiAgICBhc3luYyBpbml0aWFsaXplRGF0YU1vY2soKSB7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmJvb2tBcGksIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgY29uc3QgZ2V0UmVzdWx0ID0gPEJvb2tbXT5KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3VsdCwgbnVsbCwgNCkpO1xuXG4gICAgICAgIHRoaXMuYm9va0xpc3QgPSBnZXRSZXN1bHQgYXMgQXJyYXk8Qm9vaz47XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYm9va0xpc3QpO1xuXG4gICAgfVxuXG4gICAgcHVibGljIGxpc3RCb29rcygpIHtcblxuICAgICAgICBjb25zdCBsaXN0Qm9va3NEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxpc3RCb29rc1wiKTtcblxuICAgICAgICBpZiAobGlzdEJvb2tzRGl2KSB7XG4gICAgICAgICAgICBsZXQgcm93LCBjb2x1bW47XG5cbiAgICAgICAgICAgIHdoaWxlIChsaXN0Qm9va3NEaXYubGFzdENoaWxkICYmIGxpc3RCb29rc0Rpdi5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgbGlzdEJvb2tzRGl2LnJlbW92ZUNoaWxkKGxpc3RCb29rc0Rpdi5sYXN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVEYXRhTW9jaygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmJvb2tMaXN0LmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gXCJyb3ctbGlzdC1ib29rXCI7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbGVtZW50LmlzYm4udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVsZW1lbnQubmFtZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJjb2x1bW4tbGlzdC1ib29rXCI7XG4gICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gZWxlbWVudC5hdXRob3IudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IHN0b2NrU2VydmljZS5nZXRTdG9ja1F1YW50aXR5KGVsZW1lbnQuaXNibikudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVsZW1lbnQuYm9va1NwZWNpZmljYXRpb24ucHJpY2UudG9TdHJpbmcoKSArIFwiIOKCulwiO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgbGlzdEJvb2tzRGl2LmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGFzeW5jIGFkZEJvb2tNb2NrKGI6IEJvb2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5ib29rQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBpc2JuOiBiLmlzYm4sXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yOiBiLmF1dGhvcixcbiAgICAgICAgICAgICAgICAgICAgcGFnZXM6IGIucGFnZXMsXG4gICAgICAgICAgICAgICAgICAgIHB1Ymxpc2hZZWFyOiBiLnB1Ymxpc2hZZWFyLFxuICAgICAgICAgICAgICAgICAgICBib29rU3BlY2lmaWNhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNibjogYi5ib29rU3BlY2lmaWNhdGlvbi5pc2JuLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IGIuYm9va1NwZWNpZmljYXRpb24ucHJpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydERhdGU6IGIuYm9va1NwZWNpZmljYXRpb24uc3RhcnREYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kRGF0ZTogYi5ib29rU3BlY2lmaWNhdGlvbi5lbmREYXRlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZXN0IHNlcnZpc2luZGVuIGTDtm5lbiBjZXZhcCA9PlwiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBDYW5jZWwgfSBmcm9tIFwiLi4vZG9tYWluL2NhbmNlbFwiO1xuXG5leHBvcnQgY2xhc3MgQ2FuY2VsU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfY2FuY2VsbGVkTGlzdDogQXJyYXk8Q2FuY2VsPjtcbiAgICBjYW5jZWxTYWxlQXBpOiBzdHJpbmcgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS92MS9jYW5jZWxTYWxlJztcbiAgICBjYW5jZWxSZW50QXBpOiBzdHJpbmcgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS92MS9jYW5jZWxSZW50JztcblxuICAgIGNvbnN0cnVjdG9yKGNhbmNlbGxlZExpc3Q6IEFycmF5PENhbmNlbD4pIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsbGVkTGlzdCA9IGNhbmNlbGxlZExpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGNhbmNlbGxlZFNhbGVzTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PENhbmNlbFNhbGU+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgY2FuY2VsbGVkTGlzdCgpOiBBcnJheTxDYW5jZWw+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbGxlZExpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGNhbmNlbGxlZFNhbGVzTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8Q2FuY2VsU2FsZT59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBjYW5jZWxsZWRMaXN0KHZhbHVlOiBBcnJheTxDYW5jZWw+KSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbGxlZExpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlRGlmZkhvdXJzKGQxOiBEYXRlLCBkMjogRGF0ZSk6IG51bWJlciB7XG5cbiAgICAgICAgbGV0IGRpZmZNaWxpczogbnVtYmVyID0gKGQxLmdldFRpbWUoKSAtIGQyLmdldFRpbWUoKSk7Ly8gbWlsaSBzZWNvbmRzXG4gICAgICAgIGxldCBkaWZmSG91ciA9IE1hdGguZmxvb3IoZGlmZk1pbGlzIC8gMTAwMCAvIDYwIC8gNjApOyAvLyAvMTAwMCA+IHNlY29uZCAvIDYwID4gbWluIC8gNjAgPiBob3VyXG4gICAgICAgIHJldHVybiBkaWZmSG91cjtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FuY2VsU2FsZShjYW5jZWw6IENhbmNlbCk6IHZvaWQge1xuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXIgPSB0aGlzLmNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQoY2FuY2VsKTtcbiAgICAgICAgY2FuY2VsLnJlZnVuZCA9IHJlZnVuZDtcbiAgICAgICAgdGhpcy5jYW5jZWxsZWRMaXN0LnB1c2goY2FuY2VsKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlQ2FuY2VsU2FsZVJlZnVuZChjYW5jZWxTYWxlOiBDYW5jZWwpOiBudW1iZXIge1xuICAgICAgICBsZXQgZGlmZiA9IHRoaXMuY2FsY3VsYXRlRGlmZkhvdXJzKGNhbmNlbFNhbGUuY2FuY2VsZWREYXRlVGltZSwgY2FuY2VsU2FsZS5jYW5jZWxUeXBlLm9wZXJhdGlvbkRhdGVUaW1lKVxuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKGRpZmYgPiAyNCkge1xuICAgICAgICAgICAgcmVmdW5kID0gY2FuY2VsU2FsZS5jYW5jZWxUeXBlLnRvdGFsICogMC43NTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IGNhbmNlbFNhbGUuY2FuY2VsVHlwZS50b3RhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVmdW5kO1xuICAgIH1cblxuICAgIGFzeW5jIGNhbmNlbFNhbGVNb2NrKGNhbmNlbFNhbGU6IENhbmNlbCkge1xuXG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlciA9IHRoaXMuY2FsY3VsYXRlQ2FuY2VsU2FsZVJlZnVuZChjYW5jZWxTYWxlKTtcbiAgICAgICAgY2FuY2VsU2FsZS5yZWZ1bmQgPSByZWZ1bmQ7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmNhbmNlbFNhbGVBcGksIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGNhbmNlbFR5cGU6IGNhbmNlbFNhbGUuY2FuY2VsVHlwZSxcbiAgICAgICAgICAgICAgICByZWZ1bmQ6IGNhbmNlbFNhbGUucmVmdW5kLFxuICAgICAgICAgICAgICAgIGNhbmNlbGVkRGF0ZVRpbWU6IGNhbmNlbFNhbGUuY2FuY2VsZWREYXRlVGltZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vVG9kbyBzYWxlIG1vY2sgc2VydmlzaW5lIGRlbGV0ZSBpc3RlxJ9pIGF0xLFwIG8gc2FsZSBuZXNuZXNpbmkgc2lsZWNla1xuXG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgY2FuY2VsUmVudChjYW5jZWw6IENhbmNlbCkge1xuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXIgPSB0aGlzLmNhbGN1bGF0ZUNhbmNlbFJlbnRSZWZ1bmQoY2FuY2VsKTtcbiAgICAgICAgY2FuY2VsLnJlZnVuZCA9IHJlZnVuZDtcbiAgICAgICAgdGhpcy5jYW5jZWxsZWRMaXN0LnB1c2goY2FuY2VsKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlQ2FuY2VsUmVudFJlZnVuZChjYW5jZWxSZW50OiBDYW5jZWwpOiBudW1iZXIge1xuICAgICAgICBsZXQgZGlmZiA9IHRoaXMuY2FsY3VsYXRlRGlmZkhvdXJzKGNhbmNlbFJlbnQuY2FuY2VsZWREYXRlVGltZSwgY2FuY2VsUmVudC5jYW5jZWxUeXBlLm9wZXJhdGlvbkRhdGVUaW1lKVxuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKGRpZmYgPiAyNCkge1xuICAgICAgICAgICAgcmVmdW5kID0gY2FuY2VsUmVudC5jYW5jZWxUeXBlLnRvdGFsICogMC43NTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IGNhbmNlbFJlbnQuY2FuY2VsVHlwZS50b3RhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVmdW5kO1xuICAgIH1cblxuICAgIGFzeW5jIGNhbmNlbFJlbnRNb2NrKGNhbmNlbFJlbnQ6IENhbmNlbCkge1xuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXIgPSB0aGlzLmNhbGN1bGF0ZUNhbmNlbFJlbnRSZWZ1bmQoY2FuY2VsUmVudCk7XG5cbiAgICAgICAgY2FuY2VsUmVudC5yZWZ1bmQgPSByZWZ1bmQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5jYW5jZWxSZW50QXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICByZW50OiBjYW5jZWxSZW50LmNhbmNlbFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJlZnVuZDogY2FuY2VsUmVudC5yZWZ1bmQsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGVkRGF0ZVRpbWU6IGNhbmNlbFJlbnQuY2FuY2VsZWREYXRlVGltZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL1RvZG8gc2FsZSBtb2NrIHNlcnZpc2luZSBkZWxldGUgaXN0ZcSfaSBhdMSxcCBvIHNhbGUgbmVzbmVzaW5pIHNpbGVjZWtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBDdXN0b21lciB9IGZyb20gXCIuLi9kb21haW4vY3VzdG9tZXJcIjtcblxuZXhwb3J0IGNsYXNzIEN1c3RvbWVyU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfY3VzdG9tZXJMaXN0OiBBcnJheTxDdXN0b21lcj47XG4gICAgcHJpdmF0ZSBjdXN0b21lckFwaTogc3RyaW5nID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL2N1c3RvbWVyc1wiO1xuXG4gICAgY29uc3RydWN0b3IoY3VzdG9tZXJMaXN0OiBBcnJheTxDdXN0b21lcj4pIHtcbiAgICAgICAgdGhpcy5fY3VzdG9tZXJMaXN0ID0gY3VzdG9tZXJMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjdXN0b21lckxpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxDdXN0b21lcj59XG4gICAgICovXG4gICAgcHVibGljIGdldCBjdXN0b21lckxpc3QoKTogQXJyYXk8Q3VzdG9tZXI+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbWVyTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY3VzdG9tZXJMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxDdXN0b21lcj59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBjdXN0b21lckxpc3QodmFsdWU6IEFycmF5PEN1c3RvbWVyPikge1xuICAgICAgICB0aGlzLl9jdXN0b21lckxpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQ3VzdG9tZXIobmV3Q3VzdG9tZXI6IEN1c3RvbWVyKSB7XG4gICAgICAgIHRoaXMuY3VzdG9tZXJMaXN0LnB1c2gobmV3Q3VzdG9tZXIpO1xuICAgIH1cblxuICAgIC8qXG4gICAgICAgIHB1YmxpYyBnZXRDdXN0b21lckluZm8oaWQ6IG51bWJlcik6IEN1c3RvbWVyIHwgdW5kZWZpbmVkIHtcbiAgICBcbiAgICAgICAgICAgIGxldCBjdXN0b21lciA9IHRoaXMuY3VzdG9tZXJMaXN0LmZpbmQoY3VzdG9tZXIgPT4gY3VzdG9tZXIuaWQgPT09IGlkKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChjdXN0b21lcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21lcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICBwdWJsaWMgaXNWYWxpZEN1c3RvbWVyKGN1c3RvbWVySWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIFxuICAgICAgICAgICAgbGV0IGlzVmFsaWQgPSB0aGlzLmN1c3RvbWVyTGlzdC5zb21lKGN1c3RvbWVyID0+IGN1c3RvbWVyLmlkID09PSBjdXN0b21lcklkKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICovXG5cbiAgICBhc3luYyBhZGRDdXN0b21lck1vY2sobmV3Q3VzdG9tZXI6IEN1c3RvbWVyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuY3VzdG9tZXJBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5ld0N1c3RvbWVyLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHN1ck5hbWU6IG5ld0N1c3RvbWVyLnN1ck5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBuZXdDdXN0b21lci5waG9uZU51bWJlclxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlc3Qgc2VydmlzaW5kZW4gZMO2bmVuIGNldmFwID0+XCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IHN0b2NrU2VydmljZSB9IGZyb20gXCIuLlwiO1xuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgUmVudCB9IGZyb20gXCIuLi9kb21haW4vcmVudFwiO1xuaW1wb3J0IHsgUmVudENhcnQgfSBmcm9tIFwiLi4vZG9tYWluL3JlbnQtY2FydFwiO1xuaW1wb3J0IHsgT3JkZXJCb29rSXRlbXMgfSBmcm9tIFwiLi4vZG9tYWluL29yZGVyLWJvb2staXRlbVwiO1xuXG5leHBvcnQgY2xhc3MgUmVudFNlcnZpY2Uge1xuICAgIHByaXZhdGUgX3JlbnRMaXN0OiBBcnJheTxSZW50PjtcblxuICAgIHByaXZhdGUgX3JlbnRDYXJ0OiBSZW50Q2FydDtcbiAgICBwdWJsaWMgcmVudEFwaSA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL3JlbnRzJztcbiAgICByZWZ1bmRQZXJjZW50OiBudW1iZXI7XG5cblxuICAgIGNvbnN0cnVjdG9yKHJlbnRMaXN0OiBBcnJheTxSZW50PiwgcmVudENhcnQ6IFJlbnRDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3JlbnRMaXN0ID0gcmVudExpc3Q7XG4gICAgICAgIHRoaXMucmVmdW5kUGVyY2VudCA9IDAuNzU7XG4gICAgICAgIHRoaXMuX3JlbnRDYXJ0ID0gcmVudENhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHJlbnRMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8UmVudD59XG4gICAgICovXG4gICAgcHVibGljIGdldCByZW50TGlzdCgpOiBBcnJheTxSZW50PiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW50TGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVudExpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PFJlbnQ+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcmVudExpc3QodmFsdWU6IEFycmF5PFJlbnQ+KSB7XG4gICAgICAgIHRoaXMuX3JlbnRMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHJlbnRDYXJ0XG4gICAgICogQHJldHVybiB7UmVudENhcnR9XG4gICAgICovXG4gICAgcHVibGljIGdldCByZW50Q2FydCgpOiBSZW50Q2FydCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW50Q2FydDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVudENhcnRcbiAgICAgKiBAcGFyYW0ge1JlbnRDYXJ0fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcmVudENhcnQodmFsdWU6IFJlbnRDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3JlbnRDYXJ0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFJlbnQocmVudDogUmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbnRMaXN0LnB1c2gocmVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2l0YXBsYXLEsW4gaGVwc2kgc2VwZXRlIGVrbGVuZGlrdGVuIHNvbnJhIHRvcGxtYSDDvGNyZXRpIGhlc2FwbGF1YW4gZm9ua3NpeW9uXG4gICAgICogQHBhcmFtIHJlbnQgS2l0YXBsYXLEsW4gbGlzdGVzaW5pbiBidWx1bmR1xJ91IG5lc25lXG4gICAgICogQHJldHVybnMgVG9wbGFtIMO8Y3JldFxuICAgICAqL1xuICAgIHB1YmxpYyBjYWxjdWxhdGVUb3RhbChyZW50OiBSZW50KTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHN1YlRvdGFsOiBudW1iZXIgPSAwO1xuXG4gICAgICAgIC8vaXQgY2FuIGJlID0+IGxldCBlbnRyeSBvZiByZW50LmJvb2tBbmRRdWFudGl0eU1hcC5lbnRyaWVzKClcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiByZW50Lm9yZGVyQm9va0l0ZW1zKSB7XG4gICAgICAgICAgICBzdWJUb3RhbCArPSBpdGVtLmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiBpdGVtLnF1YW50aXR5XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3ViVG90YWw7XG4gICAgfVxuXG4gICAgLy8gUjA1MTAyMjE0NTUwOSA9PiBkb21haW4uUmVudCAwNS4xMC4yMDIyIDE0OjU1LjA5XG4gICAgZ2VuZXJhdGVSZW50TnVtYmVyKGN1c3RvbWVySWQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGxldCByZWNlaXB0TnVtYmVyOiBzdHJpbmcgPSBcIlJcIiArIHRvZGF5LmdldERheSgpLnRvU3RyaW5nKCkgK1xuICAgICAgICAgICAgdG9kYXkuZ2V0TW9udGgoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICtcbiAgICAgICAgICAgIHRvZGF5LmdldEhvdXJzKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldE1pbnV0ZXMoKS50b1N0cmluZygpICtcbiAgICAgICAgICAgIHRvZGF5LmdldFNlY29uZHMoKS50b1N0cmluZygpICsgY3VzdG9tZXJJZC50b1N0cmluZygpO1xuXG4gICAgICAgIHJldHVybiByZWNlaXB0TnVtYmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBkMSBLaXRhcGxhxLFuIGtpcmFsxLFrIG9sYXJhayBhbMSxbmTEscSfxLEgdGFyaWhcbiAgICAgKiBAcGFyYW0gZDIgS2l0YXBsYXLEsW4gZ2VyaSBnZXRpcmlsZGnEn2kgdGFyaWhcbiAgICAgKiBAcmV0dXJucyDEsGtpIHRhcmloIGFyYXPEsW5kYWtpIGZhcmsgKHNhYXQgb2xhcmFrKVxuICAgICAqL1xuICAgIHB1YmxpYyBjYWxjdWxhdGVEaWZmSG91cnMoZDE6IERhdGUsIGQyOiBEYXRlKTogbnVtYmVyIHtcblxuICAgICAgICBsZXQgZGlmZk1pbGlzOiBudW1iZXIgPSAoZDEuZ2V0VGltZSgpIC0gZDIuZ2V0VGltZSgpKTsvLyBtaWxpIHNlY29uZHNcbiAgICAgICAgbGV0IGRpZmZIb3VyID0gTWF0aC5mbG9vcihkaWZmTWlsaXMgLyAxMDAwIC8gNjAgLyA2MCk7IC8vIC8xMDAwID4gc2Vjb25kIC8gNjAgPiBtaW4gLyA2MCA+IGhvdXJcbiAgICAgICAgcmV0dXJuIGRpZmZIb3VyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwIGlsayBraXJhbGFuZMSxxJ/EsSBhbmRhLCB6YW1hbsSxbmRhIGdldGlyaWxkacSfaSBnaWJpIGTDvMWfw7xuw7xsZXJlayB2ZXJpbGVjZWsgb2xhbiB2YXJzYXnEsWxhbiBnZXJpIMO2ZGVtZSBtaWt0YXLEsVxuICAgICAqIEBwYXJhbSByZW50IEhlc2FwbGFuYWNhayBvbGFuIGdlcmkgw7ZkZW1lIG1pa3RhcsSxbsSxbiBpw6dpbmRlIGJ1bHVuZHXEn3UgbmVzbmVcbiAgICAgKi9cbiAgICBwdWJsaWMgY2FsY3VsYXRlUmVmdW5kKHJlbnQ6IFJlbnQpOiB2b2lkIHtcbiAgICAgICAgcmVudC5yZWZ1bmQgPSByZW50LnRvdGFsICogdGhpcy5yZWZ1bmRQZXJjZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwIGtpcmFsYW5kxLEsIG9rdW5kdSB2ZSBnZXJpIGdldGlyaWxkacSfaSB6YW1hbiBuZSBrYWRhciBnZXJpIMO2ZGVtZSB2ZXJpbGVjZcSfaW5pIGhlc2FwbGFyXG4gICAgICogQHBhcmFtIHJlbnQgSGVzYXBsYW5hY2FrIG9sYW4gZ2VyaSDDtmRlbWUgbWlrdGFyxLFuxLFuIGnDp2luZGUgYnVsdW5kdcSfdSBuZXNuZVxuICAgICAqIEByZXR1cm5zIEdlcmkgw7ZkZW1lIG1pa3RhcsSxXG4gICAgICovXG4gICAgcHVibGljIGNhbGN1bGF0ZVJlZnVuZEFtb3VudChyZW50OiBSZW50KTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGRpZmYgPSB0aGlzLmNhbGN1bGF0ZURpZmZIb3VycyhyZW50LnJlZnVuZERhdGUsIHJlbnQub3BlcmF0aW9uRGF0ZVRpbWUpIC8gMjQ7XG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlcjtcblxuICAgICAgICBpZiAoZGlmZiA8PSAxNCkge1xuICAgICAgICAgICAgcmVmdW5kID0gcmVudC50b3RhbCAqIDAuNzU7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlmZiA8PSAyNCkge1xuICAgICAgICAgICAgbGV0IGZpbmUgPSAoMC43NSAtICgoZGlmZiAtIDE0KSAqIDAuMDUpKTtcbiAgICAgICAgICAgIHJlZnVuZCA9IHJlbnQudG90YWwgKiBmaW5lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVmdW5kID0gcmVudC50b3RhbCAqIDAuMjU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVmdW5kO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSZW50KHJlbnROdW1iZXI6IHN0cmluZyk6IFJlbnQge1xuICAgICAgICBsZXQgcmVudCA9IHRoaXMucmVudExpc3QuZmluZChzID0+IHMub3BlcmF0aW9uTnVtYmVyID09PSByZW50TnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHJlbnQhO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRCb29rVG9DYXJ0KGJvb2s6IEJvb2ssIHF1YW50aXR5OiBudW1iZXIsIGN1c3RvbWVySWQ6IG51bWJlcikge1xuICAgICAgICBpZiAodGhpcy5yZW50Q2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVudENhcnQuY3VzdG9tZXJJZCA9IGN1c3RvbWVySWQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZW50Q2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW50Q2FydC5jdXN0b21lcklkICE9PSBjdXN0b21lcklkKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJGYXJrbMSxIG3DvMWfdGVyaXllIGtpdGFwIGtpcmFsYW5tYXlhIMOnYWzEscWfxLFsxLF5b3IuIEzDvHRmZW4gdGVrIG3DvMWfdGVyaSBpw6dpbiBpxZ9sZW0geWFwxLFuxLF6XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVudENhcnQub3JkZXJCb29rSXRlbXMucHVzaChuZXcgT3JkZXJCb29rSXRlbXMoYm9vaywgcXVhbnRpdHkpKVxuICAgICAgICB0aGlzLnVwZGF0ZVJlbnRDYXJ0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZVJlbnRDYXJ0KCkge1xuICAgICAgICBjb25zdCByZW50Q2FydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVudENhcnRcIik7XG4gICAgICAgIGNvbnN0IHN1YlRvdGFsU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG90YWxSZW50QW1vdW50VGxcIik7XG5cbiAgICAgICAgaWYgKHJlbnRDYXJ0KSB7XG5cbiAgICAgICAgICAgIGxldCByb3csIGNvbHVtbiwgc3ViVG90YWw6IG51bWJlciA9IDA7XG5cbiAgICAgICAgICAgIHdoaWxlIChyZW50Q2FydC5sYXN0Q2hpbGQgJiYgcmVudENhcnQuY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHJlbnRDYXJ0LnJlbW92ZUNoaWxkKHJlbnRDYXJ0Lmxhc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJUb3RhbFNwYW4hLnRleHRDb250ZW50ID0gXCJcIjtcblxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucmVudENhcnQub3JkZXJCb29rSXRlbXMubGVuZ3RoOyBpbmRleCsrKSB7XG5cbiAgICAgICAgICAgICAgICByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1yb3dcIjtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5yZW50Q2FydC5vcmRlckJvb2tJdGVtcykge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gdGhpcy5yZW50Q2FydC5jdXN0b21lcklkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gaXRlbS5ib29rLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gaXRlbS5xdWFudGl0eS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IChpdGVtLmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiBpdGVtLnF1YW50aXR5KS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyb3cgJiYgc3ViVG90YWxTcGFuKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0IG9mIHRoaXMucmVudENhcnQub3JkZXJCb29rSXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViVG90YWwgKz0gdC5ib29rLmJvb2tTcGVjaWZpY2F0aW9uLnByaWNlICogdC5xdWFudGl0eTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZW50Q2FydC5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgICAgIHN1YlRvdGFsU3Bhbi50ZXh0Q29udGVudCA9IHN1YlRvdGFsLnRvU3RyaW5nKCkgKyBcIiBUTFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuXG4gICAgfVxuXG4gICAgcHVibGljIGNhcnRUb1JlbnQoKSB7XG4gICAgICAgIGxldCByZW50Q2FydDogUmVudENhcnQgPSB0aGlzLnJlbnRDYXJ0O1xuICAgICAgICBsZXQgcmVudCA9IG5ldyBSZW50KCk7XG5cbiAgICAgICAgcmVudC5vcmRlckJvb2tJdGVtcyA9IHJlbnRDYXJ0Lm9yZGVyQm9va0l0ZW1zO1xuICAgICAgICByZW50LmN1c3RvbWVySWQgPSByZW50Q2FydC5jdXN0b21lcklkO1xuICAgICAgICByZW50Lm9wZXJhdGlvbk51bWJlciA9IHRoaXMuZ2VuZXJhdGVSZW50TnVtYmVyKHJlbnRDYXJ0LmN1c3RvbWVySWQpO1xuICAgICAgICByZW50Lm9wZXJhdGlvbkRhdGVUaW1lID0gbmV3IERhdGUoKTtcbiAgICAgICAgcmVudC50b3RhbCA9IHRoaXMuY2FsY3VsYXRlVG90YWwocmVudCk7XG4gICAgICAgIGxldCByRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJEYXRlLnNldERhdGUockRhdGUuZ2V0RGF0ZSgpICsgMTQpO1xuICAgICAgICByZW50LnJlZnVuZERhdGUgPSByRGF0ZTtcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVSZWZ1bmQocmVudCk7XG5cbiAgICAgICAgZm9yIChsZXQgaSBvZiByZW50Lm9yZGVyQm9va0l0ZW1zKSB7XG4gICAgICAgICAgICBzdG9ja1NlcnZpY2UuaW5jcmVhc2VTdG9jayhpLmJvb2suaXNibiwgLWkucXVhbnRpdHkpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbnRDYXJ0ID0gbmV3IFJlbnRDYXJ0OyAvLyBzZXBldGkgYm/Fn2FsdFxuICAgICAgICB0aGlzLnVwZGF0ZVJlbnRDYXJ0KCk7XG4gICAgICAgIHRoaXMuYWRkUmVudE1vY2socmVudCk7XG4gICAgfVxuXG4gICAgYXN5bmMgYWRkUmVudE1vY2socjogUmVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnJlbnRBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIG9yZGVyQm9va0l0ZW1zOiBBcnJheS5mcm9tKHIub3JkZXJCb29rSXRlbXMpLFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21lcklkOiByLmN1c3RvbWVySWQsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbkRhdGVUaW1lOiByLm9wZXJhdGlvbkRhdGVUaW1lLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25OdW1iZXI6IHIub3BlcmF0aW9uTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbDogci50b3RhbCxcbiAgICAgICAgICAgICAgICAgICAgcmVmdW5kRGF0ZTogci5yZWZ1bmREYXRlLFxuICAgICAgICAgICAgICAgICAgICByZWZ1bmQ6IHIucmVmdW5kXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVzdCBhcGlkYW4gZMO2bmVuIGNldmFwOlxcblwiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiS2l0YXAga2lyYWxhbWEgacWfbGVtaSBiYcWfYXLEsXlsYSBnZXLDp2VrbGXFn21pxZ90aXIuXCIpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRmnFn2luaXppIGtheWJldG5leWluaXouIEZpxZ8gbnVtYXJhbsSxejogXCIgKyByLm9wZXJhdGlvbk51bWJlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICAgICAgYWxlcnQoXCJLaXRhcCBraXJhbGFtYSBpxZ9sZW1pIHPEsXJhc8SxbmRhIGJpciBoYXRhIG9sdcWfdHUuIEzDvHRmZW4gdGVrcmFyIGRlbmV5aW5pei5cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyByZWZ1bmRSZW50TW9jayhyOiBSZW50KSB7XG4gICAgICAgIC8vUEFUQ0ggQmVsaXJsaSBiaXIga2F5bmFrdGFraSB2ZXJpbGVyaW4gYmlyIGvEsXNtxLFuxLFuIGRlxJ9pxZ90aXJpbG1lc2kgacOnaW4ga3VsbGFuxLFsYW4gbWV0b2R0dXIuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMucmVudEFwaSArIFwiL1wiICsgci5vcGVyYXRpb25OdW1iZXIsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICByZWZ1bmREYXRlOiByLnJlZnVuZERhdGUsXG4gICAgICAgICAgICAgICAgICAgIHJlZnVuZDogci5yZWZ1bmRcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gci5yZWZ1bmQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxuXG59IiwiaW1wb3J0IHsgc3RvY2tTZXJ2aWNlIH0gZnJvbSBcIi4uXCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rXCI7XG5pbXBvcnQgeyBTYWxlIH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlXCI7XG5pbXBvcnQgeyBPcmRlckJvb2tJdGVtcyB9IGZyb20gXCIuLi9kb21haW4vb3JkZXItYm9vay1pdGVtXCI7XG5pbXBvcnQgeyBTYWxlQ2FydCB9IGZyb20gXCIuLi9kb21haW4vc2FsZS1jYXJ0XCI7XG5cbmV4cG9ydCBjbGFzcyBTYWxlU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfc2FsZUxpc3Q6IEFycmF5PFNhbGU+O1xuICAgIHByaXZhdGUgX3NhbGVDYXJ0OiBTYWxlQ2FydDtcbiAgICBwdWJsaWMgc2FsZUFwaSA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL3NhbGVzJztcblxuICAgIGNvbnN0cnVjdG9yKHNhbGVMaXN0OiBBcnJheTxTYWxlPiwgc2FsZUNhcnQ6IFNhbGVDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3NhbGVMaXN0ID0gc2FsZUxpc3Q7XG4gICAgICAgIHRoaXMuX3NhbGVDYXJ0ID0gc2FsZUNhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHNhbGVMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8U2FsZT59XG4gICAgICovXG4gICAgcHVibGljIGdldCBzYWxlTGlzdCgpOiBBcnJheTxTYWxlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zYWxlTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc2FsZUxpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PFNhbGU+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgc2FsZUxpc3QodmFsdWU6IEFycmF5PFNhbGU+KSB7XG4gICAgICAgIHRoaXMuX3NhbGVMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHNhbGVDYXJ0XG4gICAgICogQHJldHVybiB7QXJyYXk8U2FsZUNhcnQ+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgc2FsZUNhcnQoKTogU2FsZUNhcnQge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2FsZUNhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNhbGVDYXJ0XG4gICAgICogQHBhcmFtIHtBcnJheTxTYWxlQ2FydD59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBzYWxlQ2FydCh2YWx1ZTogU2FsZUNhcnQpIHtcbiAgICAgICAgdGhpcy5fc2FsZUNhcnQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkU2FsZShzYWxlOiBTYWxlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2FsZUxpc3QucHVzaChzYWxlKTtcblxuICAgIH1cblxuICAgIGNhbGN1bGF0ZVRvdGFsKHNhbGU6IFNhbGUpOiBudW1iZXIge1xuICAgICAgICBsZXQgc3ViVG90YWwgPSAwLjA7XG5cbiAgICAgICAgZm9yIChsZXQgZW50cnkgb2Ygc2FsZS5vcmRlckJvb2tJdGVtcykge1xuICAgICAgICAgICAgc3ViVG90YWwgKz0gZW50cnkuYm9vay5ib29rU3BlY2lmaWNhdGlvbi5wcmljZSAqIGVudHJ5LnF1YW50aXR5O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1YlRvdGFsO1xuICAgIH1cblxuICAgIGdlbmVyYXRlU2FsZU51bWJlcihjdXN0b21lcklkOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBsZXQgcmVjZWlwdE51bWJlcjogc3RyaW5nID0gXCJTXCIgKyB0b2RheS5nZXREYXkoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0TW9udGgoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0SG91cnMoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRTZWNvbmRzKCkudG9TdHJpbmcoKSArIGN1c3RvbWVySWQudG9TdHJpbmcoKTtcblxuICAgICAgICByZXR1cm4gcmVjZWlwdE51bWJlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U2FsZShzYWxlTnVtYmVyOiBzdHJpbmcpOiBTYWxlIHtcbiAgICAgICAgbGV0IHNhbGUgPSB0aGlzLnNhbGVMaXN0LmZpbmQocyA9PiBzLm9wZXJhdGlvbk51bWJlciA9PT0gc2FsZU51bWJlcik7XG4gICAgICAgIHJldHVybiBzYWxlITtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlU2FsZShzYWxlOiBTYWxlKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuc2FsZUxpc3QuaW5kZXhPZihzYWxlKTtcbiAgICAgICAgdGhpcy5zYWxlTGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRCb29rVG9DYXJ0KGJvb2s6IEJvb2ssIHF1YW50aXR5OiBudW1iZXIsIGN1c3RvbWVySWQ6IG51bWJlcikge1xuXG4gICAgICAgIGlmICh0aGlzLnNhbGVDYXJ0Lm9yZGVyQm9va0l0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zYWxlQ2FydC5jdXN0b21lcklkID0gY3VzdG9tZXJJZDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNhbGVDYXJ0Lm9yZGVyQm9va0l0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNhbGVDYXJ0LmN1c3RvbWVySWQgIT09IGN1c3RvbWVySWQpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkZhcmtsxLEgbcO8xZ90ZXJpeWUga2l0YXAgc2F0xLFsbWF5YSDDp2FsxLHFn8SxbMSxeW9yLiBMw7x0ZmVuIHRlayBtw7zFn3RlcmkgacOnaW4gacWfbGVtIHlhcMSxbsSxelwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9yZGVyQm9va0l0ZW1zOiBPcmRlckJvb2tJdGVtcyA9IG5ldyBPcmRlckJvb2tJdGVtcyhib29rLCBxdWFudGl0eSk7XG4gICAgICAgIHRoaXMuc2FsZUNhcnQub3JkZXJCb29rSXRlbXMucHVzaChvcmRlckJvb2tJdGVtcyk7XG4gICAgICAgIHRoaXMudXBkYXRlU2FsZUNhcnQoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlU2FsZUNhcnQoKSB7XG4gICAgICAgIGNvbnN0IHNhbGVDYXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzYWxlQ2FydFwiKTtcbiAgICAgICAgY29uc3Qgc3ViVG90YWxTcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b3RhbFNhbGVBbW91bnRUbFwiKTtcblxuICAgICAgICBpZiAoc2FsZUNhcnQpIHtcblxuICAgICAgICAgICAgbGV0IHJvdywgY29sdW1uLCBzdWJUb3RhbDogbnVtYmVyID0gMDtcblxuICAgICAgICAgICAgd2hpbGUgKHNhbGVDYXJ0Lmxhc3RDaGlsZCAmJiBzYWxlQ2FydC5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgc2FsZUNhcnQucmVtb3ZlQ2hpbGQoc2FsZUNhcnQubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YlRvdGFsU3BhbiEudGV4dENvbnRlbnQgPSBcIlwiO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGg7IGluZGV4KyspIHtcblxuICAgICAgICAgICAgICAgIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgcm93LmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LXJvd1wiO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLnNhbGVDYXJ0Lm9yZGVyQm9va0l0ZW1zKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSB0aGlzLnNhbGVDYXJ0LmN1c3RvbWVySWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBpdGVtLmJvb2submFtZTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBpdGVtLnF1YW50aXR5LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gKGl0ZW0uYm9vay5ib29rU3BlY2lmaWNhdGlvbi5wcmljZSAqIGl0ZW0ucXVhbnRpdHkpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJvdyAmJiBzdWJUb3RhbFNwYW4pIHtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBzdWJUb3RhbCArPSB0LmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiB0LnF1YW50aXR5O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNhbGVDYXJ0LmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICAgICAgICAgc3ViVG90YWxTcGFuLnRleHRDb250ZW50ID0gc3ViVG90YWwudG9TdHJpbmcoKSArIFwiIFRMXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgY2FydFRvU2FsZSgpOiBhbnkge1xuICAgICAgICBsZXQgc2FsZUNhcnQ6IFNhbGVDYXJ0ID0gdGhpcy5zYWxlQ2FydDtcbiAgICAgICAgbGV0IHNhbGUgPSBuZXcgU2FsZSgpO1xuXG4gICAgICAgIHNhbGUub3JkZXJCb29rSXRlbXMgPSBzYWxlQ2FydC5vcmRlckJvb2tJdGVtcztcbiAgICAgICAgc2FsZS5jdXN0b21lcklkID0gc2FsZUNhcnQuY3VzdG9tZXJJZDtcbiAgICAgICAgc2FsZS5vcGVyYXRpb25OdW1iZXIgPSB0aGlzLmdlbmVyYXRlU2FsZU51bWJlcihzYWxlQ2FydC5jdXN0b21lcklkKTtcbiAgICAgICAgc2FsZS5vcGVyYXRpb25EYXRlVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHNhbGUudG90YWwgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsKHNhbGUpO1xuXG4gICAgICAgIGZvciAobGV0IHEgb2Ygc2FsZS5vcmRlckJvb2tJdGVtcykge1xuICAgICAgICAgICAgc3RvY2tTZXJ2aWNlLmluY3JlYXNlU3RvY2socS5ib29rLmlzYm4sIC0gcS5xdWFudGl0eSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzdWNjZXNzID0gdGhpcy5hZGRTYWxlTW9jayhzYWxlKTtcbiAgICAgICAgdGhpcy5zYWxlQ2FydCA9IG5ldyBTYWxlQ2FydCgpOyAvLyBzZXBldGkgYm/Fn2FsdFxuICAgICAgICB0aGlzLnVwZGF0ZVNhbGVDYXJ0KCk7XG4gICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIH1cblxuICAgIGFzeW5jIGFkZFNhbGVNb2NrKHM6IFNhbGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5zYWxlQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBvcmRlckJvb2tJdGVtczogQXJyYXkuZnJvbShzLm9yZGVyQm9va0l0ZW1zKSxcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJJZDogcy5jdXN0b21lcklkLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25EYXRlVGltZTogcy5vcGVyYXRpb25EYXRlVGltZSxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uTnVtYmVyOiBzLm9wZXJhdGlvbk51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6IHMudG90YWxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlc3QgYXBpZGFuIGTDtm5lbiBjZXZhcDpcXG5cIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBhbGVydChcIktpdGFwIHNhdMSxxZ8gacWfbGVtaSBiYcWfYXLEsXlsYSBnZXLDp2VrbGXFn21pxZ90aXIuXCIpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRmnFn2luaXppIGtheWJldG1leWluaXouIEZpxZ8gTnVtYXJhc8SxOiBcIiArIHMub3BlcmF0aW9uTnVtYmVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZXRTYWxlTW9jayhvcGVyYXRpb25OdW1iZXI6IFN0cmluZyk6IFByb21pc2U8U2FsZT4ge1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5zYWxlQXBpICsgXCIvXCIgKyBvcGVyYXRpb25OdW1iZXIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICBjb25zdCBnZXRSZXN1bHQgPSA8U2FsZT5KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3VsdCwgbnVsbCwgNCkpO1xuXG4gICAgICAgIHJldHVybiBuZXcgU2FsZShnZXRSZXN1bHQub3JkZXJCb29rSXRlbXMsIGdldFJlc3VsdC5jdXN0b21lcklkLFxuICAgICAgICAgICAgZ2V0UmVzdWx0Lm9wZXJhdGlvbkRhdGVUaW1lLCBnZXRSZXN1bHQub3BlcmF0aW9uTnVtYmVyLFxuICAgICAgICAgICAgZ2V0UmVzdWx0LnRvdGFsKTtcbiAgICB9XG59XG5cblxuIiwiaW1wb3J0IHsgU3RvY2sgfSBmcm9tIFwiLi4vZG9tYWluL3N0b2NrXCI7XG5cbmV4cG9ydCBjbGFzcyBTdG9ja1NlcnZpY2Uge1xuICAgIHByaXZhdGUgX3N0b2NrTGlzdDogQXJyYXk8U3RvY2s+O1xuICAgIHByaXZhdGUgc3RvY2tBcGk6IHN0cmluZyA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS9zdG9ja3NcIjtcblxuICAgIGNvbnN0cnVjdG9yKHN0b2NrTGlzdDogQXJyYXk8U3RvY2s+KSB7XG4gICAgICAgIHRoaXMuX3N0b2NrTGlzdCA9IHN0b2NrTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc3RvY2tMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8U3RvY2s+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgc3RvY2tMaXN0KCk6IEFycmF5PFN0b2NrPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdG9ja0xpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHN0b2NrTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8U3RvY2s+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgc3RvY2tMaXN0KHZhbHVlOiBBcnJheTxTdG9jaz4pIHtcbiAgICAgICAgdGhpcy5fc3RvY2tMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqICFhdHRlbnRpb24sICppbXBvcnRhbnQsID9xdWVzdGlvbiwgVE9ET1xuICAgICAqICEgw5ZuY2VsaWtsZSBpbmNyZWFzZVN0b2NrIGZvbmtzaXlvbnVuZGFuIGZhcmtsxLEgYmlyIGnFnyB5YXDEsXlvcixcbiAgICAgKiAqIEtpdGFwIGhlbsO8eiBla2xlbmRpa3RlbiBzb25yYSBoZW1lbiBnaXJpeW9yLFxuICAgICAqID8gS2l0YXAgaWxrIGRlZmEgZWtsZW5kaXlzZSBidSBmb25rc2l5b24gbXUgw6dhbMSxxZ9hY2FrID8gRVZFVC5cbiAgICAgKiBUT0RPIGluY3JlYXNlU3RvY2sgZm9ua3NpeW9udW51IGluY2VsZVxuICAgICAqIEVsaW1pemRlIGhpw6cgc3RvY2sga2F5ZMSxL25lc25lc2kgeW9rLCB5ZW5pIGthecSxdC9uZXNuZSBvbHXFn3R1cnV5b3J1elxuICAgICAqIFllbmkgZWtsZW5lbiBraXRhYmEgc3RvayBla2xlbWUgacWfbGVtaVxuICAgICAqIEBwYXJhbSBpc2JuICBzdG9rIGVrbGVuZWNlayBvbGFuIGtpdGFixLFuIGlzYm4gbnVtYXJhc8SxXG4gICAgICogQHBhcmFtIHNoZWxmTnVtYmVyIHN0b2sgZWtsZW5lY2VrIG9sYW4ga2l0YWLEsW4gcmFmIG51bWFyYXPEsVxuICAgICAqIEBwYXJhbSBxdWFudGl0eSBraXRhcGRhbiBrYcOnIGFkZXQgc3RvxJ9hIGVrbGVuZWNla1xuICAgICAqL1xuICAgIHB1YmxpYyBhZGRTdG9jayhpc2JuOiBzdHJpbmcsIHNoZWxmTnVtYmVyOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgbGV0IG5ld1N0b2NrID0gbmV3IFN0b2NrKGlzYm4sIHF1YW50aXR5LCBzaGVsZk51bWJlcik7XG4gICAgICAgICAgICB0aGlzLnN0b2NrTGlzdC5wdXNoKG5ld1N0b2NrKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBLaXRhcCB6YXRlbiBla2xpLCBoYWxpaGF6xLFyZGEgdmFyLCBkYWhhIHNvbnJhIHllbmkga2l0YXBsYXIgZ2VsZGksc3RvayBhcnTEsXJtYSBpxZ9sZW1pLFxuICAgICAqIEBwYXJhbSBpc2JuIHN0b2sgZWtsZW5lY2VrIG9sYW4ga2l0YWLEsW4gaXNibiBudW1hcmFzxLFcbiAgICAgKiBAcGFyYW0gcXVhbnRpdHkgc3RvayBla2xlbmVjZWsgb2xhbiBraXRhYsSxbiBhZGVkaVxuICAgICAqIEByZXR1cm5zIGnFn2xlbSBnZXLDp2VrbGXFn21lc2kgZHVydW11bmRhIHRydWUsIGRpxJ9lciBkdXJ1bWRhIGZhbHNlIGTDtm5lclxuICAgICAqL1xuICAgIHB1YmxpYyBpbmNyZWFzZVN0b2NrKGlzYm46IHN0cmluZywgcXVhbnRpdHk6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgc3RvY2sgPSB0aGlzLmdldFN0b2NrKGlzYm4pO1xuICAgICAgICBpZiAoc3RvY2spIHtcbiAgICAgICAgICAgIHN0b2NrLnF1YW50aXR5ID0gKHN0b2NrLnF1YW50aXR5ICsgcXVhbnRpdHkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzdG9jayBuZXNuZXNpbmkgZ2VyaSBkw7ZuZMO8csO8clxuICAgICAqIEBwYXJhbSBpc2JuIHN0b2NrIG5lc25lc2kgZ2V0aXJpbGVjZWsgb2xhbiBuZXNuZW5pbiBpc2JuIG5vc3UsXG4gICAgICogQHJldHVybnMgZGIgb2xhbiBzdG9jayBuZXNuZW5zaSBnZXJpIGTDtm5lciwgZGIgZGUgeW9rIGlzZSB0aHJvdyBpbGUgaGF0YSBmxLFybGF0xLFybMSxclxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTdG9jayhpc2JuOiBzdHJpbmcpIHtcbiAgICAgICAgbGV0IHN0b2NrID0gdGhpcy5zdG9ja0xpc3QuZmluZChzID0+IHMuaXNibiA9PT0gaXNibik7XG4gICAgICAgIGlmIChzdG9jaykge1xuICAgICAgICAgICAgcmV0dXJuIHN0b2NrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldFN0b2NrUXVhbnRpdHkoaXNibjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHM6IFN0b2NrID0gdGhpcy5nZXRTdG9jayhpc2JuKSE7XG5cbiAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICAgIHJldHVybiBzLnF1YW50aXR5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFxJ9lciBzdG9rIG5lc25lc2kgeW9rIGlzZSBzdG9rIG5lc25lc2ksIGJlbGlydGlsZW4gYWRldCBrYWRhciBzdG9rIGJpbGdpc2kgaWxlIGJlcmFiZXIgZWtsZW5peW9yLlxuICAgICAqIMSwxZ90ZSBidSBvbHXFn3R1cm1hL2NyZWF0ZSBpxZ9sZW1pIGJ1cmFkYSB5YXDEsWzEsXlvci5cbiAgICAgKiBAcGFyYW0gcyBpbmRleC50cyBkb3N5YXPEsW5kYW4gZ2VsZW4gc3RvayBuZXNuZXNpXG4gICAgICovXG4gICAgYXN5bmMgYWRkU3RvY2tNb2NrKHM6IFN0b2NrKTogUHJvbWlzZTxCb29sZWFuIHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuc3RvY2tBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGlzYm46IHMuaXNibixcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IHMucXVhbnRpdHksXG4gICAgICAgICAgICAgICAgICAgIHNoZWxmTnVtYmVyOiBzLnNoZWxmTnVtYmVyXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyArIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0b2sgZWtsZW5pcmtlbiBlxJ9lciBzdG9rIG5lc25lc2kgZGFoYSDDtm5jZWRlbiB2YXIgaXNlLCBzdG9rIGFydMSxcsSxbcSxbsSxIHB1dCBpbGUgeWFwYWNhxJ/EsXpcbiAgICAgKiBAcGFyYW0gcyBpbmRleC50cyBkb3N5YXPEsW5kYW4gZ2VsZW4gc3RvayBuZXNuZXNpXG4gICAgICovXG4gICAgYXN5bmMgaW5jcmVhc2VTdG9ja01vY2soczogU3RvY2spIHtcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnN0b2NrQXBpICsgXCIvXCIgKyBzLmlzYm4sIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaXNibjogcy5pc2JuLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogcy5xdWFudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgc2hlbGZOdW1iZXI6IHMuc2hlbGZOdW1iZXJcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInRoaXMiLCJfYm9va3MiLCJBcnJheSIsIl9zdG9ja3MiLCJfY3VzdG9tZXJzIiwiX3NhbGVzIiwiX3JlbnRzIiwiX2Jvb2tTcGVjaWZpY2F0aW9ucyIsIl9jYW5jZWxzIiwiX3NhbGVDYXJ0IiwiU2FsZUNhcnQiLCJfcmVudENhcnQiLCJSZW50Q2FydCIsImdldEJvb2tzTGlzdCIsImdldFN0b2Nrc0xpc3QiLCJnZXRDdXN0b21lcnNMaXN0IiwiZ2V0U2FsZXNMaXN0IiwiZ2V0UmVudHMiLCJnZXRCb29rU3BlY2lmaWNhdGlvbnMiLCJnZXRDYW5jYWxlZFNhbGVzIiwiZ2V0U2FsZUNhcnQiLCJnZXRSZW50Q2FydCIsInNldFNhbGVDYXJ0IiwidmFsdWUiLCJzZXRSZW50Q2FydCIsImlzYm4iLCJwcmljZSIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJfaXNibiIsIl9wcmljZSIsIl9zdGFydERhdGUiLCJfZW5kRGF0ZSIsImlkIiwiX2lkIiwibmFtZSIsImF1dGhvciIsInB1Ymxpc2hZZWFyIiwicGFnZXMiLCJib29rU3BlY2lmaWNhdGlvbiIsIl9uYW1lIiwiX2F1dGhvciIsIl9wdWJsaXNoWWVhciIsIl9wYWdlcyIsIl9ib29rU3BlY2lmaWNhdGlvbiIsImNhbmNlbFR5cGUiLCJyZWZ1bmQiLCJjYW5jZWxlZERhdGVUaW1lIiwiX2NhbmNlbFR5cGUiLCJfcmVmdW5kIiwiX2NhbmNlbGVkRGF0ZVRpbWUiLCJzdXJOYW1lIiwicGhvbmVOdW1iZXIiLCJfc3VyTmFtZSIsIl9waG9uZU51bWJlciIsImJvb2siLCJxdWFudGl0eSIsIl9ib29rIiwiX3F1YW50aXR5IiwidG9KU09OIiwib3JkZXJCb29rSXRlbXMiLCJSZW50IiwiU2FsZSIsInNhbGVCb29rSXRlbXMiLCJvcGVyYXRpb25EYXRlVGltZSIsImN1c3RvbWVySWQiLCJvcGVyYXRpb25OdW1iZXIiLCJ0b3RhbCIsInJlZnVuZERhdGUiLCJzdXBlciIsIl9yZWZ1bmREYXRlIiwiX29yZGVyQm9va0l0ZW1zIiwiX2N1c3RvbWVySWQiLCJfb3BlcmF0aW9uRGF0ZVRpbWUiLCJfb3BlcmF0aW9uTnVtYmVyIiwiX3RvdGFsIiwic2hlbGZOdW1iZXIiLCJfc2hlbGZOdW1iZXIiLCJzaG93QW5kSGlkZSIsImJ0bklkIiwiZWxlbWVudElkIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwic3R5bGUiLCJkaXNwbGF5IiwiZGIiLCJEYXRhQmFzZSIsImJvb2tTZXJ2aWNlIiwiQm9va1NlcnZpY2UiLCJjdXN0b21lclNlcnZpY2UiLCJDdXN0b21lclNlcnZpY2UiLCJjYW5jZWxTZXJ2aWNlIiwiQ2FuY2VsU2VydmljZSIsInJlbnRTZXJ2aWNlIiwiUmVudFNlcnZpY2UiLCJzYWxlU2VydmljZSIsIlNhbGVTZXJ2aWNlIiwic3RvY2tTZXJ2aWNlIiwiU3RvY2tTZXJ2aWNlIiwiY29uc29sZSIsImxvZyIsImFkZEN1c3RvbWVyIiwiQ3VzdG9tZXIiLCJhZGRTdG9jayIsImluaXRpYWxpemVEYXRhTW9jayIsImluaXRpbGlhemVEYXRhIiwiYWRkQm9va0Zvcm0iLCJvbnN1Ym1pdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJ0aXRsZSIsImdldCIsIkRhdGUiLCJtYXRjaCIsImJvb2tTcGVjIiwiQm9va1NwZWNpZmljYXRpb24iLCJCb29rIiwiYWRkQm9va01vY2siLCJhbGVydCIsInJlc2V0IiwiYWRkU3RvY2tGb3JtIiwicXVhbnR0aXkiLCJzdG9jayIsIlN0b2NrIiwiYm9va0xpc3QiLCJzb21lIiwiYiIsImFkZFN0b2NrTW9jayIsImFkZEN1c3RvbWVyRm9ybSIsInN1cm5hbWUiLCJjdXN0b21lciIsImFkZEN1c3RvbWVyTW9jayIsInNhbGVCb29rRm9ybSIsImdldEJvb2siLCJwYXJzZUludCIsImdldFN0b2NrIiwiYWRkQm9va1RvQ2FydCIsImVycm9yIiwic2FsZUNhcnQiLCJsZW5ndGgiLCJjYXJ0VG9TYWxlIiwibGlzdEJvb2tzIiwiY2FuY2VsU2FsZUZvcm0iLCJzYWxlTnVtYmVyIiwic2FsZSIsImdldFNhbGVNb2NrIiwiY2FuY2VsU2FsZSIsIkNhbmNlbCIsImNhbmNlbFNhbGVNb2NrIiwiY2FuY2VsUmVudEZvcm0iLCJzYmkiLCJwdXNoIiwiT3JkZXJCb29rSXRlbXMiLCJyRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwiYSIsInJlbnRMaXN0IiwicmVudE51bWJlciIsInJlbnQiLCJnZXRSZW50IiwiY2FuY2VsUmVudCIsImNhbmNlbFJlbnRNb2NrIiwicmVudEJvb2tGb3JtIiwicmVudENhcnQiLCJjYXJ0VG9SZW50IiwicmVmdW5kQm9va0Zvcm0iLCJjYWxjdWxhdGVSZWZ1bmRBbW91bnQiLCJyZWZ1bmRSZW50TW9jayIsImJvb2tBcGkiLCJfYm9va0xpc3QiLCJmaW5kIiwiYWRkQm9vayIsIm5ld0Jvb2siLCJFeGNlcHRpb24iLCJpc1ZhbGlkQm9vayIsImluY2x1ZGVzIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBY2NlcHQiLCJvayIsIkVycm9yIiwic3RhdHVzIiwicmVzdWx0IiwianNvbiIsImdldFJlc3VsdCIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImxpc3RCb29rc0RpdiIsInJvdyIsImNvbHVtbiIsImxhc3RDaGlsZCIsImNoaWxkcmVuIiwicmVtb3ZlQ2hpbGQiLCJmb3JFYWNoIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInRleHRDb250ZW50IiwidG9TdHJpbmciLCJhcHBlbmRDaGlsZCIsImdldFN0b2NrUXVhbnRpdHkiLCJib2R5IiwiY2FuY2VsbGVkTGlzdCIsImNhbmNlbFNhbGVBcGkiLCJjYW5jZWxSZW50QXBpIiwiX2NhbmNlbGxlZExpc3QiLCJjYWxjdWxhdGVEaWZmSG91cnMiLCJkMSIsImQyIiwiZGlmZk1pbGlzIiwiZ2V0VGltZSIsIk1hdGgiLCJmbG9vciIsImNhbmNlbCIsImNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQiLCJjYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kIiwiY3VzdG9tZXJMaXN0IiwiY3VzdG9tZXJBcGkiLCJfY3VzdG9tZXJMaXN0IiwibmV3Q3VzdG9tZXIiLCJyZW50QXBpIiwiX3JlbnRMaXN0IiwicmVmdW5kUGVyY2VudCIsImFkZFJlbnQiLCJjYWxjdWxhdGVUb3RhbCIsInN1YlRvdGFsIiwiaXRlbSIsImdlbmVyYXRlUmVudE51bWJlciIsInRvZGF5IiwiZ2V0RGF5IiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJjYWxjdWxhdGVSZWZ1bmQiLCJkaWZmIiwiZmluZSIsInMiLCJ1cGRhdGVSZW50Q2FydCIsInN1YlRvdGFsU3BhbiIsImluZGV4IiwidCIsImkiLCJpbmNyZWFzZVN0b2NrIiwiYWRkUmVudE1vY2siLCJyIiwiZnJvbSIsInNhbGVMaXN0Iiwic2FsZUFwaSIsIl9zYWxlTGlzdCIsImFkZFNhbGUiLCJlbnRyeSIsImdlbmVyYXRlU2FsZU51bWJlciIsImdldFNhbGUiLCJyZW1vdmVTYWxlIiwiaW5kZXhPZiIsInNwbGljZSIsInVwZGF0ZVNhbGVDYXJ0IiwicSIsInN1Y2Nlc3MiLCJhZGRTYWxlTW9jayIsInN0b2NrTGlzdCIsInN0b2NrQXBpIiwiX3N0b2NrTGlzdCIsIm5ld1N0b2NrIiwiaW5jcmVhc2VTdG9ja01vY2siLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiXSwic291cmNlUm9vdCI6IiJ9