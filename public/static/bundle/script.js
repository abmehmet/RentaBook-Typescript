(()=>{"use strict";var e={221:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataBase=void 0;const n=o(758),a=o(51);t.DataBase=class{constructor(){this._books=new Array,this._stocks=new Array,this._customers=new Array,this._sales=new Array,this._rents=new Array,this._bookSpecifications=new Array,this._cancels=new Array,this._saleCart=new a.SaleCart,this._rentCart=new n.RentCart}get getBooksList(){return this._books}get getStocksList(){return this._stocks}get getCustomersList(){return this._customers}get getSalesList(){return this._sales}get getRents(){return this._rents}get getBookSpecifications(){return this._bookSpecifications}get getCancaledSales(){return this._cancels}get getSaleCart(){return this._saleCart}get getRentCart(){return this._rentCart}set setSaleCart(e){this._saleCart=e}set setRentCart(e){this._rentCart=e}}},39:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BookSpecification=void 0,t.BookSpecification=class{constructor(e,t,o,n){this._isbn=e,this._price=t,this._startDate=o,this._endDate=n}get isbn(){return this._isbn}get price(){return this._price}get startDate(){return this._startDate}get endDate(){return this._endDate}set isbn(e){this._isbn=e}set price(e){this._price=e}set startDate(e){this._startDate=e}set endDate(e){this._endDate=e}}},934:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Book=void 0,t.Book=class{constructor(e,t,o,n,a,i){this._name=t,this._author=o,this._isbn=e,this._publishYear=n,this._pages=a,this._bookSpecification=i}get isbn(){return this._isbn}get name(){return this._name}get author(){return this._author}get publishYear(){return this._publishYear}get pages(){return this._pages}get bookSpecification(){return this._bookSpecification}set isbn(e){this._isbn=e}set name(e){this._name=e}set author(e){this._author=e}set publishYear(e){this._publishYear=e}set pages(e){this._pages=e}set bookSpecification(e){this._bookSpecification=e}}},378:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cancel=void 0,t.Cancel=class{constructor(e,t,o){this._cancelType=e,this._refund=t,this._canceledDateTime=o}get cancelType(){return this._cancelType}get refund(){return this._refund}get canceledDateTime(){return this._canceledDateTime}set cancelType(e){this._cancelType=e}set refund(e){this._refund=e}set canceledDateTime(e){this._canceledDateTime=e}}},916:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Customer=void 0,t.Customer=class{constructor(e,t,o){this._name=e,this._surName=t,this._phoneNumber=o}get name(){return this._name}get surName(){return this._surName}get phoneNumber(){return this._phoneNumber}set name(e){this._name=e}set surName(e){this._surName=e}set phoneNumber(e){this._phoneNumber=e}}},758:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RentCart=void 0,t.RentCart=class{constructor(){this.saleBookItems=new Array}}},961:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Rent=void 0;const n=o(354);class a extends n.Sale{constructor(e,t,o,n,a,i,r){super(e,t,o,n,a),this._refundDate=i,this._refund=r}get refundDate(){return this._refundDate}get refund(){return this._refund}set refundDate(e){this._refundDate=e}set refund(e){this._refund=e}}t.Rent=a},241:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SaleBookItems=void 0,t.SaleBookItems=class{constructor(e,t){this._book=e,this._quantity=t}get book(){return this._book}get quantity(){return this._quantity}set book(e){this._book=e}set quantity(e){this._quantity=e}toJSON(){return{book:this._book,quantity:this._quantity}}}},51:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SaleCart=void 0,t.SaleCart=class{constructor(){this.saleBookItems=new Array}}},354:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Sale=void 0,t.Sale=class{constructor(e,t,o,n,a){this._saleBookItems=e,this._operationDateTime=t,this._customerId=o,this._operationNumber=n,this._total=a}get saleBookItems(){return this._saleBookItems}set saleBookItems(e){this._saleBookItems=e}get operationDateTime(){return this._operationDateTime}get customerId(){return this._customerId}get operationNumber(){return this._operationNumber}get total(){return this._total}set operationDateTime(e){this._operationDateTime=e}set customerId(e){this._customerId=e}set operationNumber(e){this._operationNumber=e}set total(e){this._total=e}}},72:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Stock=void 0,t.Stock=class{constructor(e,t,o){this._isbn=e,this._quantity=t,this._shelfNumber=o}get isbn(){return this._isbn}get quantity(){return this._quantity}get shelfNumber(){return this._shelfNumber}set isbn(e){this._isbn=e}set quantity(e){this._quantity=e}set shelfNumber(e){this._shelfNumber=e}}},607:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.stockService=t.saleService=t.rentService=t.cancelService=t.customerService=t.bookService=void 0;const a=o(221),i=o(934),r=o(39),s=o(378),c=o(916),l=o(961),u=o(354),d=o(241),h=o(72),m=o(946),k=o(943),p=o(709),f=o(148),S=o(478),g=o(214);function b(e,t){const o=document.getElementById(t),n=document.getElementById(e);o&&n&&n.addEventListener("click",(()=>{"none"===o.style.display?o.style.display="block":o.style.display="none"}))}var y;y=new a.DataBase,t.bookService=new m.BookService(y.getBooksList,y.getBookSpecifications),t.customerService=new p.CustomerService(y.getCustomersList),t.cancelService=new k.CancelService(y.getCancaledSales),t.rentService=new f.RentService(y.getRents,y.getRentCart),t.saleService=new S.SaleService(y.getSalesList,y.getSaleCart),t.stockService=new g.StockService(y.getStocksList),console.log("Services intiliazed."),t.customerService.addCustomer(new c.Customer("","","")),t.customerService.addCustomer(new c.Customer("","","")),t.stockService.addStock("123-45","A45-52",10),t.stockService.addStock("123-46","A45-52",10),function(){n(this,void 0,void 0,(function*(){yield t.bookService.initializeDataMock()}))}(),b("addBookMenuItem","addBookSection"),b("showBooksMenuItem","listBooksSection"),b("addCustomerMenuItem","addCustomerSection"),b("addStockMenuItem","addStockSection"),b("saleBookMenuItem","saleBookSection"),b("rentBookMenuItem","rentBookSection"),b("cancelSaleMenuItem","cancelSaleSection"),b("cancelRentMenuItem","cancelRentSection"),b("refundBookMenuItem","refundBookSection"),b("rentNow","rentBookSection");const v=document.getElementById("add-book-form");null!=v&&(v.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(v),n=o.get("bookTitle"),a=o.get("bookAuthor"),s=o.get("bookIsbn"),c=o.get("bookPublishYear"),l=o.get("bookPages"),u=o.get("bookPrice"),d=new Date,h=new Date("Dec 31, 9999 23:59:59");n.match("");const m=new r.BookSpecification(s,u,d,h),k=new i.Book(s,n,a,c,l,m);return(yield t.bookService.addBookMock(k))?(alert(k.isbn+" numaralı kitap Ekleme İşlemi Başarı İle Tamamlanmıştır."),v.reset()):alert(k.isbn+" numaralı kitap Ekleme İşlemi Sırasında Bir Hata oluştu."),!1})));const _=document.getElementById("add-stock-form");_&&(_.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(_),n=o.get("bookIsbnForAddStock"),a=o.get("stockQuantity"),i=o.get("shelfNumber"),r=new h.Stock(n,a,i);return t.bookService.bookList.some((e=>e.isbn==n))?(yield t.stockService.addStockMock(r))&&alert(n+" isbn numaralı kitaptan, "+a+" kadar sisteme stok eklenmiştir."):alert("Stok eklenmeye çalışılan kitap, kayıtlı değildir. Lütfen önce kitap ekleyiniz"),_.reset(),!1})));const C=document.getElementById("add-customer-form");C&&(C.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(C),n=o.get("customerName"),a=o.get("customerSurname"),i=o.get("customerPhoneNumber"),r=new c.Customer(n,a,i);return(yield t.customerService.addCustomerMock(r))?(alert("Müşteri Ekleme İşlemi Başarı İle Tamamlanmıştır. "),C.reset()):alert("Müşteri Ekleme İşlemi Sırasında bir hata ile karşılıldı. "),!1})));const w=document.getElementById("sale-book-form");w&&(w.onsubmit=()=>{const e=new FormData(w),o=e.get("isbnForSale"),n=t.bookService.getBook(o),a=parseInt(e.get("customerIdForSale")),i=parseInt(e.get("quantityForSale")),r=t.stockService.getStock(o);try{return n?r?r.quantity>=i?t.saleService.addBookToCart(n,i,a):alert(i+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${o} numaralı kitabın stoğu mevcut değildir.`):alert(o+" numaralı kitap yoktur."),w.reset(),!1}catch(e){alert(e)}}),document.getElementById("btnSale").addEventListener("click",(()=>{0===t.saleService.saleCart.saleBookItems.length?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):t.saleService.cartToSale()?alert("Satış işlemi başarıyla gerçekleştirilmiştir."):alert("Satış işlemi sırasında hata oluştu, lütfen tekrar deneyiniz.")})),document.getElementById("showBooksMenuItem").addEventListener("click",(()=>{t.bookService.listBooks()}));const B=document.getElementById("cancel-sale-form");B&&(B.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();let o=new Array;o.push(new d.SaleBookItems(t.bookService.getBook("123-45"),3));let n=new u.Sale(o,new Date,1,"S021122163045",123);t.saleService.saleList.push(n);const a=new FormData(B).get("saleNumberforCancel");let i=t.saleService.getSale(a);if(i){let e=new s.Cancel(i,i.total,new Date);(yield t.cancelService.cancelSaleMock(e))?alert(i.operationNumber+" numaralı satış iptal edilmiştir."):alert(i.operationNumber+" numaralı satış iptal edilirken hata meydana geldi.")}else alert(a+" numaralı satış bulunamamıştır. Tekrar deneyiniz.")})));const I=document.getElementById("cancel-rent-form");I&&(I.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();let o=new Array;o.push(new d.SaleBookItems(t.bookService.getBook("123-45"),3));let n=new Date;n.setDate(n.getDate()+14);let a=new l.Rent(o,new Date,1,"R021122163045",123,n,200);t.rentService.rentList.push(a);const i=new FormData(I).get("rentNumberforCancel");let r=t.rentService.getRent(i);if(r){let e=new s.Cancel(r,r.total,new Date);(yield t.cancelService.cancelRentMock(e))?alert(r.operationNumber+" numaralı kiralama iptal edilmiştir."):alert(r.operationNumber+" numaralı kiralama iptal edilirken hata meydana geldi.")}else alert(i+" numaralı kiralma bulunamamıştır. Tekrar deneyiniz.")})));const D=document.getElementById("rent-book-form");D&&(D.onsubmit=()=>{const e=new FormData(D),o=e.get("isbnForRent"),n=t.bookService.getBook(o),a=parseInt(e.get("customerIdForRent")),i=parseInt(e.get("quantityForRent")),r=t.stockService.getStock(o);try{return n?r?r.quantity>=i?t.rentService.addBookToCart(n,i,a):alert(i+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${o} numaralı kitabın stoğu mevcut değildir.`):alert(o+" numaralı kitap yoktur."),D.reset(),!1}catch(e){alert(e)}}),document.getElementById("btnRent").addEventListener("click",(()=>{0===t.rentService.rentCart.saleBookItems.length?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):t.rentService.cartToRent()}));const N=document.getElementById("refund-book-form");N&&(N.onsubmit=e=>n(void 0,void 0,void 0,(function*(){let o=new Array;o.push(new d.SaleBookItems(t.bookService.getBook("123-45"),3));let n=new Date;n.setDate(n.getDate()+23);let a=new l.Rent(o,new Date,1,"R021122163045",123,n,0);a.refund=t.rentService.calculateRefundAmount(a),t.rentService.rentList.push(a),e.preventDefault();const i=new FormData(N).get("rentNumberforRefund");let r=t.rentService.getRent(i);if(r){let e=yield t.rentService.refundRentMock(r);e?(alert(r.operationNumber+" numaralı kiralama geri alınmıştır."),alert("Geri ödeme miktarı:"+e+" ₺ .")):alert(r.operationNumber+" numaralı kiralama iptal edilirken hata meydana geldi.")}else alert(i+" numaralı kiralama bulunamamıştır. Tekrar deneyiniz.")})))},946:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BookService=void 0;const a=o(607);t.BookService=class{constructor(e,t){this.bookApi="http://localhost:3002/api/v1/books",this._bookList=e,this._bookSpecification=t}get bookList(){return this._bookList}get bookSpecification(){return this._bookSpecification}set bookList(e){this._bookList=e}set bookSpecification(e){this._bookSpecification=e}getBook(e){return this.bookList.find((t=>t.isbn===e))}addBook(e){try{this.bookList.push(e),this.bookSpecification.push(e.bookSpecification)}catch(e){console.log("Kitap eklenirken bir hata meydana geldi.")}}isValidBook(e){const t=this.getBook(e);return this.bookList.includes(t)}initializeDataMock(){return n(this,void 0,void 0,(function*(){try{const e=yield fetch(this.bookApi,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const t=yield e.json(),o=JSON.parse(JSON.stringify(t,null,4));this.bookList=o,console.log(this.bookList)}catch(e){console.error(e)}}))}listBooks(){const e=document.getElementById("listBooks");if(e){let t,o;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);this.bookList.forEach((n=>{t=document.createElement("div"),t.className="row-list-book",o=document.createElement("div"),o.className="column-list-book",o.textContent=n.isbn.toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=n.name.toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=n.author.toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=a.stockService.getStockQuantity(n.isbn).toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=n.bookSpecification.price.toString()+" ₺",t.appendChild(o),e.appendChild(t)}))}}addBookMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.bookApi,{method:"POST",body:JSON.stringify({isbn:e.isbn,name:e.name,author:e.author,pages:e.pages,publishYear:e.publishYear,bookSpecification:{isbn:e.bookSpecification.isbn,price:e.bookSpecification.price,startDate:e.bookSpecification.startDate,endDate:e.bookSpecification.endDate}}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log("Rest servisinden dönen cevap =>"),console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},943:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelService=void 0,t.CancelService=class{constructor(e){this.cancelSaleApi="http://localhost:3002/api/cancelSale",this.cancelRentApi="http://localhost:3002/api/cancelRent",this._cancelledList=e}get cancelledList(){return this._cancelledList}set cancelledList(e){this._cancelledList=e}calculateDiffHours(e,t){let o=e.getTime()-t.getTime();return Math.floor(o/1e3/60/60)}cancelSale(e){let t=this.calculateCancelSaleRefund(e);e.refund=t,this.cancelledList.push(e)}calculateCancelSaleRefund(e){let t;return t=this.calculateDiffHours(e.canceledDateTime,e.cancelType.operationDateTime)>24?.75*e.cancelType.total:e.cancelType.total,t}cancelSaleMock(e){return o(this,void 0,void 0,(function*(){let t=this.calculateCancelSaleRefund(e);e.refund=t;try{const t=yield fetch(this.cancelSaleApi,{method:"POST",body:JSON.stringify({sale:e.cancelType,refund:e.refund,canceledDateTime:e.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}cancelRent(e){let t=this.calculateCancelRentRefund(e);e.refund=t,this.cancelledList.push(e)}calculateCancelRentRefund(e){let t;return t=this.calculateDiffHours(e.canceledDateTime,e.cancelType.operationDateTime)>24?.75*e.cancelType.total:e.cancelType.total,t}cancelRentMock(e){return o(this,void 0,void 0,(function*(){let t=this.calculateCancelRentRefund(e);e.refund=t;try{const t=yield fetch(this.cancelRentApi,{method:"POST",body:JSON.stringify({rent:e.cancelType,refund:e.refund,canceledDateTime:e.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},709:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerService=void 0,t.CustomerService=class{constructor(e){this.customerApi="http://localhost:3002/api/v1/customers",this._customerList=e}get customerList(){return this._customerList}set customerList(e){this._customerList=e}addCustomer(e){this.customerList.push(e)}addCustomerMock(e){return o(this,void 0,void 0,(function*(){try{const t=yield fetch(this.customerApi,{method:"POST",body:JSON.stringify({name:e.name,surName:e.surName,phoneNumber:e.phoneNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log("Rest servisinden dönen cevap =>"),console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},148:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RentService=void 0;const a=o(607),i=o(961),r=o(758),s=o(241);t.RentService=class{constructor(e,t){this.rentApi="http://localhost:3002/api/v1/rents",this._rentList=e,this.refundPercent=.75,this._rentCart=t}get rentList(){return this._rentList}set rentList(e){this._rentList=e}get rentCart(){return this._rentCart}set rentCart(e){this._rentCart=e}addRent(e){this.rentList.push(e)}calculateTotal(e){let t=0;for(let o of e.saleBookItems)t+=o.book.bookSpecification.price*o.quantity;return t}generateRentNumber(e){let t=new Date;return"R"+t.getDay().toString()+t.getMonth().toString()+t.getFullYear().toString()+t.getHours().toString()+t.getMinutes().toString()+t.getSeconds().toString()+e.toString()}calculateDiffHours(e,t){let o=e.getTime()-t.getTime();return Math.floor(o/1e3/60/60)}calculateRefund(e){e.refund=e.total*this.refundPercent}calculateRefundAmount(e){let t,o=this.calculateDiffHours(e.refundDate,e.operationDateTime)/24;if(o<=14)t=.75*e.total;else if(o<=24){let n=.75-.05*(o-14);t=e.total*n}else t=.25*e.total;return t}getRent(e){return this.rentList.find((t=>t.operationNumber===e))}addBookToCart(e,t,o){if(0===this.rentCart.saleBookItems.length)this.rentCart.customerId=o;else if(this.rentCart.saleBookItems.length>0&&this.rentCart.customerId!==o)return alert("Farklı müşteriye kitap kiralanmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;this.rentCart.saleBookItems.push(new s.SaleBookItems(e,t)),this.updateRentCart()}updateRentCart(){const e=document.getElementById("rentCart"),t=document.getElementById("totalRentAmountTl");if(e){let o,n,a=0;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.textContent="";for(let e=0;e<this.rentCart.saleBookItems.length;e++){o=document.createElement("div"),o.className="rent-cart-row";for(let e of this.rentCart.saleBookItems)n=document.createElement("div"),n.className="rent-cart-column",n.textContent=this.rentCart.customerId.toString(),o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=e.book.name,o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=e.quantity.toString(),o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=(e.book.bookSpecification.price*e.quantity).toString(),o.appendChild(n)}if(o&&t){for(let e of this.rentCart.saleBookItems)a+=e.book.bookSpecification.price*e.quantity;e.appendChild(o),t.textContent=a.toString()+" TL"}}}cartToRent(){let e=this.rentCart,t=new i.Rent;t.saleBookItems=e.saleBookItems,t.customerId=e.customerId,t.operationNumber=this.generateRentNumber(e.customerId),t.operationDateTime=new Date,t.total=this.calculateTotal(t);for(let e of t.saleBookItems)a.stockService.increaseStock(e.book.isbn,-e.quantity);this.rentCart=new r.RentCart,this.updateRentCart(),this.addRentMock(t)}addRentMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.rentApi,{method:"POST",body:JSON.stringify({saleBookItems:Array.from(e.saleBookItems),customerId:e.customerId,operationDateTime:e.operationDateTime,operationNumber:e.operationNumber,total:e.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),alert(e.message+" "+e.saleNumber),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}refundRentMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.rentApi+"/"+e.operationNumber,{method:"PATCH",body:JSON.stringify({refundDate:e.refundDate,refund:e.refund}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const o=yield t.json();return console.log(o),e.refund}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},478:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SaleService=void 0;const a=o(607),i=o(354),r=o(241),s=o(51);t.SaleService=class{constructor(e,t){this.saleApi="http://localhost:3002/api/v1/sales",this._saleList=e,this._saleCart=t}get saleList(){return this._saleList}set saleList(e){this._saleList=e}get saleCart(){return this._saleCart}set saleCart(e){this._saleCart=e}addSale(e){this.saleList.push(e)}calculateTotal(e){let t=0;for(let o of e.saleBookItems)t+=o.book.bookSpecification.price*o.quantity;return t}generateSaleNumber(e){let t=new Date;return"S"+t.getDay().toString()+t.getMonth().toString()+t.getFullYear().toString()+t.getHours().toString()+t.getMinutes().toString()+t.getSeconds().toString()+e.toString()}getSale(e){return this.saleList.find((t=>t.operationNumber===e))}removeSale(e){let t=this.saleList.indexOf(e);this.saleList.splice(t,1)}addBookToCart(e,t,o){if(0===this.saleCart.saleBookItems.length)this.saleCart.customerId=o;else if(this.saleCart.saleBookItems.length>0&&this.saleCart.customerId!==o)return alert("Farklı müşteriye kitap satılmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;let n=new r.SaleBookItems(e,t);this.saleCart.saleBookItems.push(n),this.updateSaleCart()}updateSaleCart(){const e=document.getElementById("saleCart"),t=document.getElementById("totalSaleAmountTl");if(e){let o,n,a=0;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.textContent="";for(let e=0;e<this.saleCart.saleBookItems.length;e++){o=document.createElement("div"),o.className="sale-cart-row";for(let e of this.saleCart.saleBookItems)n=document.createElement("div"),n.className="sale-cart-column",n.textContent=this.saleCart.customerId.toString(),o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=e.book.name,o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=e.quantity.toString(),o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=(e.book.bookSpecification.price*e.quantity).toString(),o.appendChild(n)}if(o&&t){for(let e of this.saleCart.saleBookItems)a+=e.book.bookSpecification.price*e.quantity;e.appendChild(o),t.textContent=a.toString()+" TL"}}}cartToSale(){let e=this.saleCart,t=new i.Sale;t.saleBookItems=e.saleBookItems,t.customerId=e.customerId,t.operationNumber=this.generateSaleNumber(e.customerId),t.operationDateTime=new Date,t.total=this.calculateTotal(t);for(let e of t.saleBookItems)a.stockService.increaseStock(e.book.isbn,-e.quantity);let o=this.addSaleMock(t);return this.saleCart=new s.SaleCart,this.updateSaleCart(),o}addSaleMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.saleApi,{method:"POST",body:JSON.stringify({saleBookItems:Array.from(e.saleBookItems),customerId:e.customerId,operationDateTime:e.operationDateTime,operationNumber:e.operationNumber,total:e.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(console.log(t),t.ok){const o=yield t.json();return console.log(o),alert("Fişinizi kaybetmeyiniz. Fiş Numarası: "+e.operationNumber),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},214:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StockService=void 0;const a=o(72);t.StockService=class{constructor(e){this.stockApi="http://localhost:3002/api/stocks",this._stockList=e}get stockList(){return this._stockList}set stockList(e){this._stockList=e}addStock(e,t,o){try{let n=new a.Stock(e,o,t);return this.stockList.push(n),!0}catch(e){return console.error(e),!1}}increaseStock(e,t){let o=this.getStock(e);return!!o&&(o.quantity=o.quantity+t,!0)}getStock(e){let t=this.stockList.find((t=>t.isbn===e));if(t)return t}getStockQuantity(e){let t=this.getStock(e);return t?t.quantity:0}addStockMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.stockApi,{method:"POST",body:JSON.stringify({isbn:e.isbn,quantity:e.quantity,shelfNumber:e.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu."+e)}}))}increaseStockMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.stockApi+"/"+e.isbn,{method:"PUT",body:JSON.stringify({isbn:e.isbn,quantity:e.quantity,shelfNumber:e.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!t.ok)throw new Error(`Hata oluştu, hata kodu: ${t.status} `);const o=yield t.json();console.log(o),console.log(t.status)}catch(e){console.log("Hata Oluştu.")}}))}}}},t={};!function o(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUhBRSxFQUFvQkwsR0FBVU0sS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0osR0FHcEVLLEVBQU9ELE9BQ2YsQ0NuQjBCSixDQUFvQixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZGIvZGF0YWJhc2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL2Jvb2stc3BlY2lmaWNhdGlvbi50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vYm9vay50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vY2FuY2VsLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9jdXN0b21lci50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vcmVudC1jYXJ0LnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9yZW50LnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9zYWxlLWJvb2staXRlbS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vc2FsZS1jYXJ0LnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9zYWxlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9zdG9jay50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL2Jvb2stc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL2NhbmNlbC1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2UvY3VzdG9tZXItc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL3JlbnQtc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL3NhbGUtc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL3N0b2NrLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rLXNwZWNpZmljYXRpb25cIjtcbmltcG9ydCB7IENhbmNlbCB9IGZyb20gXCIuLi9kb21haW4vY2FuY2VsXCI7XG5pbXBvcnQgeyBDdXN0b21lciB9IGZyb20gXCIuLi9kb21haW4vY3VzdG9tZXJcIjtcbmltcG9ydCB7IFJlbnQgfSBmcm9tIFwiLi4vZG9tYWluL3JlbnRcIjtcbmltcG9ydCB7IFJlbnRDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9yZW50LWNhcnRcIjtcbmltcG9ydCB7IFNhbGUgfSBmcm9tIFwiLi4vZG9tYWluL3NhbGVcIjtcbmltcG9ydCB7IFNhbGVDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlLWNhcnRcIjtcbmltcG9ydCB7IFN0b2NrIH0gZnJvbSBcIi4uL2RvbWFpbi9zdG9ja1wiO1xuXG5leHBvcnQgY2xhc3MgRGF0YUJhc2Uge1xuXG4gICAgIHByaXZhdGUgX2Jvb2tzOiBBcnJheTxCb29rPjsvL1xuICAgICBwcml2YXRlIF9zdG9ja3M6IEFycmF5PFN0b2NrPjtcbiAgICAgcHJpdmF0ZSBfY3VzdG9tZXJzOiBBcnJheTxDdXN0b21lcj47Ly9cbiAgICAgcHJpdmF0ZSBfc2FsZXM6IEFycmF5PFNhbGU+Oy8vXG4gICAgIHByaXZhdGUgX3JlbnRzOiBBcnJheTxSZW50PjtcbiAgICAgcHJpdmF0ZSBfYm9va1NwZWNpZmljYXRpb25zOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj47XG4gICAgIHByaXZhdGUgX2NhbmNlbHM6IEFycmF5PENhbmNlbD47Ly9cbiAgICAgcHJpdmF0ZSBfc2FsZUNhcnQ6IFNhbGVDYXJ0O1xuICAgICBwcml2YXRlIF9yZW50Q2FydDpSZW50Q2FydDtcblxuICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICB0aGlzLl9ib29rcyA9IG5ldyBBcnJheTxCb29rPigpO1xuICAgICAgICAgIHRoaXMuX3N0b2NrcyA9IG5ldyBBcnJheTxTdG9jaz4oKTtcbiAgICAgICAgICB0aGlzLl9jdXN0b21lcnMgPSBuZXcgQXJyYXk8Q3VzdG9tZXI+KCk7XG4gICAgICAgICAgdGhpcy5fc2FsZXMgPSBuZXcgQXJyYXk8U2FsZT4oKTtcbiAgICAgICAgICB0aGlzLl9yZW50cyA9IG5ldyBBcnJheTxSZW50PigpO1xuICAgICAgICAgIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9ucyA9IG5ldyBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4oKTtcbiAgICAgICAgICB0aGlzLl9jYW5jZWxzID0gbmV3IEFycmF5PENhbmNlbD4oKTtcbiAgICAgICAgICB0aGlzLl9zYWxlQ2FydCA9IG5ldyBTYWxlQ2FydCgpO1xuICAgICAgICAgIHRoaXMuX3JlbnRDYXJ0ID0gbmV3IFJlbnRDYXJ0O1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBib29rc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxCb29rPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Qm9va3NMaXN0KCk6IEFycmF5PEJvb2s+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fYm9va3M7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHN0b2Nrc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxTdG9jaz59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFN0b2Nrc0xpc3QoKTogQXJyYXk8U3RvY2s+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fc3RvY2tzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBjdXN0b21lcnNcbiAgICAgICogQHJldHVybiB7QXJyYXk8Q3VzdG9tZXI+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRDdXN0b21lcnNMaXN0KCk6IEFycmF5PEN1c3RvbWVyPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbWVycztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgc2FsZXNcbiAgICAgICogQHJldHVybiB7QXJyYXk8U2FsZT59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFNhbGVzTGlzdCgpOiBBcnJheTxTYWxlPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3NhbGVzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciByZW50c1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxSZW50Pn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0UmVudHMoKTogQXJyYXk8UmVudD4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9yZW50cztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgYm9va1NwZWNpZmljYXRpb25zXG4gICAgICAqIEByZXR1cm4ge0FycmF5PEJvb2tTcGVjaWZpY2F0aW9uPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Qm9va1NwZWNpZmljYXRpb25zKCk6IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9ucztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgY2FuY2VsU2FsZXNcbiAgICAgICogQHJldHVybiB7QXJyYXk8Q2FuY2VsU2FsZT59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldENhbmNhbGVkU2FsZXMoKTogQXJyYXk8Q2FuY2VsPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbHM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHNhbGVDYXJ0XG4gICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGVDYXJ0Pn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0U2FsZUNhcnQoKTogU2FsZUNhcnQge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9zYWxlQ2FydDtcbiAgICAgfVxuXG4gICAgICAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVudENhcnRcbiAgICAgKiBAcmV0dXJuIHtSZW50Q2FydH1cbiAgICAgKi9cblx0cHVibGljIGdldCBnZXRSZW50Q2FydCgpOiBSZW50Q2FydCB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlbnRDYXJ0O1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc2FsZUNhcnRcbiAgICAgKiBAcGFyYW0ge1NhbGVDYXJ0fSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHNldFNhbGVDYXJ0KHZhbHVlOiBTYWxlQ2FydCkge1xuXHRcdHRoaXMuX3NhbGVDYXJ0ID0gdmFsdWU7XG5cdH1cblxuXG5cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZW50Q2FydFxuICAgICAqIEBwYXJhbSB7UmVudENhcnR9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgc2V0UmVudENhcnQodmFsdWU6IFJlbnRDYXJ0KSB7XG5cdFx0dGhpcy5fcmVudENhcnQgPSB2YWx1ZTtcblx0fVxuICAgICBcblxuXG59XG4iLCJleHBvcnQgY2xhc3MgQm9va1NwZWNpZmljYXRpb24ge1xuICAgIHByaXZhdGUgX2lzYm46IHN0cmluZztcbiAgICBwcml2YXRlIF9wcmljZTogbnVtYmVyO1xuICAgIHByaXZhdGUgX3N0YXJ0RGF0ZTogRGF0ZTtcbiAgICBwcml2YXRlIF9lbmREYXRlOiBEYXRlO1xuXG4gICAgY29uc3RydWN0b3IoaXNibjogc3RyaW5nLCBwcmljZTogbnVtYmVyLCBzdGFydERhdGU6IERhdGUsIGVuZERhdGU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5faXNibiA9IGlzYm47XG4gICAgICAgIHRoaXMuX3ByaWNlID0gcHJpY2U7XG4gICAgICAgIHRoaXMuX3N0YXJ0RGF0ZSA9IHN0YXJ0RGF0ZTtcbiAgICAgICAgdGhpcy5fZW5kRGF0ZSA9IGVuZERhdGU7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgaXNiblxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBpc2JuKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2lzYm47XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBwcmljZVxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCBwcmljZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9wcmljZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHN0YXJ0RGF0ZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgc3RhcnREYXRlKCk6IERhdGUge1xuXHRcdHJldHVybiB0aGlzLl9zdGFydERhdGU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBlbmREYXRlXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cblx0cHVibGljIGdldCBlbmREYXRlKCk6IERhdGUge1xuXHRcdHJldHVybiB0aGlzLl9lbmREYXRlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgaXNiblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGlzYm4odmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX2lzYm4gPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHByaWNlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcHJpY2UodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3ByaWNlID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzdGFydERhdGVcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgc3RhcnREYXRlKHZhbHVlOiBEYXRlKSB7XG5cdFx0dGhpcy5fc3RhcnREYXRlID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBlbmREYXRlXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGVuZERhdGUodmFsdWU6IERhdGUpIHtcblx0XHR0aGlzLl9lbmREYXRlID0gdmFsdWU7XG5cdH1cbiAgICBcblxuICAgIFxufSIsImltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4vYm9vay1zcGVjaWZpY2F0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBCb29rIHtcbiAgcHJpdmF0ZSBfaXNibjogc3RyaW5nO1xuICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XG4gIHByaXZhdGUgX2F1dGhvcjogc3RyaW5nO1xuICBwcml2YXRlIF9wdWJsaXNoWWVhcjogc3RyaW5nO1xuICBwcml2YXRlIF9wYWdlczogbnVtYmVyO1xuICBwcml2YXRlIF9ib29rU3BlY2lmaWNhdGlvbjogQm9va1NwZWNpZmljYXRpb247XG5cbiAgY29uc3RydWN0b3IoaXNibjogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGF1dGhvcjogc3RyaW5nLCBwdWJsaXNoWWVhcjogc3RyaW5nLCBwYWdlczogbnVtYmVyLCBib29rU3BlY2lmaWNhdGlvbjogQm9va1NwZWNpZmljYXRpb24pIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9hdXRob3IgPSBhdXRob3I7XG4gICAgdGhpcy5faXNibiA9IGlzYm47XG4gICAgdGhpcy5fcHVibGlzaFllYXIgPSBwdWJsaXNoWWVhcjtcbiAgICB0aGlzLl9wYWdlcyA9IHBhZ2VzO1xuICAgIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9uID0gYm9va1NwZWNpZmljYXRpb247XG4gIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBpc2JuXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGlzYm4oKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5faXNibjtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG5hbWVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgbmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9uYW1lO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYXV0aG9yXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGF1dGhvcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9hdXRob3I7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBwdWJsaXNoWWVhclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBwdWJsaXNoWWVhcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9wdWJsaXNoWWVhcjtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHBhZ2VzXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IHBhZ2VzKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3BhZ2VzO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYm9va1NwZWNpZmljYXRpb25cbiAgICAgKiBAcmV0dXJuIHtCb29rU3BlY2lmaWNhdGlvbn1cbiAgICAgKi9cblx0cHVibGljIGdldCBib29rU3BlY2lmaWNhdGlvbigpOiBCb29rU3BlY2lmaWNhdGlvbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9uO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgaXNiblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGlzYm4odmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX2lzYm4gPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBuYW1lKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9uYW1lID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBhdXRob3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBhdXRob3IodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX2F1dGhvciA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcHVibGlzaFllYXJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBwdWJsaXNoWWVhcih2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fcHVibGlzaFllYXIgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHBhZ2VzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcGFnZXModmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3BhZ2VzID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rU3BlY2lmaWNhdGlvblxuICAgICAqIEBwYXJhbSB7Qm9va1NwZWNpZmljYXRpb259IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgYm9va1NwZWNpZmljYXRpb24odmFsdWU6IEJvb2tTcGVjaWZpY2F0aW9uKSB7XG5cdFx0dGhpcy5fYm9va1NwZWNpZmljYXRpb24gPSB2YWx1ZTtcblx0fVxufVxuIiwiaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuL3NhbGVcIjtcblxuZXhwb3J0IGNsYXNzIENhbmNlbCB7XG4gICAgcHJpdmF0ZSBfY2FuY2VsVHlwZTogU2FsZTtcbiAgICBwcml2YXRlIF9yZWZ1bmQ6IG51bWJlcjtcbiAgICBwcml2YXRlIF9jYW5jZWxlZERhdGVUaW1lOiBEYXRlO1xuXG4gICAgY29uc3RydWN0b3IoY2FuY2VsVHlwZTogU2FsZSwgcmVmdW5kOiBudW1iZXIsIGNhbmNlbGVkRGF0ZVRpbWU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsVHlwZSA9IGNhbmNlbFR5cGU7XG4gICAgICAgIHRoaXMuX3JlZnVuZCA9IHJlZnVuZDtcbiAgICAgICAgdGhpcy5fY2FuY2VsZWREYXRlVGltZSA9IGNhbmNlbGVkRGF0ZVRpbWU7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGNhbmNlbFR5cGVcbiAgICAgKiBAcmV0dXJuIHtTYWxlfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGNhbmNlbFR5cGUoKTogU2FsZSB7XG5cdFx0cmV0dXJuIHRoaXMuX2NhbmNlbFR5cGU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZWZ1bmRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcmVmdW5kKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlZnVuZDtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGNhbmNlbGVkRGF0ZVRpbWVcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGNhbmNlbGVkRGF0ZVRpbWUoKTogRGF0ZSB7XG5cdFx0cmV0dXJuIHRoaXMuX2NhbmNlbGVkRGF0ZVRpbWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBjYW5jZWxUeXBlXG4gICAgICogQHBhcmFtIHtTYWxlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGNhbmNlbFR5cGUodmFsdWU6IFNhbGUpIHtcblx0XHR0aGlzLl9jYW5jZWxUeXBlID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZWZ1bmRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCByZWZ1bmQodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3JlZnVuZCA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY2FuY2VsZWREYXRlVGltZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBjYW5jZWxlZERhdGVUaW1lKHZhbHVlOiBEYXRlKSB7XG5cdFx0dGhpcy5fY2FuY2VsZWREYXRlVGltZSA9IHZhbHVlO1xuXHR9XG4gICAgXG4gICAgXG5cbn0iLCJleHBvcnQgY2xhc3MgQ3VzdG9tZXIge1xuICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XG4gIHByaXZhdGUgX3N1ck5hbWU6IHN0cmluZztcbiAgcHJpdmF0ZSBfcGhvbmVOdW1iZXI6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHN1ck5hbWU6IHN0cmluZywgcGhvbmVOdW1iZXI6IHN0cmluZykge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX3N1ck5hbWUgPSBzdXJOYW1lO1xuICAgIHRoaXMuX3Bob25lTnVtYmVyID0gcGhvbmVOdW1iZXI7XG4gIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBuYW1lXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fbmFtZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHN1ck5hbWVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgc3VyTmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9zdXJOYW1lO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcGhvbmVOdW1iZXJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcGhvbmVOdW1iZXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fcGhvbmVOdW1iZXI7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgbmFtZSh2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fbmFtZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc3VyTmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHN1ck5hbWUodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX3N1ck5hbWUgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHBob25lTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcGhvbmVOdW1iZXIodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX3Bob25lTnVtYmVyID0gdmFsdWU7XG5cdH1cblxuXG59XG4iLCJpbXBvcnQgeyBMaXN0Rm9ybWF0IH0gZnJvbSBcInR5cGVzY3JpcHRcIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi9ib29rXCI7XG5pbXBvcnQgeyBTYWxlQm9va0l0ZW1zIH0gZnJvbSBcIi4vc2FsZS1ib29rLWl0ZW1cIjtcblxuZXhwb3J0IGNsYXNzIFJlbnRDYXJ0IHtcbiAgICBjdXN0b21lcklkITogbnVtYmVyO1xuICAgIHNhbGVCb29rSXRlbXM6IEFycmF5PFNhbGVCb29rSXRlbXM+O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2FsZUJvb2tJdGVtcyA9IG5ldyBBcnJheTxTYWxlQm9va0l0ZW1zPigpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuL3NhbGVcIjtcbmltcG9ydCB7IFNhbGVCb29rSXRlbXMgfSBmcm9tIFwiLi9zYWxlLWJvb2staXRlbVwiO1xuXG5leHBvcnQgY2xhc3MgUmVudCBleHRlbmRzIFNhbGUge1xuICAgIHByaXZhdGUgX3JlZnVuZERhdGU/OiBEYXRlO1xuICAgIHByaXZhdGUgX3JlZnVuZD86IG51bWJlcjtcblxuXG4gICAgY29uc3RydWN0b3Ioc2FsZUJvb2tJdGVtcz86IEFycmF5PFNhbGVCb29rSXRlbXM+LCBvcGVyYXRpb25EYXRlVGltZT86IERhdGUsIGN1c3RvbWVySWQ/OiBudW1iZXIsIG9wZXJhdGlvbk51bWJlcj86IHN0cmluZywgdG90YWw/OiBudW1iZXIsIHJlZnVuZERhdGU/OiBEYXRlLCByZWZ1bmQ/OiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoc2FsZUJvb2tJdGVtcywgb3BlcmF0aW9uRGF0ZVRpbWUsIGN1c3RvbWVySWQsIG9wZXJhdGlvbk51bWJlciwgdG90YWwpXG5cbiAgICAgICAgdGhpcy5fcmVmdW5kRGF0ZSA9IHJlZnVuZERhdGU7XG4gICAgICAgIHRoaXMuX3JlZnVuZCA9IHJlZnVuZDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZWZ1bmREYXRlXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHJlZnVuZERhdGUoKTogRGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZ1bmREYXRlITtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVmdW5kXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcmVmdW5kKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZ1bmQhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZWZ1bmREYXRlXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcmVmdW5kRGF0ZSh2YWx1ZTogRGF0ZSkge1xuICAgICAgICB0aGlzLl9yZWZ1bmREYXRlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlZnVuZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcmVmdW5kKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fcmVmdW5kID0gdmFsdWU7XG4gICAgfVxuXG5cblxuXG59IiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcblxuZXhwb3J0IGNsYXNzIFNhbGVCb29rSXRlbXMge1xuICAgIHByaXZhdGUgX2Jvb2s6IEJvb2s7XG4gICAgcHJpdmF0ZSBfcXVhbnRpdHk6IG51bWJlcjtcblxuXG4gICAgY29uc3RydWN0b3IoYm9vazogQm9vaywgcXVhbnRpdHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9ib29rID0gYm9vaztcbiAgICAgICAgdGhpcy5fcXVhbnRpdHkgPSBxdWFudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYm9va1xuICAgICAqIEByZXR1cm4ge0Jvb2t9XG4gICAgICovXG4gICAgcHVibGljIGdldCBib29rKCk6IEJvb2sge1xuICAgICAgICByZXR1cm4gdGhpcy5fYm9vaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcXVhbnRpdHlcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCBxdWFudGl0eSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVhbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGJvb2tcbiAgICAgKiBAcGFyYW0ge0Jvb2t9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBib29rKHZhbHVlOiBCb29rKSB7XG4gICAgICAgIHRoaXMuX2Jvb2sgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcXVhbnRpdHlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHF1YW50aXR5KHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fcXVhbnRpdHkgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm9vazogdGhpcy5fYm9vayxcbiAgICAgICAgICAgIHF1YW50aXR5OiB0aGlzLl9xdWFudGl0eSxcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuaW1wb3J0IHsgU2FsZUJvb2tJdGVtcyB9IGZyb20gXCIuL3NhbGUtYm9vay1pdGVtXCI7XG5cbmV4cG9ydCBjbGFzcyBTYWxlQ2FydCB7XG4gICAgY3VzdG9tZXJJZCE6IG51bWJlcjtcbiAgICBzYWxlQm9va0l0ZW1zOiBBcnJheTxTYWxlQm9va0l0ZW1zPjtcblxuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMuc2FsZUJvb2tJdGVtcyA9IG5ldyBBcnJheTxTYWxlQm9va0l0ZW1zPjtcblx0fVxuXG5cblxuXG5cbn0iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuaW1wb3J0IHsgU2FsZUJvb2tJdGVtcyB9IGZyb20gXCIuL3NhbGUtYm9vay1pdGVtXCI7XG5cbmV4cG9ydCBjbGFzcyBTYWxlIHtcbiAgICBwcml2YXRlIF9zYWxlQm9va0l0ZW1zPzogQXJyYXk8U2FsZUJvb2tJdGVtcz47XG4gICAgcHJpdmF0ZSBfY3VzdG9tZXJJZD86IG51bWJlcjtcbiAgICBwcml2YXRlIF9vcGVyYXRpb25EYXRlVGltZT86IERhdGU7XG4gICAgcHJpdmF0ZSBfb3BlcmF0aW9uTnVtYmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgX3RvdGFsPzogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3Ioc2FsZUJvb2tJdGVtcz86IEFycmF5PFNhbGVCb29rSXRlbXM+LCBvcGVyYXRpb25EYXRlVGltZT86IERhdGUsIGN1c3RvbWVySWQ/OiBudW1iZXIsIG9wZXJhdGlvbk51bWJlcj86IHN0cmluZywgdG90YWw/OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fc2FsZUJvb2tJdGVtcyA9IHNhbGVCb29rSXRlbXM7XG4gICAgICAgIHRoaXMuX29wZXJhdGlvbkRhdGVUaW1lID0gb3BlcmF0aW9uRGF0ZVRpbWU7XG4gICAgICAgIHRoaXMuX2N1c3RvbWVySWQgPSBjdXN0b21lcklkO1xuICAgICAgICB0aGlzLl9vcGVyYXRpb25OdW1iZXIgPSBvcGVyYXRpb25OdW1iZXI7XG4gICAgICAgIHRoaXMuX3RvdGFsID0gdG90YWw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHNhbGVCb29rSXRlbXNcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxTYWxlQm9va0l0ZW1zPn1cbiAgICAgKi9cblx0cHVibGljIGdldCBzYWxlQm9va0l0ZW1zKCk6IEFycmF5PFNhbGVCb29rSXRlbXM+IHtcblx0XHRyZXR1cm4gdGhpcy5fc2FsZUJvb2tJdGVtcyE7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzYWxlQm9va0l0ZW1zXG4gICAgICogQHBhcmFtIHtBcnJheTxTYWxlQm9va0l0ZW1zPn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBzYWxlQm9va0l0ZW1zKHZhbHVlOiBBcnJheTxTYWxlQm9va0l0ZW1zPikge1xuXHRcdHRoaXMuX3NhbGVCb29rSXRlbXMgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG9wZXJhdGlvbkRhdGVUaW1lXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IG9wZXJhdGlvbkRhdGVUaW1lKCk6IERhdGUge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3BlcmF0aW9uRGF0ZVRpbWUhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjdXN0b21lcklkXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgY3VzdG9tZXJJZCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tZXJJZCE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG9wZXJhdGlvbk51bWJlclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IG9wZXJhdGlvbk51bWJlcigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3BlcmF0aW9uTnVtYmVyITtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgdG90YWxcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCB0b3RhbCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fdG90YWwhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBvcGVyYXRpb25EYXRlVGltZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IG9wZXJhdGlvbkRhdGVUaW1lKHZhbHVlOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuX29wZXJhdGlvbkRhdGVUaW1lID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGN1c3RvbWVySWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGN1c3RvbWVySWQodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9jdXN0b21lcklkID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIG9wZXJhdGlvbk51bWJlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgb3BlcmF0aW9uTnVtYmVyKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fb3BlcmF0aW9uTnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHRvdGFsXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCB0b3RhbCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3RvdGFsID0gdmFsdWU7XG4gICAgfVxufSIsImV4cG9ydCBjbGFzcyBTdG9jayB7XG4gICAgcHJpdmF0ZSBfaXNibjogc3RyaW5nO1xuICAgIHByaXZhdGUgX3F1YW50aXR5OiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfc2hlbGZOdW1iZXI6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGlzYm4/OiBzdHJpbmcsIHF1YW50aXR5PzogbnVtYmVyLCBzaGVsZk51bWJlcj86IHN0cmluZykge1xuICAgICAgICB0aGlzLl9pc2JuID0gaXNibiE7XG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gcXVhbnRpdHkhO1xuICAgICAgICB0aGlzLl9zaGVsZk51bWJlciA9IHNoZWxmTnVtYmVyITtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGlzYm5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHVibGljIGdldCBpc2JuKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc2JuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBxdWFudGl0eVxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHF1YW50aXR5KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWFudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc2hlbGZOdW1iZXJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHVibGljIGdldCBzaGVsZk51bWJlcigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2hlbGZOdW1iZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlzYm5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGlzYm4odmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9pc2JuID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHF1YW50aXR5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBxdWFudGl0eSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNoZWxmTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBzaGVsZk51bWJlcih2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX3NoZWxmTnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG5cbn0iLCIvLyBleHBvcnQgTk9ERV9PUFRJT05TPS0tb3BlbnNzbC1sZWdhY3ktcHJvdmlkZXJcbmltcG9ydCB7IERhdGFCYXNlIH0gZnJvbSBcIi4vZGIvZGF0YWJhc2VcIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgQm9va1NwZWNpZmljYXRpb24gfSBmcm9tIFwiLi9kb21haW4vYm9vay1zcGVjaWZpY2F0aW9uXCI7XG5pbXBvcnQgeyBDYW5jZWwgfSBmcm9tIFwiLi9kb21haW4vY2FuY2VsXCI7XG5pbXBvcnQgeyBDdXN0b21lciB9IGZyb20gXCIuL2RvbWFpbi9jdXN0b21lclwiO1xuaW1wb3J0IHsgUmVudCB9IGZyb20gXCIuL2RvbWFpbi9yZW50XCI7XG5pbXBvcnQgeyBTYWxlIH0gZnJvbSBcIi4vZG9tYWluL3NhbGVcIjtcbmltcG9ydCB7IFNhbGVCb29rSXRlbXMgfSBmcm9tIFwiLi9kb21haW4vc2FsZS1ib29rLWl0ZW1cIjtcbmltcG9ydCB7IFN0b2NrIH0gZnJvbSBcIi4vZG9tYWluL3N0b2NrXCI7XG5pbXBvcnQgeyBCb29rU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvYm9vay1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBDYW5jZWxTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9jYW5jZWwtc2VydmljZVwiO1xuaW1wb3J0IHsgQ3VzdG9tZXJTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9jdXN0b21lci1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBSZW50U2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvcmVudC1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBTYWxlU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2Uvc2FsZS1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBTdG9ja1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL3N0b2NrLXNlcnZpY2VcIjtcblxuZXhwb3J0IGxldCBib29rU2VydmljZTogQm9va1NlcnZpY2U7XG5leHBvcnQgbGV0IGN1c3RvbWVyU2VydmljZTogQ3VzdG9tZXJTZXJ2aWNlO1xuZXhwb3J0IGxldCBjYW5jZWxTZXJ2aWNlOiBDYW5jZWxTZXJ2aWNlO1xuZXhwb3J0IGxldCByZW50U2VydmljZTogUmVudFNlcnZpY2U7XG5leHBvcnQgbGV0IHNhbGVTZXJ2aWNlOiBTYWxlU2VydmljZTtcbmV4cG9ydCBsZXQgc3RvY2tTZXJ2aWNlOiBTdG9ja1NlcnZpY2U7XG5cbmxldCBkYjogRGF0YUJhc2UgPSBuZXcgRGF0YUJhc2UoKTtcbmluaXRpbGlhemVTZXJ2aWNlcyhkYik7XG5pbml0aWxpYXplRGF0YSgpO1xuYWRkTGlzdGVuZXJGb3JNZW51SXRlbXMoKTtcblxuZnVuY3Rpb24gaW5pdGlsaWF6ZVNlcnZpY2VzKGRiOiBEYXRhQmFzZSkge1xuICBib29rU2VydmljZSA9IG5ldyBCb29rU2VydmljZShkYi5nZXRCb29rc0xpc3QsIGRiLmdldEJvb2tTcGVjaWZpY2F0aW9ucyk7XG4gIGN1c3RvbWVyU2VydmljZSA9IG5ldyBDdXN0b21lclNlcnZpY2UoZGIuZ2V0Q3VzdG9tZXJzTGlzdCk7XG4gIGNhbmNlbFNlcnZpY2UgPSBuZXcgQ2FuY2VsU2VydmljZShkYi5nZXRDYW5jYWxlZFNhbGVzKTtcbiAgcmVudFNlcnZpY2UgPSBuZXcgUmVudFNlcnZpY2UoZGIuZ2V0UmVudHMsIGRiLmdldFJlbnRDYXJ0KTtcbiAgc2FsZVNlcnZpY2UgPSBuZXcgU2FsZVNlcnZpY2UoZGIuZ2V0U2FsZXNMaXN0LCBkYi5nZXRTYWxlQ2FydCk7XG4gIHN0b2NrU2VydmljZSA9IG5ldyBTdG9ja1NlcnZpY2UoZGIuZ2V0U3RvY2tzTGlzdCk7XG4gIGNvbnNvbGUubG9nKFwiU2VydmljZXMgaW50aWxpYXplZC5cIik7XG5cbiAgY3VzdG9tZXJTZXJ2aWNlLmFkZEN1c3RvbWVyKG5ldyBDdXN0b21lcihcIlwiLCBcIlwiLCBcIlwiKSk7XG4gIGN1c3RvbWVyU2VydmljZS5hZGRDdXN0b21lcihuZXcgQ3VzdG9tZXIoXCJcIiwgXCJcIiwgXCJcIikpO1xuXG4gIHN0b2NrU2VydmljZS5hZGRTdG9jayhcIjEyMy00NVwiLCBcIkE0NS01MlwiLCAxMCk7XG4gIHN0b2NrU2VydmljZS5hZGRTdG9jayhcIjEyMy00NlwiLCBcIkE0NS01MlwiLCAxMCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluaXRpbGlhemVEYXRhKCkge1xuICBhd2FpdCBib29rU2VydmljZS5pbml0aWFsaXplRGF0YU1vY2soKTtcblxuXG59XG5cbmZ1bmN0aW9uIGFkZExpc3RlbmVyRm9yTWVudUl0ZW1zKCkge1xuICAvL3NhbGVTZXJ2aWNlLnVwZGF0ZVNhbGVDYXJ0KCk7XG4gIHNob3dBbmRIaWRlKFwiYWRkQm9va01lbnVJdGVtXCIsIFwiYWRkQm9va1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwic2hvd0Jvb2tzTWVudUl0ZW1cIiwgXCJsaXN0Qm9va3NTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImFkZEN1c3RvbWVyTWVudUl0ZW1cIiwgXCJhZGRDdXN0b21lclNlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwiYWRkU3RvY2tNZW51SXRlbVwiLCBcImFkZFN0b2NrU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJzYWxlQm9va01lbnVJdGVtXCIsIFwic2FsZUJvb2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcInJlbnRCb29rTWVudUl0ZW1cIiwgXCJyZW50Qm9va1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwiY2FuY2VsU2FsZU1lbnVJdGVtXCIsIFwiY2FuY2VsU2FsZVNlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwiY2FuY2VsUmVudE1lbnVJdGVtXCIsIFwiY2FuY2VsUmVudFNlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwicmVmdW5kQm9va01lbnVJdGVtXCIsIFwicmVmdW5kQm9va1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwicmVudE5vd1wiLCBcInJlbnRCb29rU2VjdGlvblwiKTtcblxufVxuXG5mdW5jdGlvbiBzaG93QW5kSGlkZShidG5JZDogc3RyaW5nLCBlbGVtZW50SWQ6IHN0cmluZykge1xuICAvL3NhbGVTZXJ2aWNlLnVwZGF0ZVNhbGVDYXJ0KCk7XG5cbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG4gIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ0bklkKTtcblxuICBpZiAoZWxlbWVudCAmJiBidG4pIHtcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmIChlbGVtZW50LnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IGFkZEJvb2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1ib29rLWZvcm1cIik7XG5pZiAoYWRkQm9va0Zvcm0gIT0gbnVsbCkge1xuICBhZGRCb29rRm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoYWRkQm9va0Zvcm0pO1xuXG4gICAgY29uc3QgdGl0bGUgPSBmb3JtRGF0YS5nZXQoXCJib29rVGl0bGVcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGF1dGhvciA9IGZvcm1EYXRhLmdldChcImJvb2tBdXRob3JcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJib29rSXNiblwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcHVibGlzaFllYXIgPSBmb3JtRGF0YS5nZXQoXCJib29rUHVibGlzaFllYXJcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IHBhZ2VzID0gZm9ybURhdGEuZ2V0KFwiYm9va1BhZ2VzXCIpIGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgIGNvbnN0IHByaWNlID0gZm9ybURhdGEuZ2V0KFwiYm9va1ByaWNlXCIpIGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKCdEZWMgMzEsIDk5OTkgMjM6NTk6NTknKTtcblxuICAgIHRpdGxlLm1hdGNoKFwiXCIpO1xuXG5cbiAgICBjb25zdCBib29rU3BlYyA9IG5ldyBCb29rU3BlY2lmaWNhdGlvbihpc2JuLCBwcmljZSwgc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICBjb25zdCBib29rID0gbmV3IEJvb2soaXNibiwgdGl0bGUsIGF1dGhvciwgcHVibGlzaFllYXIsIHBhZ2VzLCBib29rU3BlYyk7XG4gICAgLy9ib29rU2VydmljZS5hZGRCb29rKGJvb2spO1xuXG4gICAgbGV0IHN1Y2Nlc3MgPSBhd2FpdCBib29rU2VydmljZS5hZGRCb29rTW9jayhib29rKTtcbiAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgYWxlcnQoYm9vay5pc2JuICsgXCIgbnVtYXJhbMSxIGtpdGFwIEVrbGVtZSDEsMWfbGVtaSBCYcWfYXLEsSDEsGxlIFRhbWFtbGFubcSxxZ90xLFyLlwiKTtcbiAgICAgIGFkZEJvb2tGb3JtLnJlc2V0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KGJvb2suaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCBFa2xlbWUgxLDFn2xlbWkgU8SxcmFzxLFuZGEgQmlyIEhhdGEgb2x1xZ90dS5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlOyAvLyBwcmV2ZW50IHJlbG9hZFxuICB9O1xufVxuXG5jb25zdCBhZGRTdG9ja0Zvcm0gPSA8SFRNTEZvcm1FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1zdG9jay1mb3JtXCIpKTtcbmlmIChhZGRTdG9ja0Zvcm0pIHtcbiAgYWRkU3RvY2tGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoYWRkU3RvY2tGb3JtKTtcblxuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJib29rSXNibkZvckFkZFN0b2NrXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBxdWFudHRpeSA9IGZvcm1EYXRhLmdldChcInN0b2NrUXVhbnRpdHlcIikgYXMgdW5rbm93biBhcyBudW1iZXI7XG4gICAgY29uc3Qgc2hlbGZOdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJzaGVsZk51bWJlclwiKSBhcyBzdHJpbmc7XG5cbiAgICBjb25zdCBzdG9jayA9IG5ldyBTdG9jayhpc2JuLCBxdWFudHRpeSwgc2hlbGZOdW1iZXIpO1xuXG4gICAgY29uc3QgaXNDb250YWluc0Jvb2sgPSBib29rU2VydmljZS5ib29rTGlzdC5zb21lKGIgPT4gYi5pc2JuID09IGlzYm4pO1xuXG4gICAgaWYgKCFpc0NvbnRhaW5zQm9vaykge1xuICAgICAgYWxlcnQoXCJTdG9rIGVrbGVubWV5ZSDDp2FsxLHFn8SxbGFuIGtpdGFwLCBrYXnEsXRsxLEgZGXEn2lsZGlyLiBMw7x0ZmVuIMO2bmNlIGtpdGFwIGVrbGV5aW5pelwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsZXQgaXNPayA9IGF3YWl0IHN0b2NrU2VydmljZS5hZGRTdG9ja01vY2soc3RvY2spO1xuXG4gICAgICBpZiAoaXNPaykge1xuICAgICAgICBhbGVydChpc2JuICsgXCIgaXNibiBudW1hcmFsxLEga2l0YXB0YW4sIFwiICsgcXVhbnR0aXkgKyBcIiBrYWRhciBzaXN0ZW1lIHN0b2sgZWtsZW5tacWfdGlyLlwiKTtcbiAgICAgIH1cblxuXG4gICAgfVxuXG4gICAgYWRkU3RvY2tGb3JtLnJlc2V0KCk7XG4gICAgcmV0dXJuIGZhbHNlOyAvLyBwcmV2ZW50IHJlbG9hZFxuICB9O1xufVxuXG4vKipcbiAqIE3DvMWfdGVyaSBla2xlbWUgZm9ybXUgc3VibWl0IG9sYXnEsW7EsSBtb2NrIGN1c3RvbWVyU2VydmljZSBkZWtpIG1vY2sgc2VydmlzZSBiYcSfbGFkxLFtXG4gKi9cbmNvbnN0IGFkZEN1c3RvbWVyRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLWN1c3RvbWVyLWZvcm1cIikpO1xuaWYgKGFkZEN1c3RvbWVyRm9ybSkge1xuICBhZGRDdXN0b21lckZvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShhZGRDdXN0b21lckZvcm0pO1xuXG4gICAgY29uc3QgbmFtZSA9IGZvcm1EYXRhLmdldChcImN1c3RvbWVyTmFtZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3Qgc3VybmFtZSA9IGZvcm1EYXRhLmdldChcImN1c3RvbWVyU3VybmFtZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcGhvbmVOdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJjdXN0b21lclBob25lTnVtYmVyXCIpIGFzIHN0cmluZztcblxuICAgIGNvbnN0IGN1c3RvbWVyID0gbmV3IEN1c3RvbWVyKG5hbWUsIHN1cm5hbWUsIHBob25lTnVtYmVyKTtcbiAgICBsZXQgc3VjY2VzcyA9IGF3YWl0IGN1c3RvbWVyU2VydmljZS5hZGRDdXN0b21lck1vY2soY3VzdG9tZXIpO1xuXG4gICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgIGFsZXJ0KFwiTcO8xZ90ZXJpIEVrbGVtZSDEsMWfbGVtaSBCYcWfYXLEsSDEsGxlIFRhbWFtbGFubcSxxZ90xLFyLiBcIik7XG4gICAgICBhZGRDdXN0b21lckZvcm0ucmVzZXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQoXCJNw7zFn3RlcmkgRWtsZW1lIMSwxZ9sZW1pIFPEsXJhc8SxbmRhIGJpciBoYXRhIGlsZSBrYXLFn8SxbMSxbGTEsS4gXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTsgLy8gcHJldmVudCByZWxvYWRcbiAgfTtcbn1cblxuLyoqQnVyYWRhIG1vY2sgc2VydmlzaSB5b2sgw6fDvG5rw7wgYnVyYWRhIGtpdGFwIHNhdMSxxZ/EsSB5YXDEsWzEsXJrZW4sIGtpdGFwbGFyxLEgc2VwZXRlIGVrbGl5b3J1ei5cbiAqIFNlcGV0ZSBla2xlZGlrdGVuIHNvbnJhIGJ0blNhbGUgaWRsaSBidXRvbnVuIGNsaWNrIGV2ZW50aSwgbW9jayBzZXJ2aXNpIMOnYcSfxLFyxLF5b3JcbiAqL1xuY29uc3Qgc2FsZUJvb2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzYWxlLWJvb2stZm9ybVwiKSk7XG5pZiAoc2FsZUJvb2tGb3JtKSB7XG4gIHNhbGVCb29rRm9ybS5vbnN1Ym1pdCA9ICgpID0+IHtcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKHNhbGVCb29rRm9ybSk7XG5cbiAgICBjb25zdCBpc2JuID0gZm9ybURhdGEuZ2V0KFwiaXNibkZvclNhbGVcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGJvb2sgPSBib29rU2VydmljZS5nZXRCb29rKGlzYm4pO1xuICAgIGNvbnN0IGN1c3RvbWVySWQgPSBwYXJzZUludChmb3JtRGF0YS5nZXQoXCJjdXN0b21lcklkRm9yU2FsZVwiKSBhcyBzdHJpbmcpO1xuICAgIC8vaXNWYWxpZEN1c3RvbWVyIHJlc3Qgc2VydmlzdGVuIGTDtmVuZW4gdmVyaXllIGfDtnJlIMWfZWtpbGxlbmVjZWtcbiAgICBjb25zdCBpc1ZhbGlkQ3VzdG9tZXI6IGJvb2xlYW4gPSB0cnVlOyAvL2N1c3RvbWVyU2VydmljZS5pc1ZhbGlkQ3VzdG9tZXIoY3VzdG9tZXJJZCk7XG4gICAgY29uc3QgcXVhbnRpdHkgPSBwYXJzZUludChmb3JtRGF0YS5nZXQoXCJxdWFudGl0eUZvclNhbGVcIikgYXMgc3RyaW5nKTtcblxuICAgIGNvbnN0IHN0b2NrID0gc3RvY2tTZXJ2aWNlLmdldFN0b2NrKGlzYm4pITtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoYm9vaykge1xuICAgICAgICBpZiAoc3RvY2spIHtcbiAgICAgICAgICBpZiAoc3RvY2sucXVhbnRpdHkgPj0gcXVhbnRpdHkpIHtcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkQ3VzdG9tZXIpIHtcbiAgICAgICAgICAgICAgc2FsZVNlcnZpY2UuYWRkQm9va1RvQ2FydChib29rLCBxdWFudGl0eSwgY3VzdG9tZXJJZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhbGVydChjdXN0b21lcklkICsgXCIgbnVtYXJhbMSxIG3DvMWfdGVyaSBrYXnEsXRsxLEgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhbGVydChxdWFudGl0eSArIFwiIGthZGFyIGtpdGFwIGTDvGtrYW5kYSBtZXZjdXQgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxlcnQoYETDvGtrYW5kYSAke2lzYm59IG51bWFyYWzEsSBraXRhYsSxbiBzdG/En3UgbWV2Y3V0IGRlxJ9pbGRpci5gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQoaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCB5b2t0dXIuXCIpO1xuICAgICAgfVxuXG4gICAgICBzYWxlQm9va0Zvcm0ucmVzZXQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvcik7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogS2l0YXAgc2F0xLHFn8SxIGnDp2luIGnFn2xlbSB5YXDEsWzEsXJrZW4ga2l0YXBsYXIgc2VwZXRlIGVrbGVuaXlvci5cbiAqIEVrbGVtZSBpxZ9sZW1pIGJpdHRpa3RlbiBzb25yYSBzYXTEsW4gYWxtIGnDp2luIGJ1IGJ1dG9uYSB0xLFrbGFuZMSxxJ/EsW5kYSBzZXJ2aXNlIGdpZGlwIHNlcGV0dGVraSBraXRhcGxhcsSxbiBzYXTEscWfxLEgZ2Vyw6dla2xlxZ9peW9yXG4gKiBCdXJhZGEgZGnEn2VyIGJ1dG9ubGFyZGEgb2xkdcSfdSBnaWJpIGRpcmVrIG1vY2sgc2VydmlzaW5lIGJhxJ9sYW5tYWsgeWVyaW5lIHNlcnZpc2UgZ2l0bWVrIGR1cnVtdW5kYXnEsXouIFxuICogw4fDvG5rw7wgc2VydmlzdGUgU2FsZSBuZXNuZXNpbmkgb2x1xZ90dXJ1cCBtb2NrIHNlcnZpc2luZSBwYXJhbWV0cmUgb2xhcmFrIGdlw6dpeW9ydXouXG4gKi9cbmNvbnN0IGJ0blNhbGUgPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuU2FsZVwiKSk7XG5idG5TYWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGlmIChzYWxlU2VydmljZS5zYWxlQ2FydC5zYWxlQm9va0l0ZW1zLmxlbmd0aCA9PT0gMCkge1xuXG4gICAgYWxlcnQoXCJTZXBldHRlIMO8csO8biB5b2suIEzDvHRmZW4gw7ZuY2Ugw7xyw7xuIGVrbGV5aW5pelwiKTtcbiAgfSBlbHNlIHtcblxuICAgIGxldCBzdWNjZXNzID0gc2FsZVNlcnZpY2UuY2FydFRvU2FsZSgpO1xuICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICBhbGVydChcIlNhdMSxxZ8gacWfbGVtaSBiYcWfYXLEsXlsYSBnZXLDp2VrbGXFn3RpcmlsbWnFn3Rpci5cIik7XG4gICAgfWVsc2V7XG4gICAgICBhbGVydChcIlNhdMSxxZ8gacWfbGVtaSBzxLFyYXPEsW5kYSBoYXRhIG9sdcWfdHUsIGzDvHRmZW4gdGVrcmFyIGRlbmV5aW5pei5cIik7XG4gICAgfVxuICB9XG5cbn0pO1xuXG4vKipcbiAqIEtpdGFwbGFyxLEgbGlzdGVsZW1layBpw6dpbiB0xLFrbGFuxLFsYW4gYnV0b24gY2xpY2sgZXZlbnRpXG4gKi9cbmNvbnN0IGJ0blNob3dCb29rc01lbnVJdGVtID0gPEhUTUxFbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3dCb29rc01lbnVJdGVtXCIpKTtcbmJ0blNob3dCb29rc01lbnVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGJvb2tTZXJ2aWNlLmxpc3RCb29rcygpO1xufSlcblxuY29uc3QgY2FuY2VsU2FsZUZvcm0gPSA8SFRNTEZvcm1FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FuY2VsLXNhbGUtZm9ybVwiKTtcbmlmIChjYW5jZWxTYWxlRm9ybSkge1xuICBjYW5jZWxTYWxlRm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gxLBwdGFsIGnFn2xlbWluaW4gw6dhbMSxxZ9hYmlsbWVzaSBpw6dpbiDDtm5jZSBzYXTEscWfIHZlcmlzaSBla2xlZGltLCBzb25yYSBzYXTEscWfIGlwdGFsaSBpxZ9sZW1pIMOnYWzEscWfxLF5b3JcbiAgICBsZXQgc2JpID0gbmV3IEFycmF5PFNhbGVCb29rSXRlbXM+O1xuICAgIHNiaS5wdXNoKG5ldyBTYWxlQm9va0l0ZW1zKGJvb2tTZXJ2aWNlLmdldEJvb2soXCIxMjMtNDVcIiksIDMpKVxuXG4gICAgbGV0IGEgPSBuZXcgU2FsZShzYmksIG5ldyBEYXRlLCAxLCBcIlMwMjExMjIxNjMwNDVcIiwgMTIzKTtcbiAgICBzYWxlU2VydmljZS5zYWxlTGlzdC5wdXNoKGEpO1xuXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoY2FuY2VsU2FsZUZvcm0pO1xuICAgIGNvbnN0IHNhbGVOdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJzYWxlTnVtYmVyZm9yQ2FuY2VsXCIpIGFzIHN0cmluZztcblxuICAgIGxldCBzYWxlID0gc2FsZVNlcnZpY2UuZ2V0U2FsZShzYWxlTnVtYmVyKTtcblxuICAgIGlmIChzYWxlKSB7XG4gICAgICBsZXQgY2FuY2VsU2FsZTogQ2FuY2VsID0gbmV3IENhbmNlbChzYWxlLCBzYWxlLnRvdGFsLCBuZXcgRGF0ZSk7XG4gICAgICBsZXQgc3RhdGUgPSBhd2FpdCBjYW5jZWxTZXJ2aWNlLmNhbmNlbFNhbGVNb2NrKGNhbmNlbFNhbGUpO1xuXG4gICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgYWxlcnQoc2FsZS5vcGVyYXRpb25OdW1iZXIgKyBcIiBudW1hcmFsxLEgc2F0xLHFnyBpcHRhbCBlZGlsbWnFn3Rpci5cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChzYWxlLm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBzYXTEscWfIGlwdGFsIGVkaWxpcmtlbiBoYXRhIG1leWRhbmEgZ2VsZGkuXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydChzYWxlTnVtYmVyICsgXCIgbnVtYXJhbMSxIHNhdMSxxZ8gYnVsdW5hbWFtxLHFn3TEsXIuIFRla3JhciBkZW5leWluaXouXCIpO1xuICAgIH1cblxuICB9XG59XG5cbmNvbnN0IGNhbmNlbFJlbnRGb3JtID0gPEhUTUxGb3JtRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbmNlbC1yZW50LWZvcm1cIik7XG5pZiAoY2FuY2VsUmVudEZvcm0pIHtcbiAgY2FuY2VsUmVudEZvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIC8vIEtpcmFsYW1hIGlwdGFsaW5pbiDDp2FsxLHFn2FiaWxtZXNpIGnDp2luIMO2bmNlIHZlcmkgZWtsZWRpbSwgc29ucmEgaXB0YWwgacWfbGVtaSDDp2FsxLHFn8SxeW9yXG4gICAgbGV0IHNiaSA9IG5ldyBBcnJheTxTYWxlQm9va0l0ZW1zPjtcbiAgICBzYmkucHVzaChuZXcgU2FsZUJvb2tJdGVtcyhib29rU2VydmljZS5nZXRCb29rKFwiMTIzLTQ1XCIpLCAzKSk7XG5cbiAgICBsZXQgckRhdGUgPSBuZXcgRGF0ZTtcbiAgICByRGF0ZS5zZXREYXRlKHJEYXRlLmdldERhdGUoKSArIDE0KTtcblxuICAgIGxldCBhID0gbmV3IFJlbnQoc2JpLCBuZXcgRGF0ZSwgMSwgXCJSMDIxMTIyMTYzMDQ1XCIsIDEyMywgckRhdGUsIDIwMCk7XG4gICAgcmVudFNlcnZpY2UucmVudExpc3QucHVzaChhKTtcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGNhbmNlbFJlbnRGb3JtKTtcbiAgICBjb25zdCByZW50TnVtYmVyID0gZm9ybURhdGEuZ2V0KFwicmVudE51bWJlcmZvckNhbmNlbFwiKSBhcyBzdHJpbmc7XG5cbiAgICBsZXQgcmVudCA9IHJlbnRTZXJ2aWNlLmdldFJlbnQocmVudE51bWJlcik7XG5cbiAgICBpZiAocmVudCkge1xuICAgICAgbGV0IGNhbmNlbFJlbnQ6IENhbmNlbCA9IG5ldyBDYW5jZWwocmVudCwgcmVudC50b3RhbCwgbmV3IERhdGUpO1xuICAgICAgbGV0IHN0YXRlID0gYXdhaXQgY2FuY2VsU2VydmljZS5jYW5jZWxSZW50TW9jayhjYW5jZWxSZW50KTtcblxuICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgIGFsZXJ0KHJlbnQub3BlcmF0aW9uTnVtYmVyICsgXCIgbnVtYXJhbMSxIGtpcmFsYW1hIGlwdGFsIGVkaWxtacWfdGlyLlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KHJlbnQub3BlcmF0aW9uTnVtYmVyICsgXCIgbnVtYXJhbMSxIGtpcmFsYW1hIGlwdGFsIGVkaWxpcmtlbiBoYXRhIG1leWRhbmEgZ2VsZGkuXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydChyZW50TnVtYmVyICsgXCIgbnVtYXJhbMSxIGtpcmFsbWEgYnVsdW5hbWFtxLHFn3TEsXIuIFRla3JhciBkZW5leWluaXouXCIpO1xuICAgIH1cblxuICB9XG5cbn1cblxuLyoqQnVyYWRhIG1vY2sgc2VydmlzaSB5b2sgw6fDvG5rw7wgYnVyYWRhIGtpdGFwIGtpcmFsYW1hc8SxIHlhcMSxbMSxcmtlbiwga2l0YXBsYXLEsSBzZXBldGUgZWtsaXlvcnV6LlxuICogU2VwZXRlIGVrbGVkaWt0ZW4gc29ucmEgYnRuUmVudCBpZGxpIGJ1dG9udW4gY2xpY2sgZXZlbnRpLCBtb2NrIHNlcnZpc2kgw6dhxJ/EsXLEsXlvclxuICovXG5jb25zdCByZW50Qm9va0Zvcm0gPSA8SFRNTEZvcm1FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlbnQtYm9vay1mb3JtXCIpKTtcbmlmIChyZW50Qm9va0Zvcm0pIHtcbiAgcmVudEJvb2tGb3JtLm9uc3VibWl0ID0gKCkgPT4ge1xuXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEocmVudEJvb2tGb3JtKTtcblxuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJpc2JuRm9yUmVudFwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgYm9vayA9IGJvb2tTZXJ2aWNlLmdldEJvb2soaXNibik7XG4gICAgY29uc3QgY3VzdG9tZXJJZCA9IHBhcnNlSW50KGZvcm1EYXRhLmdldChcImN1c3RvbWVySWRGb3JSZW50XCIpIGFzIHN0cmluZyk7XG4gICAgLy9pc1ZhbGlkQ3VzdG9tZXIgcmVzdCBzZXJ2aXN0ZW4gZMO2ZW5lbiB2ZXJpeWUgZ8O2cmUgxZ9la2lsbGVuZWNla1xuICAgIGNvbnN0IGlzVmFsaWRDdXN0b21lcjogYm9vbGVhbiA9IHRydWU7IC8vY3VzdG9tZXJTZXJ2aWNlLmlzVmFsaWRDdXN0b21lcihjdXN0b21lcklkKTtcbiAgICBjb25zdCBxdWFudGl0eSA9IHBhcnNlSW50KGZvcm1EYXRhLmdldChcInF1YW50aXR5Rm9yUmVudFwiKSBhcyBzdHJpbmcpO1xuICAgIGNvbnN0IHN0b2NrID0gc3RvY2tTZXJ2aWNlLmdldFN0b2NrKGlzYm4pITtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoYm9vaykge1xuICAgICAgICBpZiAoc3RvY2spIHtcbiAgICAgICAgICBpZiAoc3RvY2sucXVhbnRpdHkgPj0gcXVhbnRpdHkpIHtcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkQ3VzdG9tZXIpIHtcbiAgICAgICAgICAgICAgcmVudFNlcnZpY2UuYWRkQm9va1RvQ2FydChib29rLCBxdWFudGl0eSwgY3VzdG9tZXJJZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhbGVydChjdXN0b21lcklkICsgXCIgbnVtYXJhbMSxIG3DvMWfdGVyaSBrYXnEsXRsxLEgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhbGVydChxdWFudGl0eSArIFwiIGthZGFyIGtpdGFwIGTDvGtrYW5kYSBtZXZjdXQgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxlcnQoYETDvGtrYW5kYSAke2lzYm59IG51bWFyYWzEsSBraXRhYsSxbiBzdG/En3UgbWV2Y3V0IGRlxJ9pbGRpci5gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQoaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCB5b2t0dXIuXCIpO1xuICAgICAgfVxuXG4gICAgICByZW50Qm9va0Zvcm0ucmVzZXQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvcik7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogS2l0YXAgc2F0xLHFn8SxIGnDp2luIGnFn2xlbSB5YXDEsWzEsXJrZW4ga2l0YXBsYXIgc2VwZXRlIGVrbGVuaXlvci5cbiAqIEVrbGVtZSBpxZ9sZW1pIGJpdHRpa3RlbiBzb25yYSBzYXTEsW4gYWxtIGlpw6dpbiBidSBidXRvbmEgdMSxa2xhbmTEscSfxLFuZGEgc2VydmlzZSBnaWRpcCBzZXBldHRla2kga2l0YXBsYXLEsW4gc2F0xLHFn8SxIGdlcsOnZWtsZcWfaXlvclxuICogQnVyYWRhIGRpxJ9lciBidXRvbmxhcmRhIG9sZHXEn3UgZ2liaSBkaXJlayBtb2NrIHNlcnZpc2luZSBiYcSfbGFubWFrIHllcmluZSBzZXJ2aXNlIGdpdG1layBkdXJ1bXVuZGF5xLF6LiBcbiAqIMOHw7xua8O8IHNlcnZpc3RlIFNhbGUgbmVzbmVzaW5pIG9sdcWfdHVydXAgbW9jayBzZXJ2aXNpbmUgcGFyYW1ldHJlIG9sYXJrIGdlw6dpeW9ydXouXG4gKi9cbmNvbnN0IGJ0blJlbnQgPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuUmVudFwiKSk7XG5idG5SZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGlmIChyZW50U2VydmljZS5yZW50Q2FydC5zYWxlQm9va0l0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgIGFsZXJ0KFwiU2VwZXR0ZSDDvHLDvG4geW9rLiBMw7x0ZmVuIMO2bmNlIMO8csO8biBla2xleWluaXpcIik7XG4gIH0gZWxzZSB7XG4gICAgcmVudFNlcnZpY2UuY2FydFRvUmVudCgpO1xuICB9XG5cbn0pO1xuXG5jb25zdCByZWZ1bmRCb29rRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVmdW5kLWJvb2stZm9ybVwiKSk7XG5pZiAocmVmdW5kQm9va0Zvcm0pIHtcbiAgcmVmdW5kQm9va0Zvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuXG4gICAgLy8gS2lyYWxhbWEgacWfbGVtaW5kZW4gZ2VyaSDDtmRlbWUgacWfbGVtaSDDp2FsxLHFn2FiaWxtZXNpIGnDp2luIMO2bmNlIGtpcmFsYW1hIHZlcmlzaSBla2xlZGltLCBcbiAgICAvLyBTb25yYSBnZXJpIMO2ZGVtZSBpxZ9sZW1pIMOnYWzEscWfxLF5b3JcbiAgICBsZXQgc2JpID0gbmV3IEFycmF5PFNhbGVCb29rSXRlbXM+O1xuICAgIHNiaS5wdXNoKG5ldyBTYWxlQm9va0l0ZW1zKGJvb2tTZXJ2aWNlLmdldEJvb2soXCIxMjMtNDVcIiksIDMpKVxuXG4gICAgbGV0IHJEYXRlID0gbmV3IERhdGU7XG4gICAgckRhdGUuc2V0RGF0ZShyRGF0ZS5nZXREYXRlKCkgKyAyMyk7XG5cbiAgICBsZXQgYSA9IG5ldyBSZW50KHNiaSwgbmV3IERhdGUsIDEsIFwiUjAyMTEyMjE2MzA0NVwiLCAxMjMsIHJEYXRlLCAwKTtcbiAgICBhLnJlZnVuZCA9IHJlbnRTZXJ2aWNlLmNhbGN1bGF0ZVJlZnVuZEFtb3VudChhKTtcblxuICAgIHJlbnRTZXJ2aWNlLnJlbnRMaXN0LnB1c2goYSk7XG4gICAgLy9WZXJpIEdpcmnFn2kgc29uIGFsYW7EsVxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKHJlZnVuZEJvb2tGb3JtKTtcbiAgICBjb25zdCByZW50TnVtYmVyID0gZm9ybURhdGEuZ2V0KFwicmVudE51bWJlcmZvclJlZnVuZFwiKSBhcyBzdHJpbmc7XG5cbiAgICBsZXQgcmVudCA9IHJlbnRTZXJ2aWNlLmdldFJlbnQocmVudE51bWJlcik7XG4gICAgaWYgKHJlbnQpIHtcblxuICAgICAgbGV0IHJlZnVuZCA9IGF3YWl0IHJlbnRTZXJ2aWNlLnJlZnVuZFJlbnRNb2NrKHJlbnQpO1xuXG4gICAgICBpZiAocmVmdW5kKSB7XG4gICAgICAgIGFsZXJ0KHJlbnQub3BlcmF0aW9uTnVtYmVyICsgXCIgbnVtYXJhbMSxIGtpcmFsYW1hIGdlcmkgYWzEsW5txLHFn3TEsXIuXCIpO1xuICAgICAgICBhbGVydChcIkdlcmkgw7ZkZW1lIG1pa3RhcsSxOlwiICsgcmVmdW5kICsgXCIg4oK6IC5cIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KHJlbnQub3BlcmF0aW9uTnVtYmVyICsgXCIgbnVtYXJhbMSxIGtpcmFsYW1hIGlwdGFsIGVkaWxpcmtlbiBoYXRhIG1leWRhbmEgZ2VsZGkuXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydChyZW50TnVtYmVyICsgXCIgbnVtYXJhbMSxIGtpcmFsYW1hIGJ1bHVuYW1hbcSxxZ90xLFyLiBUZWtyYXIgZGVuZXlpbml6LlwiKTtcbiAgICB9XG5cbiAgfTtcbn0iLCIvKipcbiAqIEBhdXRob3IgTWVobWV0IEUuIEFrY2FuIC0gMjEuMTAuMjJcbiAqL1xuaW1wb3J0IHsgc3RvY2tTZXJ2aWNlIH0gZnJvbSBcIi4uXCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rXCI7XG5pbXBvcnQgeyBCb29rU3BlY2lmaWNhdGlvbiB9IGZyb20gXCIuLi9kb21haW4vYm9vay1zcGVjaWZpY2F0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBCb29rU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfYm9va0xpc3Q6IEFycmF5PEJvb2s+O1xuICAgIHByaXZhdGUgX2Jvb2tTcGVjaWZpY2F0aW9uOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj47XG4gICAgYm9va0FwaTogc3RyaW5nID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvdjEvYm9va3MnO1xuXG4gICAgY29uc3RydWN0b3IoYm9va0xpc3Q6IEFycmF5PEJvb2s+LCBib29rU3BlY2lmaWNhdGlvbjogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+KSB7XG4gICAgICAgIHRoaXMuX2Jvb2tMaXN0ID0gYm9va0xpc3Q7XG4gICAgICAgIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9uID0gYm9va1NwZWNpZmljYXRpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGJvb2tMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8Qm9vaz59XG4gICAgICovXG4gICAgcHVibGljIGdldCBib29rTGlzdCgpOiBBcnJheTxCb29rPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ib29rTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYm9va1NwZWNpZmljYXRpb25cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxCb29rU3BlY2lmaWNhdGlvbj59XG4gICAgICovXG4gICAgcHVibGljIGdldCBib29rU3BlY2lmaWNhdGlvbigpOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYm9va1NwZWNpZmljYXRpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGJvb2tMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxCb29rPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGJvb2tMaXN0KHZhbHVlOiBBcnJheTxCb29rPikge1xuICAgICAgICB0aGlzLl9ib29rTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rU3BlY2lmaWNhdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXk8Qm9va1NwZWNpZmljYXRpb24+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgYm9va1NwZWNpZmljYXRpb24odmFsdWU6IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPikge1xuICAgICAgICB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbiA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHBhcmFtZXRyZSBvbGFyYWsgZ2VsZW4gaXNibiBiaWxnaXNpbmUgZ8O2cmUgaWxnaWxpIGtpdGFixLEgYnVsdXIuXG4gICAgICogQHBhcmFtIGlzYm4gQnVsdW5hY2FrIG9sYW4ga2l0YWLEsW4gaXNibiBudW1hcmFzxLFcbiAgICAgKiBAcmV0dXJucyBpc2JuIG51bWFyYXPEsW5hIGfDtnJlIGlsZ2lsaSBraXRhYsSxIEJvb2sgbmVzbmVzaSBvbGFyYWsgZ2VyaSBkw7ZuZMO8csO8clxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRCb29rKGlzYm46IHN0cmluZyk6IEJvb2sge1xuICAgICAgICAvL0J1cmFkYW4gbnVsbCBiaXIgZGXEn2VyIGRlIGTDtm5lYmlsZWNlxJ9pIGnDp2luIGhhdGEgdmVyaXlvclxuICAgICAgICAvL2FtYSBiaXogc29uZGFraSAhIG9wZXJhdMO2csO8IGlsZSBudWxsIGRlxJ9lciBkw7ZubWV5ZWNlayBkaXllIGdhcmFudGkgdmVyaXlvcnV6XG4gICAgICAgIHJldHVybiB0aGlzLmJvb2tMaXN0LmZpbmQoYiA9PiBiLmlzYm4gPT09IGlzYm4pITtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJhbWV0cmUgb2xhcmFrIGdlbGVuIEJvb2sgbmVzbmVzaW5pIGtpdGFwIG5lc25lc2luZSBla2xlclxuICAgICAqIEBwYXJhbSBuZXdCb29rIGVrbGVuZWNlayBvbGFuIGtpdGFwIG5lc25lc2lcbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkQm9vayhuZXdCb29rOiBCb29rKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmJvb2tMaXN0LnB1c2gobmV3Qm9vayk7XG4gICAgICAgICAgICB0aGlzLmJvb2tTcGVjaWZpY2F0aW9uLnB1c2gobmV3Qm9vay5ib29rU3BlY2lmaWNhdGlvbik7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJLaXRhcCBla2xlbmlya2VuIGJpciBoYXRhIG1leWRhbmEgZ2VsZGkuXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGlzVmFsaWRCb29rKGlzYm46IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBiID0gdGhpcy5nZXRCb29rKGlzYm4pO1xuICAgICAgICByZXR1cm4gdGhpcy5ib29rTGlzdC5pbmNsdWRlcyhiKVxuICAgIH1cblxuICAgIGFzeW5jIGluaXRpYWxpemVEYXRhTW9jaygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5ib29rQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICBjb25zdCBnZXRSZXN1bHQgPSA8Qm9va1tdPkpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCA0KSk7XG4gICAgICAgICAgICB0aGlzLmJvb2tMaXN0ID0gZ2V0UmVzdWx0IGFzIEFycmF5PEJvb2s+O1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5ib29rTGlzdCk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGxpc3RCb29rcygpIHtcbiAgICAgICAgY29uc3QgbGlzdEJvb2tzRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsaXN0Qm9va3NcIik7XG5cbiAgICAgICAgaWYgKGxpc3RCb29rc0Rpdikge1xuICAgICAgICAgICAgbGV0IHJvdywgY29sdW1uO1xuXG4gICAgICAgICAgICB3aGlsZSAobGlzdEJvb2tzRGl2Lmxhc3RDaGlsZCAmJiBsaXN0Qm9va3NEaXYuY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGxpc3RCb29rc0Rpdi5yZW1vdmVDaGlsZChsaXN0Qm9va3NEaXYubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5ib29rTGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgICAgIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgcm93LmNsYXNzTmFtZSA9IFwicm93LWxpc3QtYm9va1wiO1xuXG4gICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJjb2x1bW4tbGlzdC1ib29rXCI7XG4gICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gZWxlbWVudC5pc2JuLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbGVtZW50Lm5hbWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVsZW1lbnQuYXV0aG9yLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBzdG9ja1NlcnZpY2UuZ2V0U3RvY2tRdWFudGl0eShlbGVtZW50LmlzYm4pLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbGVtZW50LmJvb2tTcGVjaWZpY2F0aW9uLnByaWNlLnRvU3RyaW5nKCkgKyBcIiDigrpcIjtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGxpc3RCb29rc0Rpdi5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBhc3luYyBhZGRCb29rTW9jayhiOiBCb29rKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuYm9va0FwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaXNibjogYi5pc2JuLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBiLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcjogYi5hdXRob3IsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VzOiBiLnBhZ2VzLFxuICAgICAgICAgICAgICAgICAgICBwdWJsaXNoWWVhcjogYi5wdWJsaXNoWWVhcixcbiAgICAgICAgICAgICAgICAgICAgYm9va1NwZWNpZmljYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzYm46IGIuYm9va1NwZWNpZmljYXRpb24uaXNibixcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiBiLmJvb2tTcGVjaWZpY2F0aW9uLnByaWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnREYXRlOiBiLmJvb2tTcGVjaWZpY2F0aW9uLnN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZERhdGU6IGIuYm9va1NwZWNpZmljYXRpb24uZW5kRGF0ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVzdCBzZXJ2aXNpbmRlbiBkw7ZuZW4gY2V2YXAgPT5cIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgQ2FuY2VsIH0gZnJvbSBcIi4uL2RvbWFpbi9jYW5jZWxcIjtcblxuZXhwb3J0IGNsYXNzIENhbmNlbFNlcnZpY2Uge1xuICAgIHByaXZhdGUgX2NhbmNlbGxlZExpc3Q6IEFycmF5PENhbmNlbD47XG4gICAgY2FuY2VsU2FsZUFwaTogc3RyaW5nID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvY2FuY2VsU2FsZSc7XG4gICAgY2FuY2VsUmVudEFwaTogc3RyaW5nID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvY2FuY2VsUmVudCc7XG5cbiAgICBjb25zdHJ1Y3RvcihjYW5jZWxsZWRMaXN0OiBBcnJheTxDYW5jZWw+KSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbGxlZExpc3QgPSBjYW5jZWxsZWRMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjYW5jZWxsZWRTYWxlc0xpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxDYW5jZWxTYWxlPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGNhbmNlbGxlZExpc3QoKTogQXJyYXk8Q2FuY2VsPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW5jZWxsZWRMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBjYW5jZWxsZWRTYWxlc0xpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PENhbmNlbFNhbGU+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgY2FuY2VsbGVkTGlzdCh2YWx1ZTogQXJyYXk8Q2FuY2VsPikge1xuICAgICAgICB0aGlzLl9jYW5jZWxsZWRMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbGN1bGF0ZURpZmZIb3VycyhkMTogRGF0ZSwgZDI6IERhdGUpOiBudW1iZXIge1xuXG4gICAgICAgIGxldCBkaWZmTWlsaXM6IG51bWJlciA9IChkMS5nZXRUaW1lKCkgLSBkMi5nZXRUaW1lKCkpOy8vIG1pbGkgc2Vjb25kc1xuICAgICAgICBsZXQgZGlmZkhvdXIgPSBNYXRoLmZsb29yKGRpZmZNaWxpcyAvIDEwMDAgLyA2MCAvIDYwKTsgLy8gLzEwMDAgPiBzZWNvbmQgLyA2MCA+IG1pbiAvIDYwID4gaG91clxuICAgICAgICByZXR1cm4gZGlmZkhvdXI7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbmNlbFNhbGUoY2FuY2VsOiBDYW5jZWwpOiB2b2lkIHtcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyID0gdGhpcy5jYWxjdWxhdGVDYW5jZWxTYWxlUmVmdW5kKGNhbmNlbCk7XG4gICAgICAgIGNhbmNlbC5yZWZ1bmQgPSByZWZ1bmQ7XG4gICAgICAgIHRoaXMuY2FuY2VsbGVkTGlzdC5wdXNoKGNhbmNlbCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQoY2FuY2VsU2FsZTogQ2FuY2VsKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGRpZmYgPSB0aGlzLmNhbGN1bGF0ZURpZmZIb3VycyhjYW5jZWxTYWxlLmNhbmNlbGVkRGF0ZVRpbWUsIGNhbmNlbFNhbGUuY2FuY2VsVHlwZS5vcGVyYXRpb25EYXRlVGltZSlcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyO1xuXG4gICAgICAgIGlmIChkaWZmID4gMjQpIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IGNhbmNlbFNhbGUuY2FuY2VsVHlwZS50b3RhbCAqIDAuNzU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWZ1bmQgPSBjYW5jZWxTYWxlLmNhbmNlbFR5cGUudG90YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlZnVuZDtcbiAgICB9XG5cbiAgICBhc3luYyBjYW5jZWxTYWxlTW9jayhjYW5jZWxTYWxlOiBDYW5jZWwpIHtcblxuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXIgPSB0aGlzLmNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQoY2FuY2VsU2FsZSk7XG5cbiAgICAgICAgY2FuY2VsU2FsZS5yZWZ1bmQgPSByZWZ1bmQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5jYW5jZWxTYWxlQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBzYWxlOiBjYW5jZWxTYWxlLmNhbmNlbFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJlZnVuZDogY2FuY2VsU2FsZS5yZWZ1bmQsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGVkRGF0ZVRpbWU6IGNhbmNlbFNhbGUuY2FuY2VsZWREYXRlVGltZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL1RvZG8gc2FsZSBtb2NrIHNlcnZpc2luZSBkZWxldGUgaXN0ZcSfaSBhdMSxcCBvIHNhbGUgbmVzbmVzaW5pIHNpbGVjZWtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cblxuXG4gICAgfVxuXG4gICAgcHVibGljIGNhbmNlbFJlbnQoY2FuY2VsOiBDYW5jZWwpIHtcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyID0gdGhpcy5jYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kKGNhbmNlbCk7XG4gICAgICAgIGNhbmNlbC5yZWZ1bmQgPSByZWZ1bmQ7XG4gICAgICAgIHRoaXMuY2FuY2VsbGVkTGlzdC5wdXNoKGNhbmNlbCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbGN1bGF0ZUNhbmNlbFJlbnRSZWZ1bmQoY2FuY2VsUmVudDogQ2FuY2VsKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGRpZmYgPSB0aGlzLmNhbGN1bGF0ZURpZmZIb3VycyhjYW5jZWxSZW50LmNhbmNlbGVkRGF0ZVRpbWUsIGNhbmNlbFJlbnQuY2FuY2VsVHlwZS5vcGVyYXRpb25EYXRlVGltZSlcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyO1xuXG4gICAgICAgIGlmIChkaWZmID4gMjQpIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IGNhbmNlbFJlbnQuY2FuY2VsVHlwZS50b3RhbCAqIDAuNzU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWZ1bmQgPSBjYW5jZWxSZW50LmNhbmNlbFR5cGUudG90YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlZnVuZDtcbiAgICB9XG5cbiAgICBhc3luYyBjYW5jZWxSZW50TW9jayhjYW5jZWxSZW50OiBDYW5jZWwpe1xuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXIgPSB0aGlzLmNhbGN1bGF0ZUNhbmNlbFJlbnRSZWZ1bmQoY2FuY2VsUmVudCk7XG5cbiAgICAgICAgY2FuY2VsUmVudC5yZWZ1bmQgPSByZWZ1bmQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5jYW5jZWxSZW50QXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICByZW50OiBjYW5jZWxSZW50LmNhbmNlbFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJlZnVuZDogY2FuY2VsUmVudC5yZWZ1bmQsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGVkRGF0ZVRpbWU6IGNhbmNlbFJlbnQuY2FuY2VsZWREYXRlVGltZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL1RvZG8gc2FsZSBtb2NrIHNlcnZpc2luZSBkZWxldGUgaXN0ZcSfaSBhdMSxcCBvIHNhbGUgbmVzbmVzaW5pIHNpbGVjZWtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBDdXN0b21lciB9IGZyb20gXCIuLi9kb21haW4vY3VzdG9tZXJcIjtcblxuZXhwb3J0IGNsYXNzIEN1c3RvbWVyU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfY3VzdG9tZXJMaXN0OiBBcnJheTxDdXN0b21lcj47XG4gICAgcHJpdmF0ZSBjdXN0b21lckFwaTogc3RyaW5nID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL2N1c3RvbWVyc1wiO1xuXG4gICAgY29uc3RydWN0b3IoY3VzdG9tZXJMaXN0OiBBcnJheTxDdXN0b21lcj4pIHtcbiAgICAgICAgdGhpcy5fY3VzdG9tZXJMaXN0ID0gY3VzdG9tZXJMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjdXN0b21lckxpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxDdXN0b21lcj59XG4gICAgICovXG4gICAgcHVibGljIGdldCBjdXN0b21lckxpc3QoKTogQXJyYXk8Q3VzdG9tZXI+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbWVyTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY3VzdG9tZXJMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxDdXN0b21lcj59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBjdXN0b21lckxpc3QodmFsdWU6IEFycmF5PEN1c3RvbWVyPikge1xuICAgICAgICB0aGlzLl9jdXN0b21lckxpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQ3VzdG9tZXIobmV3Q3VzdG9tZXI6IEN1c3RvbWVyKSB7XG4gICAgICAgIHRoaXMuY3VzdG9tZXJMaXN0LnB1c2gobmV3Q3VzdG9tZXIpO1xuICAgIH1cblxuICAgIC8qXG4gICAgICAgIHB1YmxpYyBnZXRDdXN0b21lckluZm8oaWQ6IG51bWJlcik6IEN1c3RvbWVyIHwgdW5kZWZpbmVkIHtcbiAgICBcbiAgICAgICAgICAgIGxldCBjdXN0b21lciA9IHRoaXMuY3VzdG9tZXJMaXN0LmZpbmQoY3VzdG9tZXIgPT4gY3VzdG9tZXIuaWQgPT09IGlkKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChjdXN0b21lcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21lcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICBwdWJsaWMgaXNWYWxpZEN1c3RvbWVyKGN1c3RvbWVySWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIFxuICAgICAgICAgICAgbGV0IGlzVmFsaWQgPSB0aGlzLmN1c3RvbWVyTGlzdC5zb21lKGN1c3RvbWVyID0+IGN1c3RvbWVyLmlkID09PSBjdXN0b21lcklkKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICovXG5cbiAgICBhc3luYyBhZGRDdXN0b21lck1vY2sobmV3Q3VzdG9tZXI6IEN1c3RvbWVyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuY3VzdG9tZXJBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5ld0N1c3RvbWVyLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHN1ck5hbWU6IG5ld0N1c3RvbWVyLnN1ck5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBuZXdDdXN0b21lci5waG9uZU51bWJlclxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlc3Qgc2VydmlzaW5kZW4gZMO2bmVuIGNldmFwID0+XCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IHN0b2NrU2VydmljZSB9IGZyb20gXCIuLlwiO1xuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgUmVudCB9IGZyb20gXCIuLi9kb21haW4vcmVudFwiO1xuaW1wb3J0IHsgUmVudENhcnQgfSBmcm9tIFwiLi4vZG9tYWluL3JlbnQtY2FydFwiO1xuaW1wb3J0IHsgU2FsZUJvb2tJdGVtcyB9IGZyb20gXCIuLi9kb21haW4vc2FsZS1ib29rLWl0ZW1cIjtcblxuZXhwb3J0IGNsYXNzIFJlbnRTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9yZW50TGlzdDogQXJyYXk8UmVudD47XG5cbiAgICBwcml2YXRlIF9yZW50Q2FydDogUmVudENhcnQ7XG4gICAgcHVibGljIHJlbnRBcGkgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS92MS9yZW50cyc7XG4gICAgcmVmdW5kUGVyY2VudDogbnVtYmVyO1xuXG5cbiAgICBjb25zdHJ1Y3RvcihyZW50TGlzdDogQXJyYXk8UmVudD4sIHJlbnRDYXJ0OiBSZW50Q2FydCkge1xuICAgICAgICB0aGlzLl9yZW50TGlzdCA9IHJlbnRMaXN0O1xuICAgICAgICB0aGlzLnJlZnVuZFBlcmNlbnQgPSAwLjc1O1xuICAgICAgICB0aGlzLl9yZW50Q2FydCA9IHJlbnRDYXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZW50TGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PFJlbnQ+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcmVudExpc3QoKTogQXJyYXk8UmVudD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVudExpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlbnRMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxSZW50Pn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHJlbnRMaXN0KHZhbHVlOiBBcnJheTxSZW50Pikge1xuICAgICAgICB0aGlzLl9yZW50TGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZW50Q2FydFxuICAgICAqIEByZXR1cm4ge1JlbnRDYXJ0fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcmVudENhcnQoKTogUmVudENhcnQge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVudENhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlbnRDYXJ0XG4gICAgICogQHBhcmFtIHtSZW50Q2FydH0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHJlbnRDYXJ0KHZhbHVlOiBSZW50Q2FydCkge1xuICAgICAgICB0aGlzLl9yZW50Q2FydCA9IHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRSZW50KHJlbnQ6IFJlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW50TGlzdC5wdXNoKHJlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwbGFyxLFuIGhlcHNpIHNlcGV0ZSBla2xlbmRpa3RlbiBzb25yYSB0b3BsbWEgw7xjcmV0aSBoZXNhcGxhdWFuIGZvbmtzaXlvblxuICAgICAqIEBwYXJhbSByZW50IEtpdGFwbGFyxLFuIGxpc3Rlc2luaW4gYnVsdW5kdcSfdSBuZXNuZVxuICAgICAqIEByZXR1cm5zIFRvcGxhbSDDvGNyZXRcbiAgICAgKi9cbiAgICBwdWJsaWMgY2FsY3VsYXRlVG90YWwocmVudDogUmVudCk6IG51bWJlciB7XG4gICAgICAgIGxldCBzdWJUb3RhbDogbnVtYmVyID0gMDtcblxuICAgICAgICAvL2l0IGNhbiBiZSA9PiBsZXQgZW50cnkgb2YgcmVudC5ib29rQW5kUXVhbnRpdHlNYXAuZW50cmllcygpXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgcmVudC5zYWxlQm9va0l0ZW1zKSB7XG4gICAgICAgICAgICBzdWJUb3RhbCArPSBpdGVtLmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiBpdGVtLnF1YW50aXR5XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3ViVG90YWw7XG4gICAgfVxuXG4gICAgLy8gUjA1MTAyMjE0NTUwOSA9PiBkb21haW4uUmVudCAwNS4xMC4yMDIyIDE0OjU1LjA5XG4gICAgZ2VuZXJhdGVSZW50TnVtYmVyKGN1c3RvbWVySWQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGxldCByZWNlaXB0TnVtYmVyOiBzdHJpbmcgPSBcIlJcIiArIHRvZGF5LmdldERheSgpLnRvU3RyaW5nKCkgKyBcbiAgICAgICAgdG9kYXkuZ2V0TW9udGgoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgXG4gICAgICAgIHRvZGF5LmdldEhvdXJzKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldE1pbnV0ZXMoKS50b1N0cmluZygpICsgXG4gICAgICAgIHRvZGF5LmdldFNlY29uZHMoKS50b1N0cmluZygpICsgY3VzdG9tZXJJZC50b1N0cmluZygpO1xuXG4gICAgICAgIHJldHVybiByZWNlaXB0TnVtYmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBkMSBLaXRhcGxhxLFuIGtpcmFsxLFrIG9sYXJhayBhbMSxbmTEscSfxLEgdGFyaWhcbiAgICAgKiBAcGFyYW0gZDIgS2l0YXBsYXLEsW4gZ2VyaSBnZXRpcmlsZGnEn2kgdGFyaWhcbiAgICAgKiBAcmV0dXJucyDEsGtpIHRhcmloIGFyYXPEsW5kYWtpIGZhcmsgKHNhYXQgb2xhcmFrKVxuICAgICAqL1xuICAgIHB1YmxpYyBjYWxjdWxhdGVEaWZmSG91cnMoZDE6IERhdGUsIGQyOiBEYXRlKTogbnVtYmVyIHtcblxuICAgICAgICBsZXQgZGlmZk1pbGlzOiBudW1iZXIgPSAoZDEuZ2V0VGltZSgpIC0gZDIuZ2V0VGltZSgpKTsvLyBtaWxpIHNlY29uZHNcbiAgICAgICAgbGV0IGRpZmZIb3VyID0gTWF0aC5mbG9vcihkaWZmTWlsaXMgLyAxMDAwIC8gNjAgLyA2MCk7IC8vIC8xMDAwID4gc2Vjb25kIC8gNjAgPiBtaW4gLyA2MCA+IGhvdXJcbiAgICAgICAgcmV0dXJuIGRpZmZIb3VyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwIGlsayBraXJhbGFuZMSxxJ/EsSBhbmRhLCB6YW1hbsSxbmRhIGdldGlyaWxkacSfaSBnaWJpIGTDvMWfw7xuw7xsZXJlayB2ZXJpbGVjZWsgb2xhbiB2YXJzYXnEsWxhbiBnZXJpIMO2ZGVtZSBtaWt0YXLEsVxuICAgICAqIEBwYXJhbSByZW50IEhlc2FwbGFuYWNhayBvbGFuIGdlcmkgw7ZkZW1lIG1pa3RhcsSxbsSxbiBpw6dpbmRlIGJ1bHVuZHXEn3UgbmVzbmVcbiAgICAgKi9cbiAgICBwdWJsaWMgY2FsY3VsYXRlUmVmdW5kKHJlbnQ6IFJlbnQpOiB2b2lkIHtcbiAgICAgICAgcmVudC5yZWZ1bmQgPSByZW50LnRvdGFsICogdGhpcy5yZWZ1bmRQZXJjZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwIGtpcmFsYW5kxLEsIG9rdW5kdSB2ZSBnZXJpIGdldGlyaWxkacSfaSB6YW1hbiBuZSBrYWRhciBnZXJpIMO2ZGVtZSB2ZXJpbGVjZcSfaW5pIGhlc2FwbGFyXG4gICAgICogQHBhcmFtIHJlbnQgSGVzYXBsYW5hY2FrIG9sYW4gZ2VyaSDDtmRlbWUgbWlrdGFyxLFuxLFuIGnDp2luZGUgYnVsdW5kdcSfdSBuZXNuZVxuICAgICAqIEByZXR1cm5zIEdlcmkgw7ZkZW1lIG1pa3RhcsSxXG4gICAgICovXG4gICAgcHVibGljIGNhbGN1bGF0ZVJlZnVuZEFtb3VudChyZW50OiBSZW50KTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGRpZmYgPSB0aGlzLmNhbGN1bGF0ZURpZmZIb3VycyhyZW50LnJlZnVuZERhdGUsIHJlbnQub3BlcmF0aW9uRGF0ZVRpbWUpIC8gMjQ7XG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlcjtcblxuICAgICAgICBpZiAoZGlmZiA8PSAxNCkge1xuICAgICAgICAgICAgcmVmdW5kID0gcmVudC50b3RhbCAqIDAuNzU7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlmZiA8PSAyNCkge1xuICAgICAgICAgICAgbGV0IGZpbmUgPSAoMC43NSAtICgoZGlmZiAtIDE0KSAqIDAuMDUpKTtcbiAgICAgICAgICAgIHJlZnVuZCA9IHJlbnQudG90YWwgKiBmaW5lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVmdW5kID0gcmVudC50b3RhbCAqIDAuMjU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVmdW5kO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSZW50KHJlbnROdW1iZXI6IHN0cmluZyk6IFJlbnQge1xuICAgICAgICBsZXQgcmVudCA9IHRoaXMucmVudExpc3QuZmluZChzID0+IHMub3BlcmF0aW9uTnVtYmVyID09PSByZW50TnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHJlbnQhO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRCb29rVG9DYXJ0KGJvb2s6IEJvb2ssIHF1YW50aXR5OiBudW1iZXIsIGN1c3RvbWVySWQ6IG51bWJlcikge1xuICAgICAgICBpZiAodGhpcy5yZW50Q2FydC5zYWxlQm9va0l0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5yZW50Q2FydC5jdXN0b21lcklkID0gY3VzdG9tZXJJZDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlbnRDYXJ0LnNhbGVCb29rSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVudENhcnQuY3VzdG9tZXJJZCAhPT0gY3VzdG9tZXJJZCkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRmFya2zEsSBtw7zFn3Rlcml5ZSBraXRhcCBraXJhbGFubWF5YSDDp2FsxLHFn8SxbMSxeW9yLiBMw7x0ZmVuIHRlayBtw7zFn3RlcmkgacOnaW4gacWfbGVtIHlhcMSxbsSxelwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbnRDYXJ0LnNhbGVCb29rSXRlbXMucHVzaChuZXcgU2FsZUJvb2tJdGVtcyhib29rLCBxdWFudGl0eSkpXG4gICAgICAgIHRoaXMudXBkYXRlUmVudENhcnQoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlUmVudENhcnQoKSB7XG4gICAgICAgIGNvbnN0IHJlbnRDYXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZW50Q2FydFwiKTtcbiAgICAgICAgY29uc3Qgc3ViVG90YWxTcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b3RhbFJlbnRBbW91bnRUbFwiKTtcblxuICAgICAgICBpZiAocmVudENhcnQpIHtcblxuICAgICAgICAgICAgbGV0IHJvdywgY29sdW1uLCBzdWJUb3RhbDogbnVtYmVyID0gMDtcblxuICAgICAgICAgICAgd2hpbGUgKHJlbnRDYXJ0Lmxhc3RDaGlsZCAmJiByZW50Q2FydC5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgcmVudENhcnQucmVtb3ZlQ2hpbGQocmVudENhcnQubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YlRvdGFsU3BhbiEudGV4dENvbnRlbnQgPSBcIlwiO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yZW50Q2FydC5zYWxlQm9va0l0ZW1zLmxlbmd0aDsgaW5kZXgrKykge1xuXG4gICAgICAgICAgICAgICAgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtcm93XCI7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMucmVudENhcnQuc2FsZUJvb2tJdGVtcykge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gdGhpcy5yZW50Q2FydC5jdXN0b21lcklkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gaXRlbS5ib29rLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gaXRlbS5xdWFudGl0eS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IChpdGVtLmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiBpdGVtLnF1YW50aXR5KS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyb3cgJiYgc3ViVG90YWxTcGFuKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0IG9mIHRoaXMucmVudENhcnQuc2FsZUJvb2tJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBzdWJUb3RhbCArPSB0LmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiB0LnF1YW50aXR5O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlbnRDYXJ0LmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICAgICAgICAgc3ViVG90YWxTcGFuLnRleHRDb250ZW50ID0gc3ViVG90YWwudG9TdHJpbmcoKSArIFwiIFRMXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG5cbiAgICB9XG5cbiAgICBwdWJsaWMgY2FydFRvUmVudCgpIHtcbiAgICAgICAgbGV0IHJlbnRDYXJ0OiBSZW50Q2FydCA9IHRoaXMucmVudENhcnQ7XG4gICAgICAgIGxldCByZW50ID0gbmV3IFJlbnQoKTtcblxuICAgICAgICByZW50LnNhbGVCb29rSXRlbXMgPSByZW50Q2FydC5zYWxlQm9va0l0ZW1zO1xuICAgICAgICByZW50LmN1c3RvbWVySWQgPSByZW50Q2FydC5jdXN0b21lcklkO1xuICAgICAgICByZW50Lm9wZXJhdGlvbk51bWJlciA9IHRoaXMuZ2VuZXJhdGVSZW50TnVtYmVyKHJlbnRDYXJ0LmN1c3RvbWVySWQpO1xuICAgICAgICByZW50Lm9wZXJhdGlvbkRhdGVUaW1lID0gbmV3IERhdGUoKTtcbiAgICAgICAgcmVudC50b3RhbCA9IHRoaXMuY2FsY3VsYXRlVG90YWwocmVudCk7XG5cbiAgICAgICAgZm9yIChsZXQgaSBvZiByZW50LnNhbGVCb29rSXRlbXMpIHtcbiAgICAgICAgICAgIHN0b2NrU2VydmljZS5pbmNyZWFzZVN0b2NrKGkuYm9vay5pc2JuLCAtaS5xdWFudGl0eSlcbiAgICAgICAgfVxuXG5cbiAgICAgICAgdGhpcy5yZW50Q2FydCA9IG5ldyBSZW50Q2FydDsgLy8gc2VwZXRpIGJvxZ9hbHRcbiAgICAgICAgdGhpcy51cGRhdGVSZW50Q2FydCgpO1xuXG4gICAgICAgIGxldCBzdWNjZXNzID0gdGhpcy5hZGRSZW50TW9jayhyZW50KTtcbiAgICB9XG5cbiAgICBhc3luYyBhZGRSZW50TW9jayhyOiBSZW50KTogUHJvbWlzZTxCb29sZWFuIHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMucmVudEFwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgc2FsZUJvb2tJdGVtczogQXJyYXkuZnJvbShyLnNhbGVCb29rSXRlbXMpLFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21lcklkOiByLmN1c3RvbWVySWQsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbkRhdGVUaW1lOiByLm9wZXJhdGlvbkRhdGVUaW1lLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25OdW1iZXI6IHIub3BlcmF0aW9uTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbDogci50b3RhbFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KHJlc3VsdC5tZXNzYWdlICsgXCIgXCIgKyByZXN1bHQuc2FsZU51bWJlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgcmVmdW5kUmVudE1vY2socjogUmVudCkge1xuXG4gICAgICAgIC8vUEFUQ0ggQmVsaXJsaSBiaXIga2F5bmFrdGFraSB2ZXJpbGVyaW4gYmlyIGvEsXNtxLFuxLFuIGRlxJ9pxZ90aXJpbG1lc2kgacOnaW4ga3VsbGFuxLFsYW4gbWV0b2R0dXIuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMucmVudEFwaSArIFwiL1wiICsgci5vcGVyYXRpb25OdW1iZXIsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICByZWZ1bmREYXRlOiByLnJlZnVuZERhdGUsXG4gICAgICAgICAgICAgICAgICAgIHJlZnVuZDogci5yZWZ1bmRcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gci5yZWZ1bmQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxuXG59IiwiaW1wb3J0IHsgc3RvY2tTZXJ2aWNlIH0gZnJvbSBcIi4uXCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rXCI7XG5pbXBvcnQgeyBTYWxlIH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlXCI7XG5pbXBvcnQgeyBTYWxlQm9va0l0ZW1zIH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlLWJvb2staXRlbVwiO1xuaW1wb3J0IHsgU2FsZUNhcnQgfSBmcm9tIFwiLi4vZG9tYWluL3NhbGUtY2FydFwiO1xuXG5leHBvcnQgY2xhc3MgU2FsZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgX3NhbGVMaXN0OiBBcnJheTxTYWxlPjtcbiAgICBwcml2YXRlIF9zYWxlQ2FydDogU2FsZUNhcnQ7XG4gICAgcHVibGljIHNhbGVBcGkgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS92MS9zYWxlcyc7XG5cbiAgICBjb25zdHJ1Y3RvcihzYWxlTGlzdDogQXJyYXk8U2FsZT4sIHNhbGVDYXJ0OiBTYWxlQ2FydCkge1xuICAgICAgICB0aGlzLl9zYWxlTGlzdCA9IHNhbGVMaXN0O1xuICAgICAgICB0aGlzLl9zYWxlQ2FydCA9IHNhbGVDYXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzYWxlTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGU+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgc2FsZUxpc3QoKTogQXJyYXk8U2FsZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2FsZUxpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNhbGVMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxTYWxlPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHNhbGVMaXN0KHZhbHVlOiBBcnJheTxTYWxlPikge1xuICAgICAgICB0aGlzLl9zYWxlTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzYWxlQ2FydFxuICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGVDYXJ0Pn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHNhbGVDYXJ0KCk6IFNhbGVDYXJ0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NhbGVDYXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzYWxlQ2FydFxuICAgICAqIEBwYXJhbSB7QXJyYXk8U2FsZUNhcnQ+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgc2FsZUNhcnQodmFsdWU6IFNhbGVDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3NhbGVDYXJ0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFNhbGUoc2FsZTogU2FsZSk6IHZvaWQge1xuICAgICAgICB0aGlzLnNhbGVMaXN0LnB1c2goc2FsZSk7XG5cbiAgICB9XG5cbiAgICBjYWxjdWxhdGVUb3RhbChzYWxlOiBTYWxlKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHN1YlRvdGFsID0gMC4wO1xuXG4gICAgICAgIGZvciAobGV0IGVudHJ5IG9mIHNhbGUuc2FsZUJvb2tJdGVtcykge1xuICAgICAgICAgICAgc3ViVG90YWwgKz0gZW50cnkuYm9vay5ib29rU3BlY2lmaWNhdGlvbi5wcmljZSAqIGVudHJ5LnF1YW50aXR5O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1YlRvdGFsO1xuICAgIH1cblxuICAgIGdlbmVyYXRlU2FsZU51bWJlcihjdXN0b21lcklkOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBsZXQgcmVjZWlwdE51bWJlcjogc3RyaW5nID0gXCJTXCIgKyB0b2RheS5nZXREYXkoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0TW9udGgoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0SG91cnMoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRTZWNvbmRzKCkudG9TdHJpbmcoKSArIGN1c3RvbWVySWQudG9TdHJpbmcoKTtcblxuICAgICAgICByZXR1cm4gcmVjZWlwdE51bWJlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U2FsZShzYWxlTnVtYmVyOiBzdHJpbmcpOiBTYWxlIHtcbiAgICAgICAgbGV0IHNhbGUgPSB0aGlzLnNhbGVMaXN0LmZpbmQocyA9PiBzLm9wZXJhdGlvbk51bWJlciA9PT0gc2FsZU51bWJlcik7XG4gICAgICAgIHJldHVybiBzYWxlITtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlU2FsZShzYWxlOiBTYWxlKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuc2FsZUxpc3QuaW5kZXhPZihzYWxlKTtcbiAgICAgICAgdGhpcy5zYWxlTGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRCb29rVG9DYXJ0KGJvb2s6IEJvb2ssIHF1YW50aXR5OiBudW1iZXIsIGN1c3RvbWVySWQ6IG51bWJlcikge1xuXG4gICAgICAgIGlmICh0aGlzLnNhbGVDYXJ0LnNhbGVCb29rSXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnNhbGVDYXJ0LmN1c3RvbWVySWQgPSBjdXN0b21lcklkO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2FsZUNhcnQuc2FsZUJvb2tJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zYWxlQ2FydC5jdXN0b21lcklkICE9PSBjdXN0b21lcklkKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJGYXJrbMSxIG3DvMWfdGVyaXllIGtpdGFwIHNhdMSxbG1heWEgw6dhbMSxxZ/EsWzEsXlvci4gTMO8dGZlbiB0ZWsgbcO8xZ90ZXJpIGnDp2luIGnFn2xlbSB5YXDEsW7EsXpcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBzYWxlQm9va0l0ZW1zOiBTYWxlQm9va0l0ZW1zID0gbmV3IFNhbGVCb29rSXRlbXMoYm9vaywgcXVhbnRpdHkpO1xuICAgICAgICB0aGlzLnNhbGVDYXJ0LnNhbGVCb29rSXRlbXMucHVzaChzYWxlQm9va0l0ZW1zKTtcbiAgICAgICAgdGhpcy51cGRhdGVTYWxlQ2FydCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVTYWxlQ2FydCgpIHtcbiAgICAgICAgY29uc3Qgc2FsZUNhcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNhbGVDYXJ0XCIpO1xuICAgICAgICBjb25zdCBzdWJUb3RhbFNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvdGFsU2FsZUFtb3VudFRsXCIpO1xuXG4gICAgICAgIGlmIChzYWxlQ2FydCkge1xuXG4gICAgICAgICAgICBsZXQgcm93LCBjb2x1bW4sIHN1YlRvdGFsOiBudW1iZXIgPSAwO1xuXG4gICAgICAgICAgICB3aGlsZSAoc2FsZUNhcnQubGFzdENoaWxkICYmIHNhbGVDYXJ0LmNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBzYWxlQ2FydC5yZW1vdmVDaGlsZChzYWxlQ2FydC5sYXN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3ViVG90YWxTcGFuIS50ZXh0Q29udGVudCA9IFwiXCI7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnNhbGVDYXJ0LnNhbGVCb29rSXRlbXMubGVuZ3RoOyBpbmRleCsrKSB7XG5cbiAgICAgICAgICAgICAgICByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1yb3dcIjtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5zYWxlQ2FydC5zYWxlQm9va0l0ZW1zKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSB0aGlzLnNhbGVDYXJ0LmN1c3RvbWVySWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBpdGVtLmJvb2submFtZTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBpdGVtLnF1YW50aXR5LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gKGl0ZW0uYm9vay5ib29rU3BlY2lmaWNhdGlvbi5wcmljZSAqIGl0ZW0ucXVhbnRpdHkpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJvdyAmJiBzdWJUb3RhbFNwYW4pIHtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5zYWxlQ2FydC5zYWxlQm9va0l0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YlRvdGFsICs9IHQuYm9vay5ib29rU3BlY2lmaWNhdGlvbi5wcmljZSAqIHQucXVhbnRpdHk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2FsZUNhcnQuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgICAgICAgICBzdWJUb3RhbFNwYW4udGV4dENvbnRlbnQgPSBzdWJUb3RhbC50b1N0cmluZygpICsgXCIgVExcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBjYXJ0VG9TYWxlKCk6IGFueSB7XG4gICAgICAgIGxldCBzYWxlQ2FydDogU2FsZUNhcnQgPSB0aGlzLnNhbGVDYXJ0O1xuICAgICAgICBsZXQgc2FsZSA9IG5ldyBTYWxlKCk7XG5cbiAgICAgICAgc2FsZS5zYWxlQm9va0l0ZW1zID0gc2FsZUNhcnQuc2FsZUJvb2tJdGVtcztcbiAgICAgICAgc2FsZS5jdXN0b21lcklkID0gc2FsZUNhcnQuY3VzdG9tZXJJZDtcbiAgICAgICAgc2FsZS5vcGVyYXRpb25OdW1iZXIgPSB0aGlzLmdlbmVyYXRlU2FsZU51bWJlcihzYWxlQ2FydC5jdXN0b21lcklkKTtcbiAgICAgICAgc2FsZS5vcGVyYXRpb25EYXRlVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHNhbGUudG90YWwgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsKHNhbGUpO1xuXG4gICAgICAgIGZvciAobGV0IHEgb2Ygc2FsZS5zYWxlQm9va0l0ZW1zKSB7XG4gICAgICAgICAgICBzdG9ja1NlcnZpY2UuaW5jcmVhc2VTdG9jayhxLmJvb2suaXNibiwgLSBxLnF1YW50aXR5KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHN1Y2Nlc3MgPSB0aGlzLmFkZFNhbGVNb2NrKHNhbGUpO1xuICAgICAgICB0aGlzLnNhbGVDYXJ0ID0gbmV3IFNhbGVDYXJ0KCk7IC8vIHNlcGV0aSBib8WfYWx0XG4gICAgICAgIHRoaXMudXBkYXRlU2FsZUNhcnQoKTtcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgfVxuXG4gICAgYXN5bmMgYWRkU2FsZU1vY2soczogU2FsZSkge1xuXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5zYWxlQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBzYWxlQm9va0l0ZW1zOiBBcnJheS5mcm9tKHMuc2FsZUJvb2tJdGVtcyksXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbWVySWQ6IHMuY3VzdG9tZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uRGF0ZVRpbWU6IHMub3BlcmF0aW9uRGF0ZVRpbWUsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbk51bWJlcjogcy5vcGVyYXRpb25OdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiBzLnRvdGFsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBhbGVydChcIkZpxZ9pbml6aSBrYXliZXRtZXlpbml6LiBGacWfIE51bWFyYXPEsTogXCIgKyBzLm9wZXJhdGlvbk51bWJlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG4iLCJpbXBvcnQgeyBTdG9jayB9IGZyb20gXCIuLi9kb21haW4vc3RvY2tcIjtcblxuZXhwb3J0IGNsYXNzIFN0b2NrU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfc3RvY2tMaXN0OiBBcnJheTxTdG9jaz47XG4gICAgcHJpdmF0ZSBzdG9ja0FwaTogc3RyaW5nID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3N0b2Nrc1wiO1xuXG4gICAgY29uc3RydWN0b3Ioc3RvY2tMaXN0OiBBcnJheTxTdG9jaz4pIHtcbiAgICAgICAgdGhpcy5fc3RvY2tMaXN0ID0gc3RvY2tMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzdG9ja0xpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxTdG9jaz59XG4gICAgICovXG4gICAgcHVibGljIGdldCBzdG9ja0xpc3QoKTogQXJyYXk8U3RvY2s+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b2NrTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc3RvY2tMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxTdG9jaz59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBzdG9ja0xpc3QodmFsdWU6IEFycmF5PFN0b2NrPikge1xuICAgICAgICB0aGlzLl9zdG9ja0xpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKiogIWF0dGVudGlvbiwgKmltcG9ydGFudCwgP3F1ZXN0aW9uLCBUT0RPXG4gICAgICogISDDlm5jZWxpa2xlIGluY3JlYXNlU3RvY2sgZm9ua3NpeW9udW5kYW4gZmFya2zEsSBiaXIgacWfIHlhcMSxeW9yLFxuICAgICAqICogS2l0YXAgaGVuw7x6IGVrbGVuZGlrdGVuIHNvbnJhIGhlbWVuIGdpcml5b3IsXG4gICAgICogPyBLaXRhcCBpbGsgZGVmYSBla2xlbmRpeXNlIGJ1IGZvbmtzaXlvbiBtdSDDp2FsxLHFn2FjYWsgPyBFVkVULlxuICAgICAqIFRPRE8gaW5jcmVhc2VTdG9jayBmb25rc2l5b251bnUgaW5jZWxlXG4gICAgICogRWxpbWl6ZGUgaGnDpyBzdG9jayBrYXlkxLEvbmVzbmVzaSB5b2ssIHllbmkga2F5xLF0L25lc25lIG9sdcWfdHVydXlvcnV6XG4gICAgICogWWVuaSBla2xlbmVuIGtpdGFiYSBzdG9rIGVrbGVtZSBpxZ9sZW1pXG4gICAgICogQHBhcmFtIGlzYm4gIHN0b2sgZWtsZW5lY2VrIG9sYW4ga2l0YWLEsW4gaXNibiBudW1hcmFzxLFcbiAgICAgKiBAcGFyYW0gc2hlbGZOdW1iZXIgc3RvayBla2xlbmVjZWsgb2xhbiBraXRhYsSxbiByYWYgbnVtYXJhc8SxXG4gICAgICogQHBhcmFtIHF1YW50aXR5IGtpdGFwZGFuIGthw6cgYWRldCBzdG/En2EgZWtsZW5lY2VrXG4gICAgICovXG4gICAgcHVibGljIGFkZFN0b2NrKGlzYm46IHN0cmluZywgc2hlbGZOdW1iZXI6IHN0cmluZywgcXVhbnRpdHk6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICBsZXQgbmV3U3RvY2sgPSBuZXcgU3RvY2soaXNibiwgcXVhbnRpdHksIHNoZWxmTnVtYmVyKTtcbiAgICAgICAgICAgIHRoaXMuc3RvY2tMaXN0LnB1c2gobmV3U3RvY2spO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwIHphdGVuIGVrbGksIGhhbGloYXrEsXJkYSB2YXIsIGRhaGEgc29ucmEgeWVuaSBraXRhcGxhciBnZWxkaSxzdG9rIGFydMSxcm1hIGnFn2xlbWksXG4gICAgICogQHBhcmFtIGlzYm4gc3RvayBla2xlbmVjZWsgb2xhbiBraXRhYsSxbiBpc2JuIG51bWFyYXPEsVxuICAgICAqIEBwYXJhbSBxdWFudGl0eSBzdG9rIGVrbGVuZWNlayBvbGFuIGtpdGFixLFuIGFkZWRpXG4gICAgICogQHJldHVybnMgacWfbGVtIGdlcsOnZWtsZcWfbWVzaSBkdXJ1bXVuZGEgdHJ1ZSwgZGnEn2VyIGR1cnVtZGEgZmFsc2UgZMO2bmVyXG4gICAgICovXG4gICAgcHVibGljIGluY3JlYXNlU3RvY2soaXNibjogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBzdG9jayA9IHRoaXMuZ2V0U3RvY2soaXNibik7XG4gICAgICAgIGlmIChzdG9jaykge1xuICAgICAgICAgICAgc3RvY2sucXVhbnRpdHkgPSAoc3RvY2sucXVhbnRpdHkgKyBxdWFudGl0eSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHN0b2NrIG5lc25lc2luaSBnZXJpIGTDtm5kw7xyw7xyXG4gICAgICogQHBhcmFtIGlzYm4gc3RvY2sgbmVzbmVzaSBnZXRpcmlsZWNlayBvbGFuIG5lc25lbmluIGlzYm4gbm9zdSxcbiAgICAgKiBAcmV0dXJucyBkYiBvbGFuIHN0b2NrIG5lc25lbnNpIGdlcmkgZMO2bmVyLCBkYiBkZSB5b2sgaXNlIHRocm93IGlsZSBoYXRhIGbEsXJsYXTEsXJsxLFyXG4gICAgICovXG4gICAgcHVibGljIGdldFN0b2NrKGlzYm46IHN0cmluZykge1xuICAgICAgICBsZXQgc3RvY2sgPSB0aGlzLnN0b2NrTGlzdC5maW5kKHMgPT4gcy5pc2JuID09PSBpc2JuKTtcbiAgICAgICAgaWYgKHN0b2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RvY2s7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U3RvY2tRdWFudGl0eShpc2JuOiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICBsZXQgczogU3RvY2sgPSB0aGlzLmdldFN0b2NrKGlzYm4pITtcblxuICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgcmV0dXJuIHMucXVhbnRpdHk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEXEn2VyIHN0b2sgbmVzbmVzaSB5b2sgaXNlIHN0b2sgbmVzbmVzaSwgYmVsaXJ0aWxlbiBhZGV0IGthZGFyIHN0b2sgYmlsZ2lzaSBpbGUgYmVyYWJlciBla2xlbml5b3IuXG4gICAgICogxLDFn3RlIGJ1IG9sdcWfdHVybWEvY3JlYXRlIGnFn2xlbWkgYnVyYWRhIHlhcMSxbMSxeW9yLlxuICAgICAqIEBwYXJhbSBzIGluZGV4LnRzIGRvc3lhc8SxbmRhbiBnZWxlbiBzdG9rIG5lc25lc2lcbiAgICAgKi9cbiAgICBhc3luYyBhZGRTdG9ja01vY2soczogU3RvY2spOiBQcm9taXNlPEJvb2xlYW4gfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5zdG9ja0FwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaXNibjogcy5pc2JuLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogcy5xdWFudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgc2hlbGZOdW1iZXI6IHMuc2hlbGZOdW1iZXJcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nICsgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RvayBla2xlbmlya2VuIGXEn2VyIHN0b2sgbmVzbmVzaSBkYWhhIMO2bmNlZGVuIHZhciBpc2UsIHN0b2sgYXJ0xLFyxLFtxLFuxLEgcHV0IGlsZSB5YXBhY2HEn8SxelxuICAgICAqIEBwYXJhbSBzIGluZGV4LnRzIGRvc3lhc8SxbmRhbiBnZWxlbiBzdG9rIG5lc25lc2lcbiAgICAgKi9cbiAgICBhc3luYyBpbmNyZWFzZVN0b2NrTW9jayhzOiBTdG9jaykge1xuICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuc3RvY2tBcGkgKyBcIi9cIiArIHMuaXNibiwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBpc2JuOiBzLmlzYm4sXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiBzLnF1YW50aXR5LFxuICAgICAgICAgICAgICAgICAgICBzaGVsZk51bWJlcjogcy5zaGVsZk51bWJlclxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MDcpO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwidGhpcyIsIl9ib29rcyIsIkFycmF5IiwiX3N0b2NrcyIsIl9jdXN0b21lcnMiLCJfc2FsZXMiLCJfcmVudHMiLCJfYm9va1NwZWNpZmljYXRpb25zIiwiX2NhbmNlbHMiLCJfc2FsZUNhcnQiLCJTYWxlQ2FydCIsIl9yZW50Q2FydCIsIlJlbnRDYXJ0IiwiZ2V0Qm9va3NMaXN0IiwiZ2V0U3RvY2tzTGlzdCIsImdldEN1c3RvbWVyc0xpc3QiLCJnZXRTYWxlc0xpc3QiLCJnZXRSZW50cyIsImdldEJvb2tTcGVjaWZpY2F0aW9ucyIsImdldENhbmNhbGVkU2FsZXMiLCJnZXRTYWxlQ2FydCIsImdldFJlbnRDYXJ0Iiwic2V0U2FsZUNhcnQiLCJ2YWx1ZSIsInNldFJlbnRDYXJ0IiwiaXNibiIsInByaWNlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsIl9pc2JuIiwiX3ByaWNlIiwiX3N0YXJ0RGF0ZSIsIl9lbmREYXRlIiwibmFtZSIsImF1dGhvciIsInB1Ymxpc2hZZWFyIiwicGFnZXMiLCJib29rU3BlY2lmaWNhdGlvbiIsIl9uYW1lIiwiX2F1dGhvciIsIl9wdWJsaXNoWWVhciIsIl9wYWdlcyIsIl9ib29rU3BlY2lmaWNhdGlvbiIsImNhbmNlbFR5cGUiLCJyZWZ1bmQiLCJjYW5jZWxlZERhdGVUaW1lIiwiX2NhbmNlbFR5cGUiLCJfcmVmdW5kIiwiX2NhbmNlbGVkRGF0ZVRpbWUiLCJzdXJOYW1lIiwicGhvbmVOdW1iZXIiLCJfc3VyTmFtZSIsIl9waG9uZU51bWJlciIsInNhbGVCb29rSXRlbXMiLCJSZW50IiwiU2FsZSIsIm9wZXJhdGlvbkRhdGVUaW1lIiwiY3VzdG9tZXJJZCIsIm9wZXJhdGlvbk51bWJlciIsInRvdGFsIiwicmVmdW5kRGF0ZSIsInN1cGVyIiwiX3JlZnVuZERhdGUiLCJib29rIiwicXVhbnRpdHkiLCJfYm9vayIsIl9xdWFudGl0eSIsInRvSlNPTiIsIl9zYWxlQm9va0l0ZW1zIiwiX29wZXJhdGlvbkRhdGVUaW1lIiwiX2N1c3RvbWVySWQiLCJfb3BlcmF0aW9uTnVtYmVyIiwiX3RvdGFsIiwic2hlbGZOdW1iZXIiLCJfc2hlbGZOdW1iZXIiLCJzaG93QW5kSGlkZSIsImJ0bklkIiwiZWxlbWVudElkIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwic3R5bGUiLCJkaXNwbGF5IiwiZGIiLCJEYXRhQmFzZSIsImJvb2tTZXJ2aWNlIiwiQm9va1NlcnZpY2UiLCJjdXN0b21lclNlcnZpY2UiLCJDdXN0b21lclNlcnZpY2UiLCJjYW5jZWxTZXJ2aWNlIiwiQ2FuY2VsU2VydmljZSIsInJlbnRTZXJ2aWNlIiwiUmVudFNlcnZpY2UiLCJzYWxlU2VydmljZSIsIlNhbGVTZXJ2aWNlIiwic3RvY2tTZXJ2aWNlIiwiU3RvY2tTZXJ2aWNlIiwiY29uc29sZSIsImxvZyIsImFkZEN1c3RvbWVyIiwiQ3VzdG9tZXIiLCJhZGRTdG9jayIsImluaXRpYWxpemVEYXRhTW9jayIsImluaXRpbGlhemVEYXRhIiwiYWRkQm9va0Zvcm0iLCJvbnN1Ym1pdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJ0aXRsZSIsImdldCIsIkRhdGUiLCJtYXRjaCIsImJvb2tTcGVjIiwiQm9va1NwZWNpZmljYXRpb24iLCJCb29rIiwiYWRkQm9va01vY2siLCJhbGVydCIsInJlc2V0IiwiYWRkU3RvY2tGb3JtIiwicXVhbnR0aXkiLCJzdG9jayIsIlN0b2NrIiwiYm9va0xpc3QiLCJzb21lIiwiYiIsImFkZFN0b2NrTW9jayIsImFkZEN1c3RvbWVyRm9ybSIsInN1cm5hbWUiLCJjdXN0b21lciIsImFkZEN1c3RvbWVyTW9jayIsInNhbGVCb29rRm9ybSIsImdldEJvb2siLCJwYXJzZUludCIsImdldFN0b2NrIiwiYWRkQm9va1RvQ2FydCIsImVycm9yIiwic2FsZUNhcnQiLCJsZW5ndGgiLCJjYXJ0VG9TYWxlIiwibGlzdEJvb2tzIiwiY2FuY2VsU2FsZUZvcm0iLCJzYmkiLCJwdXNoIiwiU2FsZUJvb2tJdGVtcyIsImEiLCJzYWxlTGlzdCIsInNhbGVOdW1iZXIiLCJzYWxlIiwiZ2V0U2FsZSIsImNhbmNlbFNhbGUiLCJDYW5jZWwiLCJjYW5jZWxTYWxlTW9jayIsImNhbmNlbFJlbnRGb3JtIiwickRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInJlbnRMaXN0IiwicmVudE51bWJlciIsInJlbnQiLCJnZXRSZW50IiwiY2FuY2VsUmVudCIsImNhbmNlbFJlbnRNb2NrIiwicmVudEJvb2tGb3JtIiwicmVudENhcnQiLCJjYXJ0VG9SZW50IiwicmVmdW5kQm9va0Zvcm0iLCJjYWxjdWxhdGVSZWZ1bmRBbW91bnQiLCJyZWZ1bmRSZW50TW9jayIsImJvb2tBcGkiLCJfYm9va0xpc3QiLCJmaW5kIiwiYWRkQm9vayIsIm5ld0Jvb2siLCJFeGNlcHRpb24iLCJpc1ZhbGlkQm9vayIsImluY2x1ZGVzIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBY2NlcHQiLCJvayIsIkVycm9yIiwic3RhdHVzIiwicmVzdWx0IiwianNvbiIsImdldFJlc3VsdCIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImxpc3RCb29rc0RpdiIsInJvdyIsImNvbHVtbiIsImxhc3RDaGlsZCIsImNoaWxkcmVuIiwicmVtb3ZlQ2hpbGQiLCJmb3JFYWNoIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInRleHRDb250ZW50IiwidG9TdHJpbmciLCJhcHBlbmRDaGlsZCIsImdldFN0b2NrUXVhbnRpdHkiLCJib2R5IiwiY2FuY2VsbGVkTGlzdCIsImNhbmNlbFNhbGVBcGkiLCJjYW5jZWxSZW50QXBpIiwiX2NhbmNlbGxlZExpc3QiLCJjYWxjdWxhdGVEaWZmSG91cnMiLCJkMSIsImQyIiwiZGlmZk1pbGlzIiwiZ2V0VGltZSIsIk1hdGgiLCJmbG9vciIsImNhbmNlbCIsImNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQiLCJjYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kIiwiY3VzdG9tZXJMaXN0IiwiY3VzdG9tZXJBcGkiLCJfY3VzdG9tZXJMaXN0IiwibmV3Q3VzdG9tZXIiLCJyZW50QXBpIiwiX3JlbnRMaXN0IiwicmVmdW5kUGVyY2VudCIsImFkZFJlbnQiLCJjYWxjdWxhdGVUb3RhbCIsInN1YlRvdGFsIiwiaXRlbSIsImdlbmVyYXRlUmVudE51bWJlciIsInRvZGF5IiwiZ2V0RGF5IiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJjYWxjdWxhdGVSZWZ1bmQiLCJkaWZmIiwiZmluZSIsInMiLCJ1cGRhdGVSZW50Q2FydCIsInN1YlRvdGFsU3BhbiIsImluZGV4IiwidCIsImkiLCJpbmNyZWFzZVN0b2NrIiwiYWRkUmVudE1vY2siLCJyIiwiZnJvbSIsIm1lc3NhZ2UiLCJzYWxlQXBpIiwiX3NhbGVMaXN0IiwiYWRkU2FsZSIsImVudHJ5IiwiZ2VuZXJhdGVTYWxlTnVtYmVyIiwicmVtb3ZlU2FsZSIsImluZGV4T2YiLCJzcGxpY2UiLCJ1cGRhdGVTYWxlQ2FydCIsInEiLCJzdWNjZXNzIiwiYWRkU2FsZU1vY2siLCJzdG9ja0xpc3QiLCJzdG9ja0FwaSIsIl9zdG9ja0xpc3QiLCJuZXdTdG9jayIsImluY3JlYXNlU3RvY2tNb2NrIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==