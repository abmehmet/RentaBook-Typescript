(()=>{"use strict";var e={221:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataBase=void 0;const n=o(758),r=o(51);t.DataBase=class{constructor(){this._books=new Array,this._stocks=new Array,this._customers=new Array,this._sales=new Array,this._rents=new Array,this._bookSpecifications=new Array,this._cancels=new Array,this._saleCart=new r.SaleCart,this._rentCart=new n.RentCart}get getBooksList(){return this._books}get getStocksList(){return this._stocks}get getCustomersList(){return this._customers}get getSalesList(){return this._sales}get getRents(){return this._rents}get getBookSpecifications(){return this._bookSpecifications}get getCancaledSales(){return this._cancels}get getSaleCart(){return this._saleCart}get getRentCart(){return this._rentCart}set setSaleCart(e){this._saleCart=e}set setRentCart(e){this._rentCart=e}}},333:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BookPrice=void 0,t.BookPrice=class{get id(){return this._id}set id(e){this._id=e}get price(){return this._price}get startDate(){return this._startDate}get endDate(){return this._endDate}set price(e){this._price=e}set startDate(e){this._startDate=e}set endDate(e){this._endDate=e}}},934:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Book=void 0,t.Book=class{constructor(e,t,o,n,r,i){this._name=t,this._author=o,this._isbn=e,this._publishYear=n,this._pages=r,this._bookPrice=i}get id(){return this._id}set id(e){this._id=e}get isbn(){return this._isbn}get name(){return this._name}get author(){return this._author}get publishYear(){return this._publishYear}get pages(){return this._pages}get bookPrice(){return this._bookPrice}set isbn(e){this._isbn=e}set name(e){this._name=e}set author(e){this._author=e}set publishYear(e){this._publishYear=e}set pages(e){this._pages=e}set bookPrice(e){this._bookPrice=e}}},916:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Customer=void 0,t.Customer=class{constructor(e,t,o){this._name=e,this._surName=t,this._phoneNumber=o}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}get surName(){return this._surName}get phoneNumber(){return this._phoneNumber}set name(e){this._name=e}set surName(e){this._surName=e}set phoneNumber(e){this._phoneNumber=e}}},767:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrderBookItems=void 0,t.OrderBookItems=class{constructor(e,t){this._book=e,this._quantity=t}get book(){return this._book}get quantity(){return this._quantity}set book(e){this._book=e}set quantity(e){this._quantity=e}toJSON(){return{book:this._book,quantity:this._quantity}}}},758:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RentCart=void 0,t.RentCart=class{constructor(){this.orderBookItems=new Array}}},961:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Rent=void 0;const n=o(354);class r extends n.Sale{constructor(e,t,o,n,r,i,a){super(e,o,t,n,r),this._refundDate=i,this._refund=a}get refundDate(){return this._refundDate}get refund(){return this._refund}set refundDate(e){this._refundDate=e}set refund(e){this._refund=e}}t.Rent=r},51:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SaleCart=void 0,t.SaleCart=class{constructor(){this.orderBookItems=new Array}}},354:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Sale=void 0,t.Sale=class{constructor(e,t,o,n,r){this._orderBookItems=e,this._customerId=t,this._operationDateTime=o,this._operationNumber=n,this._total=r}get orderBookItems(){return this._orderBookItems}get customerId(){return this._customerId}get operationDateTime(){return this._operationDateTime}get operationNumber(){return this._operationNumber}get total(){return this._total}set orderBookItems(e){this._orderBookItems=e}set customerId(e){this._customerId=e}set operationDateTime(e){this._operationDateTime=e}set operationNumber(e){this._operationNumber=e}set total(e){this._total=e}}},72:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Stock=void 0,t.Stock=class{constructor(e,t,o){this._quantity=e,this._shelfNumber=t,this._book=o}get id(){return this._id}set id(e){this._id=e}get book(){return this._book}set book(e){this._book=e}get quantity(){return this._quantity}get shelfNumber(){return this._shelfNumber}set quantity(e){this._quantity=e}set shelfNumber(e){this._shelfNumber=e}}},607:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.stockService=t.saleService=t.rentService=t.cancelService=t.customerService=t.bookService=void 0;const r=o(221),i=o(934),a=o(333),s=o(916),c=o(72),l=o(946),u=o(943),d=o(709),h=o(148),m=o(478),k=o(214);function p(){return n(this,void 0,void 0,(function*(){t.bookService.bookList=yield t.bookService.getAllBooksData(),t.stockService.stockList=yield t.stockService.getAllStocksData(),t.customerService.customerList=yield t.customerService.getAllCustomersData(),console.table(t.bookService.bookList),console.table(t.stockService.stockList),console.table(t.customerService.customerList),console.log("Data intiliazed.")}))}function f(e,t){const o=document.getElementById(t),n=document.getElementById(e);o&&n&&n.addEventListener("click",(()=>{"none"===o.style.display?o.style.display="block":o.style.display="none"}))}var v;v=new r.DataBase,t.bookService=new l.BookService(v.getBooksList,v.getBookSpecifications),t.customerService=new d.CustomerService(v.getCustomersList),t.cancelService=new u.CancelService(v.getCancaledSales),t.rentService=new h.RentService(v.getRents,v.getRentCart),t.saleService=new m.SaleService(v.getSalesList,v.getSaleCart),t.stockService=new k.StockService(v.getStocksList),console.log("Services intiliazed."),p(),f("addBookMenuItem","addBookSection"),f("showBooksMenuItem","listBooksSection"),f("addCustomerMenuItem","addCustomerSection"),f("addStockMenuItem","addStockSection"),f("saleBookMenuItem","saleBookSection"),f("rentBookMenuItem","rentBookSection"),f("cancelSaleMenuItem","cancelSaleSection"),f("cancelRentMenuItem","cancelRentSection"),f("refundBookMenuItem","refundBookSection"),f("rentNow","rentBookSection");const y=document.getElementById("add-book-form");null!=y&&(y.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(y),n=o.get("bookTitle"),r=o.get("bookAuthor"),s=o.get("bookIsbn"),c=o.get("bookPublishYear"),l=o.get("bookPages"),u=o.get("bookPrice"),d=new a.BookPrice;d.price=u;const h=new i.Book(s,n,r,c,l,d);if(!1===t.bookService.bookList.some((e=>e.isbn===h.isbn)))return(yield t.bookService.createBook(h))?(alert(h.isbn+" numaralı kitap Ekleme İşlemi Başarı İle Tamamlanmıştır."),y.reset(),w()):alert(h.isbn+" numaralı kitap Ekleme İşlemi Sırasında Bir Hata oluştu."),!1;alert("Aynı ISBN numrasına sahip ikinci bir kitap eklenemz.")})));const b=document.getElementById("add-stock-form");b&&(b.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(b),n=o.get("bookIsbnForAddStock"),r=o.get("stockQuantity"),i=o.get("shelfNumber"),a=t.bookService.bookList.find((e=>e.isbn===n));if(a){const e=new c.Stock(r,i,a);(yield t.stockService.createStock(e))&&(alert(n+" isbn numaralı kitaptan, "+r+" kadar sisteme stok eklenmiştir."),yield p(),yield w())}else alert("Stok eklenmeye çalışılan kitaba ait isbn numarası hatalıdır.");return b.reset(),!1})));const g=document.getElementById("add-customer-form");g&&(g.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(g),n=o.get("customerName"),r=o.get("customerSurname"),i=o.get("customerPhoneNumber"),a=new s.Customer(n,r,i);return(yield t.customerService.createCustomer(a))?(alert("Müşteri Ekleme İşlemi Başarı İle Tamamlanmıştır. "),g.reset()):alert("Müşteri Ekleme İşlemi Sırasında bir hata ile karşılıldı. "),!1})));const S=document.getElementById("sale-book-form");S&&(S.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(S),n=o.get("isbnForSale"),r=parseInt(o.get("customerIdForSale")),i=parseInt(o.get("quantityForSale")),a=yield t.bookService.getBook(n),s=yield t.customerService.getCustomer(r);try{if(a){let e=yield t.stockService.getStockByBookId(a.id);e?e.quantity>=i?s?t.saleService.addBookToCart(a,i,r):alert(r+" numaralı müşteri kayıtlı değildir."):alert(i+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${n} numaralı kitabın stoğu mevcut değildir.`)}else alert(n+" numaralı kitap yoktur.");return S.reset(),!1}catch(e){alert(e)}}))),document.getElementById("btnSale").addEventListener("click",(()=>{0===t.saleService.saleCart.orderBookItems.length?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):t.saleService.cartToSale()})),document.getElementById("showBooksMenuItem").addEventListener("click",(()=>{w()}));const _=document.getElementById("cancel-sale-form");_&&(_.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(_).get("saleNumberforCancel");!0===(yield t.saleService.isExistSale(o))?(yield t.cancelService.cancelSaleMock(o))?alert(o+" numaralı satış iptal edilmiştir."):alert(o+" numaralı satış iptal edilirken hata meydana geldi."):alert(o+" numaralı satış bulunamamıştır. Tekrar deneyiniz.")})));const C=document.getElementById("cancel-rent-form");C&&(C.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(C).get("rentNumberforCancel");(yield t.cancelService.cancelRentMock(o))?alert(o+" numaralı kiralama iptal edilmiştir."):alert(o+" numaralı kiralma bulunamamıştır. Tekrar deneyiniz.")})));const B=document.getElementById("rent-book-form");B&&(B.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(B),n=o.get("isbnForRent"),r=yield t.bookService.getBook(n),i=parseInt(o.get("customerIdForRent")),a=yield t.customerService.getCustomer(i),s=parseInt(o.get("quantityForRent"));try{if(r){const e=yield t.stockService.getStockByBookId(r.id);e?e.quantity>=s?a?t.rentService.addBookToCart(r,s,i):alert(i+" numaralı müşteri kayıtlı değildir."):alert(s+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${n} numaralı kitabın stoğu mevcut değildir. Önce stok ekleyiniz`)}else alert(n+" numaralı kitap yoktur.");return B.reset(),!1}catch(e){alert(e)}}))),document.getElementById("btnRent").addEventListener("click",(()=>{0===t.rentService.rentCart.orderBookItems.length?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):t.rentService.cartToRent()}));const I=document.getElementById("refund-book-form");function w(){return n(this,void 0,void 0,(function*(){t.bookService.bookList=yield t.bookService.getAllBooksData(),t.stockService.stockList=yield t.stockService.getAllStocksData();const e=document.getElementById("listBooks");if(e){let o,n;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.bookService.bookList.forEach((r=>{o=document.createElement("div"),o.className="row-list-book",n=document.createElement("div"),n.className="column-list-book",n.textContent=r.isbn.toString(),o.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=r.name.toString(),o.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=r.author.toString(),o.appendChild(n),n=document.createElement("div"),n.className="column-list-book";let i=0;!0===t.stockService.stockList.some((e=>e.book.id===r.id))&&(i=t.stockService.stockList.find((e=>e.book.id===r.id)).quantity),n.textContent=i.toString(),o.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=r.bookPrice.price.toString()+" ₺",o.appendChild(n),e.appendChild(o)}))}}))}I&&(I.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(I).get("rentNumberforRefund");if(!0===(yield t.rentService.isExistRent(o))){let e=yield t.rentService.refundRent(o);e?(alert(e.operationNumber+" numaralı kiralama geri alınmıştır."),alert("Geri ödeme miktarı:"+e.refund+" ₺ .")):alert(o+" numaralı kiralama iptal edilirken hata meydana geldi.")}else alert(o+" numaralı kiralama bulunamamıştır. Tekrar deneyiniz.")})))},946:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BookService=void 0,t.BookService=class{constructor(e,t){this.bookApi="http://localhost:3002/api/v1/books",this._bookList=e,this._bookSpecification=t}get bookList(){return this._bookList}get bookSpecification(){return this._bookSpecification}set bookList(e){this._bookList=e}set bookSpecification(e){this._bookSpecification=e}getBook(e){return o(this,void 0,void 0,(function*(){const t=yield fetch(this.bookApi+"/q?isbn="+e,{method:"GET",headers:{Accept:"application/json"}});return t.ok?yield t.json():null}))}getAllBooksData(){return o(this,void 0,void 0,(function*(){const e=yield fetch(this.bookApi,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);return yield e.json()}))}createBook(e){return o(this,void 0,void 0,(function*(){try{const t=yield fetch(this.bookApi,{method:"POST",body:JSON.stringify({isbn:e.isbn,name:e.name,author:e.author,pages:e.pages,publishYear:e.publishYear,bookPriceCreateDto:{price:e.bookPrice.price}}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log("Rest servisinden dönen cevap =>"),console.log(e),this.bookList=yield this.getAllBooksData(),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},943:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelService=void 0,t.CancelService=class{constructor(e){this.cancelSaleApi="http://localhost:3002/api/v1/sales",this.cancelRentApi="http://localhost:3002/api/v1/rents",this._cancelledList=e}get cancelledList(){return this._cancelledList}set cancelledList(e){this._cancelledList=e}calculateDiffHours(e,t){let o=e.getTime()-t.getTime();return Math.floor(o/1e3/60/60)}cancelSale(e){let t=this.calculateCancelSaleRefund(e);e.refund=t,this.cancelledList.push(e)}calculateCancelSaleRefund(e){let t;return t=this.calculateDiffHours(e.canceledDateTime,e.cancelType.operationDateTime)>24?.75*e.cancelType.total:e.cancelType.total,t}cancelSaleMock(e){return o(this,void 0,void 0,(function*(){try{const t=yield fetch(this.cancelSaleApi+"/"+e,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok)return console.log(t),!0;throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}cancelRent(e){let t=this.calculateCancelRentRefund(e);e.refund=t,this.cancelledList.push(e)}calculateCancelRentRefund(e){let t;return t=this.calculateDiffHours(e.canceledDateTime,e.cancelType.operationDateTime)>24?.75*e.cancelType.total:e.cancelType.total,t}cancelRentMock(e){return o(this,void 0,void 0,(function*(){const t=yield fetch(this.cancelRentApi+"/"+e,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}});return!!t.ok&&(console.log(t),!0)}))}}},709:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerService=void 0,t.CustomerService=class{constructor(e){this.customerApi="http://localhost:3002/api/v1/customers",this._customerList=e}get customerList(){return this._customerList}set customerList(e){this._customerList=e}getAllCustomersData(){return o(this,void 0,void 0,(function*(){const e=yield fetch(this.customerApi,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);return yield e.json()}))}createCustomer(e){return o(this,void 0,void 0,(function*(){try{const t=yield fetch(this.customerApi,{method:"POST",body:JSON.stringify({name:e.name,surName:e.surName,phoneNumber:e.phoneNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log("Rest servisinden dönen cevap =>"),console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}getCustomer(e){return o(this,void 0,void 0,(function*(){try{const t=yield fetch(this.customerApi+"/"+e,{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)return null;return yield t.json()}catch(e){return e instanceof Error?console.log("error message: ",e.message):console.log("unexpected error: ",e),null}}))}}},148:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RentService=void 0;const r=o(961),i=o(758),a=o(767),s="http://localhost:3002/api/v1/rents";t.RentService=class{constructor(e,t){this._rentList=e,this.refundPercent=.75,this._rentCart=t}get rentList(){return this._rentList}set rentList(e){this._rentList=e}get rentCart(){return this._rentCart}set rentCart(e){this._rentCart=e}calculateTotal(e){let t=0;for(let o of e.orderBookItems)t+=o.book.bookPrice.price*o.quantity;return t}calculateDiffHours(e,t){let o=e.getTime()-t.getTime();return Math.floor(o/1e3/60/60)}calculateRefund(e){e.refund=e.total*this.refundPercent}calculateRefundAmount(e){let t,o=this.calculateDiffHours(e.refundDate,e.operationDateTime)/24;if(o<=14)t=.75*e.total;else if(o<=24){let n=.75-.05*(o-14);t=e.total*n}else t=.25*e.total;return t}getRent(e){return this.rentList.find((t=>t.operationNumber===e))}addBookToCart(e,t,o){if(0===this.rentCart.orderBookItems.length)this.rentCart.customerId=o;else if(this.rentCart.orderBookItems.length>0&&this.rentCart.customerId!==o)return alert("Farklı müşteriye kitap kiralanmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;let n=new a.OrderBookItems(e,t),r=this.rentCart.orderBookItems.findIndex((t=>t.book.isbn===e.isbn));-1===r?this.rentCart.orderBookItems.push(n):this.rentCart.orderBookItems[r]=n,this.updateRentCart()}updateRentCart(){const e=document.getElementById("rentCart"),t=document.getElementById("totalRentAmountTl");if(e){let o,n,r=0;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.textContent="";for(let e=0;e<this.rentCart.orderBookItems.length;e++){o=document.createElement("div"),o.className="rent-cart-row";for(let e of this.rentCart.orderBookItems)n=document.createElement("div"),n.className="rent-cart-column",n.textContent=this.rentCart.customerId.toString(),o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=e.book.name,o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=e.quantity.toString(),o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=(e.book.bookPrice.price*e.quantity).toString(),o.appendChild(n)}if(o&&t){for(let e of this.rentCart.orderBookItems)r+=e.book.bookPrice.price*e.quantity;e.appendChild(o),t.textContent=r.toString()+" TL"}}}cartToRent(){return n(this,void 0,void 0,(function*(){let e=this.rentCart,t=new r.Rent;t.orderBookItems=e.orderBookItems,t.customerId=e.customerId,t.total=this.calculateTotal(t),this.rentCart=new i.RentCart,this.updateRentCart(),this.createRent(t)}))}createRent(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(s,{method:"POST",body:JSON.stringify({orderBookItems:Array.from(e.orderBookItems),customerId:e.customerId,total:e.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!t.ok)throw new Error(`Hata oluştu, hata kodu: ${t.status} `);{const e=yield t.json();console.log("Rest apidan dönen cevap:\n"),console.log(e),alert("Kitap kiralama işlemi başarıyla gerçekleşmiştir."),alert("Fişinizi kaybetneyiniz. Fiş numaranız: "+e.operationNumber)}}catch(e){console.log("Hata Oluştu."),alert("Kitap kiralama işlemi sırasında bir hata oluştu. Lütfen tekrar deneyiniz.")}}))}refundRent(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch("http://localhost:3002/api/v1/refunds/rents/"+e,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),e}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){return console.log("Hata Oluştu."),null}}))}isExistRent(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(s+"/"+e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(console.log(t),t.ok){const e=yield t.json();return console.log("Rest apidan dönen cevap:\n"),console.log(e),!0}return!1}))}}},478:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SaleService=void 0;const r=o(607),i=o(354),a=o(767),s=o(51);t.SaleService=class{constructor(e,t){this.saleApi="http://localhost:3002/api/v1/sales",this._saleList=e,this._saleCart=t}get saleList(){return this._saleList}set saleList(e){this._saleList=e}get saleCart(){return this._saleCart}set saleCart(e){this._saleCart=e}calculateTotal(e){let t=0;for(let o of e.orderBookItems)t+=o.book.bookPrice.price*o.quantity;return t}addBookToCart(e,t,o){if(0===this.saleCart.orderBookItems.length)this.saleCart.customerId=o;else if(this.saleCart.orderBookItems.length>0&&this.saleCart.customerId!==o)return alert("Farklı müşteriye kitap satılmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;let n=new a.OrderBookItems(e,t),r=this.saleCart.orderBookItems.findIndex((t=>t.book.isbn===e.isbn));-1===r?this.saleCart.orderBookItems.push(n):this.saleCart.orderBookItems[r]=n,this.updateSaleCart()}updateSaleCart(){const e=document.getElementById("saleCart"),t=document.getElementById("totalSaleAmountTl");if(e){let o,n,r=0;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.textContent="";for(let e=0;e<this.saleCart.orderBookItems.length;e++){o=document.createElement("div"),o.className="sale-cart-row";for(let e of this.saleCart.orderBookItems)n=document.createElement("div"),n.className="sale-cart-column",n.textContent=this.saleCart.customerId.toString(),o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=e.book.name,o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=e.quantity.toString(),o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=(e.book.bookPrice.price*e.quantity).toString(),o.appendChild(n)}if(o&&t){for(let e of this.saleCart.orderBookItems)r+=e.book.bookPrice.price*e.quantity;e.appendChild(o),t.textContent=r.toString()+" TL"}}}cartToSale(){return n(this,void 0,void 0,(function*(){let e=this.saleCart,t=new i.Sale;t.orderBookItems=e.orderBookItems,t.customerId=e.customerId,t.operationDateTime=new Date,t.total=this.calculateTotal(t);for(let e of t.orderBookItems)yield r.stockService.getStockByBookId(e.book.id);let o=this.createSale(t);return this.saleCart=new s.SaleCart,this.updateSaleCart(),o}))}createSale(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.saleApi,{method:"POST",body:JSON.stringify({orderBookItems:Array.from(e.orderBookItems),customerId:e.customerId,total:e.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(console.log(t),t.ok){const e=yield t.json();return console.log("Rest apidan dönen cevap:\n"),console.log(e),alert("Kitap satış işlemi başarıyla gerçekleşmiştir."),alert("Fişinizi kaybetmeyiniz. Fiş Numarası: "+e.operationNumber),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}isExistSale(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(this.saleApi+"/"+e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(console.log(t),t.ok){const e=yield t.json();return console.log("Rest apidan dönen cevap:\n"),console.log(e),!0}return!1}))}}},214:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StockService=void 0,t.StockService=class{constructor(e){this.stockApi="http://localhost:3002/api/v1/stocks",this._stockList=e}get stockList(){return this._stockList}set stockList(e){this._stockList=e}getStockByBookId(e){return o(this,void 0,void 0,(function*(){try{const t=yield fetch(this.stockApi+"/q?bookId="+e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok)return yield t.json();throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){return e instanceof Error?console.log("error message: ",e.message):console.log("unexpected error: ",e),null}}))}createStock(e){return o(this,void 0,void 0,(function*(){try{const t=yield fetch(this.stockApi,{method:"POST",body:JSON.stringify({quantity:e.quantity,shelfNumber:e.shelfNumber,book:e.book}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu."+e)}}))}getAllStocksData(){return o(this,void 0,void 0,(function*(){const e=yield fetch(this.stockApi,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const t=yield e.json();return JSON.parse(JSON.stringify(t,null,4))}))}}}},t={};!function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CTCxHQUFVTSxLQUFLRixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTSixHQUdwRUssRUFBT0QsT0FDZixDQ25CMEJKLENBQW9CLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kYi9kYXRhYmFzZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vYm9vay1wcmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vYm9vay50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vY3VzdG9tZXIudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL29yZGVyLWJvb2staXRlbS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vcmVudC1jYXJ0LnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9yZW50LnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9zYWxlLWNhcnQudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL3NhbGUudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL3N0b2NrLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2UvYm9vay1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2UvY2FuY2VsLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvc2VydmljZS9jdXN0b21lci1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2UvcmVudC1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2Uvc2FsZS1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2Uvc3RvY2stc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgQm9va1ByaWNlIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rLXByaWNlXCI7XG5pbXBvcnQgeyBDYW5jZWwgfSBmcm9tIFwiLi4vZG9tYWluL2NhbmNlbFwiO1xuaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi4vZG9tYWluL2N1c3RvbWVyXCI7XG5pbXBvcnQgeyBSZW50IH0gZnJvbSBcIi4uL2RvbWFpbi9yZW50XCI7XG5pbXBvcnQgeyBSZW50Q2FydCB9IGZyb20gXCIuLi9kb21haW4vcmVudC1jYXJ0XCI7XG5pbXBvcnQgeyBTYWxlIH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlXCI7XG5pbXBvcnQgeyBTYWxlQ2FydCB9IGZyb20gXCIuLi9kb21haW4vc2FsZS1jYXJ0XCI7XG5pbXBvcnQgeyBTdG9jayB9IGZyb20gXCIuLi9kb21haW4vc3RvY2tcIjtcblxuZXhwb3J0IGNsYXNzIERhdGFCYXNlIHtcblxuICAgICBwcml2YXRlIF9ib29rczogQXJyYXk8Qm9vaz47Ly9cbiAgICAgcHJpdmF0ZSBfc3RvY2tzOiBBcnJheTxTdG9jaz47XG4gICAgIHByaXZhdGUgX2N1c3RvbWVyczogQXJyYXk8Q3VzdG9tZXI+Oy8vXG4gICAgIHByaXZhdGUgX3NhbGVzOiBBcnJheTxTYWxlPjsvL1xuICAgICBwcml2YXRlIF9yZW50czogQXJyYXk8UmVudD47XG4gICAgIHByaXZhdGUgX2Jvb2tTcGVjaWZpY2F0aW9uczogQXJyYXk8Qm9va1ByaWNlPjtcbiAgICAgcHJpdmF0ZSBfY2FuY2VsczogQXJyYXk8Q2FuY2VsPjsvL1xuICAgICBwcml2YXRlIF9zYWxlQ2FydDogU2FsZUNhcnQ7XG4gICAgIHByaXZhdGUgX3JlbnRDYXJ0OlJlbnRDYXJ0O1xuXG4gICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgIHRoaXMuX2Jvb2tzID0gbmV3IEFycmF5PEJvb2s+KCk7XG4gICAgICAgICAgdGhpcy5fc3RvY2tzID0gbmV3IEFycmF5PFN0b2NrPigpO1xuICAgICAgICAgIHRoaXMuX2N1c3RvbWVycyA9IG5ldyBBcnJheTxDdXN0b21lcj4oKTtcbiAgICAgICAgICB0aGlzLl9zYWxlcyA9IG5ldyBBcnJheTxTYWxlPigpO1xuICAgICAgICAgIHRoaXMuX3JlbnRzID0gbmV3IEFycmF5PFJlbnQ+KCk7XG4gICAgICAgICAgdGhpcy5fYm9va1NwZWNpZmljYXRpb25zID0gbmV3IEFycmF5PEJvb2tQcmljZT4oKTtcbiAgICAgICAgICB0aGlzLl9jYW5jZWxzID0gbmV3IEFycmF5PENhbmNlbD4oKTtcbiAgICAgICAgICB0aGlzLl9zYWxlQ2FydCA9IG5ldyBTYWxlQ2FydCgpO1xuICAgICAgICAgIHRoaXMuX3JlbnRDYXJ0ID0gbmV3IFJlbnRDYXJ0O1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBib29rc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxCb29rPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Qm9va3NMaXN0KCk6IEFycmF5PEJvb2s+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fYm9va3M7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHN0b2Nrc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxTdG9jaz59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFN0b2Nrc0xpc3QoKTogQXJyYXk8U3RvY2s+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fc3RvY2tzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBjdXN0b21lcnNcbiAgICAgICogQHJldHVybiB7QXJyYXk8Q3VzdG9tZXI+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRDdXN0b21lcnNMaXN0KCk6IEFycmF5PEN1c3RvbWVyPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbWVycztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgc2FsZXNcbiAgICAgICogQHJldHVybiB7QXJyYXk8U2FsZT59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFNhbGVzTGlzdCgpOiBBcnJheTxTYWxlPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3NhbGVzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciByZW50c1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxSZW50Pn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0UmVudHMoKTogQXJyYXk8UmVudD4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9yZW50cztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgYm9va1NwZWNpZmljYXRpb25zXG4gICAgICAqIEByZXR1cm4ge0FycmF5PEJvb2tQcmljZT59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldEJvb2tTcGVjaWZpY2F0aW9ucygpOiBBcnJheTxCb29rUHJpY2U+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fYm9va1NwZWNpZmljYXRpb25zO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBjYW5jZWxTYWxlc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxDYW5jZWxTYWxlPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Q2FuY2FsZWRTYWxlcygpOiBBcnJheTxDYW5jZWw+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fY2FuY2VscztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgc2FsZUNhcnRcbiAgICAgICogQHJldHVybiB7QXJyYXk8U2FsZUNhcnQ+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRTYWxlQ2FydCgpOiBTYWxlQ2FydCB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3NhbGVDYXJ0O1xuICAgICB9XG5cbiAgICAgICAgIC8qKlxuICAgICAqIEdldHRlciByZW50Q2FydFxuICAgICAqIEByZXR1cm4ge1JlbnRDYXJ0fVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGdldFJlbnRDYXJ0KCk6IFJlbnRDYXJ0IHtcblx0XHRyZXR1cm4gdGhpcy5fcmVudENhcnQ7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzYWxlQ2FydFxuICAgICAqIEBwYXJhbSB7U2FsZUNhcnR9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgc2V0U2FsZUNhcnQodmFsdWU6IFNhbGVDYXJ0KSB7XG5cdFx0dGhpcy5fc2FsZUNhcnQgPSB2YWx1ZTtcblx0fVxuXG5cblxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlbnRDYXJ0XG4gICAgICogQHBhcmFtIHtSZW50Q2FydH0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBzZXRSZW50Q2FydCh2YWx1ZTogUmVudENhcnQpIHtcblx0XHR0aGlzLl9yZW50Q2FydCA9IHZhbHVlO1xuXHR9XG4gICAgIFxuXG5cbn1cbiIsImV4cG9ydCBjbGFzcyBCb29rUHJpY2Uge1xuICAgIHByaXZhdGUgX2lkOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfcHJpY2U6IG51bWJlcjtcbiAgICBwcml2YXRlIF9zdGFydERhdGU6IERhdGU7XG4gICAgcHJpdmF0ZSBfZW5kRGF0ZTogRGF0ZTtcblxuICAgIC8qKlxuICAgICAqIEdldHRlciBpZFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCBpZCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9pZDtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgaWQodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX2lkID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBwcmljZVxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHByaWNlKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcmljZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc3RhcnREYXRlXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHN0YXJ0RGF0ZSgpOiBEYXRlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXJ0RGF0ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgZW5kRGF0ZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG4gICAgcHVibGljIGdldCBlbmREYXRlKCk6IERhdGUge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5kRGF0ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcHJpY2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHByaWNlKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fcHJpY2UgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc3RhcnREYXRlXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgc3RhcnREYXRlKHZhbHVlOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0RGF0ZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBlbmREYXRlXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgZW5kRGF0ZSh2YWx1ZTogRGF0ZSkge1xuICAgICAgICB0aGlzLl9lbmREYXRlID0gdmFsdWU7XG4gICAgfVxuXG5cblxufSIsImltcG9ydCB7IEJvb2tQcmljZSB9IGZyb20gXCIuL2Jvb2stcHJpY2VcIjtcblxuZXhwb3J0IGNsYXNzIEJvb2sge1xuICAgICBwcml2YXRlIF9pZDogbnVtYmVyO1xuICAgICBwcml2YXRlIF9pc2JuOiBzdHJpbmc7XG4gICAgIHByaXZhdGUgX25hbWU6IHN0cmluZztcbiAgICAgcHJpdmF0ZSBfYXV0aG9yOiBzdHJpbmc7XG4gICAgIHByaXZhdGUgX3B1Ymxpc2hZZWFyOiBzdHJpbmc7XG4gICAgIHByaXZhdGUgX3BhZ2VzOiBudW1iZXI7XG4gICAgIHByaXZhdGUgX2Jvb2tQcmljZTogQm9va1ByaWNlO1xuXG4gICAgIGNvbnN0cnVjdG9yKGlzYm46IHN0cmluZywgbmFtZTogc3RyaW5nLCBhdXRob3I6IHN0cmluZywgcHVibGlzaFllYXI6IHN0cmluZywgcGFnZXM6IG51bWJlciwgYm9va1ByaWNlOiBCb29rUHJpY2UpIHtcbiAgICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICAgICAgICB0aGlzLl9hdXRob3IgPSBhdXRob3I7XG4gICAgICAgICAgdGhpcy5faXNibiA9IGlzYm47XG4gICAgICAgICAgdGhpcy5fcHVibGlzaFllYXIgPSBwdWJsaXNoWWVhcjtcbiAgICAgICAgICB0aGlzLl9wYWdlcyA9IHBhZ2VzO1xuICAgICAgICAgIHRoaXMuX2Jvb2tQcmljZSA9IGJvb2tQcmljZTtcbiAgICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgaWRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgaWQoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5faWQ7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBpZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGlkKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLl9pZCA9IHZhbHVlO1xuXHR9XG4gICAgIFxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgaXNiblxuICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGlzYm4oKTogc3RyaW5nIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5faXNibjtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgbmFtZVxuICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgYXV0aG9yXG4gICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgYXV0aG9yKCk6IHN0cmluZyB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2F1dGhvcjtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgcHVibGlzaFllYXJcbiAgICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBwdWJsaXNoWWVhcigpOiBzdHJpbmcge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9wdWJsaXNoWWVhcjtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgcGFnZXNcbiAgICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBwYWdlcygpOiBudW1iZXIge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9wYWdlcztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgYm9va1ByaWNlXG4gICAgICAqIEByZXR1cm4ge0Jvb2tQcmljZX1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgYm9va1ByaWNlKCk6IEJvb2tQcmljZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tQcmljZTtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBTZXR0ZXIgaXNiblxuICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgICovXG4gICAgIHB1YmxpYyBzZXQgaXNibih2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgICAgdGhpcy5faXNibiA9IHZhbHVlO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIFNldHRlciBuYW1lXG4gICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAgKi9cbiAgICAgcHVibGljIHNldCBuYW1lKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgICB0aGlzLl9uYW1lID0gdmFsdWU7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogU2V0dGVyIGF1dGhvclxuICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgICovXG4gICAgIHB1YmxpYyBzZXQgYXV0aG9yKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgICB0aGlzLl9hdXRob3IgPSB2YWx1ZTtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBTZXR0ZXIgcHVibGlzaFllYXJcbiAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICAqL1xuICAgICBwdWJsaWMgc2V0IHB1Ymxpc2hZZWFyKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgICB0aGlzLl9wdWJsaXNoWWVhciA9IHZhbHVlO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIFNldHRlciBwYWdlc1xuICAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgICovXG4gICAgIHB1YmxpYyBzZXQgcGFnZXModmFsdWU6IG51bWJlcikge1xuICAgICAgICAgIHRoaXMuX3BhZ2VzID0gdmFsdWU7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogU2V0dGVyIGJvb2tQcmljZVxuICAgICAgKiBAcGFyYW0ge0Jvb2tQcmljZX0gdmFsdWVcbiAgICAgICovXG4gICAgIHB1YmxpYyBzZXQgYm9va1ByaWNlKHZhbHVlOiBCb29rUHJpY2UpIHtcbiAgICAgICAgICB0aGlzLl9ib29rUHJpY2UgPSB2YWx1ZTtcbiAgICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEN1c3RvbWVyIHtcbiAgICAgcHJpdmF0ZSBfaWQ6IG51bWJlcjtcbiAgICAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nO1xuICAgICBwcml2YXRlIF9zdXJOYW1lOiBzdHJpbmc7XG4gICAgIHByaXZhdGUgX3Bob25lTnVtYmVyOiBzdHJpbmc7XG5cbiAgICAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBzdXJOYW1lOiBzdHJpbmcsIHBob25lTnVtYmVyOiBzdHJpbmcpIHtcbiAgICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICAgICAgICB0aGlzLl9zdXJOYW1lID0gc3VyTmFtZTtcbiAgICAgICAgICB0aGlzLl9waG9uZU51bWJlciA9IHBob25lTnVtYmVyO1xuICAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBpZFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCBpZCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9pZDtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgaWQodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX2lkID0gdmFsdWU7XG5cdH1cbiAgICAgXG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBuYW1lXG4gICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgbmFtZSgpOiBzdHJpbmcge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBzdXJOYW1lXG4gICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgc3VyTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9zdXJOYW1lO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBwaG9uZU51bWJlclxuICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IHBob25lTnVtYmVyKCk6IHN0cmluZyB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3Bob25lTnVtYmVyO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIFNldHRlciBuYW1lXG4gICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAgKi9cbiAgICAgcHVibGljIHNldCBuYW1lKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgICB0aGlzLl9uYW1lID0gdmFsdWU7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogU2V0dGVyIHN1ck5hbWVcbiAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICAqL1xuICAgICBwdWJsaWMgc2V0IHN1ck5hbWUodmFsdWU6IHN0cmluZykge1xuICAgICAgICAgIHRoaXMuX3N1ck5hbWUgPSB2YWx1ZTtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBTZXR0ZXIgcGhvbmVOdW1iZXJcbiAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICAqL1xuICAgICBwdWJsaWMgc2V0IHBob25lTnVtYmVyKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgICB0aGlzLl9waG9uZU51bWJlciA9IHZhbHVlO1xuICAgICB9XG5cblxufVxuIiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcblxuZXhwb3J0IGNsYXNzIE9yZGVyQm9va0l0ZW1zIHtcbiAgICBwcml2YXRlIF9ib29rOiBCb29rO1xuICAgIHByaXZhdGUgX3F1YW50aXR5OiBudW1iZXI7XG5cblxuICAgIGNvbnN0cnVjdG9yKGJvb2s6IEJvb2ssIHF1YW50aXR5OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fYm9vayA9IGJvb2s7XG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gcXVhbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGJvb2tcbiAgICAgKiBAcmV0dXJuIHtCb29rfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgYm9vaygpOiBCb29rIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2s7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHF1YW50aXR5XG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcXVhbnRpdHkoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1YW50aXR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rXG4gICAgICogQHBhcmFtIHtCb29rfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgYm9vayh2YWx1ZTogQm9vaykge1xuICAgICAgICB0aGlzLl9ib29rID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHF1YW50aXR5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBxdWFudGl0eSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvb2s6IHRoaXMuX2Jvb2ssXG4gICAgICAgICAgICBxdWFudGl0eTogdGhpcy5fcXVhbnRpdHksXG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgTGlzdEZvcm1hdCB9IGZyb20gXCJ0eXBlc2NyaXB0XCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuaW1wb3J0IHsgT3JkZXJCb29rSXRlbXMgfSBmcm9tIFwiLi9vcmRlci1ib29rLWl0ZW1cIjtcblxuZXhwb3J0IGNsYXNzIFJlbnRDYXJ0IHtcbiAgICBjdXN0b21lcklkITogbnVtYmVyO1xuICAgIG9yZGVyQm9va0l0ZW1zOiBBcnJheTxPcmRlckJvb2tJdGVtcz47XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vcmRlckJvb2tJdGVtcyA9IG5ldyBBcnJheTxPcmRlckJvb2tJdGVtcz4oKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuL3NhbGVcIjtcbmltcG9ydCB7IE9yZGVyQm9va0l0ZW1zIH0gZnJvbSBcIi4vb3JkZXItYm9vay1pdGVtXCI7XG5cbmV4cG9ydCBjbGFzcyBSZW50IGV4dGVuZHMgU2FsZSB7XG4gICAgcHJpdmF0ZSBfcmVmdW5kRGF0ZT86IERhdGU7XG4gICAgcHJpdmF0ZSBfcmVmdW5kPzogbnVtYmVyO1xuXG5cbiAgICBjb25zdHJ1Y3RvcihzYWxlQm9va0l0ZW1zPzogQXJyYXk8T3JkZXJCb29rSXRlbXM+LCBvcGVyYXRpb25EYXRlVGltZT86IERhdGUsIGN1c3RvbWVySWQ/OiBudW1iZXIsIG9wZXJhdGlvbk51bWJlcj86IHN0cmluZywgdG90YWw/OiBudW1iZXIsIHJlZnVuZERhdGU/OiBEYXRlLCByZWZ1bmQ/OiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoc2FsZUJvb2tJdGVtcywgY3VzdG9tZXJJZCwgb3BlcmF0aW9uRGF0ZVRpbWUsIG9wZXJhdGlvbk51bWJlciwgdG90YWwpXG5cbiAgICAgICAgdGhpcy5fcmVmdW5kRGF0ZSA9IHJlZnVuZERhdGU7XG4gICAgICAgIHRoaXMuX3JlZnVuZCA9IHJlZnVuZDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZWZ1bmREYXRlXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHJlZnVuZERhdGUoKTogRGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZ1bmREYXRlITtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVmdW5kXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcmVmdW5kKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZ1bmQhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZWZ1bmREYXRlXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcmVmdW5kRGF0ZSh2YWx1ZTogRGF0ZSkge1xuICAgICAgICB0aGlzLl9yZWZ1bmREYXRlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlZnVuZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcmVmdW5kKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fcmVmdW5kID0gdmFsdWU7XG4gICAgfVxuXG5cblxuXG59IiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcbmltcG9ydCB7IE9yZGVyQm9va0l0ZW1zIH0gZnJvbSBcIi4vb3JkZXItYm9vay1pdGVtXCI7XG5cbmV4cG9ydCBjbGFzcyBTYWxlQ2FydCB7XG4gICAgY3VzdG9tZXJJZCE6IG51bWJlcjtcbiAgICBvcmRlckJvb2tJdGVtczogQXJyYXk8T3JkZXJCb29rSXRlbXM+O1xuXG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5vcmRlckJvb2tJdGVtcyA9IG5ldyBBcnJheTxPcmRlckJvb2tJdGVtcz47XG5cdH1cblxuXG5cblxuXG59IiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcbmltcG9ydCB7IE9yZGVyQm9va0l0ZW1zIH0gZnJvbSBcIi4vb3JkZXItYm9vay1pdGVtXCI7XG5cbmV4cG9ydCBjbGFzcyBTYWxlIHtcbiAgICBwcml2YXRlIF9vcmRlckJvb2tJdGVtcz86IEFycmF5PE9yZGVyQm9va0l0ZW1zPjtcbiAgICBwcml2YXRlIF9jdXN0b21lcklkPzogbnVtYmVyO1xuICAgIHByaXZhdGUgX29wZXJhdGlvbkRhdGVUaW1lPzogRGF0ZTtcbiAgICBwcml2YXRlIF9vcGVyYXRpb25OdW1iZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfdG90YWw/OiBudW1iZXI7XG5cblxuXHRjb25zdHJ1Y3RvcihvcmRlckJvb2tJdGVtcz86IEFycmF5PE9yZGVyQm9va0l0ZW1zPiwgY3VzdG9tZXJJZD86IG51bWJlciwgb3BlcmF0aW9uRGF0ZVRpbWU/OiBEYXRlLCBvcGVyYXRpb25OdW1iZXI/OiBzdHJpbmcsIHRvdGFsPzogbnVtYmVyKSB7XG5cdFx0dGhpcy5fb3JkZXJCb29rSXRlbXMgPSBvcmRlckJvb2tJdGVtcztcblx0XHR0aGlzLl9jdXN0b21lcklkID0gY3VzdG9tZXJJZDtcblx0XHR0aGlzLl9vcGVyYXRpb25EYXRlVGltZSA9IG9wZXJhdGlvbkRhdGVUaW1lO1xuXHRcdHRoaXMuX29wZXJhdGlvbk51bWJlciA9IG9wZXJhdGlvbk51bWJlcjtcblx0XHR0aGlzLl90b3RhbCA9IHRvdGFsO1xuXHR9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBvcmRlckJvb2tJdGVtc1xuICAgICAqIEByZXR1cm4ge0FycmF5PE9yZGVyQm9va0l0ZW1zPn1cbiAgICAgKi9cblx0cHVibGljIGdldCBvcmRlckJvb2tJdGVtcygpOiBBcnJheTxPcmRlckJvb2tJdGVtcz4ge1xuXHRcdHJldHVybiB0aGlzLl9vcmRlckJvb2tJdGVtcyE7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjdXN0b21lcklkXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGN1c3RvbWVySWQoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fY3VzdG9tZXJJZCE7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBvcGVyYXRpb25EYXRlVGltZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgb3BlcmF0aW9uRGF0ZVRpbWUoKTogRGF0ZSB7XG5cdFx0cmV0dXJuIHRoaXMuX29wZXJhdGlvbkRhdGVUaW1lITtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG9wZXJhdGlvbk51bWJlclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBvcGVyYXRpb25OdW1iZXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fb3BlcmF0aW9uTnVtYmVyITtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHRvdGFsXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IHRvdGFsKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3RvdGFsITtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIG9yZGVyQm9va0l0ZW1zXG4gICAgICogQHBhcmFtIHtBcnJheTxPcmRlckJvb2tJdGVtcz59IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgb3JkZXJCb29rSXRlbXModmFsdWU6IEFycmF5PE9yZGVyQm9va0l0ZW1zPikge1xuXHRcdHRoaXMuX29yZGVyQm9va0l0ZW1zID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBjdXN0b21lcklkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgY3VzdG9tZXJJZCh2YWx1ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5fY3VzdG9tZXJJZCA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgb3BlcmF0aW9uRGF0ZVRpbWVcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgb3BlcmF0aW9uRGF0ZVRpbWUodmFsdWU6IERhdGUpIHtcblx0XHR0aGlzLl9vcGVyYXRpb25EYXRlVGltZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgb3BlcmF0aW9uTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgb3BlcmF0aW9uTnVtYmVyKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9vcGVyYXRpb25OdW1iZXIgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHRvdGFsXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgdG90YWwodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3RvdGFsID0gdmFsdWU7XG5cdH1cblx0XG4gICAgXG59IiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcblxuZXhwb3J0IGNsYXNzIFN0b2NrIHtcbiAgICBwcml2YXRlIF9pZDpudW1iZXI7XG4gICAgcHJpdmF0ZSBfcXVhbnRpdHk6IG51bWJlcjtcbiAgICBwcml2YXRlIF9zaGVsZk51bWJlcjogc3RyaW5nO1xuICAgIHByaXZhdGUgX2Jvb2s6Qm9vaztcblxuICAgIGNvbnN0cnVjdG9yKHF1YW50aXR5PzogbnVtYmVyLCBzaGVsZk51bWJlcj86IHN0cmluZywgYm9vaz86Qm9vaykge1xuICAgICAgICB0aGlzLl9xdWFudGl0eSA9IHF1YW50aXR5ITtcbiAgICAgICAgdGhpcy5fc2hlbGZOdW1iZXIgPSBzaGVsZk51bWJlciE7XG4gICAgICAgIHRoaXMuX2Jvb2s9Ym9vayE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGlkXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGlkKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2lkO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgaWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBpZCh2YWx1ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5faWQgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGJvb2tcbiAgICAgKiBAcmV0dXJuIHtCb29rfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGJvb2soKTogQm9vayB7XG5cdFx0cmV0dXJuIHRoaXMuX2Jvb2s7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rXG4gICAgICogQHBhcmFtIHtCb29rfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGJvb2sodmFsdWU6IEJvb2spIHtcblx0XHR0aGlzLl9ib29rID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBxdWFudGl0eVxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHF1YW50aXR5KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWFudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc2hlbGZOdW1iZXJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHVibGljIGdldCBzaGVsZk51bWJlcigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2hlbGZOdW1iZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHF1YW50aXR5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBxdWFudGl0eSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNoZWxmTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBzaGVsZk51bWJlcih2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX3NoZWxmTnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG5cbn0iLCIvLyBleHBvcnQgTk9ERV9PUFRJT05TPS0tb3BlbnNzbC1sZWdhY3ktcHJvdmlkZXJcbmltcG9ydCB7IERhdGFCYXNlIH0gZnJvbSBcIi4vZGIvZGF0YWJhc2VcIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgQm9va1ByaWNlIH0gZnJvbSBcIi4vZG9tYWluL2Jvb2stcHJpY2VcIjtcbmltcG9ydCB7IEN1c3RvbWVyIH0gZnJvbSBcIi4vZG9tYWluL2N1c3RvbWVyXCI7XG5pbXBvcnQgeyBSZW50IH0gZnJvbSBcIi4vZG9tYWluL3JlbnRcIjtcbmltcG9ydCB7IE9yZGVyQm9va0l0ZW1zIH0gZnJvbSBcIi4vZG9tYWluL29yZGVyLWJvb2staXRlbVwiO1xuaW1wb3J0IHsgU3RvY2sgfSBmcm9tIFwiLi9kb21haW4vc3RvY2tcIjtcbmltcG9ydCB7IEJvb2tTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9ib29rLXNlcnZpY2VcIjtcbmltcG9ydCB7IENhbmNlbFNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL2NhbmNlbC1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBDdXN0b21lclNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL2N1c3RvbWVyLXNlcnZpY2VcIjtcbmltcG9ydCB7IFJlbnRTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9yZW50LXNlcnZpY2VcIjtcbmltcG9ydCB7IFNhbGVTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9zYWxlLXNlcnZpY2VcIjtcbmltcG9ydCB7IFN0b2NrU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2Uvc3RvY2stc2VydmljZVwiO1xuXG5leHBvcnQgbGV0IGJvb2tTZXJ2aWNlOiBCb29rU2VydmljZTtcbmV4cG9ydCBsZXQgY3VzdG9tZXJTZXJ2aWNlOiBDdXN0b21lclNlcnZpY2U7XG5leHBvcnQgbGV0IGNhbmNlbFNlcnZpY2U6IENhbmNlbFNlcnZpY2U7XG5leHBvcnQgbGV0IHJlbnRTZXJ2aWNlOiBSZW50U2VydmljZTtcbmV4cG9ydCBsZXQgc2FsZVNlcnZpY2U6IFNhbGVTZXJ2aWNlO1xuZXhwb3J0IGxldCBzdG9ja1NlcnZpY2U6IFN0b2NrU2VydmljZTtcblxubGV0IGRiOiBEYXRhQmFzZSA9IG5ldyBEYXRhQmFzZSgpO1xuaW5pdGlsaWF6ZVNlcnZpY2VzKGRiKTtcbmluaXRpbGlhemVEYXRhKCk7XG5hZGRMaXN0ZW5lckZvck1lbnVJdGVtcygpO1xuXG5mdW5jdGlvbiBpbml0aWxpYXplU2VydmljZXMoZGI6IERhdGFCYXNlKSB7XG4gIGJvb2tTZXJ2aWNlID0gbmV3IEJvb2tTZXJ2aWNlKGRiLmdldEJvb2tzTGlzdCwgZGIuZ2V0Qm9va1NwZWNpZmljYXRpb25zKTtcbiAgY3VzdG9tZXJTZXJ2aWNlID0gbmV3IEN1c3RvbWVyU2VydmljZShkYi5nZXRDdXN0b21lcnNMaXN0KTtcbiAgY2FuY2VsU2VydmljZSA9IG5ldyBDYW5jZWxTZXJ2aWNlKGRiLmdldENhbmNhbGVkU2FsZXMpO1xuICByZW50U2VydmljZSA9IG5ldyBSZW50U2VydmljZShkYi5nZXRSZW50cywgZGIuZ2V0UmVudENhcnQpO1xuICBzYWxlU2VydmljZSA9IG5ldyBTYWxlU2VydmljZShkYi5nZXRTYWxlc0xpc3QsIGRiLmdldFNhbGVDYXJ0KTtcbiAgc3RvY2tTZXJ2aWNlID0gbmV3IFN0b2NrU2VydmljZShkYi5nZXRTdG9ja3NMaXN0KTtcbiAgY29uc29sZS5sb2coXCJTZXJ2aWNlcyBpbnRpbGlhemVkLlwiKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gaW5pdGlsaWF6ZURhdGEoKSB7XG4gIGJvb2tTZXJ2aWNlLmJvb2tMaXN0ID0gYXdhaXQgYm9va1NlcnZpY2UuZ2V0QWxsQm9va3NEYXRhKCk7XG4gIHN0b2NrU2VydmljZS5zdG9ja0xpc3QgPSBhd2FpdCBzdG9ja1NlcnZpY2UuZ2V0QWxsU3RvY2tzRGF0YSgpO1xuICBjdXN0b21lclNlcnZpY2UuY3VzdG9tZXJMaXN0ID0gYXdhaXQgY3VzdG9tZXJTZXJ2aWNlLmdldEFsbEN1c3RvbWVyc0RhdGEoKTtcblxuICBjb25zb2xlLnRhYmxlKGJvb2tTZXJ2aWNlLmJvb2tMaXN0KTtcbiAgY29uc29sZS50YWJsZShzdG9ja1NlcnZpY2Uuc3RvY2tMaXN0KTtcbiAgY29uc29sZS50YWJsZShjdXN0b21lclNlcnZpY2UuY3VzdG9tZXJMaXN0KTtcbiAgY29uc29sZS5sb2coXCJEYXRhIGludGlsaWF6ZWQuXCIpO1xuXG4gIGxpc3RCb29rcztcblxufVxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lckZvck1lbnVJdGVtcygpIHtcbiAgLy9zYWxlU2VydmljZS51cGRhdGVTYWxlQ2FydCgpO1xuICBzaG93QW5kSGlkZShcImFkZEJvb2tNZW51SXRlbVwiLCBcImFkZEJvb2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcInNob3dCb29rc01lbnVJdGVtXCIsIFwibGlzdEJvb2tzU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJhZGRDdXN0b21lck1lbnVJdGVtXCIsIFwiYWRkQ3VzdG9tZXJTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImFkZFN0b2NrTWVudUl0ZW1cIiwgXCJhZGRTdG9ja1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwic2FsZUJvb2tNZW51SXRlbVwiLCBcInNhbGVCb29rU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJyZW50Qm9va01lbnVJdGVtXCIsIFwicmVudEJvb2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImNhbmNlbFNhbGVNZW51SXRlbVwiLCBcImNhbmNlbFNhbGVTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImNhbmNlbFJlbnRNZW51SXRlbVwiLCBcImNhbmNlbFJlbnRTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcInJlZnVuZEJvb2tNZW51SXRlbVwiLCBcInJlZnVuZEJvb2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcInJlbnROb3dcIiwgXCJyZW50Qm9va1NlY3Rpb25cIik7XG5cbn1cblxuZnVuY3Rpb24gc2hvd0FuZEhpZGUoYnRuSWQ6IHN0cmluZywgZWxlbWVudElkOiBzdHJpbmcpIHtcbiAgLy9zYWxlU2VydmljZS51cGRhdGVTYWxlQ2FydCgpO1xuXG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidG5JZCk7XG5cbiAgaWYgKGVsZW1lbnQgJiYgYnRuKSB7XG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBpZiAoZWxlbWVudC5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIikge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBhZGRCb29rRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtYm9vay1mb3JtXCIpO1xuaWYgKGFkZEJvb2tGb3JtICE9IG51bGwpIHtcbiAgYWRkQm9va0Zvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGFkZEJvb2tGb3JtKTtcblxuICAgIGNvbnN0IHRpdGxlID0gZm9ybURhdGEuZ2V0KFwiYm9va1RpdGxlXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBhdXRob3IgPSBmb3JtRGF0YS5nZXQoXCJib29rQXV0aG9yXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBpc2JuID0gZm9ybURhdGEuZ2V0KFwiYm9va0lzYm5cIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IHB1Ymxpc2hZZWFyID0gZm9ybURhdGEuZ2V0KFwiYm9va1B1Ymxpc2hZZWFyXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBwYWdlcyA9IGZvcm1EYXRhLmdldChcImJvb2tQYWdlc1wiKSBhcyB1bmtub3duIGFzIG51bWJlcjtcbiAgICBjb25zdCBwcmljZSA9IGZvcm1EYXRhLmdldChcImJvb2tQcmljZVwiKSBhcyB1bmtub3duIGFzIG51bWJlcjtcblxuICAgIGNvbnN0IGJvb2tQcmljZSA9IG5ldyBCb29rUHJpY2UoKTtcbiAgICBib29rUHJpY2UucHJpY2UgPSBwcmljZTtcblxuICAgIGNvbnN0IGJvb2sgPSBuZXcgQm9vayhpc2JuLCB0aXRsZSwgYXV0aG9yLCBwdWJsaXNoWWVhciwgcGFnZXMsIGJvb2tQcmljZSk7XG4gICAgbGV0IGlzU2FtZUlzYm46IGJvb2xlYW4gPSBib29rU2VydmljZS5ib29rTGlzdC5zb21lKChvYmopID0+IHtcbiAgICAgIHJldHVybiBvYmouaXNibiA9PT0gYm9vay5pc2JuO1xuICAgIH0pO1xuXG4gICAgaWYgKGlzU2FtZUlzYm4gPT09IGZhbHNlKSB7XG4gICAgICBsZXQgc3VjY2VzcyA9IGF3YWl0IGJvb2tTZXJ2aWNlLmNyZWF0ZUJvb2soYm9vayk7XG5cbiAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgIGFsZXJ0KGJvb2suaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCBFa2xlbWUgxLDFn2xlbWkgQmHFn2FyxLEgxLBsZSBUYW1hbWxhbm3EscWfdMSxci5cIik7XG4gICAgICAgIGFkZEJvb2tGb3JtLnJlc2V0KCk7XG4gICAgICAgIGxpc3RCb29rcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQoYm9vay5pc2JuICsgXCIgbnVtYXJhbMSxIGtpdGFwIEVrbGVtZSDEsMWfbGVtaSBTxLFyYXPEsW5kYSBCaXIgSGF0YSBvbHXFn3R1LlwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBwcmV2ZW50IHJlbG9hZCBwYWdlXG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KFwiQXluxLEgSVNCTiBudW1yYXPEsW5hIHNhaGlwIGlraW5jaSBiaXIga2l0YXAgZWtsZW5lbXouXCIpO1xuICAgIH1cblxuXG4gIH07XG59XG5cbmNvbnN0IGFkZFN0b2NrRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLXN0b2NrLWZvcm1cIikpO1xuaWYgKGFkZFN0b2NrRm9ybSkge1xuICBhZGRTdG9ja0Zvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShhZGRTdG9ja0Zvcm0pO1xuXG4gICAgY29uc3QgaXNibiA9IGZvcm1EYXRhLmdldChcImJvb2tJc2JuRm9yQWRkU3RvY2tcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IHF1YW50dGl5ID0gZm9ybURhdGEuZ2V0KFwic3RvY2tRdWFudGl0eVwiKSBhcyB1bmtub3duIGFzIG51bWJlcjtcbiAgICBjb25zdCBzaGVsZk51bWJlciA9IGZvcm1EYXRhLmdldChcInNoZWxmTnVtYmVyXCIpIGFzIHN0cmluZztcblxuICAgIGNvbnN0IGJvb2sgPSBib29rU2VydmljZS5ib29rTGlzdC5maW5kKGIgPT4gYi5pc2JuID09PSBpc2JuKSE7XG5cbiAgICBpZiAoYm9vaykge1xuICAgICAgY29uc3Qgc3RvY2sgPSBuZXcgU3RvY2socXVhbnR0aXksIHNoZWxmTnVtYmVyLCBib29rKTtcbiAgICAgIGxldCBpc09rID0gYXdhaXQgc3RvY2tTZXJ2aWNlLmNyZWF0ZVN0b2NrKHN0b2NrKTtcblxuICAgICAgaWYgKGlzT2spIHtcbiAgICAgICAgYWxlcnQoaXNibiArIFwiIGlzYm4gbnVtYXJhbMSxIGtpdGFwdGFuLCBcIiArIHF1YW50dGl5ICsgXCIga2FkYXIgc2lzdGVtZSBzdG9rIGVrbGVubWnFn3Rpci5cIik7XG4gICAgICAgIGF3YWl0IGluaXRpbGlhemVEYXRhKCk7XG4gICAgICAgIGF3YWl0IGxpc3RCb29rcygpO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGFsZXJ0KFwiU3RvayBla2xlbm1leWUgw6dhbMSxxZ/EsWxhbiBraXRhYmEgYWl0IGlzYm4gbnVtYXJhc8SxIGhhdGFsxLFkxLFyLlwiKTtcbiAgICB9XG5cbiAgICBhZGRTdG9ja0Zvcm0ucmVzZXQoKTtcbiAgICByZXR1cm4gZmFsc2U7IC8vIHByZXZlbnQgcmVsb2FkXG4gIH07XG59XG5cbi8qKlxuICogTcO8xZ90ZXJpIGVrbGVtZSBmb3JtdSBzdWJtaXQgb2xhecSxbsSxIG1vY2sgY3VzdG9tZXJTZXJ2aWNlIGRla2kgbW9jayBzZXJ2aXNlIGJhxJ9sYWTEsW1cbiAqL1xuY29uc3QgYWRkQ3VzdG9tZXJGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtY3VzdG9tZXItZm9ybVwiKSk7XG5pZiAoYWRkQ3VzdG9tZXJGb3JtKSB7XG4gIGFkZEN1c3RvbWVyRm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGFkZEN1c3RvbWVyRm9ybSk7XG5cbiAgICBjb25zdCBuYW1lID0gZm9ybURhdGEuZ2V0KFwiY3VzdG9tZXJOYW1lXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBzdXJuYW1lID0gZm9ybURhdGEuZ2V0KFwiY3VzdG9tZXJTdXJuYW1lXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBwaG9uZU51bWJlciA9IGZvcm1EYXRhLmdldChcImN1c3RvbWVyUGhvbmVOdW1iZXJcIikgYXMgc3RyaW5nO1xuXG4gICAgY29uc3QgY3VzdG9tZXIgPSBuZXcgQ3VzdG9tZXIobmFtZSwgc3VybmFtZSwgcGhvbmVOdW1iZXIpO1xuICAgIGxldCBzdWNjZXNzID0gYXdhaXQgY3VzdG9tZXJTZXJ2aWNlLmNyZWF0ZUN1c3RvbWVyKGN1c3RvbWVyKTtcblxuICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICBhbGVydChcIk3DvMWfdGVyaSBFa2xlbWUgxLDFn2xlbWkgQmHFn2FyxLEgxLBsZSBUYW1hbWxhbm3EscWfdMSxci4gXCIpO1xuICAgICAgYWRkQ3VzdG9tZXJGb3JtLnJlc2V0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KFwiTcO8xZ90ZXJpIEVrbGVtZSDEsMWfbGVtaSBTxLFyYXPEsW5kYSBiaXIgaGF0YSBpbGUga2FyxZ/EsWzEsWxkxLEuIFwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7IC8vIHByZXZlbnQgcmVsb2FkXG4gIH07XG59XG5cbi8qKkJ1cmFkYSBtb2NrIHNlcnZpc2kgeW9rIMOnw7xua8O8IGJ1cmFkYSBraXRhcCBzYXTEscWfxLEgeWFwxLFsxLFya2VuLCBraXRhcGxhcsSxIHNlcGV0ZSBla2xpeW9ydXouXG4gKiBTZXBldGUgZWtsZWRpa3RlbiBzb25yYSBidG5TYWxlIGlkbGkgYnV0b251biBjbGljayBldmVudGksIG1vY2sgc2VydmlzaSDDp2HEn8SxcsSxeW9yXG4gKi9cbmNvbnN0IHNhbGVCb29rRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2FsZS1ib29rLWZvcm1cIikpO1xuaWYgKHNhbGVCb29rRm9ybSkge1xuICBzYWxlQm9va0Zvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKHNhbGVCb29rRm9ybSk7XG4gICAgXG4gICAgY29uc3QgaXNibiA9IGZvcm1EYXRhLmdldChcImlzYm5Gb3JTYWxlXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBjdXN0b21lcklkID0gcGFyc2VJbnQoZm9ybURhdGEuZ2V0KFwiY3VzdG9tZXJJZEZvclNhbGVcIikgYXMgc3RyaW5nKTtcbiAgICBjb25zdCBxdWFudGl0eSA9IHBhcnNlSW50KGZvcm1EYXRhLmdldChcInF1YW50aXR5Rm9yU2FsZVwiKSBhcyBzdHJpbmcpO1xuXG4gICAgY29uc3QgYm9vayA9IGF3YWl0IGJvb2tTZXJ2aWNlLmdldEJvb2soaXNibik7XG4gICAgY29uc3QgaXNWYWxpZEN1c3RvbWVyID0gYXdhaXQgY3VzdG9tZXJTZXJ2aWNlLmdldEN1c3RvbWVyKGN1c3RvbWVySWQpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChib29rKSB7XG4gICAgICAgIGxldCBzdG9jayA9IGF3YWl0IHN0b2NrU2VydmljZS5nZXRTdG9ja0J5Qm9va0lkKGJvb2suaWQpITtcbiAgICAgICAgaWYgKHN0b2NrKSB7XG4gICAgICAgICAgaWYgKHN0b2NrLnF1YW50aXR5ID49IHF1YW50aXR5KSB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZEN1c3RvbWVyKSB7XG4gICAgICAgICAgICAgIHNhbGVTZXJ2aWNlLmFkZEJvb2tUb0NhcnQoYm9vaywgcXVhbnRpdHksIGN1c3RvbWVySWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYWxlcnQoY3VzdG9tZXJJZCArIFwiIG51bWFyYWzEsSBtw7zFn3Rlcmkga2F5xLF0bMSxIGRlxJ9pbGRpci5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYWxlcnQocXVhbnRpdHkgKyBcIiBrYWRhciBraXRhcCBkw7xra2FuZGEgbWV2Y3V0IGRlxJ9pbGRpci5cIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFsZXJ0KGBEw7xra2FuZGEgJHtpc2JufSBudW1hcmFsxLEga2l0YWLEsW4gc3RvxJ91IG1ldmN1dCBkZcSfaWxkaXIuYCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KGlzYm4gKyBcIiBudW1hcmFsxLEga2l0YXAgeW9rdHVyLlwiKTtcbiAgICAgIH1cblxuXG4gICAgICBzYWxlQm9va0Zvcm0ucmVzZXQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvcik7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogS2l0YXAgc2F0xLHFn8SxIGnDp2luIGnFn2xlbSB5YXDEsWzEsXJrZW4ga2l0YXBsYXIgc2VwZXRlIGVrbGVuaXlvci5cbiAqIEVrbGVtZSBpxZ9sZW1pIGJpdHRpa3RlbiBzb25yYSBzYXTEsW4gYWxtIGnDp2luIGJ1IGJ1dG9uYSB0xLFrbGFuZMSxxJ/EsW5kYSBzZXJ2aXNlIGdpZGlwIHNlcGV0dGVraSBraXRhcGxhcsSxbiBzYXTEscWfxLEgZ2Vyw6dla2xlxZ9peW9yXG4gKiBCdXJhZGEgZGnEn2VyIGJ1dG9ubGFyZGEgb2xkdcSfdSBnaWJpIGRpcmVrIG1vY2sgc2VydmlzaW5lIGJhxJ9sYW5tYWsgeWVyaW5lIHNlcnZpc2UgZ2l0bWVrIGR1cnVtdW5kYXnEsXouIFxuICogw4fDvG5rw7wgc2VydmlzdGUgU2FsZSBuZXNuZXNpbmkgb2x1xZ90dXJ1cCBtb2NrIHNlcnZpc2luZSBwYXJhbWV0cmUgb2xhcmFrIGdlw6dpeW9ydXouXG4gKi9cbmNvbnN0IGJ0blNhbGUgPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuU2FsZVwiKSk7XG5idG5TYWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGlmIChzYWxlU2VydmljZS5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPT09IDApIHtcblxuICAgIGFsZXJ0KFwiU2VwZXR0ZSDDvHLDvG4geW9rLiBMw7x0ZmVuIMO2bmNlIMO8csO8biBla2xleWluaXpcIik7XG4gIH0gZWxzZSB7XG4gICAgc2FsZVNlcnZpY2UuY2FydFRvU2FsZSgpO1xuICB9XG5cbn0pO1xuXG4vKipcbiAqIEtpdGFwbGFyxLEgbGlzdGVsZW1layBpw6dpbiB0xLFrbGFuxLFsYW4gYnV0b24gY2xpY2sgZXZlbnRpXG4gKi9cbmNvbnN0IGJ0blNob3dCb29rc01lbnVJdGVtID0gPEhUTUxFbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3dCb29rc01lbnVJdGVtXCIpKTtcbmJ0blNob3dCb29rc01lbnVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cbiAgbGlzdEJvb2tzKCk7XG59KVxuXG5jb25zdCBjYW5jZWxTYWxlRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW5jZWwtc2FsZS1mb3JtXCIpO1xuaWYgKGNhbmNlbFNhbGVGb3JtKSB7XG4gIGNhbmNlbFNhbGVGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShjYW5jZWxTYWxlRm9ybSk7XG4gICAgY29uc3Qgc2FsZU51bWJlciA9IGZvcm1EYXRhLmdldChcInNhbGVOdW1iZXJmb3JDYW5jZWxcIikgYXMgc3RyaW5nO1xuXG5cbiAgICBsZXQgaXNFeGlzdFNhbGUgPSBhd2FpdCBzYWxlU2VydmljZS5pc0V4aXN0U2FsZShzYWxlTnVtYmVyKTtcblxuICAgIGlmIChpc0V4aXN0U2FsZSA9PT0gdHJ1ZSkge1xuXG4gICAgICBsZXQgc3RhdGUgPSBhd2FpdCBjYW5jZWxTZXJ2aWNlLmNhbmNlbFNhbGVNb2NrKHNhbGVOdW1iZXIpO1xuXG4gICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgYWxlcnQoc2FsZU51bWJlciArIFwiIG51bWFyYWzEsSBzYXTEscWfIGlwdGFsIGVkaWxtacWfdGlyLlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KHNhbGVOdW1iZXIgKyBcIiBudW1hcmFsxLEgc2F0xLHFnyBpcHRhbCBlZGlsaXJrZW4gaGF0YSBtZXlkYW5hIGdlbGRpLlwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQoc2FsZU51bWJlciArIFwiIG51bWFyYWzEsSBzYXTEscWfIGJ1bHVuYW1hbcSxxZ90xLFyLiBUZWtyYXIgZGVuZXlpbml6LlwiKTtcbiAgICB9XG5cbiAgfVxufVxuXG5jb25zdCBjYW5jZWxSZW50Rm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW5jZWwtcmVudC1mb3JtXCIpO1xuaWYgKGNhbmNlbFJlbnRGb3JtKSB7XG4gIGNhbmNlbFJlbnRGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShjYW5jZWxSZW50Rm9ybSk7XG4gICAgY29uc3QgcmVudE51bWJlciA9IGZvcm1EYXRhLmdldChcInJlbnROdW1iZXJmb3JDYW5jZWxcIikgYXMgc3RyaW5nO1xuXG4gICAgbGV0IHN0YXRlID0gYXdhaXQgY2FuY2VsU2VydmljZS5jYW5jZWxSZW50TW9jayhyZW50TnVtYmVyKTtcblxuICAgIGlmIChzdGF0ZSkge1xuICAgICAgYWxlcnQocmVudE51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbGFtYSBpcHRhbCBlZGlsbWnFn3Rpci5cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KHJlbnROdW1iZXIgKyBcIiBudW1hcmFsxLEga2lyYWxtYSBidWx1bmFtYW3EscWfdMSxci4gVGVrcmFyIGRlbmV5aW5pei5cIik7XG4gICAgfVxuICB9XG59XG5cbi8qKkJ1cmFkYSBhcGkgc2VydmlzaSB5b2sgw6fDvG5rw7wgYnVyYWRhIGtpdGFwIGtpcmFsYW1hc8SxIHlhcMSxbMSxcmtlbiwga2l0YXBsYXLEsSBzZXBldGUgZWtsaXlvcnV6LlxuICogU2VwZXRlIGVrbGVkaWt0ZW4gc29ucmEgYnRuUmVudCBpZGxpIGJ1dG9udW4gY2xpY2sgZXZlbnRpLCBhcGkgcG9zdCBzZXJ2aXNpIMOnYcSfxLFyxLF5b3JcbiAqL1xuY29uc3QgcmVudEJvb2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZW50LWJvb2stZm9ybVwiKSk7XG5pZiAocmVudEJvb2tGb3JtKSB7XG4gIHJlbnRCb29rRm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEocmVudEJvb2tGb3JtKTtcblxuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJpc2JuRm9yUmVudFwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgYm9vayA9IGF3YWl0IGJvb2tTZXJ2aWNlLmdldEJvb2soaXNibik7XG5cbiAgICBjb25zdCBjdXN0b21lcklkID0gcGFyc2VJbnQoZm9ybURhdGEuZ2V0KFwiY3VzdG9tZXJJZEZvclJlbnRcIikgYXMgc3RyaW5nKTtcbiAgICAvL2lzVmFsaWRDdXN0b21lciByZXN0IHNlcnZpc3RlbiBkw7ZlbmVuIHZlcml5ZSBnw7ZyZSDFn2VraWxsZW5lY2VrXG4gICAgY29uc3QgaXNWYWxpZEN1c3RvbWVyID0gYXdhaXQgY3VzdG9tZXJTZXJ2aWNlLmdldEN1c3RvbWVyKGN1c3RvbWVySWQpO1xuXG4gICAgY29uc3QgcXVhbnRpdHkgPSBwYXJzZUludChmb3JtRGF0YS5nZXQoXCJxdWFudGl0eUZvclJlbnRcIikgYXMgc3RyaW5nKTtcblxuXG5cbiAgICB0cnkge1xuICAgICAgaWYgKGJvb2spIHtcbiAgICAgICAgY29uc3Qgc3RvY2sgPSBhd2FpdCBzdG9ja1NlcnZpY2UuZ2V0U3RvY2tCeUJvb2tJZChib29rLmlkKSE7XG4gICAgICAgIGlmIChzdG9jaykge1xuICAgICAgICAgIGlmIChzdG9jay5xdWFudGl0eSA+PSBxdWFudGl0eSkge1xuICAgICAgICAgICAgaWYgKGlzVmFsaWRDdXN0b21lcikge1xuICAgICAgICAgICAgICByZW50U2VydmljZS5hZGRCb29rVG9DYXJ0KGJvb2ssIHF1YW50aXR5LCBjdXN0b21lcklkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFsZXJ0KGN1c3RvbWVySWQgKyBcIiBudW1hcmFsxLEgbcO8xZ90ZXJpIGthecSxdGzEsSBkZcSfaWxkaXIuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFsZXJ0KHF1YW50aXR5ICsgXCIga2FkYXIga2l0YXAgZMO8a2thbmRhIG1ldmN1dCBkZcSfaWxkaXIuXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbGVydChgRMO8a2thbmRhICR7aXNibn0gbnVtYXJhbMSxIGtpdGFixLFuIHN0b8SfdSBtZXZjdXQgZGXEn2lsZGlyLiDDlm5jZSBzdG9rIGVrbGV5aW5pemApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChpc2JuICsgXCIgbnVtYXJhbMSxIGtpdGFwIHlva3R1ci5cIik7XG4gICAgICB9XG5cbiAgICAgIHJlbnRCb29rRm9ybS5yZXNldCgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFsZXJ0KGVycm9yKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBLaXRhcCBzYXTEscWfxLEgacOnaW4gacWfbGVtIHlhcMSxbMSxcmtlbiBraXRhcGxhciBzZXBldGUgZWtsZW5kaS5cbiAqIEVrbGVtZSBpxZ9sZW1pIGJpdHRpa3RlbiBzb25yYSBzYXTEsW4gYWxtIGnDp2luIGJ1IGJ1dG9uYSB0xLFrbGFuZMSxxJ/EsW5kYSBzZXJ2aXNlIGdpZGlwIHNlcGV0dGVraSBraXRhcGxhcsSxbiBzYXTEscWfxLEgZ2Vyw6dla2xlxZ9peW9yXG4gKiBCdXJhZGEgZGnEn2VyIGJ1dG9ubGFyZGEgb2xkdcSfdSBnaWJpIGRpcmVrIGFwaSBzZXJ2aXNpbmUgYmHEn2xhbm1hayB5ZXJpbmUgc2VydmlzZSBnaXRtZWsgZHVydW11bmRhecSxei4gXG4gKiDDh8O8bmvDvCBzZXJ2aXN0ZSBTYWxlIG5lc25lc2luaSBvbHXFn3R1cnVwIGFwaSBzZXJ2aXNpbmUgcGFyYW1ldHJlIG9sYXJhayBnZcOnZWNlxJ9pei5cbiAqL1xuY29uc3QgYnRuUmVudCA9IDxIVE1MQnV0dG9uRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG5SZW50XCIpKTtcbmJ0blJlbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaWYgKHJlbnRTZXJ2aWNlLnJlbnRDYXJ0Lm9yZGVyQm9va0l0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgIGFsZXJ0KFwiU2VwZXR0ZSDDvHLDvG4geW9rLiBMw7x0ZmVuIMO2bmNlIMO8csO8biBla2xleWluaXpcIik7XG4gIH0gZWxzZSB7XG4gICAgcmVudFNlcnZpY2UuY2FydFRvUmVudCgpO1xuICB9XG5cbn0pO1xuXG5jb25zdCByZWZ1bmRCb29rRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVmdW5kLWJvb2stZm9ybVwiKSk7XG5pZiAocmVmdW5kQm9va0Zvcm0pIHtcbiAgcmVmdW5kQm9va0Zvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEocmVmdW5kQm9va0Zvcm0pO1xuICAgIGNvbnN0IHJlbnROdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJyZW50TnVtYmVyZm9yUmVmdW5kXCIpIGFzIHN0cmluZztcblxuICAgIGxldCBpc0V4aXN0UmVudCA9IGF3YWl0IHJlbnRTZXJ2aWNlLmlzRXhpc3RSZW50KHJlbnROdW1iZXIpO1xuICAgIGlmIChpc0V4aXN0UmVudCA9PT0gdHJ1ZSkge1xuXG4gICAgICBsZXQgcmVudCA9IGF3YWl0IHJlbnRTZXJ2aWNlLnJlZnVuZFJlbnQocmVudE51bWJlcik7XG5cbiAgICAgIGlmIChyZW50KSB7XG4gICAgICAgIGFsZXJ0KHJlbnQub3BlcmF0aW9uTnVtYmVyICsgXCIgbnVtYXJhbMSxIGtpcmFsYW1hIGdlcmkgYWzEsW5txLHFn3TEsXIuXCIpO1xuICAgICAgICBhbGVydChcIkdlcmkgw7ZkZW1lIG1pa3RhcsSxOlwiICsgcmVudC5yZWZ1bmQgKyBcIiDigrogLlwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQocmVudE51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbGFtYSBpcHRhbCBlZGlsaXJrZW4gaGF0YSBtZXlkYW5hIGdlbGRpLlwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQocmVudE51bWJlciArIFwiIG51bWFyYWzEsSBraXJhbGFtYSBidWx1bmFtYW3EscWfdMSxci4gVGVrcmFyIGRlbmV5aW5pei5cIik7XG4gICAgfVxuXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RCb29rcygpIHtcblxuICBib29rU2VydmljZS5ib29rTGlzdCA9IGF3YWl0IGJvb2tTZXJ2aWNlLmdldEFsbEJvb2tzRGF0YSgpO1xuICBzdG9ja1NlcnZpY2Uuc3RvY2tMaXN0ID0gYXdhaXQgc3RvY2tTZXJ2aWNlLmdldEFsbFN0b2Nrc0RhdGEoKTtcblxuICBjb25zdCBsaXN0Qm9va3NEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxpc3RCb29rc1wiKTtcblxuICBpZiAobGlzdEJvb2tzRGl2KSB7XG4gICAgbGV0IHJvdywgY29sdW1uO1xuXG5cbiAgICB3aGlsZSAobGlzdEJvb2tzRGl2Lmxhc3RDaGlsZCAmJiBsaXN0Qm9va3NEaXYuY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgbGlzdEJvb2tzRGl2LnJlbW92ZUNoaWxkKGxpc3RCb29rc0Rpdi5sYXN0Q2hpbGQpO1xuICAgIH1cblxuICAgIGJvb2tTZXJ2aWNlLmJvb2tMaXN0LmZvckVhY2goZWxlbWVudCA9PiB7XG5cbiAgICAgIC8vYWxlcnQoc3RvY2tTZXJ2aWNlLmdldFN0b2NrUXVhbnRpdHkoZWxlbWVudC5pc2JuKSk7XG5cbiAgICAgIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICByb3cuY2xhc3NOYW1lID0gXCJyb3ctbGlzdC1ib29rXCI7XG5cbiAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJjb2x1bW4tbGlzdC1ib29rXCI7XG4gICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbGVtZW50LmlzYm4udG9TdHJpbmcoKTtcbiAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gZWxlbWVudC5uYW1lLnRvU3RyaW5nKCk7XG4gICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVsZW1lbnQuYXV0aG9yLnRvU3RyaW5nKCk7XG4gICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcblxuICAgICAgbGV0IGlzVmFsaWRTY3RvY2s6IGJvb2xlYW4gPSBzdG9ja1NlcnZpY2Uuc3RvY2tMaXN0LnNvbWUocyA9PiBzLmJvb2suaWQgPT09IGVsZW1lbnQuaWQpO1xuICAgICAgbGV0IHEgPSAwO1xuXG4gICAgICBpZiAoaXNWYWxpZFNjdG9jayA9PT0gdHJ1ZSkge1xuICAgICAgICBxID0gc3RvY2tTZXJ2aWNlLnN0b2NrTGlzdC5maW5kKHMgPT4gcy5ib29rLmlkID09PSBlbGVtZW50LmlkKSEucXVhbnRpdHk7XG4gICAgICB9XG5cbiAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IHEudG9TdHJpbmcoKTtcbiAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gZWxlbWVudC5ib29rUHJpY2UucHJpY2UudG9TdHJpbmcoKSArIFwiIOKCulwiO1xuICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgIGxpc3RCb29rc0Rpdi5hcHBlbmRDaGlsZChyb3cpO1xuICAgIH0pO1xuICB9XG5cbn0iLCIvKipcbiAqIEBhdXRob3IgTWVobWV0IEUuIEFrY2FuIC0gMjEuMTAuMjJcbiAqL1xuaW1wb3J0IHsgc3RvY2tTZXJ2aWNlIH0gZnJvbSBcIi4uXCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rXCI7XG5pbXBvcnQgeyBCb29rUHJpY2UgfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2stcHJpY2VcIjtcblxuZXhwb3J0IGNsYXNzIEJvb2tTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9ib29rTGlzdDogQXJyYXk8Qm9vaz47XG4gICAgcHJpdmF0ZSBfYm9va1NwZWNpZmljYXRpb246IEFycmF5PEJvb2tQcmljZT47XG4gICAgYm9va0FwaTogc3RyaW5nID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvdjEvYm9va3MnO1xuXG4gICAgY29uc3RydWN0b3IoYm9va0xpc3Q6IEFycmF5PEJvb2s+LCBib29rU3BlY2lmaWNhdGlvbjogQXJyYXk8Qm9va1ByaWNlPikge1xuICAgICAgICB0aGlzLl9ib29rTGlzdCA9IGJvb2tMaXN0O1xuICAgICAgICB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbiA9IGJvb2tTcGVjaWZpY2F0aW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBib29rTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PEJvb2s+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgYm9va0xpc3QoKTogQXJyYXk8Qm9vaz4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYm9va0xpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGJvb2tTcGVjaWZpY2F0aW9uXG4gICAgICogQHJldHVybiB7QXJyYXk8Qm9va1ByaWNlPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGJvb2tTcGVjaWZpY2F0aW9uKCk6IEFycmF5PEJvb2tQcmljZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYm9va1NwZWNpZmljYXRpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGJvb2tMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxCb29rPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGJvb2tMaXN0KHZhbHVlOiBBcnJheTxCb29rPikge1xuICAgICAgICB0aGlzLl9ib29rTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rU3BlY2lmaWNhdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXk8Qm9va1ByaWNlPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGJvb2tTcGVjaWZpY2F0aW9uKHZhbHVlOiBBcnJheTxCb29rUHJpY2U+KSB7XG4gICAgICAgIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9uID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcGFyYW1ldHJlIG9sYXJhayBnZWxlbiBpc2JuIGJpbGdpc2luZSBnw7ZyZSBpbGdpbGkga2l0YWLEsSBidWx1ci5cbiAgICAgKiBAcGFyYW0gaXNibiBCdWx1bmFjYWsgb2xhbiBraXRhYsSxbiBpc2JuIG51bWFyYXPEsVxuICAgICAqIEByZXR1cm5zIGlzYm4gbnVtYXJhc8SxbmEgZ8O2cmUgaWxnaWxpIGtpdGFixLEgQm9vayBuZXNuZXNpIG9sYXJhayBnZXJpIGTDtm5kw7xyw7xyXG4gICAgICovXG4gICAgYXN5bmMgZ2V0Qm9vayhpc2JuOiBzdHJpbmcpOiBQcm9taXNlPEJvb2s+IHtcbiAgICAgICAgLy9CdXJhZGFuIHVuZGVmaW5lZGVkIC8gbnVsbCBiaXIgZGXEn2VyIGRlIGTDtm5lYmlsZWNlxJ9pIGnDp2luIGhhdGEgdmVyaXlvclxuICAgICAgICAvL2FtYSBiaXogc29uZGFraSAhIG9wZXJhdMO2csO8IGlsZSBudWxsIGRlxJ9lciBkw7ZubWV5ZWNlayBkaXllIGdhcmFudGkgdmVyaXlvcnV6XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5ib29rQXBpICsgXCIvcT9pc2JuPVwiICsgaXNibiwge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgYXMgYW55O1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgIGNvbnN0IGdldFJlc3VsdCA9IDxCb29rPnJlc3VsdDtcbiAgICAgICAgcmV0dXJuIGdldFJlc3VsdDtcblxuICAgIH1cblxuICAgIGFzeW5jIGdldEFsbEJvb2tzRGF0YSgpOiBQcm9taXNlPEFycmF5PEJvb2s+PiB7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmJvb2tBcGksIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGNvbnN0IGdldFJlc3VsdCA9IDxBcnJheTxCb29rPj5yZXN1bHQ7XG4gICAgICAgIHJldHVybiBnZXRSZXN1bHQ7XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRlQm9vayhiOiBCb29rKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuYm9va0FwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaXNibjogYi5pc2JuLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBiLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcjogYi5hdXRob3IsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VzOiBiLnBhZ2VzLFxuICAgICAgICAgICAgICAgICAgICBwdWJsaXNoWWVhcjogYi5wdWJsaXNoWWVhcixcbiAgICAgICAgICAgICAgICAgICAgYm9va1ByaWNlQ3JlYXRlRHRvOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmljZTogYi5ib29rUHJpY2UucHJpY2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlc3Qgc2VydmlzaW5kZW4gZMO2bmVuIGNldmFwID0+XCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmJvb2tMaXN0ID0gYXdhaXQgdGhpcy5nZXRBbGxCb29rc0RhdGEoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgQ2FuY2VsIH0gZnJvbSBcIi4uL2RvbWFpbi9jYW5jZWxcIjtcblxuZXhwb3J0IGNsYXNzIENhbmNlbFNlcnZpY2Uge1xuICAgIHByaXZhdGUgX2NhbmNlbGxlZExpc3Q6IEFycmF5PENhbmNlbD47XG4gICAgY2FuY2VsU2FsZUFwaTogc3RyaW5nID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvdjEvc2FsZXMnO1xuICAgIGNhbmNlbFJlbnRBcGk6IHN0cmluZyA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL3JlbnRzJztcblxuICAgIGNvbnN0cnVjdG9yKGNhbmNlbGxlZExpc3Q6IEFycmF5PENhbmNlbD4pIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsbGVkTGlzdCA9IGNhbmNlbGxlZExpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGNhbmNlbGxlZFNhbGVzTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PENhbmNlbFNhbGU+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgY2FuY2VsbGVkTGlzdCgpOiBBcnJheTxDYW5jZWw+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbGxlZExpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGNhbmNlbGxlZFNhbGVzTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8Q2FuY2VsU2FsZT59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBjYW5jZWxsZWRMaXN0KHZhbHVlOiBBcnJheTxDYW5jZWw+KSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbGxlZExpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlRGlmZkhvdXJzKGQxOiBEYXRlLCBkMjogRGF0ZSk6IG51bWJlciB7XG5cbiAgICAgICAgbGV0IGRpZmZNaWxpczogbnVtYmVyID0gKGQxLmdldFRpbWUoKSAtIGQyLmdldFRpbWUoKSk7Ly8gbWlsaSBzZWNvbmRzXG4gICAgICAgIGxldCBkaWZmSG91ciA9IE1hdGguZmxvb3IoZGlmZk1pbGlzIC8gMTAwMCAvIDYwIC8gNjApOyAvLyAvMTAwMCA+IHNlY29uZCAvIDYwID4gbWluIC8gNjAgPiBob3VyXG4gICAgICAgIHJldHVybiBkaWZmSG91cjtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FuY2VsU2FsZShjYW5jZWw6IENhbmNlbCk6IHZvaWQge1xuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXIgPSB0aGlzLmNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQoY2FuY2VsKTtcbiAgICAgICAgY2FuY2VsLnJlZnVuZCA9IHJlZnVuZDtcbiAgICAgICAgdGhpcy5jYW5jZWxsZWRMaXN0LnB1c2goY2FuY2VsKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlQ2FuY2VsU2FsZVJlZnVuZChjYW5jZWxTYWxlOiBDYW5jZWwpOiBudW1iZXIge1xuICAgICAgICBsZXQgZGlmZiA9IHRoaXMuY2FsY3VsYXRlRGlmZkhvdXJzKGNhbmNlbFNhbGUuY2FuY2VsZWREYXRlVGltZSwgY2FuY2VsU2FsZS5jYW5jZWxUeXBlLm9wZXJhdGlvbkRhdGVUaW1lKVxuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKGRpZmYgPiAyNCkge1xuICAgICAgICAgICAgcmVmdW5kID0gY2FuY2VsU2FsZS5jYW5jZWxUeXBlLnRvdGFsICogMC43NTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IGNhbmNlbFNhbGUuY2FuY2VsVHlwZS50b3RhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVmdW5kO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBjYW5jZWxTYWxlTW9jayhvcGVyYXRpb25OdW1iZXI6IHN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmNhbmNlbFNhbGVBcGkgKyBcIi9cIiArIG9wZXJhdGlvbk51bWJlciwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vVG9kbyBzYWxlIG1vY2sgc2VydmlzaW5lIGRlbGV0ZSBpc3RlxJ9pIGF0xLFwIG8gc2FsZSBuZXNuZXNpbmkgc2lsZWNla1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICAvLyBEZWxldGUgacWfbGVtbmRlIC5qc29uIMWfZWtsxZ9uZGUgc2VyaWxpemUgeWFwxLFsYW1heiwgaGF0YSB2ZXJpclxuICAgICAgICAgICAgICAgIC8vIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cblxuXG4gICAgfVxuXG4gICAgcHVibGljIGNhbmNlbFJlbnQoY2FuY2VsOiBDYW5jZWwpIHtcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyID0gdGhpcy5jYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kKGNhbmNlbCk7XG4gICAgICAgIGNhbmNlbC5yZWZ1bmQgPSByZWZ1bmQ7XG4gICAgICAgIHRoaXMuY2FuY2VsbGVkTGlzdC5wdXNoKGNhbmNlbCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbGN1bGF0ZUNhbmNlbFJlbnRSZWZ1bmQoY2FuY2VsUmVudDogQ2FuY2VsKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGRpZmYgPSB0aGlzLmNhbGN1bGF0ZURpZmZIb3VycyhjYW5jZWxSZW50LmNhbmNlbGVkRGF0ZVRpbWUsIGNhbmNlbFJlbnQuY2FuY2VsVHlwZS5vcGVyYXRpb25EYXRlVGltZSlcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyO1xuXG4gICAgICAgIGlmIChkaWZmID4gMjQpIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IGNhbmNlbFJlbnQuY2FuY2VsVHlwZS50b3RhbCAqIDAuNzU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWZ1bmQgPSBjYW5jZWxSZW50LmNhbmNlbFR5cGUudG90YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlZnVuZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgY2FuY2VsUmVudE1vY2sob3BlcmF0aW9uTnVtYmVyOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuY2FuY2VsUmVudEFwaSArIFwiL1wiICsgb3BlcmF0aW9uTnVtYmVyLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG59IiwiaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi4vZG9tYWluL2N1c3RvbWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21lclNlcnZpY2Uge1xuICAgIHByaXZhdGUgX2N1c3RvbWVyTGlzdDogQXJyYXk8Q3VzdG9tZXI+O1xuICAgIHByaXZhdGUgY3VzdG9tZXJBcGk6IHN0cmluZyA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS92MS9jdXN0b21lcnNcIjtcblxuICAgIGNvbnN0cnVjdG9yKGN1c3RvbWVyTGlzdDogQXJyYXk8Q3VzdG9tZXI+KSB7XG4gICAgICAgIHRoaXMuX2N1c3RvbWVyTGlzdCA9IGN1c3RvbWVyTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgY3VzdG9tZXJMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8Q3VzdG9tZXI+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgY3VzdG9tZXJMaXN0KCk6IEFycmF5PEN1c3RvbWVyPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXN0b21lckxpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGN1c3RvbWVyTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8Q3VzdG9tZXI+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgY3VzdG9tZXJMaXN0KHZhbHVlOiBBcnJheTxDdXN0b21lcj4pIHtcbiAgICAgICAgdGhpcy5fY3VzdG9tZXJMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldEFsbEN1c3RvbWVyc0RhdGEoKTogUHJvbWlzZTxBcnJheTxDdXN0b21lcj4+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmN1c3RvbWVyQXBpLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgIGNvbnN0IGdldFJlc3VsdCA9IDxBcnJheTxDdXN0b21lcj4+cmVzdWx0O1xuICAgICAgICByZXR1cm4gZ2V0UmVzdWx0O1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBjcmVhdGVDdXN0b21lcihuZXdDdXN0b21lcjogQ3VzdG9tZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5jdXN0b21lckFwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbmV3Q3VzdG9tZXIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc3VyTmFtZTogbmV3Q3VzdG9tZXIuc3VyTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IG5ld0N1c3RvbWVyLnBob25lTnVtYmVyXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVzdCBzZXJ2aXNpbmRlbiBkw7ZuZW4gY2V2YXAgPT5cIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgZ2V0Q3VzdG9tZXIoY3VzdG9tZXJJZDogbnVtYmVyKTogUHJvbWlzZTxDdXN0b21lcj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmN1c3RvbWVyQXBpICsgXCIvXCIgKyBjdXN0b21lcklkLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgYXMgYW55O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgIGNvbnN0IGdldFJlc3VsdCA9IDxDdXN0b21lcj5yZXN1bHQ7XG4gICAgICAgICAgICByZXR1cm4gZ2V0UmVzdWx0O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBtZXNzYWdlOiAnLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VuZXhwZWN0ZWQgZXJyb3I6ICcsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsIGFzIGFueTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBzdG9ja1NlcnZpY2UgfSBmcm9tIFwiLi5cIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IFJlbnQgfSBmcm9tIFwiLi4vZG9tYWluL3JlbnRcIjtcbmltcG9ydCB7IFJlbnRDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9yZW50LWNhcnRcIjtcbmltcG9ydCB7IE9yZGVyQm9va0l0ZW1zIH0gZnJvbSBcIi4uL2RvbWFpbi9vcmRlci1ib29rLWl0ZW1cIjtcbmltcG9ydCB7IFN0b2NrIH0gZnJvbSBcIi4uL2RvbWFpbi9zdG9ja1wiO1xuXG5jb25zdCBSRUZVTkRfQVBJID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvdjEvcmVmdW5kcy9yZW50cyc7XG5jb25zdCBSRU5UX0FQSSA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL3JlbnRzJztcblxuZXhwb3J0IGNsYXNzIFJlbnRTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9yZW50TGlzdDogQXJyYXk8UmVudD47XG5cbiAgICBwcml2YXRlIF9yZW50Q2FydDogUmVudENhcnQ7XG5cbiAgICByZWZ1bmRQZXJjZW50OiBudW1iZXI7XG5cblxuICAgIGNvbnN0cnVjdG9yKHJlbnRMaXN0OiBBcnJheTxSZW50PiwgcmVudENhcnQ6IFJlbnRDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3JlbnRMaXN0ID0gcmVudExpc3Q7XG4gICAgICAgIHRoaXMucmVmdW5kUGVyY2VudCA9IDAuNzU7XG4gICAgICAgIHRoaXMuX3JlbnRDYXJ0ID0gcmVudENhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHJlbnRMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8UmVudD59XG4gICAgICovXG4gICAgcHVibGljIGdldCByZW50TGlzdCgpOiBBcnJheTxSZW50PiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW50TGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVudExpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PFJlbnQ+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcmVudExpc3QodmFsdWU6IEFycmF5PFJlbnQ+KSB7XG4gICAgICAgIHRoaXMuX3JlbnRMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHJlbnRDYXJ0XG4gICAgICogQHJldHVybiB7UmVudENhcnR9XG4gICAgICovXG4gICAgcHVibGljIGdldCByZW50Q2FydCgpOiBSZW50Q2FydCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW50Q2FydDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVudENhcnRcbiAgICAgKiBAcGFyYW0ge1JlbnRDYXJ0fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcmVudENhcnQodmFsdWU6IFJlbnRDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3JlbnRDYXJ0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2l0YXBsYXLEsW4gaGVwc2kgc2VwZXRlIGVrbGVuZGlrdGVuIHNvbnJhIHRvcGxtYSDDvGNyZXRpIGhlc2FwbGF1YW4gZm9ua3NpeW9uXG4gICAgICogQHBhcmFtIHJlbnQgS2l0YXBsYXLEsW4gbGlzdGVzaW5pbiBidWx1bmR1xJ91IG5lc25lXG4gICAgICogQHJldHVybnMgVG9wbGFtIMO8Y3JldFxuICAgICAqL1xuICAgIHB1YmxpYyBjYWxjdWxhdGVUb3RhbChyZW50OiBSZW50KTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHN1YlRvdGFsOiBudW1iZXIgPSAwO1xuXG4gICAgICAgIC8vaXQgY2FuIGJlID0+IGxldCBlbnRyeSBvZiByZW50LmJvb2tBbmRRdWFudGl0eU1hcC5lbnRyaWVzKClcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiByZW50Lm9yZGVyQm9va0l0ZW1zKSB7XG4gICAgICAgICAgICBzdWJUb3RhbCArPSBpdGVtLmJvb2suYm9va1ByaWNlLnByaWNlICogaXRlbS5xdWFudGl0eVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1YlRvdGFsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBkMSBLaXRhcGxhxLFuIGtpcmFsxLFrIG9sYXJhayBhbMSxbmTEscSfxLEgdGFyaWhcbiAgICAgKiBAcGFyYW0gZDIgS2l0YXBsYXLEsW4gZ2VyaSBnZXRpcmlsZGnEn2kgdGFyaWhcbiAgICAgKiBAcmV0dXJucyDEsGtpIHRhcmloIGFyYXPEsW5kYWtpIGZhcmsgKHNhYXQgb2xhcmFrKVxuICAgICAqL1xuICAgIHB1YmxpYyBjYWxjdWxhdGVEaWZmSG91cnMoZDE6IERhdGUsIGQyOiBEYXRlKTogbnVtYmVyIHtcblxuICAgICAgICBsZXQgZGlmZk1pbGlzOiBudW1iZXIgPSAoZDEuZ2V0VGltZSgpIC0gZDIuZ2V0VGltZSgpKTsvLyBtaWxpIHNlY29uZHNcbiAgICAgICAgbGV0IGRpZmZIb3VyID0gTWF0aC5mbG9vcihkaWZmTWlsaXMgLyAxMDAwIC8gNjAgLyA2MCk7IC8vIC8xMDAwID4gc2Vjb25kIC8gNjAgPiBtaW4gLyA2MCA+IGhvdXJcbiAgICAgICAgcmV0dXJuIGRpZmZIb3VyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwIGlsayBraXJhbGFuZMSxxJ/EsSBhbmRhLCB6YW1hbsSxbmRhIGdldGlyaWxkacSfaSBnaWJpIGTDvMWfw7xuw7xsZXJlayB2ZXJpbGVjZWsgb2xhbiB2YXJzYXnEsWxhbiBnZXJpIMO2ZGVtZSBtaWt0YXLEsVxuICAgICAqIEBwYXJhbSByZW50IEhlc2FwbGFuYWNhayBvbGFuIGdlcmkgw7ZkZW1lIG1pa3RhcsSxbsSxbiBpw6dpbmRlIGJ1bHVuZHXEn3UgbmVzbmVcbiAgICAgKi9cbiAgICBwdWJsaWMgY2FsY3VsYXRlUmVmdW5kKHJlbnQ6IFJlbnQpOiB2b2lkIHtcbiAgICAgICAgcmVudC5yZWZ1bmQgPSByZW50LnRvdGFsICogdGhpcy5yZWZ1bmRQZXJjZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwIGtpcmFsYW5kxLEsIG9rdW5kdSB2ZSBnZXJpIGdldGlyaWxkacSfaSB6YW1hbiBuZSBrYWRhciBnZXJpIMO2ZGVtZSB2ZXJpbGVjZcSfaW5pIGhlc2FwbGFyXG4gICAgICogQHBhcmFtIHJlbnQgSGVzYXBsYW5hY2FrIG9sYW4gZ2VyaSDDtmRlbWUgbWlrdGFyxLFuxLFuIGnDp2luZGUgYnVsdW5kdcSfdSBuZXNuZVxuICAgICAqIEByZXR1cm5zIEdlcmkgw7ZkZW1lIG1pa3RhcsSxXG4gICAgICovXG4gICAgcHVibGljIGNhbGN1bGF0ZVJlZnVuZEFtb3VudChyZW50OiBSZW50KTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGRpZmYgPSB0aGlzLmNhbGN1bGF0ZURpZmZIb3VycyhyZW50LnJlZnVuZERhdGUsIHJlbnQub3BlcmF0aW9uRGF0ZVRpbWUpIC8gMjQ7XG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlcjtcblxuICAgICAgICBpZiAoZGlmZiA8PSAxNCkge1xuICAgICAgICAgICAgcmVmdW5kID0gcmVudC50b3RhbCAqIDAuNzU7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlmZiA8PSAyNCkge1xuICAgICAgICAgICAgbGV0IGZpbmUgPSAoMC43NSAtICgoZGlmZiAtIDE0KSAqIDAuMDUpKTtcbiAgICAgICAgICAgIHJlZnVuZCA9IHJlbnQudG90YWwgKiBmaW5lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVmdW5kID0gcmVudC50b3RhbCAqIDAuMjU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVmdW5kO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSZW50KHJlbnROdW1iZXI6IHN0cmluZyk6IFJlbnQge1xuICAgICAgICBsZXQgcmVudCA9IHRoaXMucmVudExpc3QuZmluZChzID0+IHMub3BlcmF0aW9uTnVtYmVyID09PSByZW50TnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHJlbnQhO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRCb29rVG9DYXJ0KGJvb2s6IEJvb2ssIHF1YW50aXR5OiBudW1iZXIsIGN1c3RvbWVySWQ6IG51bWJlcikge1xuICAgICAgICBpZiAodGhpcy5yZW50Q2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVudENhcnQuY3VzdG9tZXJJZCA9IGN1c3RvbWVySWQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZW50Q2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW50Q2FydC5jdXN0b21lcklkICE9PSBjdXN0b21lcklkKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJGYXJrbMSxIG3DvMWfdGVyaXllIGtpdGFwIGtpcmFsYW5tYXlhIMOnYWzEscWfxLFsxLF5b3IuIEzDvHRmZW4gdGVrIG3DvMWfdGVyaSBpw6dpbiBpxZ9sZW0geWFwxLFuxLF6XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBvcmRlckJvb2tJdGVtczogT3JkZXJCb29rSXRlbXMgPSBuZXcgT3JkZXJCb29rSXRlbXMoYm9vaywgcXVhbnRpdHkpO1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnJlbnRDYXJ0Lm9yZGVyQm9va0l0ZW1zLmZpbmRJbmRleCh4ID0+IHguYm9vay5pc2JuID09PSBib29rLmlzYm4pO1xuXG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMucmVudENhcnQub3JkZXJCb29rSXRlbXMucHVzaChvcmRlckJvb2tJdGVtcylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVudENhcnQub3JkZXJCb29rSXRlbXNbaW5kZXhdID0gb3JkZXJCb29rSXRlbXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVSZW50Q2FydCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVSZW50Q2FydCgpIHtcbiAgICAgICAgY29uc3QgcmVudENhcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlbnRDYXJ0XCIpO1xuICAgICAgICBjb25zdCBzdWJUb3RhbFNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvdGFsUmVudEFtb3VudFRsXCIpO1xuXG4gICAgICAgIGlmIChyZW50Q2FydCkge1xuXG4gICAgICAgICAgICBsZXQgcm93LCBjb2x1bW4sIHN1YlRvdGFsOiBudW1iZXIgPSAwO1xuXG4gICAgICAgICAgICB3aGlsZSAocmVudENhcnQubGFzdENoaWxkICYmIHJlbnRDYXJ0LmNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICByZW50Q2FydC5yZW1vdmVDaGlsZChyZW50Q2FydC5sYXN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3ViVG90YWxTcGFuIS50ZXh0Q29udGVudCA9IFwiXCI7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJlbnRDYXJ0Lm9yZGVyQm9va0l0ZW1zLmxlbmd0aDsgaW5kZXgrKykge1xuXG4gICAgICAgICAgICAgICAgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtcm93XCI7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMucmVudENhcnQub3JkZXJCb29rSXRlbXMpIHtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IHRoaXMucmVudENhcnQuY3VzdG9tZXJJZC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGl0ZW0uYm9vay5uYW1lO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGl0ZW0ucXVhbnRpdHkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwicmVudC1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSAoaXRlbS5ib29rLmJvb2tQcmljZS5wcmljZSAqIGl0ZW0ucXVhbnRpdHkpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJvdyAmJiBzdWJUb3RhbFNwYW4pIHtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5yZW50Q2FydC5vcmRlckJvb2tJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBzdWJUb3RhbCArPSB0LmJvb2suYm9va1ByaWNlLnByaWNlICogdC5xdWFudGl0eTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZW50Q2FydC5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgICAgIHN1YlRvdGFsU3Bhbi50ZXh0Q29udGVudCA9IHN1YlRvdGFsLnRvU3RyaW5nKCkgKyBcIiBUTFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGNhcnRUb1JlbnQoKSB7XG4gICAgICAgIGxldCByZW50Q2FydDogUmVudENhcnQgPSB0aGlzLnJlbnRDYXJ0O1xuICAgICAgICBsZXQgcmVudCA9IG5ldyBSZW50KCk7XG5cbiAgICAgICAgcmVudC5vcmRlckJvb2tJdGVtcyA9IHJlbnRDYXJ0Lm9yZGVyQm9va0l0ZW1zO1xuICAgICAgICByZW50LmN1c3RvbWVySWQgPSByZW50Q2FydC5jdXN0b21lcklkO1xuICAgICAgICByZW50LnRvdGFsID0gdGhpcy5jYWxjdWxhdGVUb3RhbChyZW50KTtcblxuICAgICAgICB0aGlzLnJlbnRDYXJ0ID0gbmV3IFJlbnRDYXJ0OyAvLyBzZXBldGkgYm/Fn2FsdFxuICAgICAgICB0aGlzLnVwZGF0ZVJlbnRDYXJ0KCk7XG4gICAgICAgIHRoaXMuY3JlYXRlUmVudChyZW50KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgY3JlYXRlUmVudChyOiBSZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFJFTlRfQVBJLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBvcmRlckJvb2tJdGVtczogQXJyYXkuZnJvbShyLm9yZGVyQm9va0l0ZW1zKSxcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJJZDogci5jdXN0b21lcklkLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbDogci50b3RhbCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gPFJlbnQ+KGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZXN0IGFwaWRhbiBkw7ZuZW4gY2V2YXA6XFxuXCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJLaXRhcCBraXJhbGFtYSBpxZ9sZW1pIGJhxZ9hcsSxeWxhIGdlcsOnZWtsZcWfbWnFn3Rpci5cIik7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJGacWfaW5pemkga2F5YmV0bmV5aW5pei4gRmnFnyBudW1hcmFuxLF6OiBcIiArIHJlc3VsdC5vcGVyYXRpb25OdW1iZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgICAgIGFsZXJ0KFwiS2l0YXAga2lyYWxhbWEgacWfbGVtaSBzxLFyYXPEsW5kYSBiaXIgaGF0YSBvbHXFn3R1LiBMw7x0ZmVuIHRla3JhciBkZW5leWluaXouXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHJlZnVuZFJlbnQob3BlcmF0aW9uTnVtYmVyOiBzdHJpbmcpOiBQcm9taXNlPFJlbnQ+IHtcbiAgICAgICAgLy9QQVRDSCBCZWxpcmxpIGJpciBrYXluYWt0YWtpIHZlcmlsZXJpbiBiaXIga8Sxc23EsW7EsW4gZGXEn2nFn3RpcmlsbWVzaSBpw6dpbiBrdWxsYW7EsWxhbiBtZXRvZHR1ci5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goUkVGVU5EX0FQSSArIFwiL1wiICsgb3BlcmF0aW9uTnVtYmVyLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSA8UmVudD4oYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgYXMgYW55O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGlzRXhpc3RSZW50KG9wZXJhdGlvbk51bWJlcjogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goUkVOVF9BUEkgKyBcIi9cIiArIG9wZXJhdGlvbk51bWJlciwge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlc3QgYXBpZGFuIGTDtm5lbiBjZXZhcDpcXG5cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBzdG9ja1NlcnZpY2UgfSBmcm9tIFwiLi5cIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IFNhbGUgfSBmcm9tIFwiLi4vZG9tYWluL3NhbGVcIjtcbmltcG9ydCB7IE9yZGVyQm9va0l0ZW1zIH0gZnJvbSBcIi4uL2RvbWFpbi9vcmRlci1ib29rLWl0ZW1cIjtcbmltcG9ydCB7IFNhbGVDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlLWNhcnRcIjtcblxuZXhwb3J0IGNsYXNzIFNhbGVTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9zYWxlTGlzdDogQXJyYXk8U2FsZT47XG4gICAgcHJpdmF0ZSBfc2FsZUNhcnQ6IFNhbGVDYXJ0O1xuICAgIHB1YmxpYyBzYWxlQXBpID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvdjEvc2FsZXMnO1xuXG4gICAgY29uc3RydWN0b3Ioc2FsZUxpc3Q6IEFycmF5PFNhbGU+LCBzYWxlQ2FydDogU2FsZUNhcnQpIHtcbiAgICAgICAgdGhpcy5fc2FsZUxpc3QgPSBzYWxlTGlzdDtcbiAgICAgICAgdGhpcy5fc2FsZUNhcnQgPSBzYWxlQ2FydDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc2FsZUxpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxTYWxlPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHNhbGVMaXN0KCk6IEFycmF5PFNhbGU+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NhbGVMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzYWxlTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8U2FsZT59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBzYWxlTGlzdCh2YWx1ZTogQXJyYXk8U2FsZT4pIHtcbiAgICAgICAgdGhpcy5fc2FsZUxpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc2FsZUNhcnRcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxTYWxlQ2FydD59XG4gICAgICovXG4gICAgcHVibGljIGdldCBzYWxlQ2FydCgpOiBTYWxlQ2FydCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zYWxlQ2FydDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc2FsZUNhcnRcbiAgICAgKiBAcGFyYW0ge0FycmF5PFNhbGVDYXJ0Pn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHNhbGVDYXJ0KHZhbHVlOiBTYWxlQ2FydCkge1xuICAgICAgICB0aGlzLl9zYWxlQ2FydCA9IHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVUb3RhbChzYWxlOiBTYWxlKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHN1YlRvdGFsID0gMC4wO1xuXG4gICAgICAgIGZvciAobGV0IGVudHJ5IG9mIHNhbGUub3JkZXJCb29rSXRlbXMpIHtcbiAgICAgICAgICAgIHN1YlRvdGFsICs9IGVudHJ5LmJvb2suYm9va1ByaWNlLnByaWNlICogZW50cnkucXVhbnRpdHk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3ViVG90YWw7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZEJvb2tUb0NhcnQoYm9vazogQm9vaywgcXVhbnRpdHk6IG51bWJlciwgY3VzdG9tZXJJZDogbnVtYmVyKSB7XG5cbiAgICAgICAgaWYgKHRoaXMuc2FsZUNhcnQub3JkZXJCb29rSXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnNhbGVDYXJ0LmN1c3RvbWVySWQgPSBjdXN0b21lcklkO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2FsZUNhcnQub3JkZXJCb29rSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2FsZUNhcnQuY3VzdG9tZXJJZCAhPT0gY3VzdG9tZXJJZCkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRmFya2zEsSBtw7zFn3Rlcml5ZSBraXRhcCBzYXTEsWxtYXlhIMOnYWzEscWfxLFsxLF5b3IuIEzDvHRmZW4gdGVrIG3DvMWfdGVyaSBpw6dpbiBpxZ9sZW0geWFwxLFuxLF6XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBvcmRlckJvb2tJdGVtczogT3JkZXJCb29rSXRlbXMgPSBuZXcgT3JkZXJCb29rSXRlbXMoYm9vaywgcXVhbnRpdHkpO1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnNhbGVDYXJ0Lm9yZGVyQm9va0l0ZW1zLmZpbmRJbmRleCh4ID0+IHguYm9vay5pc2JuID09PSBib29rLmlzYm4pO1xuXG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc2FsZUNhcnQub3JkZXJCb29rSXRlbXMucHVzaChvcmRlckJvb2tJdGVtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNhbGVDYXJ0Lm9yZGVyQm9va0l0ZW1zW2luZGV4XSA9IG9yZGVyQm9va0l0ZW1zO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGVTYWxlQ2FydCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVTYWxlQ2FydCgpIHtcbiAgICAgICAgY29uc3Qgc2FsZUNhcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNhbGVDYXJ0XCIpO1xuICAgICAgICBjb25zdCBzdWJUb3RhbFNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvdGFsU2FsZUFtb3VudFRsXCIpO1xuXG4gICAgICAgIGlmIChzYWxlQ2FydCkge1xuXG4gICAgICAgICAgICBsZXQgcm93LCBjb2x1bW4sIHN1YlRvdGFsOiBudW1iZXIgPSAwO1xuXG4gICAgICAgICAgICB3aGlsZSAoc2FsZUNhcnQubGFzdENoaWxkICYmIHNhbGVDYXJ0LmNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBzYWxlQ2FydC5yZW1vdmVDaGlsZChzYWxlQ2FydC5sYXN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3ViVG90YWxTcGFuIS50ZXh0Q29udGVudCA9IFwiXCI7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnNhbGVDYXJ0Lm9yZGVyQm9va0l0ZW1zLmxlbmd0aDsgaW5kZXgrKykge1xuXG4gICAgICAgICAgICAgICAgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gXCJzYWxlLWNhcnQtcm93XCI7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMuc2FsZUNhcnQub3JkZXJCb29rSXRlbXMpIHtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJzYWxlLWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IHRoaXMuc2FsZUNhcnQuY3VzdG9tZXJJZC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJzYWxlLWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGl0ZW0uYm9vay5uYW1lO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJzYWxlLWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGl0ZW0ucXVhbnRpdHkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSAoaXRlbS5ib29rLmJvb2tQcmljZS5wcmljZSAqIGl0ZW0ucXVhbnRpdHkpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJvdyAmJiBzdWJUb3RhbFNwYW4pIHtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBzdWJUb3RhbCArPSB0LmJvb2suYm9va1ByaWNlLnByaWNlICogdC5xdWFudGl0eTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzYWxlQ2FydC5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgICAgIHN1YlRvdGFsU3Bhbi50ZXh0Q29udGVudCA9IHN1YlRvdGFsLnRvU3RyaW5nKCkgKyBcIiBUTFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGNhcnRUb1NhbGUoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgbGV0IHNhbGVDYXJ0OiBTYWxlQ2FydCA9IHRoaXMuc2FsZUNhcnQ7XG4gICAgICAgIGxldCBzYWxlID0gbmV3IFNhbGUoKTtcblxuICAgICAgICBzYWxlLm9yZGVyQm9va0l0ZW1zID0gc2FsZUNhcnQub3JkZXJCb29rSXRlbXM7XG4gICAgICAgIHNhbGUuY3VzdG9tZXJJZCA9IHNhbGVDYXJ0LmN1c3RvbWVySWQ7XG4gICAgICAgIHNhbGUub3BlcmF0aW9uRGF0ZVRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBzYWxlLnRvdGFsID0gdGhpcy5jYWxjdWxhdGVUb3RhbChzYWxlKTtcblxuICAgICAgICBmb3IgKGxldCBpIG9mIHNhbGUub3JkZXJCb29rSXRlbXMpIHtcbiAgICAgICAgICAgIGxldCBzdG9jayA9IGF3YWl0IHN0b2NrU2VydmljZS5nZXRTdG9ja0J5Qm9va0lkKGkuYm9vay5pZCk7XG4gICAgICAgICAgICBpZiAoc3RvY2spIHtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHN1Y2Nlc3MgPSB0aGlzLmNyZWF0ZVNhbGUoc2FsZSk7XG4gICAgICAgIHRoaXMuc2FsZUNhcnQgPSBuZXcgU2FsZUNhcnQoKTsgLy8gc2VwZXRpIGJvxZ9hbHRcbiAgICAgICAgdGhpcy51cGRhdGVTYWxlQ2FydCgpO1xuICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgY3JlYXRlU2FsZShzOiBTYWxlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuc2FsZUFwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJCb29rSXRlbXM6IEFycmF5LmZyb20ocy5vcmRlckJvb2tJdGVtcyksXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbWVySWQ6IHMuY3VzdG9tZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6IHMudG90YWxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPTxTYWxlPiAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlc3QgYXBpZGFuIGTDtm5lbiBjZXZhcDpcXG5cIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBhbGVydChcIktpdGFwIHNhdMSxxZ8gacWfbGVtaSBiYcWfYXLEsXlsYSBnZXLDp2VrbGXFn21pxZ90aXIuXCIpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRmnFn2luaXppIGtheWJldG1leWluaXouIEZpxZ8gTnVtYXJhc8SxOiBcIiArIHJlc3VsdC5vcGVyYXRpb25OdW1iZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGlzRXhpc3RTYWxlKG9wZXJhdGlvbk51bWJlcjogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5zYWxlQXBpICsgXCIvXCIgKyBvcGVyYXRpb25OdW1iZXIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblxuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZXN0IGFwaWRhbiBkw7ZuZW4gY2V2YXA6XFxuXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG59XG4iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rXCI7XG5pbXBvcnQgeyBTdG9jayB9IGZyb20gXCIuLi9kb21haW4vc3RvY2tcIjtcblxuZXhwb3J0IGNsYXNzIFN0b2NrU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfc3RvY2tMaXN0OiBBcnJheTxTdG9jaz47XG4gICAgcHJpdmF0ZSBzdG9ja0FwaTogc3RyaW5nID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL3N0b2Nrc1wiO1xuXG4gICAgY29uc3RydWN0b3Ioc3RvY2tMaXN0OiBBcnJheTxTdG9jaz4pIHtcbiAgICAgICAgdGhpcy5fc3RvY2tMaXN0ID0gc3RvY2tMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzdG9ja0xpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxTdG9jaz59XG4gICAgICovXG4gICAgcHVibGljIGdldCBzdG9ja0xpc3QoKTogQXJyYXk8U3RvY2s+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b2NrTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc3RvY2tMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxTdG9jaz59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBzdG9ja0xpc3QodmFsdWU6IEFycmF5PFN0b2NrPikge1xuICAgICAgICB0aGlzLl9zdG9ja0xpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzdG9jayBuZXNuZXNpbmkgZ2VyaSBkw7ZuZMO8csO8clxuICAgICAqIEBwYXJhbSBpc2JuIHN0b2NrIG5lc25lc2kgZ2V0aXJpbGVjZWsgb2xhbiBuZXNuZW5pbiBpc2JuIG5vc3UsXG4gICAgICogQHJldHVybnMgZGIgb2xhbiBzdG9jayBuZXNuZW5zaSBnZXJpIGTDtm5lciwgZGIgZGUgeW9rIGlzZSB0aHJvdyBpbGUgaGF0YSBmxLFybGF0xLFybMSxclxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBnZXRTdG9ja0J5Qm9va0lkKGJvb2tJZDogbnVtYmVyKTogUHJvbWlzZTxTdG9jaz4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnN0b2NrQXBpICsgXCIvcT9ib29rSWQ9XCIgKyBib29rSWQsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiA8U3RvY2s+cmVzdWx0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBtZXNzYWdlOiAnLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VuZXhwZWN0ZWQgZXJyb3I6ICcsIGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG51bGwgYXMgYW55O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRcSfZXIgc3RvayBuZXNuZXNpIHlvayBpc2Ugc3RvayBuZXNuZXNpLCBiZWxpcnRpbGVuIGFkZXQga2FkYXIgc3RvayBiaWxnaXNpIGlsZSBiZXJhYmVyIGVrbGVuaXlvci5cbiAgICAgKiDEsMWfdGUgYnUgb2x1xZ90dXJtYS9jcmVhdGUgacWfbGVtaSBidXJhZGEgeWFwxLFsxLF5b3IuXG4gICAgICogQHBhcmFtIHMgaW5kZXgudHMgZG9zeWFzxLFuZGFuIGdlbGVuIHN0b2sgbmVzbmVzaVxuICAgICAqL1xuICAgICBwdWJsaWMgYXN5bmMgY3JlYXRlU3RvY2soczogU3RvY2spOiBQcm9taXNlPEJvb2xlYW4gfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5zdG9ja0FwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IHMucXVhbnRpdHksXG4gICAgICAgICAgICAgICAgICAgIHNoZWxmTnVtYmVyOiBzLnNoZWxmTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBib29rOiBzLmJvb2tcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nICsgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldEFsbFN0b2Nrc0RhdGEoKTogUHJvbWlzZTxBcnJheTxTdG9jaz4+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnN0b2NrQXBpLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgIGNvbnN0IGdldFJlc3VsdCA9IDxBcnJheTxTdG9jaz4+SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXN1bHQsIG51bGwsIDQpKTtcbiAgICAgICAgcmV0dXJuIGdldFJlc3VsdDtcbiAgICB9XG4gICAgXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MDcpO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwidGhpcyIsIl9ib29rcyIsIkFycmF5IiwiX3N0b2NrcyIsIl9jdXN0b21lcnMiLCJfc2FsZXMiLCJfcmVudHMiLCJfYm9va1NwZWNpZmljYXRpb25zIiwiX2NhbmNlbHMiLCJfc2FsZUNhcnQiLCJTYWxlQ2FydCIsIl9yZW50Q2FydCIsIlJlbnRDYXJ0IiwiZ2V0Qm9va3NMaXN0IiwiZ2V0U3RvY2tzTGlzdCIsImdldEN1c3RvbWVyc0xpc3QiLCJnZXRTYWxlc0xpc3QiLCJnZXRSZW50cyIsImdldEJvb2tTcGVjaWZpY2F0aW9ucyIsImdldENhbmNhbGVkU2FsZXMiLCJnZXRTYWxlQ2FydCIsImdldFJlbnRDYXJ0Iiwic2V0U2FsZUNhcnQiLCJ2YWx1ZSIsInNldFJlbnRDYXJ0IiwiaWQiLCJfaWQiLCJwcmljZSIsIl9wcmljZSIsInN0YXJ0RGF0ZSIsIl9zdGFydERhdGUiLCJlbmREYXRlIiwiX2VuZERhdGUiLCJpc2JuIiwibmFtZSIsImF1dGhvciIsInB1Ymxpc2hZZWFyIiwicGFnZXMiLCJib29rUHJpY2UiLCJfbmFtZSIsIl9hdXRob3IiLCJfaXNibiIsIl9wdWJsaXNoWWVhciIsIl9wYWdlcyIsIl9ib29rUHJpY2UiLCJzdXJOYW1lIiwicGhvbmVOdW1iZXIiLCJfc3VyTmFtZSIsIl9waG9uZU51bWJlciIsImJvb2siLCJxdWFudGl0eSIsIl9ib29rIiwiX3F1YW50aXR5IiwidG9KU09OIiwib3JkZXJCb29rSXRlbXMiLCJSZW50IiwiU2FsZSIsInNhbGVCb29rSXRlbXMiLCJvcGVyYXRpb25EYXRlVGltZSIsImN1c3RvbWVySWQiLCJvcGVyYXRpb25OdW1iZXIiLCJ0b3RhbCIsInJlZnVuZERhdGUiLCJyZWZ1bmQiLCJzdXBlciIsIl9yZWZ1bmREYXRlIiwiX3JlZnVuZCIsIl9vcmRlckJvb2tJdGVtcyIsIl9jdXN0b21lcklkIiwiX29wZXJhdGlvbkRhdGVUaW1lIiwiX29wZXJhdGlvbk51bWJlciIsIl90b3RhbCIsInNoZWxmTnVtYmVyIiwiX3NoZWxmTnVtYmVyIiwiaW5pdGlsaWF6ZURhdGEiLCJib29rU2VydmljZSIsImdldEFsbEJvb2tzRGF0YSIsInN0b2NrU2VydmljZSIsImdldEFsbFN0b2Nrc0RhdGEiLCJjdXN0b21lclNlcnZpY2UiLCJnZXRBbGxDdXN0b21lcnNEYXRhIiwiY29uc29sZSIsInRhYmxlIiwiYm9va0xpc3QiLCJzdG9ja0xpc3QiLCJjdXN0b21lckxpc3QiLCJsb2ciLCJzaG93QW5kSGlkZSIsImJ0bklkIiwiZWxlbWVudElkIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwic3R5bGUiLCJkaXNwbGF5IiwiZGIiLCJEYXRhQmFzZSIsIkJvb2tTZXJ2aWNlIiwiQ3VzdG9tZXJTZXJ2aWNlIiwiY2FuY2VsU2VydmljZSIsIkNhbmNlbFNlcnZpY2UiLCJyZW50U2VydmljZSIsIlJlbnRTZXJ2aWNlIiwic2FsZVNlcnZpY2UiLCJTYWxlU2VydmljZSIsIlN0b2NrU2VydmljZSIsImFkZEJvb2tGb3JtIiwib25zdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwidGl0bGUiLCJnZXQiLCJCb29rUHJpY2UiLCJCb29rIiwic29tZSIsIm9iaiIsImNyZWF0ZUJvb2siLCJhbGVydCIsInJlc2V0IiwibGlzdEJvb2tzIiwiYWRkU3RvY2tGb3JtIiwicXVhbnR0aXkiLCJmaW5kIiwiYiIsInN0b2NrIiwiU3RvY2siLCJjcmVhdGVTdG9jayIsImFkZEN1c3RvbWVyRm9ybSIsInN1cm5hbWUiLCJjdXN0b21lciIsIkN1c3RvbWVyIiwiY3JlYXRlQ3VzdG9tZXIiLCJzYWxlQm9va0Zvcm0iLCJwYXJzZUludCIsImdldEJvb2siLCJpc1ZhbGlkQ3VzdG9tZXIiLCJnZXRDdXN0b21lciIsImdldFN0b2NrQnlCb29rSWQiLCJhZGRCb29rVG9DYXJ0IiwiZXJyb3IiLCJzYWxlQ2FydCIsImxlbmd0aCIsImNhcnRUb1NhbGUiLCJjYW5jZWxTYWxlRm9ybSIsInNhbGVOdW1iZXIiLCJpc0V4aXN0U2FsZSIsImNhbmNlbFNhbGVNb2NrIiwiY2FuY2VsUmVudEZvcm0iLCJyZW50TnVtYmVyIiwiY2FuY2VsUmVudE1vY2siLCJyZW50Qm9va0Zvcm0iLCJyZW50Q2FydCIsImNhcnRUb1JlbnQiLCJyZWZ1bmRCb29rRm9ybSIsImxpc3RCb29rc0RpdiIsInJvdyIsImNvbHVtbiIsImxhc3RDaGlsZCIsImNoaWxkcmVuIiwicmVtb3ZlQ2hpbGQiLCJmb3JFYWNoIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInRleHRDb250ZW50IiwidG9TdHJpbmciLCJhcHBlbmRDaGlsZCIsInEiLCJzIiwiaXNFeGlzdFJlbnQiLCJyZW50IiwicmVmdW5kUmVudCIsImJvb2tTcGVjaWZpY2F0aW9uIiwiYm9va0FwaSIsIl9ib29rTGlzdCIsIl9ib29rU3BlY2lmaWNhdGlvbiIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiQWNjZXB0Iiwib2siLCJqc29uIiwiRXJyb3IiLCJzdGF0dXMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImJvb2tQcmljZUNyZWF0ZUR0byIsInJlc3VsdCIsIkV4Y2VwdGlvbiIsImNhbmNlbGxlZExpc3QiLCJjYW5jZWxTYWxlQXBpIiwiY2FuY2VsUmVudEFwaSIsIl9jYW5jZWxsZWRMaXN0IiwiY2FsY3VsYXRlRGlmZkhvdXJzIiwiZDEiLCJkMiIsImRpZmZNaWxpcyIsImdldFRpbWUiLCJNYXRoIiwiZmxvb3IiLCJjYW5jZWxTYWxlIiwiY2FuY2VsIiwiY2FsY3VsYXRlQ2FuY2VsU2FsZVJlZnVuZCIsInB1c2giLCJjYW5jZWxlZERhdGVUaW1lIiwiY2FuY2VsVHlwZSIsImNhbmNlbFJlbnQiLCJjYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kIiwiY3VzdG9tZXJBcGkiLCJfY3VzdG9tZXJMaXN0IiwibmV3Q3VzdG9tZXIiLCJtZXNzYWdlIiwiUkVOVF9BUEkiLCJyZW50TGlzdCIsIl9yZW50TGlzdCIsInJlZnVuZFBlcmNlbnQiLCJjYWxjdWxhdGVUb3RhbCIsInN1YlRvdGFsIiwiaXRlbSIsImNhbGN1bGF0ZVJlZnVuZCIsImNhbGN1bGF0ZVJlZnVuZEFtb3VudCIsImRpZmYiLCJmaW5lIiwiZ2V0UmVudCIsIk9yZGVyQm9va0l0ZW1zIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJ4IiwidXBkYXRlUmVudENhcnQiLCJzdWJUb3RhbFNwYW4iLCJ0IiwiY3JlYXRlUmVudCIsInIiLCJmcm9tIiwiUkVGVU5EX0FQSSIsInNhbGVMaXN0Iiwic2FsZUFwaSIsIl9zYWxlTGlzdCIsInNhbGUiLCJlbnRyeSIsInVwZGF0ZVNhbGVDYXJ0IiwiRGF0ZSIsImkiLCJzdWNjZXNzIiwiY3JlYXRlU2FsZSIsInN0b2NrQXBpIiwiX3N0b2NrTGlzdCIsImJvb2tJZCIsInBhcnNlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==