(()=>{"use strict";var e={221:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataBase=void 0;const n=o(758),r=o(51);t.DataBase=class{constructor(){this._books=new Array,this._stocks=new Array,this._customers=new Array,this._sales=new Array,this._rents=new Array,this._bookSpecifications=new Array,this._cancels=new Array,this._saleCart=new r.SaleCart,this._rentCart=new n.RentCart}get getBooksList(){return this._books}get getStocksList(){return this._stocks}get getCustomersList(){return this._customers}get getSalesList(){return this._sales}get getRents(){return this._rents}get getBookSpecifications(){return this._bookSpecifications}get getCancaledSales(){return this._cancels}get getSaleCart(){return this._saleCart}get getRentCart(){return this._rentCart}set setSaleCart(e){this._saleCart=e}set setRentCart(e){this._rentCart=e}}},39:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BookSpecification=void 0,t.BookSpecification=class{constructor(e,t,o,n){this._isbn=e,this._price=t,this._startDate=o,this._endDate=n}get isbn(){return this._isbn}get price(){return this._price}get startDate(){return this._startDate}get endDate(){return this._endDate}set isbn(e){this._isbn=e}set price(e){this._price=e}set startDate(e){this._startDate=e}set endDate(e){this._endDate=e}}},934:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Book=void 0,t.Book=class{constructor(e,t,o,n,r,a){this._name=t,this._author=o,this._isbn=e,this._publishYear=n,this._pages=r,this._bookSpecification=a}get isbn(){return this._isbn}get name(){return this._name}get author(){return this._author}get publishYear(){return this._publishYear}get pages(){return this._pages}get bookSpecification(){return this._bookSpecification}set isbn(e){this._isbn=e}set name(e){this._name=e}set author(e){this._author=e}set publishYear(e){this._publishYear=e}set pages(e){this._pages=e}set bookSpecification(e){this._bookSpecification=e}}},378:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cancel=void 0,t.Cancel=class{constructor(e,t,o){this._cancelType=e,this._refund=t,this._canceledDateTime=o}get cancelType(){return this._cancelType}get refund(){return this._refund}get canceledDateTime(){return this._canceledDateTime}set cancelType(e){this._cancelType=e}set refund(e){this._refund=e}set canceledDateTime(e){this._canceledDateTime=e}}},916:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Customer=void 0,t.Customer=class{constructor(e,t,o){this._name=e,this._surName=t,this._phoneNumber=o}get name(){return this._name}get surName(){return this._surName}get phoneNumber(){return this._phoneNumber}set name(e){this._name=e}set surName(e){this._surName=e}set phoneNumber(e){this._phoneNumber=e}}},767:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrderBookItems=void 0,t.OrderBookItems=class{constructor(e,t){this._book=e,this._quantity=t}get book(){return this._book}get quantity(){return this._quantity}set book(e){this._book=e}set quantity(e){this._quantity=e}toJSON(){return{book:this._book,quantity:this._quantity}}}},758:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RentCart=void 0,t.RentCart=class{constructor(){this.orderBookItems=new Array}}},961:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Rent=void 0;const n=o(354);class r extends n.Sale{constructor(e,t,o,n,r,a,i){super(e,o,t,n,r),this._refundDate=a,this._refund=i}get refundDate(){return this._refundDate}get refund(){return this._refund}set refundDate(e){this._refundDate=e}set refund(e){this._refund=e}}t.Rent=r},51:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SaleCart=void 0,t.SaleCart=class{constructor(){this.orderBookItems=new Array}}},354:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Sale=void 0,t.Sale=class{constructor(e,t,o,n,r){this._orderBookItems=e,this._customerId=t,this._operationDateTime=o,this._operationNumber=n,this._total=r}get orderBookItems(){return this._orderBookItems}get customerId(){return this._customerId}get operationDateTime(){return this._operationDateTime}get operationNumber(){return this._operationNumber}get total(){return this._total}set orderBookItems(e){this._orderBookItems=e}set customerId(e){this._customerId=e}set operationDateTime(e){this._operationDateTime=e}set operationNumber(e){this._operationNumber=e}set total(e){this._total=e}}},72:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Stock=void 0,t.Stock=class{constructor(e,t,o){this._isbn=e,this._quantity=t,this._shelfNumber=o}get isbn(){return this._isbn}get quantity(){return this._quantity}get shelfNumber(){return this._shelfNumber}set isbn(e){this._isbn=e}set quantity(e){this._quantity=e}set shelfNumber(e){this._shelfNumber=e}}},607:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.stockService=t.saleService=t.rentService=t.cancelService=t.customerService=t.bookService=void 0;const r=o(221),a=o(934),i=o(39),s=o(378),c=o(916),l=o(961),u=o(354),d=o(767),h=o(72),m=o(946),k=o(943),p=o(709),f=o(148),S=o(478),g=o(214);function b(e,t){const o=document.getElementById(t),n=document.getElementById(e);o&&n&&n.addEventListener("click",(()=>{"none"===o.style.display?o.style.display="block":o.style.display="none"}))}var y;y=new r.DataBase,t.bookService=new m.BookService(y.getBooksList,y.getBookSpecifications),t.customerService=new p.CustomerService(y.getCustomersList),t.cancelService=new k.CancelService(y.getCancaledSales),t.rentService=new f.RentService(y.getRents,y.getRentCart),t.saleService=new S.SaleService(y.getSalesList,y.getSaleCart),t.stockService=new g.StockService(y.getStocksList),console.log("Services intiliazed."),t.customerService.addCustomer(new c.Customer("","","")),t.customerService.addCustomer(new c.Customer("","","")),t.stockService.addStock("123-45","A45-52",10),t.stockService.addStock("123-46","A45-52",10),function(){n(this,void 0,void 0,(function*(){yield t.bookService.initializeDataMock()}))}(),b("addBookMenuItem","addBookSection"),b("showBooksMenuItem","listBooksSection"),b("addCustomerMenuItem","addCustomerSection"),b("addStockMenuItem","addStockSection"),b("saleBookMenuItem","saleBookSection"),b("rentBookMenuItem","rentBookSection"),b("cancelSaleMenuItem","cancelSaleSection"),b("cancelRentMenuItem","cancelRentSection"),b("refundBookMenuItem","refundBookSection"),b("rentNow","rentBookSection");const v=document.getElementById("add-book-form");null!=v&&(v.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(v),n=o.get("bookTitle"),r=o.get("bookAuthor"),s=o.get("bookIsbn"),c=o.get("bookPublishYear"),l=o.get("bookPages"),u=o.get("bookPrice"),d=new Date,h=new Date("Dec 31, 9999 23:59:59");n.match("");const m=new i.BookSpecification(s,u,d,h),k=new a.Book(s,n,r,c,l,m);return(yield t.bookService.addBookMock(k))?(alert(k.isbn+" numaralı kitap Ekleme İşlemi Başarı İle Tamamlanmıştır."),v.reset()):alert(k.isbn+" numaralı kitap Ekleme İşlemi Sırasında Bir Hata oluştu."),!1})));const _=document.getElementById("add-stock-form");_&&(_.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(_),n=o.get("bookIsbnForAddStock"),r=o.get("stockQuantity"),a=o.get("shelfNumber"),i=new h.Stock(n,r,a);return t.bookService.bookList.some((e=>e.isbn==n))?(yield t.stockService.addStockMock(i))&&alert(n+" isbn numaralı kitaptan, "+r+" kadar sisteme stok eklenmiştir."):alert("Stok eklenmeye çalışılan kitap, kayıtlı değildir. Lütfen önce kitap ekleyiniz"),_.reset(),!1})));const C=document.getElementById("add-customer-form");C&&(C.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(C),n=o.get("customerName"),r=o.get("customerSurname"),a=o.get("customerPhoneNumber"),i=new c.Customer(n,r,a);return(yield t.customerService.addCustomerMock(i))?(alert("Müşteri Ekleme İşlemi Başarı İle Tamamlanmıştır. "),C.reset()):alert("Müşteri Ekleme İşlemi Sırasında bir hata ile karşılıldı. "),!1})));const w=document.getElementById("sale-book-form");w&&(w.onsubmit=()=>{const e=new FormData(w),o=e.get("isbnForSale"),n=t.bookService.getBook(o),r=parseInt(e.get("customerIdForSale")),a=parseInt(e.get("quantityForSale")),i=t.stockService.getStock(o);try{return n?i?i.quantity>=a?t.saleService.addBookToCart(n,a,r):alert(a+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${o} numaralı kitabın stoğu mevcut değildir.`):alert(o+" numaralı kitap yoktur."),w.reset(),!1}catch(e){alert(e)}}),document.getElementById("btnSale").addEventListener("click",(()=>{0===t.saleService.saleCart.orderBookItems.length?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):t.saleService.cartToSale()?alert("Satış işlemi başarıyla gerçekleştirilmiştir."):alert("Satış işlemi sırasında hata oluştu, lütfen tekrar deneyiniz.")})),document.getElementById("showBooksMenuItem").addEventListener("click",(()=>{t.bookService.listBooks()}));const B=document.getElementById("cancel-sale-form");B&&(B.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();let o=new Array;o.push(new d.OrderBookItems(t.bookService.getBook("123-45"),3));let n=new u.Sale(o,1,new Date,"S021122163045",123);t.saleService.saleList.push(n);const r=new FormData(B).get("saleNumberforCancel");let a=t.saleService.getSale(r);if(a){let e=new s.Cancel(a,a.total,new Date);(yield t.cancelService.cancelSaleMock(e))?alert(a.operationNumber+" numaralı satış iptal edilmiştir."):alert(a.operationNumber+" numaralı satış iptal edilirken hata meydana geldi.")}else alert(r+" numaralı satış bulunamamıştır. Tekrar deneyiniz.")})));const I=document.getElementById("cancel-rent-form");I&&(I.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();let o=new Array;o.push(new d.OrderBookItems(t.bookService.getBook("123-45"),3));let n=new Date;n.setDate(n.getDate()+14);let r=new l.Rent(o,new Date,1,"R021122163045",123,n,200);t.rentService.rentList.push(r);const a=new FormData(I).get("rentNumberforCancel");let i=t.rentService.getRent(a);if(i){let e=new s.Cancel(i,i.total,new Date);(yield t.cancelService.cancelRentMock(e))?alert(i.operationNumber+" numaralı kiralama iptal edilmiştir."):alert(i.operationNumber+" numaralı kiralama iptal edilirken hata meydana geldi.")}else alert(a+" numaralı kiralma bulunamamıştır. Tekrar deneyiniz.")})));const D=document.getElementById("rent-book-form");D&&(D.onsubmit=()=>{const e=new FormData(D),o=e.get("isbnForRent"),n=t.bookService.getBook(o),r=parseInt(e.get("customerIdForRent")),a=parseInt(e.get("quantityForRent")),i=t.stockService.getStock(o);try{return n?i?i.quantity>=a?t.rentService.addBookToCart(n,a,r):alert(a+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${o} numaralı kitabın stoğu mevcut değildir.`):alert(o+" numaralı kitap yoktur."),D.reset(),!1}catch(e){alert(e)}}),document.getElementById("btnRent").addEventListener("click",(()=>{0===t.rentService.rentCart.orderBookItems.length?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):t.rentService.cartToRent()}));const N=document.getElementById("refund-book-form");N&&(N.onsubmit=e=>n(void 0,void 0,void 0,(function*(){let o=new Array;o.push(new d.OrderBookItems(t.bookService.getBook("123-45"),3));let n=new Date;n.setDate(n.getDate()+23);let r=new l.Rent(o,new Date,1,"R021122163045",123,n,0);r.refund=t.rentService.calculateRefundAmount(r),t.rentService.rentList.push(r),e.preventDefault();const a=new FormData(N).get("rentNumberforRefund");let i=t.rentService.getRent(a);if(i){let e=yield t.rentService.refundRentMock(i);e?(alert(i.operationNumber+" numaralı kiralama geri alınmıştır."),alert("Geri ödeme miktarı:"+e+" ₺ .")):alert(i.operationNumber+" numaralı kiralama iptal edilirken hata meydana geldi.")}else alert(a+" numaralı kiralama bulunamamıştır. Tekrar deneyiniz.")})))},946:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BookService=void 0;const r=o(607);t.BookService=class{constructor(e,t){this.bookApi="http://localhost:3002/api/v1/books",this._bookList=e,this._bookSpecification=t}get bookList(){return this._bookList}get bookSpecification(){return this._bookSpecification}set bookList(e){this._bookList=e}set bookSpecification(e){this._bookSpecification=e}getBook(e){return this.bookList.find((t=>t.isbn===e))}addBook(e){try{this.bookList.push(e),this.bookSpecification.push(e.bookSpecification)}catch(e){console.log("Kitap eklenirken bir hata meydana geldi.")}}isValidBook(e){const t=this.getBook(e);return this.bookList.includes(t)}initializeDataMock(){return n(this,void 0,void 0,(function*(){try{const e=yield fetch(this.bookApi,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const t=yield e.json(),o=JSON.parse(JSON.stringify(t,null,4));this.bookList=o,console.log(this.bookList)}catch(e){console.error(e)}}))}listBooks(){const e=document.getElementById("listBooks");if(e){let t,o;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);this.bookList.forEach((n=>{t=document.createElement("div"),t.className="row-list-book",o=document.createElement("div"),o.className="column-list-book",o.textContent=n.isbn.toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=n.name.toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=n.author.toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=r.stockService.getStockQuantity(n.isbn).toString(),t.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=n.bookSpecification.price.toString()+" ₺",t.appendChild(o),e.appendChild(t)}))}}addBookMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.bookApi,{method:"POST",body:JSON.stringify({isbn:e.isbn,name:e.name,author:e.author,pages:e.pages,publishYear:e.publishYear,bookSpecification:{isbn:e.bookSpecification.isbn,price:e.bookSpecification.price,startDate:e.bookSpecification.startDate,endDate:e.bookSpecification.endDate}}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log("Rest servisinden dönen cevap =>"),console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},943:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelService=void 0,t.CancelService=class{constructor(e){this.cancelSaleApi="http://localhost:3002/api/cancelSale",this.cancelRentApi="http://localhost:3002/api/cancelRent",this._cancelledList=e}get cancelledList(){return this._cancelledList}set cancelledList(e){this._cancelledList=e}calculateDiffHours(e,t){let o=e.getTime()-t.getTime();return Math.floor(o/1e3/60/60)}cancelSale(e){let t=this.calculateCancelSaleRefund(e);e.refund=t,this.cancelledList.push(e)}calculateCancelSaleRefund(e){let t;return t=this.calculateDiffHours(e.canceledDateTime,e.cancelType.operationDateTime)>24?.75*e.cancelType.total:e.cancelType.total,t}cancelSaleMock(e){return o(this,void 0,void 0,(function*(){let t=this.calculateCancelSaleRefund(e);e.refund=t;try{const t=yield fetch(this.cancelSaleApi,{method:"POST",body:JSON.stringify({sale:e.cancelType,refund:e.refund,canceledDateTime:e.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}cancelRent(e){let t=this.calculateCancelRentRefund(e);e.refund=t,this.cancelledList.push(e)}calculateCancelRentRefund(e){let t;return t=this.calculateDiffHours(e.canceledDateTime,e.cancelType.operationDateTime)>24?.75*e.cancelType.total:e.cancelType.total,t}cancelRentMock(e){return o(this,void 0,void 0,(function*(){let t=this.calculateCancelRentRefund(e);e.refund=t;try{const t=yield fetch(this.cancelRentApi,{method:"POST",body:JSON.stringify({rent:e.cancelType,refund:e.refund,canceledDateTime:e.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},709:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerService=void 0,t.CustomerService=class{constructor(e){this.customerApi="http://localhost:3002/api/v1/customers",this._customerList=e}get customerList(){return this._customerList}set customerList(e){this._customerList=e}addCustomer(e){this.customerList.push(e)}addCustomerMock(e){return o(this,void 0,void 0,(function*(){try{const t=yield fetch(this.customerApi,{method:"POST",body:JSON.stringify({name:e.name,surName:e.surName,phoneNumber:e.phoneNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log("Rest servisinden dönen cevap =>"),console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},148:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RentService=void 0;const r=o(607),a=o(961),i=o(758),s=o(767);t.RentService=class{constructor(e,t){this.rentApi="http://localhost:3002/api/v1/rents",this._rentList=e,this.refundPercent=.75,this._rentCart=t}get rentList(){return this._rentList}set rentList(e){this._rentList=e}get rentCart(){return this._rentCart}set rentCart(e){this._rentCart=e}addRent(e){this.rentList.push(e)}calculateTotal(e){let t=0;for(let o of e.orderBookItems)t+=o.book.bookSpecification.price*o.quantity;return t}generateRentNumber(e){let t=new Date;return"R"+t.getDay().toString()+t.getMonth().toString()+t.getFullYear().toString()+t.getHours().toString()+t.getMinutes().toString()+t.getSeconds().toString()+e.toString()}calculateDiffHours(e,t){let o=e.getTime()-t.getTime();return Math.floor(o/1e3/60/60)}calculateRefund(e){e.refund=e.total*this.refundPercent}calculateRefundAmount(e){let t,o=this.calculateDiffHours(e.refundDate,e.operationDateTime)/24;if(o<=14)t=.75*e.total;else if(o<=24){let n=.75-.05*(o-14);t=e.total*n}else t=.25*e.total;return t}getRent(e){return this.rentList.find((t=>t.operationNumber===e))}addBookToCart(e,t,o){if(0===this.rentCart.orderBookItems.length)this.rentCart.customerId=o;else if(this.rentCart.orderBookItems.length>0&&this.rentCart.customerId!==o)return alert("Farklı müşteriye kitap kiralanmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;this.rentCart.orderBookItems.push(new s.OrderBookItems(e,t)),this.updateRentCart()}updateRentCart(){const e=document.getElementById("rentCart"),t=document.getElementById("totalRentAmountTl");if(e){let o,n,r=0;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.textContent="";for(let e=0;e<this.rentCart.orderBookItems.length;e++){o=document.createElement("div"),o.className="rent-cart-row";for(let e of this.rentCart.orderBookItems)n=document.createElement("div"),n.className="rent-cart-column",n.textContent=this.rentCart.customerId.toString(),o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=e.book.name,o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=e.quantity.toString(),o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=(e.book.bookSpecification.price*e.quantity).toString(),o.appendChild(n)}if(o&&t){for(let e of this.rentCart.orderBookItems)r+=e.book.bookSpecification.price*e.quantity;e.appendChild(o),t.textContent=r.toString()+" TL"}}}cartToRent(){let e=this.rentCart,t=new a.Rent;t.orderBookItems=e.orderBookItems,t.customerId=e.customerId,t.operationNumber=this.generateRentNumber(e.customerId),t.operationDateTime=new Date,t.total=this.calculateTotal(t);for(let e of t.orderBookItems)r.stockService.increaseStock(e.book.isbn,-e.quantity);this.rentCart=new i.RentCart,this.updateRentCart(),this.addRentMock(t)}addRentMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.rentApi,{method:"POST",body:JSON.stringify({saleBookItems:Array.from(e.orderBookItems),customerId:e.customerId,operationDateTime:e.operationDateTime,operationNumber:e.operationNumber,total:e.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),alert(e.message+" "+e.saleNumber),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}refundRentMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.rentApi+"/"+e.operationNumber,{method:"PATCH",body:JSON.stringify({refundDate:e.refundDate,refund:e.refund}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const o=yield t.json();return console.log(o),e.refund}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},478:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SaleService=void 0;const r=o(607),a=o(354),i=o(767),s=o(51);t.SaleService=class{constructor(e,t){this.saleApi="http://localhost:3002/api/v1/sales",this._saleList=e,this._saleCart=t}get saleList(){return this._saleList}set saleList(e){this._saleList=e}get saleCart(){return this._saleCart}set saleCart(e){this._saleCart=e}addSale(e){this.saleList.push(e)}calculateTotal(e){let t=0;for(let o of e.orderBookItems)t+=o.book.bookSpecification.price*o.quantity;return t}generateSaleNumber(e){let t=new Date;return"S"+t.getDay().toString()+t.getMonth().toString()+t.getFullYear().toString()+t.getHours().toString()+t.getMinutes().toString()+t.getSeconds().toString()+e.toString()}getSale(e){return this.saleList.find((t=>t.operationNumber===e))}removeSale(e){let t=this.saleList.indexOf(e);this.saleList.splice(t,1)}addBookToCart(e,t,o){if(0===this.saleCart.orderBookItems.length)this.saleCart.customerId=o;else if(this.saleCart.orderBookItems.length>0&&this.saleCart.customerId!==o)return alert("Farklı müşteriye kitap satılmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;let n=new i.OrderBookItems(e,t);this.saleCart.orderBookItems.push(n),this.updateSaleCart()}updateSaleCart(){const e=document.getElementById("saleCart"),t=document.getElementById("totalSaleAmountTl");if(e){let o,n,r=0;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.textContent="";for(let e=0;e<this.saleCart.orderBookItems.length;e++){o=document.createElement("div"),o.className="sale-cart-row";for(let e of this.saleCart.orderBookItems)n=document.createElement("div"),n.className="sale-cart-column",n.textContent=this.saleCart.customerId.toString(),o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=e.book.name,o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=e.quantity.toString(),o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=(e.book.bookSpecification.price*e.quantity).toString(),o.appendChild(n)}if(o&&t){for(let e of this.saleCart.orderBookItems)r+=e.book.bookSpecification.price*e.quantity;e.appendChild(o),t.textContent=r.toString()+" TL"}}}cartToSale(){let e=this.saleCart,t=new a.Sale;t.orderBookItems=e.orderBookItems,t.customerId=e.customerId,t.operationNumber=this.generateSaleNumber(e.customerId),t.operationDateTime=new Date,t.total=this.calculateTotal(t);for(let e of t.orderBookItems)r.stockService.increaseStock(e.book.isbn,-e.quantity);let o=this.addSaleMock(t);return this.saleCart=new s.SaleCart,this.updateSaleCart(),o}addSaleMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.saleApi,{method:"POST",body:JSON.stringify({orderBookItems:Array.from(e.orderBookItems),customerId:e.customerId,operationDateTime:e.operationDateTime,operationNumber:e.operationNumber,total:e.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(console.log(t),t.ok){const o=yield t.json();return console.log(o),alert("Fişinizi kaybetmeyiniz. Fiş Numarası: "+e.operationNumber),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},214:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StockService=void 0;const r=o(72);t.StockService=class{constructor(e){this.stockApi="http://localhost:3002/api/stocks",this._stockList=e}get stockList(){return this._stockList}set stockList(e){this._stockList=e}addStock(e,t,o){try{let n=new r.Stock(e,o,t);return this.stockList.push(n),!0}catch(e){return console.error(e),!1}}increaseStock(e,t){let o=this.getStock(e);return!!o&&(o.quantity=o.quantity+t,!0)}getStock(e){let t=this.stockList.find((t=>t.isbn===e));if(t)return t}getStockQuantity(e){let t=this.getStock(e);return t?t.quantity:0}addStockMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.stockApi,{method:"POST",body:JSON.stringify({isbn:e.isbn,quantity:e.quantity,shelfNumber:e.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu."+e)}}))}increaseStockMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.stockApi+"/"+e.isbn,{method:"PUT",body:JSON.stringify({isbn:e.isbn,quantity:e.quantity,shelfNumber:e.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!t.ok)throw new Error(`Hata oluştu, hata kodu: ${t.status} `);const o=yield t.json();console.log(o),console.log(t.status)}catch(e){console.log("Hata Oluştu.")}}))}}}},t={};!function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyaXB0LmpzIiwibWFwcGluZ3MiOiIyR0FLQSxlQUVBLFFBR0EsaUJBWUtBLGNBQ0tDLEtBQUtDLE9BQVMsSUFBSUMsTUFDbEJGLEtBQUtHLFFBQVUsSUFBSUQsTUFDbkJGLEtBQUtJLFdBQWEsSUFBSUYsTUFDdEJGLEtBQUtLLE9BQVMsSUFBSUgsTUFDbEJGLEtBQUtNLE9BQVMsSUFBSUosTUFDbEJGLEtBQUtPLG9CQUFzQixJQUFJTCxNQUMvQkYsS0FBS1EsU0FBVyxJQUFJTixNQUNwQkYsS0FBS1MsVUFBWSxJQUFJLEVBQUFDLFNBQ3JCVixLQUFLVyxVQUFZLElBQUksRUFBQUMsUUFDMUIsQ0FNV0MsbUJBQ04sT0FBT2IsS0FBS0MsTUFDakIsQ0FNV2Esb0JBQ04sT0FBT2QsS0FBS0csT0FDakIsQ0FNV1ksdUJBQ04sT0FBT2YsS0FBS0ksVUFDakIsQ0FNV1ksbUJBQ04sT0FBT2hCLEtBQUtLLE1BQ2pCLENBTVdZLGVBQ04sT0FBT2pCLEtBQUtNLE1BQ2pCLENBTVdZLDRCQUNOLE9BQU9sQixLQUFLTyxtQkFDakIsQ0FNV1ksdUJBQ04sT0FBT25CLEtBQUtRLFFBQ2pCLENBTVdZLGtCQUNOLE9BQU9wQixLQUFLUyxTQUNqQixDQU1PWSxrQkFDVixPQUFPckIsS0FBS1csU0FDYixDQU1XVyxnQkFBWUMsR0FDdEJ2QixLQUFLUyxVQUFZYyxDQUNsQixDQVNXQyxnQkFBWUQsR0FDdEJ2QixLQUFLVyxVQUFZWSxDQUNsQixFLHlGQzNIRCwwQkFNSXhCLFlBQVkwQixFQUFjQyxFQUFlQyxFQUFpQkMsR0FDdEQ1QixLQUFLNkIsTUFBUUosRUFDYnpCLEtBQUs4QixPQUFTSixFQUNkMUIsS0FBSytCLFdBQWFKLEVBQ2xCM0IsS0FBS2dDLFNBQVdKLENBQ3BCLENBT1FILFdBQ1YsT0FBT3pCLEtBQUs2QixLQUNiLENBTVdILFlBQ1YsT0FBTzFCLEtBQUs4QixNQUNiLENBTVdILGdCQUNWLE9BQU8zQixLQUFLK0IsVUFDYixDQU1XSCxjQUNWLE9BQU81QixLQUFLZ0MsUUFDYixDQU1XUCxTQUFLRixHQUNmdkIsS0FBSzZCLE1BQVFOLENBQ2QsQ0FNV0csVUFBTUgsR0FDaEJ2QixLQUFLOEIsT0FBU1AsQ0FDZixDQU1XSSxjQUFVSixHQUNwQnZCLEtBQUsrQixXQUFhUixDQUNuQixDQU1XSyxZQUFRTCxHQUNsQnZCLEtBQUtnQyxTQUFXVCxDQUNqQixFLDZFQzFFRCxhQVFFeEIsWUFBWTBCLEVBQWNRLEVBQWNDLEVBQWdCQyxFQUFxQkMsRUFBZUMsR0FDMUZyQyxLQUFLc0MsTUFBUUwsRUFDYmpDLEtBQUt1QyxRQUFVTCxFQUNmbEMsS0FBSzZCLE1BQVFKLEVBQ2J6QixLQUFLd0MsYUFBZUwsRUFDcEJuQyxLQUFLeUMsT0FBU0wsRUFDZHBDLEtBQUswQyxtQkFBcUJMLENBQzVCLENBTVVaLFdBQ1YsT0FBT3pCLEtBQUs2QixLQUNiLENBTVdJLFdBQ1YsT0FBT2pDLEtBQUtzQyxLQUNiLENBTVdKLGFBQ1YsT0FBT2xDLEtBQUt1QyxPQUNiLENBTVdKLGtCQUNWLE9BQU9uQyxLQUFLd0MsWUFDYixDQU1XSixZQUNWLE9BQU9wQyxLQUFLeUMsTUFDYixDQU1XSix3QkFDVixPQUFPckMsS0FBSzBDLGtCQUNiLENBTVdqQixTQUFLRixHQUNmdkIsS0FBSzZCLE1BQVFOLENBQ2QsQ0FNV1UsU0FBS1YsR0FDZnZCLEtBQUtzQyxNQUFRZixDQUNkLENBTVdXLFdBQU9YLEdBQ2pCdkIsS0FBS3VDLFFBQVVoQixDQUNoQixDQU1XWSxnQkFBWVosR0FDdEJ2QixLQUFLd0MsYUFBZWpCLENBQ3JCLENBTVdhLFVBQU1iLEdBQ2hCdkIsS0FBS3lDLE9BQVNsQixDQUNmLENBTVdjLHNCQUFrQmQsR0FDNUJ2QixLQUFLMEMsbUJBQXFCbkIsQ0FDM0IsRSwrRUMvR0QsZUFLSXhCLFlBQVk0QyxFQUFrQkMsRUFBZ0JDLEdBQzFDN0MsS0FBSzhDLFlBQWNILEVBQ25CM0MsS0FBSytDLFFBQVVILEVBQ2Y1QyxLQUFLZ0Qsa0JBQW9CSCxDQUM3QixDQU9RRixpQkFDVixPQUFPM0MsS0FBSzhDLFdBQ2IsQ0FNV0YsYUFDVixPQUFPNUMsS0FBSytDLE9BQ2IsQ0FNV0YsdUJBQ1YsT0FBTzdDLEtBQUtnRCxpQkFDYixDQU1XTCxlQUFXcEIsR0FDckJ2QixLQUFLOEMsWUFBY3ZCLENBQ3BCLENBTVdxQixXQUFPckIsR0FDakJ2QixLQUFLK0MsUUFBVXhCLENBQ2hCLENBTVdzQixxQkFBaUJ0QixHQUMzQnZCLEtBQUtnRCxrQkFBb0J6QixDQUMxQixFLGlGQzVERCxpQkFLRXhCLFlBQVlrQyxFQUFjZ0IsRUFBaUJDLEdBQ3pDbEQsS0FBS3NDLE1BQVFMLEVBQ2JqQyxLQUFLbUQsU0FBV0YsRUFDaEJqRCxLQUFLb0QsYUFBZUYsQ0FDdEIsQ0FNVWpCLFdBQ1YsT0FBT2pDLEtBQUtzQyxLQUNiLENBTVdXLGNBQ1YsT0FBT2pELEtBQUttRCxRQUNiLENBTVdELGtCQUNWLE9BQU9sRCxLQUFLb0QsWUFDYixDQU1XbkIsU0FBS1YsR0FDZnZCLEtBQUtzQyxNQUFRZixDQUNkLENBTVcwQixZQUFRMUIsR0FDbEJ2QixLQUFLbUQsU0FBVzVCLENBQ2pCLENBTVcyQixnQkFBWTNCLEdBQ3RCdkIsS0FBS29ELGFBQWU3QixDQUNyQixFLHVGQ3ZERCx1QkFLSXhCLFlBQVlzRCxFQUFZQyxHQUNwQnRELEtBQUt1RCxNQUFRRixFQUNickQsS0FBS3dELFVBQVlGLENBQ3JCLENBTVdELFdBQ1AsT0FBT3JELEtBQUt1RCxLQUNoQixDQU1XRCxlQUNQLE9BQU90RCxLQUFLd0QsU0FDaEIsQ0FNV0gsU0FBSzlCLEdBQ1p2QixLQUFLdUQsTUFBUWhDLENBQ2pCLENBTVcrQixhQUFTL0IsR0FDaEJ2QixLQUFLd0QsVUFBWWpDLENBQ3JCLENBRU9rQyxTQUNILE1BQU8sQ0FDSEosS0FBTXJELEtBQUt1RCxNQUNYRCxTQUFVdEQsS0FBS3dELFVBRXZCLEUsaUZDN0NKLGlCQUlJekQsY0FDSUMsS0FBSzBELGVBQWlCLElBQUl4RCxLQUM5QixFLCtFQ1ZKLGVBR0EsTUFBYXlELFVBQWEsRUFBQUMsS0FLdEI3RCxZQUFZOEQsRUFBdUNDLEVBQTBCQyxFQUFxQkMsRUFBMEJDLEVBQWdCQyxFQUFtQnRCLEdBQzNKdUIsTUFBTU4sRUFBZUUsRUFBWUQsRUFBbUJFLEVBQWlCQyxHQUVyRWpFLEtBQUtvRSxZQUFjRixFQUNuQmxFLEtBQUsrQyxRQUFVSCxDQUNuQixDQU9Xc0IsaUJBQ1AsT0FBT2xFLEtBQUtvRSxXQUNoQixDQU1XeEIsYUFDUCxPQUFPNUMsS0FBSytDLE9BQ2hCLENBTVdtQixlQUFXM0MsR0FDbEJ2QixLQUFLb0UsWUFBYzdDLENBQ3ZCLENBTVdxQixXQUFPckIsR0FDZHZCLEtBQUsrQyxRQUFVeEIsQ0FDbkIsRUEzQ0osUSxnRkNBQSxpQkFLQ3hCLGNBQ0NDLEtBQUswRCxlQUFpQixJQUFJeEQsS0FDM0IsRSw2RUNQRCxhQVFDSCxZQUFZMkQsRUFBd0NLLEVBQXFCRCxFQUEwQkUsRUFBMEJDLEdBQzVIakUsS0FBS3FFLGdCQUFrQlgsRUFDdkIxRCxLQUFLc0UsWUFBY1AsRUFDbkIvRCxLQUFLdUUsbUJBQXFCVCxFQUMxQjlELEtBQUt3RSxpQkFBbUJSLEVBQ3hCaEUsS0FBS3lFLE9BQVNSLENBQ2YsQ0FPV1AscUJBQ1YsT0FBTzFELEtBQUtxRSxlQUNiLENBTVdOLGlCQUNWLE9BQU8vRCxLQUFLc0UsV0FDYixDQU1XUix3QkFDVixPQUFPOUQsS0FBS3VFLGtCQUNiLENBTVdQLHNCQUNWLE9BQU9oRSxLQUFLd0UsZ0JBQ2IsQ0FNV1AsWUFDVixPQUFPakUsS0FBS3lFLE1BQ2IsQ0FNV2YsbUJBQWVuQyxHQUN6QnZCLEtBQUtxRSxnQkFBa0I5QyxDQUN4QixDQU1Xd0MsZUFBV3hDLEdBQ3JCdkIsS0FBS3NFLFlBQWMvQyxDQUNwQixDQU1XdUMsc0JBQWtCdkMsR0FDNUJ2QixLQUFLdUUsbUJBQXFCaEQsQ0FDM0IsQ0FNV3lDLG9CQUFnQnpDLEdBQzFCdkIsS0FBS3dFLGlCQUFtQmpELENBQ3pCLENBTVcwQyxVQUFNMUMsR0FDaEJ2QixLQUFLeUUsT0FBU2xELENBQ2YsRSw2RUNsR0QsY0FLSXhCLFlBQVkwQixFQUFlNkIsRUFBbUJvQixHQUMxQzFFLEtBQUs2QixNQUFRSixFQUNiekIsS0FBS3dELFVBQVlGLEVBQ2pCdEQsS0FBSzJFLGFBQWVELENBQ3hCLENBUVdqRCxXQUNQLE9BQU96QixLQUFLNkIsS0FDaEIsQ0FNV3lCLGVBQ1AsT0FBT3RELEtBQUt3RCxTQUNoQixDQU1Xa0Isa0JBQ1AsT0FBTzFFLEtBQUsyRSxZQUNoQixDQU1XbEQsU0FBS0YsR0FDWnZCLEtBQUs2QixNQUFRTixDQUNqQixDQU1XK0IsYUFBUy9CLEdBQ2hCdkIsS0FBS3dELFVBQVlqQyxDQUNyQixDQU1XbUQsZ0JBQVluRCxHQUNuQnZCLEtBQUsyRSxhQUFlcEQsQ0FDeEIsRSx5ZUMxREosZUFDQSxTQUNBLFFBQ0EsU0FDQSxTQUNBLFNBQ0EsU0FDQSxTQUNBLFFBQ0EsU0FDQSxTQUNBLFNBQ0EsU0FDQSxTQUNBLFNBbURBLFNBQVNxRCxFQUFZQyxFQUFlQyxHQUdsQyxNQUFNQyxFQUFVQyxTQUFTQyxlQUFlSCxHQUNsQ0ksRUFBTUYsU0FBU0MsZUFBZUosR0FFaENFLEdBQVdHLEdBQ2JBLEVBQUlDLGlCQUFpQixTQUFTLEtBQ0UsU0FBMUJKLEVBQVFLLE1BQU1DLFFBQ2hCTixFQUFRSyxNQUFNQyxRQUFVLFFBRXhCTixFQUFRSyxNQUFNQyxRQUFVLE0sR0FJaEMsQ0FwREEsSUFBNEJDLElBTFQsSUFBSSxFQUFBQyxTQU1yQixFQUFBQyxZQUFjLElBQUksRUFBQUMsWUFBWUgsRUFBR3pFLGFBQWN5RSxFQUFHcEUsdUJBQ2xELEVBQUF3RSxnQkFBa0IsSUFBSSxFQUFBQyxnQkFBZ0JMLEVBQUd2RSxrQkFDekMsRUFBQTZFLGNBQWdCLElBQUksRUFBQUMsY0FBY1AsRUFBR25FLGtCQUNyQyxFQUFBMkUsWUFBYyxJQUFJLEVBQUFDLFlBQVlULEVBQUdyRSxTQUFVcUUsRUFBR2pFLGFBQzlDLEVBQUEyRSxZQUFjLElBQUksRUFBQUMsWUFBWVgsRUFBR3RFLGFBQWNzRSxFQUFHbEUsYUFDbEQsRUFBQThFLGFBQWUsSUFBSSxFQUFBQyxhQUFhYixFQUFHeEUsZUFDbkNzRixRQUFRQyxJQUFJLHdCQUVaLEVBQUFYLGdCQUFnQlksWUFBWSxJQUFJLEVBQUFDLFNBQVMsR0FBSSxHQUFJLEtBQ2pELEVBQUFiLGdCQUFnQlksWUFBWSxJQUFJLEVBQUFDLFNBQVMsR0FBSSxHQUFJLEtBRWpELEVBQUFMLGFBQWFNLFNBQVMsU0FBVSxTQUFVLElBQzFDLEVBQUFOLGFBQWFNLFNBQVMsU0FBVSxTQUFVLElBRzVDLFcsd0NBQ1EsRUFBQWhCLFlBQVlpQixvQkFHcEIsRyxDQXZCQUMsR0EyQkU5QixFQUFZLGtCQUFtQixrQkFDL0JBLEVBQVksb0JBQXFCLG9CQUNqQ0EsRUFBWSxzQkFBdUIsc0JBQ25DQSxFQUFZLG1CQUFvQixtQkFDaENBLEVBQVksbUJBQW9CLG1CQUNoQ0EsRUFBWSxtQkFBb0IsbUJBQ2hDQSxFQUFZLHFCQUFzQixxQkFDbENBLEVBQVkscUJBQXNCLHFCQUNsQ0EsRUFBWSxxQkFBc0IscUJBQ2xDQSxFQUFZLFVBQVcsbUJBcUJ6QixNQUFNK0IsRUFBK0IzQixTQUFTQyxlQUFlLGlCQUMxQyxNQUFmMEIsSUFDRkEsRUFBWUMsU0FBa0JDLEdBQU0sT0FBRCw2QkFFakNBLEVBQUVDLGlCQUNGLE1BQU1DLEVBQVcsSUFBSUMsU0FBU0wsR0FFeEJNLEVBQVFGLEVBQVNHLElBQUksYUFDckJoRixFQUFTNkUsRUFBU0csSUFBSSxjQUN0QnpGLEVBQU9zRixFQUFTRyxJQUFJLFlBQ3BCL0UsRUFBYzRFLEVBQVNHLElBQUksbUJBQzNCOUUsRUFBUTJFLEVBQVNHLElBQUksYUFDckJ4RixFQUFRcUYsRUFBU0csSUFBSSxhQUNyQnZGLEVBQVksSUFBSXdGLEtBQ2hCdkYsRUFBVSxJQUFJdUYsS0FBSyx5QkFFekJGLEVBQU1HLE1BQU0sSUFHWixNQUFNQyxFQUFXLElBQUksRUFBQUMsa0JBQWtCN0YsRUFBTUMsRUFBT0MsRUFBV0MsR0FDekR5QixFQUFPLElBQUksRUFBQWtFLEtBQUs5RixFQUFNd0YsRUFBTy9FLEVBQVFDLEVBQWFDLEVBQU9pRixHQVcvRCxhQVJvQixFQUFBN0IsWUFBWWdDLFlBQVluRSxLQUUxQ29FLE1BQU1wRSxFQUFLNUIsS0FBTyw0REFDbEJrRixFQUFZZSxTQUVaRCxNQUFNcEUsRUFBSzVCLEtBQU8sNkRBR2IsQ0FDVCxLQUdGLE1BQU1rRyxFQUFpQzNDLFNBQVNDLGVBQWUsa0JBQzNEMEMsSUFDRkEsRUFBYWYsU0FBa0JDLEdBQU0sT0FBRCw2QkFDbENBLEVBQUVDLGlCQUNGLE1BQU1DLEVBQVcsSUFBSUMsU0FBU1csR0FFeEJsRyxFQUFPc0YsRUFBU0csSUFBSSx1QkFDcEJVLEVBQVdiLEVBQVNHLElBQUksaUJBQ3hCeEMsRUFBY3FDLEVBQVNHLElBQUksZUFFM0JXLEVBQVEsSUFBSSxFQUFBQyxNQUFNckcsRUFBTW1HLEVBQVVsRCxHQWtCeEMsT0FoQnVCLEVBQUFjLFlBQVl1QyxTQUFTQyxNQUFLQyxHQUFLQSxFQUFFeEcsTUFBUUEsV0FNN0MsRUFBQXlFLGFBQWFnQyxhQUFhTCxLQUd6Q0osTUFBTWhHLEVBQU8sNEJBQThCbUcsRUFBVyxvQ0FOeERILE1BQU0saUZBWVJFLEVBQWFELFNBQ04sQ0FDVCxLQU1GLE1BQU1TLEVBQW9DbkQsU0FBU0MsZUFBZSxxQkFDOURrRCxJQUNGQSxFQUFnQnZCLFNBQWtCQyxHQUFNLE9BQUQsNkJBQ3JDQSxFQUFFQyxpQkFDRixNQUFNQyxFQUFXLElBQUlDLFNBQVNtQixHQUV4QmxHLEVBQU84RSxFQUFTRyxJQUFJLGdCQUNwQmtCLEVBQVVyQixFQUFTRyxJQUFJLG1CQUN2QmhFLEVBQWM2RCxFQUFTRyxJQUFJLHVCQUUzQm1CLEVBQVcsSUFBSSxFQUFBOUIsU0FBU3RFLEVBQU1tRyxFQUFTbEYsR0FVN0MsYUFUb0IsRUFBQXdDLGdCQUFnQjRDLGdCQUFnQkQsS0FHbERaLE1BQU0scURBQ05VLEVBQWdCVCxTQUVoQkQsTUFBTSw4REFHRCxDQUNULEtBTUYsTUFBTWMsRUFBaUN2RCxTQUFTQyxlQUFlLGtCQUMzRHNELElBQ0ZBLEVBQWEzQixTQUFXLEtBRXRCLE1BQU1HLEVBQVcsSUFBSUMsU0FBU3VCLEdBRXhCOUcsRUFBT3NGLEVBQVNHLElBQUksZUFDcEI3RCxFQUFPLEVBQUFtQyxZQUFZZ0QsUUFBUS9HLEdBQzNCc0MsRUFBYTBFLFNBQVMxQixFQUFTRyxJQUFJLHNCQUduQzVELEVBQVdtRixTQUFTMUIsRUFBU0csSUFBSSxvQkFFakNXLEVBQVEsRUFBQTNCLGFBQWF3QyxTQUFTakgsR0FFcEMsSUFxQkUsT0FwQkk0QixFQUNFd0UsRUFDRUEsRUFBTXZFLFVBQVlBLEVBRWxCLEVBQUEwQyxZQUFZMkMsY0FBY3RGLEVBQU1DLEVBQVVTLEdBTTVDMEQsTUFBTW5FLEVBQVcsMENBR25CbUUsTUFBTSxZQUFZaEcsNkNBR3BCZ0csTUFBTWhHLEVBQU8sMkJBR2Y4RyxFQUFhYixTQUNOLEMsQ0FFUCxNQUFPa0IsR0FDUG5CLE1BQU1tQixFLElBV3dCNUQsU0FBU0MsZUFBZSxXQUNwREUsaUJBQWlCLFNBQVMsS0FDbUIsSUFBL0MsRUFBQWEsWUFBWTZDLFNBQVNuRixlQUFlb0YsT0FFdENyQixNQUFNLGdEQUdRLEVBQUF6QixZQUFZK0MsYUFFeEJ0QixNQUFNLGdEQUVOQSxNQUFNLCtELElBUytCekMsU0FBU0MsZUFBZSxxQkFDOUNFLGlCQUFpQixTQUFTLEtBQzdDLEVBQUFLLFlBQVl3RCxXQUFXLElBR3pCLE1BQU1DLEVBQWtDakUsU0FBU0MsZUFBZSxvQkFDNURnRSxJQUNGQSxFQUFlckMsU0FBa0JDLEdBQU0sT0FBRCw2QkFDcENBLEVBQUVDLGlCQUdGLElBQUlvQyxFQUFNLElBQUloSixNQUNkZ0osRUFBSUMsS0FBSyxJQUFJLEVBQUFDLGVBQWUsRUFBQTVELFlBQVlnRCxRQUFRLFVBQVcsSUFFM0QsSUFBSWEsRUFBSSxJQUFJLEVBQUF6RixLQUFLc0YsRUFBSyxFQUFHLElBQUkvQixLQUFNLGdCQUFpQixLQUNwRCxFQUFBbkIsWUFBWXNELFNBQVNILEtBQUtFLEdBRTFCLE1BQ01FLEVBRFcsSUFBSXZDLFNBQVNpQyxHQUNGL0IsSUFBSSx1QkFFaEMsSUFBSXNDLEVBQU8sRUFBQXhELFlBQVl5RCxRQUFRRixHQUUvQixHQUFJQyxFQUFNLENBQ1IsSUFBSUUsRUFBcUIsSUFBSSxFQUFBQyxPQUFPSCxFQUFNQSxFQUFLdkYsTUFBTyxJQUFJa0QsYUFDeEMsRUFBQXZCLGNBQWNnRSxlQUFlRixJQUc3Q2pDLE1BQU0rQixFQUFLeEYsZ0JBQWtCLHFDQUU3QnlELE1BQU0rQixFQUFLeEYsZ0JBQWtCLHNELE1BRy9CeUQsTUFBTThCLEVBQWEsb0RBR3ZCLEtBR0YsTUFBTU0sRUFBa0M3RSxTQUFTQyxlQUFlLG9CQUM1RDRFLElBQ0ZBLEVBQWVqRCxTQUFrQkMsR0FBTSxPQUFELDZCQUNwQ0EsRUFBRUMsaUJBR0YsSUFBSW9DLEVBQU0sSUFBSWhKLE1BQ2RnSixFQUFJQyxLQUFLLElBQUksRUFBQUMsZUFBZSxFQUFBNUQsWUFBWWdELFFBQVEsVUFBVyxJQUUzRCxJQUFJc0IsRUFBUSxJQUFJM0MsS0FDaEIyQyxFQUFNQyxRQUFRRCxFQUFNRSxVQUFZLElBRWhDLElBQUlYLEVBQUksSUFBSSxFQUFBMUYsS0FBS3VGLEVBQUssSUFBSS9CLEtBQU0sRUFBRyxnQkFBaUIsSUFBSzJDLEVBQU8sS0FDaEUsRUFBQWhFLFlBQVltRSxTQUFTZCxLQUFLRSxHQUUxQixNQUNNYSxFQURXLElBQUlsRCxTQUFTNkMsR0FDRjNDLElBQUksdUJBRWhDLElBQUlpRCxFQUFPLEVBQUFyRSxZQUFZc0UsUUFBUUYsR0FFL0IsR0FBSUMsRUFBTSxDQUNSLElBQUlFLEVBQXFCLElBQUksRUFBQVYsT0FBT1EsRUFBTUEsRUFBS2xHLE1BQU8sSUFBSWtELGFBQ3hDLEVBQUF2QixjQUFjMEUsZUFBZUQsSUFHN0M1QyxNQUFNMEMsRUFBS25HLGdCQUFrQix3Q0FFN0J5RCxNQUFNMEMsRUFBS25HLGdCQUFrQix5RCxNQUcvQnlELE1BQU15QyxFQUFhLHNEQUd2QixLQU9GLE1BQU1LLEVBQWlDdkYsU0FBU0MsZUFBZSxrQkFDM0RzRixJQUNGQSxFQUFhM0QsU0FBVyxLQUV0QixNQUFNRyxFQUFXLElBQUlDLFNBQVN1RCxHQUV4QjlJLEVBQU9zRixFQUFTRyxJQUFJLGVBQ3BCN0QsRUFBTyxFQUFBbUMsWUFBWWdELFFBQVEvRyxHQUMzQnNDLEVBQWEwRSxTQUFTMUIsRUFBU0csSUFBSSxzQkFHbkM1RCxFQUFXbUYsU0FBUzFCLEVBQVNHLElBQUksb0JBQ2pDVyxFQUFRLEVBQUEzQixhQUFhd0MsU0FBU2pILEdBRXBDLElBcUJFLE9BcEJJNEIsRUFDRXdFLEVBQ0VBLEVBQU12RSxVQUFZQSxFQUVsQixFQUFBd0MsWUFBWTZDLGNBQWN0RixFQUFNQyxFQUFVUyxHQU01QzBELE1BQU1uRSxFQUFXLDBDQUduQm1FLE1BQU0sWUFBWWhHLDZDQUdwQmdHLE1BQU1oRyxFQUFPLDJCQUdmOEksRUFBYTdDLFNBQ04sQyxDQUVQLE1BQU9rQixHQUNQbkIsTUFBTW1CLEUsSUFXd0I1RCxTQUFTQyxlQUFlLFdBQ3BERSxpQkFBaUIsU0FBUyxLQUNtQixJQUEvQyxFQUFBVyxZQUFZMEUsU0FBUzlHLGVBQWVvRixPQUN0Q3JCLE1BQU0sZ0RBRU4sRUFBQTNCLFlBQVkyRSxZLElBS2hCLE1BQU1DLEVBQW1DMUYsU0FBU0MsZUFBZSxvQkFDN0R5RixJQUNGQSxFQUFlOUQsU0FBa0JDLEdBQU0sT0FBRCw2QkFJcEMsSUFBSXFDLEVBQU0sSUFBSWhKLE1BQ2RnSixFQUFJQyxLQUFLLElBQUksRUFBQUMsZUFBZSxFQUFBNUQsWUFBWWdELFFBQVEsVUFBVyxJQUUzRCxJQUFJc0IsRUFBUSxJQUFJM0MsS0FDaEIyQyxFQUFNQyxRQUFRRCxFQUFNRSxVQUFZLElBRWhDLElBQUlYLEVBQUksSUFBSSxFQUFBMUYsS0FBS3VGLEVBQUssSUFBSS9CLEtBQU0sRUFBRyxnQkFBaUIsSUFBSzJDLEVBQU8sR0FDaEVULEVBQUV6RyxPQUFTLEVBQUFrRCxZQUFZNkUsc0JBQXNCdEIsR0FFN0MsRUFBQXZELFlBQVltRSxTQUFTZCxLQUFLRSxHQUcxQnhDLEVBQUVDLGlCQUNGLE1BQ01vRCxFQURXLElBQUlsRCxTQUFTMEQsR0FDRnhELElBQUksdUJBRWhDLElBQUlpRCxFQUFPLEVBQUFyRSxZQUFZc0UsUUFBUUYsR0FDL0IsR0FBSUMsRUFBTSxDQUVSLElBQUl2SCxRQUFlLEVBQUFrRCxZQUFZOEUsZUFBZVQsR0FFMUN2SCxHQUNGNkUsTUFBTTBDLEVBQUtuRyxnQkFBa0IsdUNBQzdCeUQsTUFBTSxzQkFBd0I3RSxFQUFTLFNBRXZDNkUsTUFBTTBDLEVBQUtuRyxnQkFBa0IseUQsTUFHL0J5RCxNQUFNeUMsRUFBYSx1REFHdkIsSSw0WkNyYUYsZUFJQSxvQkFLSW5LLFlBQVlnSSxFQUF1QjFGLEdBRm5DLEtBQUF3SSxRQUFrQixxQ0FHZDdLLEtBQUs4SyxVQUFZL0MsRUFDakIvSCxLQUFLMEMsbUJBQXFCTCxDQUM5QixDQU1XMEYsZUFDUCxPQUFPL0gsS0FBSzhLLFNBQ2hCLENBTVd6SSx3QkFDUCxPQUFPckMsS0FBSzBDLGtCQUNoQixDQU1XcUYsYUFBU3hHLEdBQ2hCdkIsS0FBSzhLLFVBQVl2SixDQUNyQixDQU1XYyxzQkFBa0JkLEdBQ3pCdkIsS0FBSzBDLG1CQUFxQm5CLENBQzlCLENBT09pSCxRQUFRL0csR0FHWCxPQUFPekIsS0FBSytILFNBQVNnRCxNQUFLOUMsR0FBS0EsRUFBRXhHLE9BQVNBLEdBQzlDLENBTU91SixRQUFRQyxHQUNYLElBQ0lqTCxLQUFLK0gsU0FBU29CLEtBQUs4QixHQUNuQmpMLEtBQUtxQyxrQkFBa0I4RyxLQUFLOEIsRUFBUTVJLGtCLENBQ3RDLE1BQU82SSxHQUNMOUUsUUFBUUMsSUFBSSwyQyxDQUVwQixDQUVPOEUsWUFBWTFKLEdBQ2YsTUFBTXdHLEVBQUlqSSxLQUFLd0ksUUFBUS9HLEdBQ3ZCLE9BQU96QixLQUFLK0gsU0FBU3FELFNBQVNuRCxFQUNsQyxDQUVNeEIscUIseUNBQ0YsSUFDSSxNQUFNNEUsUUFBaUJDLE1BQU10TCxLQUFLNkssUUFBUyxDQUN2Q1UsT0FBUSxNQUNSQyxRQUFTLENBQ0xDLE9BQVEsc0JBSWhCLElBQUtKLEVBQVNLLEdBQ1YsTUFBTSxJQUFJQyxNQUFNLDJCQUEyQk4sRUFBU08sV0FFeEQsTUFBTUMsUUFBZ0JSLEVBQVNTLE9BQ3pCQyxFQUFvQkMsS0FBS0MsTUFBTUQsS0FBS0UsVUFBVUwsRUFBUSxLQUFNLElBQ2xFN0wsS0FBSytILFNBQVdnRSxFQUNoQjNGLFFBQVFDLElBQUlyRyxLQUFLK0gsUyxDQUVuQixNQUFPYSxHQUNMeEMsUUFBUXdDLE1BQU1BLEUsQ0FFdEIsRyxDQUVPSSxZQUNILE1BQU1tRCxFQUFlbkgsU0FBU0MsZUFBZSxhQUU3QyxHQUFJa0gsRUFBYyxDQUNkLElBQUlDLEVBQUtDLEVBRVQsS0FBT0YsRUFBYUcsV0FBYUgsRUFBYUksU0FBU3pELE9BQVMsR0FDNURxRCxFQUFhSyxZQUFZTCxFQUFhRyxXQUcxQ3RNLEtBQUsrSCxTQUFTMEUsU0FBUTFILElBQ2xCcUgsRUFBTXBILFNBQVMwSCxjQUFjLE9BQzdCTixFQUFJTyxVQUFZLGdCQUVoQk4sRUFBU3JILFNBQVMwSCxjQUFjLE9BQ2hDTCxFQUFPTSxVQUFZLG1CQUNuQk4sRUFBT08sWUFBYzdILEVBQVF0RCxLQUFLb0wsV0FDbENULEVBQUlVLFlBQVlULEdBRWhCQSxFQUFTckgsU0FBUzBILGNBQWMsT0FDaENMLEVBQU9NLFVBQVksbUJBQ25CTixFQUFPTyxZQUFjN0gsRUFBUTlDLEtBQUs0SyxXQUNsQ1QsRUFBSVUsWUFBWVQsR0FFaEJBLEVBQVNySCxTQUFTMEgsY0FBYyxPQUNoQ0wsRUFBT00sVUFBWSxtQkFDbkJOLEVBQU9PLFlBQWM3SCxFQUFRN0MsT0FBTzJLLFdBQ3BDVCxFQUFJVSxZQUFZVCxHQUVoQkEsRUFBU3JILFNBQVMwSCxjQUFjLE9BQ2hDTCxFQUFPTSxVQUFZLG1CQUNuQk4sRUFBT08sWUFBYyxFQUFBMUcsYUFBYTZHLGlCQUFpQmhJLEVBQVF0RCxNQUFNb0wsV0FDakVULEVBQUlVLFlBQVlULEdBRWhCQSxFQUFTckgsU0FBUzBILGNBQWMsT0FDaENMLEVBQU9NLFVBQVksbUJBQ25CTixFQUFPTyxZQUFjN0gsRUFBUTFDLGtCQUFrQlgsTUFBTW1MLFdBQWEsS0FDbEVULEVBQUlVLFlBQVlULEdBRWhCRixFQUFhVyxZQUFZVixFQUFJLEcsQ0FNekMsQ0FFTTVFLFlBQVlTLEcseUNBQ2QsSUFDSSxNQUFNb0QsUUFBaUJDLE1BQU10TCxLQUFLNkssUUFBUyxDQUN2Q1UsT0FBUSxPQUNSeUIsS0FBTWhCLEtBQUtFLFVBQVUsQ0FDakJ6SyxLQUFNd0csRUFBRXhHLEtBQ1JRLEtBQU1nRyxFQUFFaEcsS0FDUkMsT0FBUStGLEVBQUUvRixPQUNWRSxNQUFPNkYsRUFBRTdGLE1BQ1RELFlBQWE4RixFQUFFOUYsWUFDZkUsa0JBQW1CLENBQ2ZaLEtBQU13RyxFQUFFNUYsa0JBQWtCWixLQUMxQkMsTUFBT3VHLEVBQUU1RixrQkFBa0JYLE1BQzNCQyxVQUFXc0csRUFBRTVGLGtCQUFrQlYsVUFDL0JDLFFBQVNxRyxFQUFFNUYsa0JBQWtCVCxXQUdyQzRKLFFBQVMsQ0FDTCxlQUFnQixtQkFDaEJDLE9BQVEsc0JBSWhCLEdBQUlKLEVBQVNLLEdBQUksQ0FDYixNQUFNRyxRQUFnQlIsRUFBU1MsT0FHL0IsT0FGQTFGLFFBQVFDLElBQUksbUNBQ1pELFFBQVFDLElBQUl3RixJQUNMLEMsQ0FFUCxNQUFNLElBQUlGLE1BQU0sMkJBQTJCTixFQUFTTyxVLENBRTFELE1BQU9WLEdBQ0w5RSxRQUFRQyxJQUFJLGUsQ0FFcEIsRyw4WkNuTEosc0JBS0l0RyxZQUFZa04sR0FIWixLQUFBQyxjQUF3Qix1Q0FDeEIsS0FBQUMsY0FBd0IsdUNBR3BCbk4sS0FBS29OLGVBQWlCSCxDQUMxQixDQU1XQSxvQkFDUCxPQUFPak4sS0FBS29OLGNBQ2hCLENBTVdILGtCQUFjMUwsR0FDckJ2QixLQUFLb04sZUFBaUI3TCxDQUMxQixDQUVPOEwsbUJBQW1CQyxFQUFVQyxHQUVoQyxJQUFJQyxFQUFxQkYsRUFBR0csVUFBWUYsRUFBR0UsVUFFM0MsT0FEZUMsS0FBS0MsTUFBTUgsRUFBWSxJQUFPLEdBQUssR0FFdEQsQ0FFTzlELFdBQVdrRSxHQUNkLElBQUloTCxFQUFpQjVDLEtBQUs2TiwwQkFBMEJELEdBQ3BEQSxFQUFPaEwsT0FBU0EsRUFDaEI1QyxLQUFLaU4sY0FBYzlELEtBQUt5RSxFQUM1QixDQUVPQywwQkFBMEJuRSxHQUM3QixJQUNJOUcsRUFPSixPQUpJQSxFQUpPNUMsS0FBS3FOLG1CQUFtQjNELEVBQVc3RyxpQkFBa0I2RyxFQUFXL0csV0FBV21CLG1CQUczRSxHQUNnQyxJQUE5QjRGLEVBQVcvRyxXQUFXc0IsTUFFdEJ5RixFQUFXL0csV0FBV3NCLE1BRTVCckIsQ0FDWCxDQUVNZ0gsZUFBZUYsRyx5Q0FFakIsSUFBSTlHLEVBQWlCNUMsS0FBSzZOLDBCQUEwQm5FLEdBRXBEQSxFQUFXOUcsT0FBU0EsRUFFcEIsSUFDSSxNQUFNeUksUUFBaUJDLE1BQU10TCxLQUFLa04sY0FBZSxDQUM3QzNCLE9BQVEsT0FDUnlCLEtBQU1oQixLQUFLRSxVQUFVLENBQ2pCMUMsS0FBTUUsRUFBVy9HLFdBQ2pCQyxPQUFROEcsRUFBVzlHLE9BQ25CQyxpQkFBa0I2RyxFQUFXN0csbUJBRWpDMkksUUFBUyxDQUNMLGVBQWdCLG1CQUNoQkMsT0FBUSxzQkFNaEIsR0FBSUosRUFBU0ssR0FBSSxDQUNiLE1BQU1HLFFBQWdCUixFQUFTUyxPQUUvQixPQURBMUYsUUFBUUMsSUFBSXdGLElBQ0wsQyxDQUVQLE1BQU0sSUFBSUYsTUFBTSwyQkFBMkJOLEVBQVNPLFUsQ0FLMUQsTUFBT1YsR0FDTDlFLFFBQVFDLElBQUksZSxDQUlwQixHLENBRU9nRSxXQUFXdUQsR0FDZCxJQUFJaEwsRUFBaUI1QyxLQUFLOE4sMEJBQTBCRixHQUNwREEsRUFBT2hMLE9BQVNBLEVBQ2hCNUMsS0FBS2lOLGNBQWM5RCxLQUFLeUUsRUFDNUIsQ0FFT0UsMEJBQTBCekQsR0FDN0IsSUFDSXpILEVBT0osT0FKSUEsRUFKTzVDLEtBQUtxTixtQkFBbUJoRCxFQUFXeEgsaUJBQWtCd0gsRUFBVzFILFdBQVdtQixtQkFHM0UsR0FDZ0MsSUFBOUJ1RyxFQUFXMUgsV0FBV3NCLE1BRXRCb0csRUFBVzFILFdBQVdzQixNQUU1QnJCLENBQ1gsQ0FFTTBILGVBQWVELEcseUNBQ2pCLElBQUl6SCxFQUFpQjVDLEtBQUs4TiwwQkFBMEJ6RCxHQUVwREEsRUFBV3pILE9BQVNBLEVBRXBCLElBQ0ksTUFBTXlJLFFBQWlCQyxNQUFNdEwsS0FBS21OLGNBQWUsQ0FDN0M1QixPQUFRLE9BQ1J5QixLQUFNaEIsS0FBS0UsVUFBVSxDQUNqQi9CLEtBQU1FLEVBQVcxSCxXQUNqQkMsT0FBUXlILEVBQVd6SCxPQUNuQkMsaUJBQWtCd0gsRUFBV3hILG1CQUVqQzJJLFFBQVMsQ0FDTCxlQUFnQixtQkFDaEJDLE9BQVEsc0JBTWhCLEdBQUlKLEVBQVNLLEdBQUksQ0FDYixNQUFNRyxRQUFnQlIsRUFBU1MsT0FFL0IsT0FEQTFGLFFBQVFDLElBQUl3RixJQUNMLEMsQ0FFUCxNQUFNLElBQUlGLE1BQU0sMkJBQTJCTixFQUFTTyxVLENBSzFELE1BQU9WLEdBQ0w5RSxRQUFRQyxJQUFJLGUsQ0FFcEIsRyxnYUM3SUosd0JBSUl0RyxZQUFZZ08sR0FGSixLQUFBQyxZQUFzQix5Q0FHMUJoTyxLQUFLaU8sY0FBZ0JGLENBQ3pCLENBTVdBLG1CQUNQLE9BQU8vTixLQUFLaU8sYUFDaEIsQ0FNV0YsaUJBQWF4TSxHQUNwQnZCLEtBQUtpTyxjQUFnQjFNLENBQ3pCLENBRU8rRSxZQUFZNEgsR0FDZmxPLEtBQUsrTixhQUFhNUUsS0FBSytFLEVBQzNCLENBMEJNNUYsZ0JBQWdCNEYsRyx5Q0FDbEIsSUFDSSxNQUFNN0MsUUFBaUJDLE1BQU10TCxLQUFLZ08sWUFBYSxDQUMzQ3pDLE9BQVEsT0FDUnlCLEtBQU1oQixLQUFLRSxVQUFVLENBQ2pCakssS0FBTWlNLEVBQVlqTSxLQUNsQmdCLFFBQVNpTCxFQUFZakwsUUFDckJDLFlBQWFnTCxFQUFZaEwsY0FFN0JzSSxRQUFTLENBQ0wsZUFBZ0IsbUJBQ2hCQyxPQUFRLHNCQUloQixHQUFJSixFQUFTSyxHQUFJLENBQ2IsTUFBTUcsUUFBZ0JSLEVBQVNTLE9BRy9CLE9BRkExRixRQUFRQyxJQUFJLG1DQUNaRCxRQUFRQyxJQUFJd0YsSUFDTCxDLENBRVAsTUFBTSxJQUFJRixNQUFNLDJCQUEyQk4sRUFBU08sVSxDQUUxRCxNQUFPVixHQUNMOUUsUUFBUUMsSUFBSSxlLENBRXBCLEcsOFpDaEZKLGVBRUEsU0FDQSxTQUNBLFNBRUEsb0JBUUl0RyxZQUFZa0ssRUFBdUJPLEdBSjVCLEtBQUEyRCxRQUFVLHFDQUtibk8sS0FBS29PLFVBQVluRSxFQUNqQmpLLEtBQUtxTyxjQUFnQixJQUNyQnJPLEtBQUtXLFVBQVk2SixDQUNyQixDQU1XUCxlQUNQLE9BQU9qSyxLQUFLb08sU0FDaEIsQ0FNV25FLGFBQVMxSSxHQUNoQnZCLEtBQUtvTyxVQUFZN00sQ0FDckIsQ0FNV2lKLGVBQ1AsT0FBT3hLLEtBQUtXLFNBQ2hCLENBTVc2SixhQUFTakosR0FDaEJ2QixLQUFLVyxVQUFZWSxDQUNyQixDQUVPK00sUUFBUW5FLEdBQ1huSyxLQUFLaUssU0FBU2QsS0FBS2dCLEVBQ3ZCLENBT09vRSxlQUFlcEUsR0FDbEIsSUFBSXFFLEVBQW1CLEVBR3ZCLElBQUssSUFBSUMsS0FBUXRFLEVBQUt6RyxlQUNsQjhLLEdBQVlDLEVBQUtwTCxLQUFLaEIsa0JBQWtCWCxNQUFRK00sRUFBS25MLFNBR3pELE9BQU9rTCxDQUNYLENBR0FFLG1CQUFtQjNLLEdBQ2YsSUFBSTRLLEVBQVEsSUFBSXhILEtBTWhCLE1BTDRCLElBQU13SCxFQUFNQyxTQUFTL0IsV0FDakQ4QixFQUFNRSxXQUFXaEMsV0FBYThCLEVBQU1HLGNBQWNqQyxXQUNsRDhCLEVBQU1JLFdBQVdsQyxXQUFhOEIsRUFBTUssYUFBYW5DLFdBQ2pEOEIsRUFBTU0sYUFBYXBDLFdBQWE5SSxFQUFXOEksVUFHL0MsQ0FRT1EsbUJBQW1CQyxFQUFVQyxHQUVoQyxJQUFJQyxFQUFxQkYsRUFBR0csVUFBWUYsRUFBR0UsVUFFM0MsT0FEZUMsS0FBS0MsTUFBTUgsRUFBWSxJQUFPLEdBQUssR0FFdEQsQ0FNTzBCLGdCQUFnQi9FLEdBQ25CQSxFQUFLdkgsT0FBU3VILEVBQUtsRyxNQUFRakUsS0FBS3FPLGFBQ3BDLENBT08xRCxzQkFBc0JSLEdBQ3pCLElBQ0l2SCxFQURBdU0sRUFBT25QLEtBQUtxTixtQkFBbUJsRCxFQUFLakcsV0FBWWlHLEVBQUtyRyxtQkFBcUIsR0FHOUUsR0FBSXFMLEdBQVEsR0FDUnZNLEVBQXNCLElBQWJ1SCxFQUFLbEcsV0FDWCxHQUFJa0wsR0FBUSxHQUFJLENBQ25CLElBQUlDLEVBQVEsSUFBc0IsS0FBYkQsRUFBTyxJQUM1QnZNLEVBQVN1SCxFQUFLbEcsTUFBUW1MLEMsTUFHdEJ4TSxFQUFzQixJQUFidUgsRUFBS2xHLE1BR2xCLE9BQU9yQixDQUNYLENBRU93SCxRQUFRRixHQUVYLE9BRFdsSyxLQUFLaUssU0FBU2MsTUFBS3NFLEdBQUtBLEVBQUVyTCxrQkFBb0JrRyxHQUU3RCxDQUVPdkIsY0FBY3RGLEVBQVlDLEVBQWtCUyxHQUMvQyxHQUE0QyxJQUF4Qy9ELEtBQUt3SyxTQUFTOUcsZUFBZW9GLE9BQzdCOUksS0FBS3dLLFNBQVN6RyxXQUFhQSxPQUN4QixHQUFJL0QsS0FBS3dLLFNBQVM5RyxlQUFlb0YsT0FBUyxHQUN6QzlJLEtBQUt3SyxTQUFTekcsYUFBZUEsRUFFN0IsT0FEQTBELE1BQU0sMEZBQ0MsRUFJZnpILEtBQUt3SyxTQUFTOUcsZUFBZXlGLEtBQUssSUFBSSxFQUFBQyxlQUFlL0YsRUFBTUMsSUFDM0R0RCxLQUFLc1AsZ0JBQ1QsQ0FFT0EsaUJBQ0gsTUFBTTlFLEVBQVd4RixTQUFTQyxlQUFlLFlBQ25Dc0ssRUFBZXZLLFNBQVNDLGVBQWUscUJBRTdDLEdBQUl1RixFQUFVLENBRVYsSUFBSTRCLEVBQUtDLEVBQVFtQyxFQUFtQixFQUVwQyxLQUFPaEUsRUFBUzhCLFdBQWE5QixFQUFTK0IsU0FBU3pELE9BQVMsR0FDcEQwQixFQUFTZ0MsWUFBWWhDLEVBQVM4QixXQUVsQ2lELEVBQWMzQyxZQUFjLEdBRTVCLElBQUssSUFBSTRDLEVBQVEsRUFBR0EsRUFBUXhQLEtBQUt3SyxTQUFTOUcsZUFBZW9GLE9BQVEwRyxJQUFTLENBRXRFcEQsRUFBTXBILFNBQVMwSCxjQUFjLE9BQzdCTixFQUFJTyxVQUFZLGdCQUVoQixJQUFLLElBQUk4QixLQUFRek8sS0FBS3dLLFNBQVM5RyxlQUUzQjJJLEVBQVNySCxTQUFTMEgsY0FBYyxPQUNoQ0wsRUFBT00sVUFBWSxtQkFDbkJOLEVBQU9PLFlBQWM1TSxLQUFLd0ssU0FBU3pHLFdBQVc4SSxXQUM5Q1QsRUFBSVUsWUFBWVQsR0FFaEJBLEVBQVNySCxTQUFTMEgsY0FBYyxPQUNoQ0wsRUFBT00sVUFBWSxtQkFDbkJOLEVBQU9PLFlBQWM2QixFQUFLcEwsS0FBS3BCLEtBQy9CbUssRUFBSVUsWUFBWVQsR0FFaEJBLEVBQVNySCxTQUFTMEgsY0FBYyxPQUNoQ0wsRUFBT00sVUFBWSxtQkFDbkJOLEVBQU9PLFlBQWM2QixFQUFLbkwsU0FBU3VKLFdBQ25DVCxFQUFJVSxZQUFZVCxHQUVoQkEsRUFBU3JILFNBQVMwSCxjQUFjLE9BQ2hDTCxFQUFPTSxVQUFZLG1CQUNuQk4sRUFBT08sYUFBZTZCLEVBQUtwTCxLQUFLaEIsa0JBQWtCWCxNQUFRK00sRUFBS25MLFVBQVV1SixXQUN6RVQsRUFBSVUsWUFBWVQsRSxDQUl4QixHQUFJRCxHQUFPbUQsRUFBYyxDQUVyQixJQUFLLElBQUlFLEtBQUt6UCxLQUFLd0ssU0FBUzlHLGVBQ3hCOEssR0FBWWlCLEVBQUVwTSxLQUFLaEIsa0JBQWtCWCxNQUFRK04sRUFBRW5NLFNBR25Ea0gsRUFBU3NDLFlBQVlWLEdBQ3JCbUQsRUFBYTNDLFlBQWM0QixFQUFTM0IsV0FBYSxLLEVBTTdELENBRU9wQyxhQUNILElBQUlELEVBQXFCeEssS0FBS3dLLFNBQzFCTCxFQUFPLElBQUksRUFBQXhHLEtBRWZ3RyxFQUFLekcsZUFBaUI4RyxFQUFTOUcsZUFDL0J5RyxFQUFLcEcsV0FBYXlHLEVBQVN6RyxXQUMzQm9HLEVBQUtuRyxnQkFBa0JoRSxLQUFLME8sbUJBQW1CbEUsRUFBU3pHLFlBQ3hEb0csRUFBS3JHLGtCQUFvQixJQUFJcUQsS0FDN0JnRCxFQUFLbEcsTUFBUWpFLEtBQUt1TyxlQUFlcEUsR0FFakMsSUFBSyxJQUFJdUYsS0FBS3ZGLEVBQUt6RyxlQUNmLEVBQUF3QyxhQUFheUosY0FBY0QsRUFBRXJNLEtBQUs1QixNQUFPaU8sRUFBRXBNLFVBSS9DdEQsS0FBS3dLLFNBQVcsSUFBSSxFQUFBNUosU0FDcEJaLEtBQUtzUCxpQkFFU3RQLEtBQUs0UCxZQUFZekYsRUFDbkMsQ0FFTXlGLFlBQVlDLEcseUNBQ2QsSUFDSSxNQUFNeEUsUUFBaUJDLE1BQU10TCxLQUFLbU8sUUFBUyxDQUN2QzVDLE9BQVEsT0FDUnlCLEtBQU1oQixLQUFLRSxVQUFVLENBQ2pCckksY0FBZTNELE1BQU00UCxLQUFLRCxFQUFFbk0sZ0JBQzVCSyxXQUFZOEwsRUFBRTlMLFdBQ2RELGtCQUFtQitMLEVBQUUvTCxrQkFDckJFLGdCQUFpQjZMLEVBQUU3TCxnQkFDbkJDLE1BQU80TCxFQUFFNUwsUUFFYnVILFFBQVMsQ0FDTCxlQUFnQixtQkFDaEJDLE9BQVEsc0JBSWhCLEdBQUlKLEVBQVNLLEdBQUksQ0FDYixNQUFNRyxRQUFnQlIsRUFBU1MsT0FHL0IsT0FGQTFGLFFBQVFDLElBQUl3RixHQUNacEUsTUFBTW9FLEVBQU9rRSxRQUFVLElBQU1sRSxFQUFPdEMsYUFDN0IsQyxDQUVQLE1BQU0sSUFBSW9DLE1BQU0sMkJBQTJCTixFQUFTTyxVLENBRTFELE1BQU9WLEdBQ0w5RSxRQUFRQyxJQUFJLGUsQ0FFcEIsRyxDQUVNdUUsZUFBZWlGLEcseUNBR2pCLElBQ0ksTUFBTXhFLFFBQWlCQyxNQUFNdEwsS0FBS21PLFFBQVUsSUFBTTBCLEVBQUU3TCxnQkFBaUIsQ0FDakV1SCxPQUFRLFFBQ1J5QixLQUFNaEIsS0FBS0UsVUFBVSxDQUNqQmhJLFdBQVkyTCxFQUFFM0wsV0FDZHRCLE9BQVFpTixFQUFFak4sU0FFZDRJLFFBQVMsQ0FDTCxlQUFnQixtQkFDaEJDLE9BQVEsc0JBSWhCLEdBQUlKLEVBQVNLLEdBQUksQ0FDYixNQUFNRyxRQUFnQlIsRUFBU1MsT0FFL0IsT0FEQTFGLFFBQVFDLElBQUl3RixHQUNMZ0UsRUFBRWpOLE0sQ0FFVCxNQUFNLElBQUkrSSxNQUFNLDJCQUEyQk4sRUFBU08sVSxDQUUxRCxNQUFPVixHQUNMOUUsUUFBUUMsSUFBSSxlLENBRXBCLEcsOFpDdlJKLGVBRUEsU0FDQSxTQUNBLFFBRUEsb0JBS0l0RyxZQUFZdUosRUFBdUJULEdBRjVCLEtBQUFtSCxRQUFVLHFDQUdiaFEsS0FBS2lRLFVBQVkzRyxFQUNqQnRKLEtBQUtTLFVBQVlvSSxDQUNyQixDQU1XUyxlQUNQLE9BQU90SixLQUFLaVEsU0FDaEIsQ0FNVzNHLGFBQVMvSCxHQUNoQnZCLEtBQUtpUSxVQUFZMU8sQ0FDckIsQ0FNV3NILGVBQ1AsT0FBTzdJLEtBQUtTLFNBQ2hCLENBTVdvSSxhQUFTdEgsR0FDaEJ2QixLQUFLUyxVQUFZYyxDQUNyQixDQUVPMk8sUUFBUTFHLEdBQ1h4SixLQUFLc0osU0FBU0gsS0FBS0ssRUFFdkIsQ0FFQStFLGVBQWUvRSxHQUNYLElBQUlnRixFQUFXLEVBRWYsSUFBSyxJQUFJMkIsS0FBUzNHLEVBQUs5RixlQUNuQjhLLEdBQVkyQixFQUFNOU0sS0FBS2hCLGtCQUFrQlgsTUFBUXlPLEVBQU03TSxTQUczRCxPQUFPa0wsQ0FDWCxDQUVBNEIsbUJBQW1Cck0sR0FDZixJQUFJNEssRUFBUSxJQUFJeEgsS0FHaEIsTUFGNEIsSUFBTXdILEVBQU1DLFNBQVMvQixXQUFhOEIsRUFBTUUsV0FBV2hDLFdBQWE4QixFQUFNRyxjQUFjakMsV0FBYThCLEVBQU1JLFdBQVdsQyxXQUFhOEIsRUFBTUssYUFBYW5DLFdBQWE4QixFQUFNTSxhQUFhcEMsV0FBYTlJLEVBQVc4SSxVQUcxTyxDQUVPcEQsUUFBUUYsR0FFWCxPQURXdkosS0FBS3NKLFNBQVN5QixNQUFLc0UsR0FBS0EsRUFBRXJMLGtCQUFvQnVGLEdBRTdELENBRU84RyxXQUFXN0csR0FDZCxJQUFJZ0csRUFBUXhQLEtBQUtzSixTQUFTZ0gsUUFBUTlHLEdBQ2xDeEosS0FBS3NKLFNBQVNpSCxPQUFPZixFQUFPLEVBQ2hDLENBRU83RyxjQUFjdEYsRUFBWUMsRUFBa0JTLEdBRS9DLEdBQTRDLElBQXhDL0QsS0FBSzZJLFNBQVNuRixlQUFlb0YsT0FDN0I5SSxLQUFLNkksU0FBUzlFLFdBQWFBLE9BQ3hCLEdBQUkvRCxLQUFLNkksU0FBU25GLGVBQWVvRixPQUFTLEdBQ3pDOUksS0FBSzZJLFNBQVM5RSxhQUFlQSxFQUU3QixPQURBMEQsTUFBTSx3RkFDQyxFQUdmLElBQUkvRCxFQUFpQyxJQUFJLEVBQUEwRixlQUFlL0YsRUFBTUMsR0FDOUR0RCxLQUFLNkksU0FBU25GLGVBQWV5RixLQUFLekYsR0FDbEMxRCxLQUFLd1EsZ0JBQ1QsQ0FFT0EsaUJBQ0gsTUFBTTNILEVBQVc3RCxTQUFTQyxlQUFlLFlBQ25Dc0ssRUFBZXZLLFNBQVNDLGVBQWUscUJBRTdDLEdBQUk0RCxFQUFVLENBRVYsSUFBSXVELEVBQUtDLEVBQVFtQyxFQUFtQixFQUVwQyxLQUFPM0YsRUFBU3lELFdBQWF6RCxFQUFTMEQsU0FBU3pELE9BQVMsR0FDcERELEVBQVMyRCxZQUFZM0QsRUFBU3lELFdBRWxDaUQsRUFBYzNDLFlBQWMsR0FFNUIsSUFBSyxJQUFJNEMsRUFBUSxFQUFHQSxFQUFReFAsS0FBSzZJLFNBQVNuRixlQUFlb0YsT0FBUTBHLElBQVMsQ0FFdEVwRCxFQUFNcEgsU0FBUzBILGNBQWMsT0FDN0JOLEVBQUlPLFVBQVksZ0JBRWhCLElBQUssSUFBSThCLEtBQVF6TyxLQUFLNkksU0FBU25GLGVBRTNCMkksRUFBU3JILFNBQVMwSCxjQUFjLE9BQ2hDTCxFQUFPTSxVQUFZLG1CQUNuQk4sRUFBT08sWUFBYzVNLEtBQUs2SSxTQUFTOUUsV0FBVzhJLFdBQzlDVCxFQUFJVSxZQUFZVCxHQUVoQkEsRUFBU3JILFNBQVMwSCxjQUFjLE9BQ2hDTCxFQUFPTSxVQUFZLG1CQUNuQk4sRUFBT08sWUFBYzZCLEVBQUtwTCxLQUFLcEIsS0FDL0JtSyxFQUFJVSxZQUFZVCxHQUVoQkEsRUFBU3JILFNBQVMwSCxjQUFjLE9BQ2hDTCxFQUFPTSxVQUFZLG1CQUNuQk4sRUFBT08sWUFBYzZCLEVBQUtuTCxTQUFTdUosV0FDbkNULEVBQUlVLFlBQVlULEdBRWhCQSxFQUFTckgsU0FBUzBILGNBQWMsT0FDaENMLEVBQU9NLFVBQVksbUJBQ25CTixFQUFPTyxhQUFlNkIsRUFBS3BMLEtBQUtoQixrQkFBa0JYLE1BQVErTSxFQUFLbkwsVUFBVXVKLFdBQ3pFVCxFQUFJVSxZQUFZVCxFLENBSXhCLEdBQUlELEdBQU9tRCxFQUFjLENBRXJCLElBQUssSUFBSUUsS0FBS3pQLEtBQUs2SSxTQUFTbkYsZUFDeEI4SyxHQUFZaUIsRUFBRXBNLEtBQUtoQixrQkFBa0JYLE1BQVErTixFQUFFbk0sU0FHbkR1RixFQUFTaUUsWUFBWVYsR0FDckJtRCxFQUFhM0MsWUFBYzRCLEVBQVMzQixXQUFhLEssRUFHN0QsQ0FFTzlELGFBQ0gsSUFBSUYsRUFBcUI3SSxLQUFLNkksU0FDMUJXLEVBQU8sSUFBSSxFQUFBNUYsS0FFZjRGLEVBQUs5RixlQUFpQm1GLEVBQVNuRixlQUMvQjhGLEVBQUt6RixXQUFhOEUsRUFBUzlFLFdBQzNCeUYsRUFBS3hGLGdCQUFrQmhFLEtBQUtvUSxtQkFBbUJ2SCxFQUFTOUUsWUFDeER5RixFQUFLMUYsa0JBQW9CLElBQUlxRCxLQUM3QnFDLEVBQUt2RixNQUFRakUsS0FBS3VPLGVBQWUvRSxHQUVqQyxJQUFLLElBQUlpSCxLQUFLakgsRUFBSzlGLGVBQ2YsRUFBQXdDLGFBQWF5SixjQUFjYyxFQUFFcE4sS0FBSzVCLE1BQVFnUCxFQUFFbk4sVUFHaEQsSUFBSW9OLEVBQVUxUSxLQUFLMlEsWUFBWW5ILEdBRy9CLE9BRkF4SixLQUFLNkksU0FBVyxJQUFJLEVBQUFuSSxTQUNwQlYsS0FBS3dRLGlCQUNFRSxDQUNYLENBRU1DLFlBQVl0QixHLHlDQUdkLElBQ0ksTUFBTWhFLFFBQWlCQyxNQUFNdEwsS0FBS2dRLFFBQVMsQ0FDdkN6RSxPQUFRLE9BQ1J5QixLQUFNaEIsS0FBS0UsVUFBVSxDQUNqQnhJLGVBQWdCeEQsTUFBTTRQLEtBQUtULEVBQUUzTCxnQkFDN0JLLFdBQVlzTCxFQUFFdEwsV0FDZEQsa0JBQW1CdUwsRUFBRXZMLGtCQUNyQkUsZ0JBQWlCcUwsRUFBRXJMLGdCQUNuQkMsTUFBT29MLEVBQUVwTCxRQUVidUgsUUFBUyxDQUNMLGVBQWdCLG1CQUNoQkMsT0FBUSxzQkFNaEIsR0FGQXJGLFFBQVFDLElBQUlnRixHQUVSQSxFQUFTSyxHQUFJLENBQ2IsTUFBTUcsUUFBZ0JSLEVBQVNTLE9BRy9CLE9BRkExRixRQUFRQyxJQUFJd0YsR0FDWnBFLE1BQU0seUNBQTJDNEgsRUFBRXJMLGtCQUM1QyxDLENBRVAsTUFBTSxJQUFJMkgsTUFBTSwyQkFBMkJOLEVBQVNPLFUsQ0FHMUQsTUFBT1YsR0FDTDlFLFFBQVFDLElBQUksZSxDQUVwQixHLCtaQzFNSixjQUVBLHFCQUlJdEcsWUFBWTZRLEdBRkosS0FBQUMsU0FBbUIsbUNBR3ZCN1EsS0FBSzhRLFdBQWFGLENBQ3RCLENBTVdBLGdCQUNQLE9BQU81USxLQUFLOFEsVUFDaEIsQ0FNV0YsY0FBVXJQLEdBQ2pCdkIsS0FBSzhRLFdBQWF2UCxDQUN0QixDQWFPaUYsU0FBUy9FLEVBQWNpRCxFQUFxQnBCLEdBQy9DLElBRUksSUFBSXlOLEVBQVcsSUFBSSxFQUFBakosTUFBTXJHLEVBQU02QixFQUFVb0IsR0FFekMsT0FEQTFFLEtBQUs0USxVQUFVekgsS0FBSzRILElBQ2IsQyxDQUNULE1BQU9uSSxHQUVMLE9BREF4QyxRQUFRd0MsTUFBTUEsSUFDUCxDLENBRWYsQ0FRTytHLGNBQWNsTyxFQUFjNkIsR0FDL0IsSUFBSXVFLEVBQVE3SCxLQUFLMEksU0FBU2pILEdBQzFCLFFBQUlvRyxJQUNBQSxFQUFNdkUsU0FBWXVFLEVBQU12RSxTQUFXQSxHQUM1QixFQUlmLENBT09vRixTQUFTakgsR0FDWixJQUFJb0csRUFBUTdILEtBQUs0USxVQUFVN0YsTUFBS3NFLEdBQUtBLEVBQUU1TixPQUFTQSxJQUNoRCxHQUFJb0csRUFDQSxPQUFPQSxDQUVmLENBRU9rRixpQkFBaUJ0TCxHQUNwQixJQUFJNE4sRUFBV3JQLEtBQUswSSxTQUFTakgsR0FFN0IsT0FBSTROLEVBQ09BLEVBQUUvTCxTQUVGLENBRWYsQ0FPTTRFLGFBQWFtSCxHLHlDQUNmLElBQ0ksTUFBTWhFLFFBQWlCQyxNQUFNdEwsS0FBSzZRLFNBQVUsQ0FDeEN0RixPQUFRLE9BQ1J5QixLQUFNaEIsS0FBS0UsVUFBVSxDQUNqQnpLLEtBQU00TixFQUFFNU4sS0FDUjZCLFNBQVUrTCxFQUFFL0wsU0FDWm9CLFlBQWEySyxFQUFFM0ssY0FFbkI4RyxRQUFTLENBQ0wsZUFBZ0IsbUJBQ2hCQyxPQUFRLHNCQUloQixHQUFJSixFQUFTSyxHQUFJLENBQ2IsTUFBTUcsUUFBZ0JSLEVBQVNTLE9BRS9CLE9BREExRixRQUFRQyxJQUFJd0YsSUFDTCxDLENBRVAsTUFBTSxJQUFJRixNQUFNLDJCQUEyQk4sRUFBU08sVSxDQUUxRCxNQUFPaEQsR0FDTHhDLFFBQVFDLElBQUksZUFBaUJ1QyxFLENBRXJDLEcsQ0FNTW9JLGtCQUFrQjNCLEcseUNBQ3BCLElBRUksTUFBTWhFLFFBQWlCQyxNQUFNdEwsS0FBSzZRLFNBQVcsSUFBTXhCLEVBQUU1TixLQUFNLENBQ3ZEOEosT0FBUSxNQUNSeUIsS0FBTWhCLEtBQUtFLFVBQVUsQ0FDakJ6SyxLQUFNNE4sRUFBRTVOLEtBQ1I2QixTQUFVK0wsRUFBRS9MLFNBQ1pvQixZQUFhMkssRUFBRTNLLGNBRW5COEcsUUFBUyxDQUNMLGVBQWdCLG1CQUNoQkMsT0FBUSxzQkFJaEIsSUFBS0osRUFBU0ssR0FDVixNQUFNLElBQUlDLE1BQU0sMkJBQTJCTixFQUFTTyxXQUd4RCxNQUFNQyxRQUFnQlIsRUFBU1MsT0FDL0IxRixRQUFRQyxJQUFJd0YsR0FDWnpGLFFBQVFDLElBQUlnRixFQUFTTyxPLENBQ3ZCLE1BQU9WLEdBQ0w5RSxRQUFRQyxJQUFJLGUsQ0FFcEIsRyxLQ3BKQTRLLEVBQTJCLENBQUMsR0FHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CTCxHQUFVTSxLQUFLRixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTSixHQUdwRUssRUFBT0QsT0FDZixDQ25CMEJKLENBQW9CLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kYi9kYXRhYmFzZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vYm9vay1zcGVjaWZpY2F0aW9uLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9ib29rLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9jYW5jZWwudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL2N1c3RvbWVyLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9vcmRlci1ib29rLWl0ZW0udHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL3JlbnQtY2FydC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vcmVudC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vc2FsZS1jYXJ0LnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9zYWxlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9zdG9jay50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL2Jvb2stc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL2NhbmNlbC1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2UvY3VzdG9tZXItc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL3JlbnQtc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL3NhbGUtc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL3N0b2NrLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rLXNwZWNpZmljYXRpb25cIjtcbmltcG9ydCB7IENhbmNlbCB9IGZyb20gXCIuLi9kb21haW4vY2FuY2VsXCI7XG5pbXBvcnQgeyBDdXN0b21lciB9IGZyb20gXCIuLi9kb21haW4vY3VzdG9tZXJcIjtcbmltcG9ydCB7IFJlbnQgfSBmcm9tIFwiLi4vZG9tYWluL3JlbnRcIjtcbmltcG9ydCB7IFJlbnRDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9yZW50LWNhcnRcIjtcbmltcG9ydCB7IFNhbGUgfSBmcm9tIFwiLi4vZG9tYWluL3NhbGVcIjtcbmltcG9ydCB7IFNhbGVDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlLWNhcnRcIjtcbmltcG9ydCB7IFN0b2NrIH0gZnJvbSBcIi4uL2RvbWFpbi9zdG9ja1wiO1xuXG5leHBvcnQgY2xhc3MgRGF0YUJhc2Uge1xuXG4gICAgIHByaXZhdGUgX2Jvb2tzOiBBcnJheTxCb29rPjsvL1xuICAgICBwcml2YXRlIF9zdG9ja3M6IEFycmF5PFN0b2NrPjtcbiAgICAgcHJpdmF0ZSBfY3VzdG9tZXJzOiBBcnJheTxDdXN0b21lcj47Ly9cbiAgICAgcHJpdmF0ZSBfc2FsZXM6IEFycmF5PFNhbGU+Oy8vXG4gICAgIHByaXZhdGUgX3JlbnRzOiBBcnJheTxSZW50PjtcbiAgICAgcHJpdmF0ZSBfYm9va1NwZWNpZmljYXRpb25zOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj47XG4gICAgIHByaXZhdGUgX2NhbmNlbHM6IEFycmF5PENhbmNlbD47Ly9cbiAgICAgcHJpdmF0ZSBfc2FsZUNhcnQ6IFNhbGVDYXJ0O1xuICAgICBwcml2YXRlIF9yZW50Q2FydDpSZW50Q2FydDtcblxuICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICB0aGlzLl9ib29rcyA9IG5ldyBBcnJheTxCb29rPigpO1xuICAgICAgICAgIHRoaXMuX3N0b2NrcyA9IG5ldyBBcnJheTxTdG9jaz4oKTtcbiAgICAgICAgICB0aGlzLl9jdXN0b21lcnMgPSBuZXcgQXJyYXk8Q3VzdG9tZXI+KCk7XG4gICAgICAgICAgdGhpcy5fc2FsZXMgPSBuZXcgQXJyYXk8U2FsZT4oKTtcbiAgICAgICAgICB0aGlzLl9yZW50cyA9IG5ldyBBcnJheTxSZW50PigpO1xuICAgICAgICAgIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9ucyA9IG5ldyBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4oKTtcbiAgICAgICAgICB0aGlzLl9jYW5jZWxzID0gbmV3IEFycmF5PENhbmNlbD4oKTtcbiAgICAgICAgICB0aGlzLl9zYWxlQ2FydCA9IG5ldyBTYWxlQ2FydCgpO1xuICAgICAgICAgIHRoaXMuX3JlbnRDYXJ0ID0gbmV3IFJlbnRDYXJ0O1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBib29rc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxCb29rPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Qm9va3NMaXN0KCk6IEFycmF5PEJvb2s+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fYm9va3M7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHN0b2Nrc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxTdG9jaz59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFN0b2Nrc0xpc3QoKTogQXJyYXk8U3RvY2s+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fc3RvY2tzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBjdXN0b21lcnNcbiAgICAgICogQHJldHVybiB7QXJyYXk8Q3VzdG9tZXI+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRDdXN0b21lcnNMaXN0KCk6IEFycmF5PEN1c3RvbWVyPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbWVycztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgc2FsZXNcbiAgICAgICogQHJldHVybiB7QXJyYXk8U2FsZT59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFNhbGVzTGlzdCgpOiBBcnJheTxTYWxlPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3NhbGVzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciByZW50c1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxSZW50Pn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0UmVudHMoKTogQXJyYXk8UmVudD4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9yZW50cztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgYm9va1NwZWNpZmljYXRpb25zXG4gICAgICAqIEByZXR1cm4ge0FycmF5PEJvb2tTcGVjaWZpY2F0aW9uPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Qm9va1NwZWNpZmljYXRpb25zKCk6IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9ucztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgY2FuY2VsU2FsZXNcbiAgICAgICogQHJldHVybiB7QXJyYXk8Q2FuY2VsU2FsZT59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldENhbmNhbGVkU2FsZXMoKTogQXJyYXk8Q2FuY2VsPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbHM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHNhbGVDYXJ0XG4gICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGVDYXJ0Pn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0U2FsZUNhcnQoKTogU2FsZUNhcnQge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9zYWxlQ2FydDtcbiAgICAgfVxuXG4gICAgICAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVudENhcnRcbiAgICAgKiBAcmV0dXJuIHtSZW50Q2FydH1cbiAgICAgKi9cblx0cHVibGljIGdldCBnZXRSZW50Q2FydCgpOiBSZW50Q2FydCB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlbnRDYXJ0O1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc2FsZUNhcnRcbiAgICAgKiBAcGFyYW0ge1NhbGVDYXJ0fSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHNldFNhbGVDYXJ0KHZhbHVlOiBTYWxlQ2FydCkge1xuXHRcdHRoaXMuX3NhbGVDYXJ0ID0gdmFsdWU7XG5cdH1cblxuXG5cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZW50Q2FydFxuICAgICAqIEBwYXJhbSB7UmVudENhcnR9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgc2V0UmVudENhcnQodmFsdWU6IFJlbnRDYXJ0KSB7XG5cdFx0dGhpcy5fcmVudENhcnQgPSB2YWx1ZTtcblx0fVxuICAgICBcblxuXG59XG4iLCJleHBvcnQgY2xhc3MgQm9va1NwZWNpZmljYXRpb24ge1xuICAgIHByaXZhdGUgX2lzYm46IHN0cmluZztcbiAgICBwcml2YXRlIF9wcmljZTogbnVtYmVyO1xuICAgIHByaXZhdGUgX3N0YXJ0RGF0ZTogRGF0ZTtcbiAgICBwcml2YXRlIF9lbmREYXRlOiBEYXRlO1xuXG4gICAgY29uc3RydWN0b3IoaXNibjogc3RyaW5nLCBwcmljZTogbnVtYmVyLCBzdGFydERhdGU6IERhdGUsIGVuZERhdGU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5faXNibiA9IGlzYm47XG4gICAgICAgIHRoaXMuX3ByaWNlID0gcHJpY2U7XG4gICAgICAgIHRoaXMuX3N0YXJ0RGF0ZSA9IHN0YXJ0RGF0ZTtcbiAgICAgICAgdGhpcy5fZW5kRGF0ZSA9IGVuZERhdGU7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgaXNiblxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBpc2JuKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2lzYm47XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBwcmljZVxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCBwcmljZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9wcmljZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHN0YXJ0RGF0ZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgc3RhcnREYXRlKCk6IERhdGUge1xuXHRcdHJldHVybiB0aGlzLl9zdGFydERhdGU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBlbmREYXRlXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cblx0cHVibGljIGdldCBlbmREYXRlKCk6IERhdGUge1xuXHRcdHJldHVybiB0aGlzLl9lbmREYXRlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgaXNiblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGlzYm4odmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX2lzYm4gPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHByaWNlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcHJpY2UodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3ByaWNlID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzdGFydERhdGVcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgc3RhcnREYXRlKHZhbHVlOiBEYXRlKSB7XG5cdFx0dGhpcy5fc3RhcnREYXRlID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBlbmREYXRlXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGVuZERhdGUodmFsdWU6IERhdGUpIHtcblx0XHR0aGlzLl9lbmREYXRlID0gdmFsdWU7XG5cdH1cbiAgICBcblxuICAgIFxufSIsImltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4vYm9vay1zcGVjaWZpY2F0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBCb29rIHtcbiAgcHJpdmF0ZSBfaXNibjogc3RyaW5nO1xuICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XG4gIHByaXZhdGUgX2F1dGhvcjogc3RyaW5nO1xuICBwcml2YXRlIF9wdWJsaXNoWWVhcjogc3RyaW5nO1xuICBwcml2YXRlIF9wYWdlczogbnVtYmVyO1xuICBwcml2YXRlIF9ib29rU3BlY2lmaWNhdGlvbjogQm9va1NwZWNpZmljYXRpb247XG5cbiAgY29uc3RydWN0b3IoaXNibjogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGF1dGhvcjogc3RyaW5nLCBwdWJsaXNoWWVhcjogc3RyaW5nLCBwYWdlczogbnVtYmVyLCBib29rU3BlY2lmaWNhdGlvbjogQm9va1NwZWNpZmljYXRpb24pIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9hdXRob3IgPSBhdXRob3I7XG4gICAgdGhpcy5faXNibiA9IGlzYm47XG4gICAgdGhpcy5fcHVibGlzaFllYXIgPSBwdWJsaXNoWWVhcjtcbiAgICB0aGlzLl9wYWdlcyA9IHBhZ2VzO1xuICAgIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9uID0gYm9va1NwZWNpZmljYXRpb247XG4gIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBpc2JuXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGlzYm4oKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5faXNibjtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG5hbWVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgbmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9uYW1lO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYXV0aG9yXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGF1dGhvcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9hdXRob3I7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBwdWJsaXNoWWVhclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBwdWJsaXNoWWVhcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9wdWJsaXNoWWVhcjtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHBhZ2VzXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IHBhZ2VzKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3BhZ2VzO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYm9va1NwZWNpZmljYXRpb25cbiAgICAgKiBAcmV0dXJuIHtCb29rU3BlY2lmaWNhdGlvbn1cbiAgICAgKi9cblx0cHVibGljIGdldCBib29rU3BlY2lmaWNhdGlvbigpOiBCb29rU3BlY2lmaWNhdGlvbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9uO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgaXNiblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGlzYm4odmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX2lzYm4gPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBuYW1lKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9uYW1lID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBhdXRob3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBhdXRob3IodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX2F1dGhvciA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcHVibGlzaFllYXJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBwdWJsaXNoWWVhcih2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fcHVibGlzaFllYXIgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHBhZ2VzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcGFnZXModmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3BhZ2VzID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rU3BlY2lmaWNhdGlvblxuICAgICAqIEBwYXJhbSB7Qm9va1NwZWNpZmljYXRpb259IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgYm9va1NwZWNpZmljYXRpb24odmFsdWU6IEJvb2tTcGVjaWZpY2F0aW9uKSB7XG5cdFx0dGhpcy5fYm9va1NwZWNpZmljYXRpb24gPSB2YWx1ZTtcblx0fVxufVxuIiwiaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuL3NhbGVcIjtcblxuZXhwb3J0IGNsYXNzIENhbmNlbCB7XG4gICAgcHJpdmF0ZSBfY2FuY2VsVHlwZTogU2FsZTtcbiAgICBwcml2YXRlIF9yZWZ1bmQ6IG51bWJlcjtcbiAgICBwcml2YXRlIF9jYW5jZWxlZERhdGVUaW1lOiBEYXRlO1xuXG4gICAgY29uc3RydWN0b3IoY2FuY2VsVHlwZTogU2FsZSwgcmVmdW5kOiBudW1iZXIsIGNhbmNlbGVkRGF0ZVRpbWU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsVHlwZSA9IGNhbmNlbFR5cGU7XG4gICAgICAgIHRoaXMuX3JlZnVuZCA9IHJlZnVuZDtcbiAgICAgICAgdGhpcy5fY2FuY2VsZWREYXRlVGltZSA9IGNhbmNlbGVkRGF0ZVRpbWU7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGNhbmNlbFR5cGVcbiAgICAgKiBAcmV0dXJuIHtTYWxlfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGNhbmNlbFR5cGUoKTogU2FsZSB7XG5cdFx0cmV0dXJuIHRoaXMuX2NhbmNlbFR5cGU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZWZ1bmRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcmVmdW5kKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlZnVuZDtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGNhbmNlbGVkRGF0ZVRpbWVcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGNhbmNlbGVkRGF0ZVRpbWUoKTogRGF0ZSB7XG5cdFx0cmV0dXJuIHRoaXMuX2NhbmNlbGVkRGF0ZVRpbWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBjYW5jZWxUeXBlXG4gICAgICogQHBhcmFtIHtTYWxlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGNhbmNlbFR5cGUodmFsdWU6IFNhbGUpIHtcblx0XHR0aGlzLl9jYW5jZWxUeXBlID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZWZ1bmRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCByZWZ1bmQodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3JlZnVuZCA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY2FuY2VsZWREYXRlVGltZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBjYW5jZWxlZERhdGVUaW1lKHZhbHVlOiBEYXRlKSB7XG5cdFx0dGhpcy5fY2FuY2VsZWREYXRlVGltZSA9IHZhbHVlO1xuXHR9XG4gICAgXG4gICAgXG5cbn0iLCJleHBvcnQgY2xhc3MgQ3VzdG9tZXIge1xuICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XG4gIHByaXZhdGUgX3N1ck5hbWU6IHN0cmluZztcbiAgcHJpdmF0ZSBfcGhvbmVOdW1iZXI6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHN1ck5hbWU6IHN0cmluZywgcGhvbmVOdW1iZXI6IHN0cmluZykge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX3N1ck5hbWUgPSBzdXJOYW1lO1xuICAgIHRoaXMuX3Bob25lTnVtYmVyID0gcGhvbmVOdW1iZXI7XG4gIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBuYW1lXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fbmFtZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHN1ck5hbWVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgc3VyTmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9zdXJOYW1lO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcGhvbmVOdW1iZXJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcGhvbmVOdW1iZXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fcGhvbmVOdW1iZXI7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgbmFtZSh2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fbmFtZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc3VyTmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHN1ck5hbWUodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX3N1ck5hbWUgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHBob25lTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcGhvbmVOdW1iZXIodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX3Bob25lTnVtYmVyID0gdmFsdWU7XG5cdH1cblxuXG59XG4iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuXG5leHBvcnQgY2xhc3MgT3JkZXJCb29rSXRlbXMge1xuICAgIHByaXZhdGUgX2Jvb2s6IEJvb2s7XG4gICAgcHJpdmF0ZSBfcXVhbnRpdHk6IG51bWJlcjtcblxuXG4gICAgY29uc3RydWN0b3IoYm9vazogQm9vaywgcXVhbnRpdHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9ib29rID0gYm9vaztcbiAgICAgICAgdGhpcy5fcXVhbnRpdHkgPSBxdWFudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYm9va1xuICAgICAqIEByZXR1cm4ge0Jvb2t9XG4gICAgICovXG4gICAgcHVibGljIGdldCBib29rKCk6IEJvb2sge1xuICAgICAgICByZXR1cm4gdGhpcy5fYm9vaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcXVhbnRpdHlcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCBxdWFudGl0eSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVhbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGJvb2tcbiAgICAgKiBAcGFyYW0ge0Jvb2t9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBib29rKHZhbHVlOiBCb29rKSB7XG4gICAgICAgIHRoaXMuX2Jvb2sgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcXVhbnRpdHlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHF1YW50aXR5KHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fcXVhbnRpdHkgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm9vazogdGhpcy5fYm9vayxcbiAgICAgICAgICAgIHF1YW50aXR5OiB0aGlzLl9xdWFudGl0eSxcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBMaXN0Rm9ybWF0IH0gZnJvbSBcInR5cGVzY3JpcHRcIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi9ib29rXCI7XG5pbXBvcnQgeyBPcmRlckJvb2tJdGVtcyB9IGZyb20gXCIuL29yZGVyLWJvb2staXRlbVwiO1xuXG5leHBvcnQgY2xhc3MgUmVudENhcnQge1xuICAgIGN1c3RvbWVySWQhOiBudW1iZXI7XG4gICAgb3JkZXJCb29rSXRlbXM6IEFycmF5PE9yZGVyQm9va0l0ZW1zPjtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9yZGVyQm9va0l0ZW1zID0gbmV3IEFycmF5PE9yZGVyQm9va0l0ZW1zPigpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBTYWxlIH0gZnJvbSBcIi4vc2FsZVwiO1xuaW1wb3J0IHsgT3JkZXJCb29rSXRlbXMgfSBmcm9tIFwiLi9vcmRlci1ib29rLWl0ZW1cIjtcblxuZXhwb3J0IGNsYXNzIFJlbnQgZXh0ZW5kcyBTYWxlIHtcbiAgICBwcml2YXRlIF9yZWZ1bmREYXRlPzogRGF0ZTtcbiAgICBwcml2YXRlIF9yZWZ1bmQ/OiBudW1iZXI7XG5cblxuICAgIGNvbnN0cnVjdG9yKHNhbGVCb29rSXRlbXM/OiBBcnJheTxPcmRlckJvb2tJdGVtcz4sIG9wZXJhdGlvbkRhdGVUaW1lPzogRGF0ZSwgY3VzdG9tZXJJZD86IG51bWJlciwgb3BlcmF0aW9uTnVtYmVyPzogc3RyaW5nLCB0b3RhbD86IG51bWJlciwgcmVmdW5kRGF0ZT86IERhdGUsIHJlZnVuZD86IG51bWJlcikge1xuICAgICAgICBzdXBlcihzYWxlQm9va0l0ZW1zLCBjdXN0b21lcklkLCBvcGVyYXRpb25EYXRlVGltZSwgb3BlcmF0aW9uTnVtYmVyLCB0b3RhbClcblxuICAgICAgICB0aGlzLl9yZWZ1bmREYXRlID0gcmVmdW5kRGF0ZTtcbiAgICAgICAgdGhpcy5fcmVmdW5kID0gcmVmdW5kO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHJlZnVuZERhdGVcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcmVmdW5kRGF0ZSgpOiBEYXRlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZnVuZERhdGUhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZWZ1bmRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCByZWZ1bmQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZnVuZCE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlZnVuZERhdGVcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCByZWZ1bmREYXRlKHZhbHVlOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuX3JlZnVuZERhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVmdW5kXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCByZWZ1bmQodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9yZWZ1bmQgPSB2YWx1ZTtcbiAgICB9XG5cblxuXG5cbn0iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuaW1wb3J0IHsgT3JkZXJCb29rSXRlbXMgfSBmcm9tIFwiLi9vcmRlci1ib29rLWl0ZW1cIjtcblxuZXhwb3J0IGNsYXNzIFNhbGVDYXJ0IHtcbiAgICBjdXN0b21lcklkITogbnVtYmVyO1xuICAgIG9yZGVyQm9va0l0ZW1zOiBBcnJheTxPcmRlckJvb2tJdGVtcz47XG5cblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLm9yZGVyQm9va0l0ZW1zID0gbmV3IEFycmF5PE9yZGVyQm9va0l0ZW1zPjtcblx0fVxuXG5cblxuXG5cbn0iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuaW1wb3J0IHsgT3JkZXJCb29rSXRlbXMgfSBmcm9tIFwiLi9vcmRlci1ib29rLWl0ZW1cIjtcblxuZXhwb3J0IGNsYXNzIFNhbGUge1xuICAgIHByaXZhdGUgX29yZGVyQm9va0l0ZW1zPzogQXJyYXk8T3JkZXJCb29rSXRlbXM+O1xuICAgIHByaXZhdGUgX2N1c3RvbWVySWQ/OiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfb3BlcmF0aW9uRGF0ZVRpbWU/OiBEYXRlO1xuICAgIHByaXZhdGUgX29wZXJhdGlvbk51bWJlcj86IHN0cmluZztcbiAgICBwcml2YXRlIF90b3RhbD86IG51bWJlcjtcblxuXG5cdGNvbnN0cnVjdG9yKG9yZGVyQm9va0l0ZW1zPzogQXJyYXk8T3JkZXJCb29rSXRlbXM+LCBjdXN0b21lcklkPzogbnVtYmVyLCBvcGVyYXRpb25EYXRlVGltZT86IERhdGUsIG9wZXJhdGlvbk51bWJlcj86IHN0cmluZywgdG90YWw/OiBudW1iZXIpIHtcblx0XHR0aGlzLl9vcmRlckJvb2tJdGVtcyA9IG9yZGVyQm9va0l0ZW1zO1xuXHRcdHRoaXMuX2N1c3RvbWVySWQgPSBjdXN0b21lcklkO1xuXHRcdHRoaXMuX29wZXJhdGlvbkRhdGVUaW1lID0gb3BlcmF0aW9uRGF0ZVRpbWU7XG5cdFx0dGhpcy5fb3BlcmF0aW9uTnVtYmVyID0gb3BlcmF0aW9uTnVtYmVyO1xuXHRcdHRoaXMuX3RvdGFsID0gdG90YWw7XG5cdH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG9yZGVyQm9va0l0ZW1zXG4gICAgICogQHJldHVybiB7QXJyYXk8T3JkZXJCb29rSXRlbXM+fVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IG9yZGVyQm9va0l0ZW1zKCk6IEFycmF5PE9yZGVyQm9va0l0ZW1zPiB7XG5cdFx0cmV0dXJuIHRoaXMuX29yZGVyQm9va0l0ZW1zITtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGN1c3RvbWVySWRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgY3VzdG9tZXJJZCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9jdXN0b21lcklkITtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG9wZXJhdGlvbkRhdGVUaW1lXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cblx0cHVibGljIGdldCBvcGVyYXRpb25EYXRlVGltZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gdGhpcy5fb3BlcmF0aW9uRGF0ZVRpbWUhO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgb3BlcmF0aW9uTnVtYmVyXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IG9wZXJhdGlvbk51bWJlcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9vcGVyYXRpb25OdW1iZXIhO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgdG90YWxcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgdG90YWwoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fdG90YWwhO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgb3JkZXJCb29rSXRlbXNcbiAgICAgKiBAcGFyYW0ge0FycmF5PE9yZGVyQm9va0l0ZW1zPn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBvcmRlckJvb2tJdGVtcyh2YWx1ZTogQXJyYXk8T3JkZXJCb29rSXRlbXM+KSB7XG5cdFx0dGhpcy5fb3JkZXJCb29rSXRlbXMgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGN1c3RvbWVySWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBjdXN0b21lcklkKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLl9jdXN0b21lcklkID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBvcGVyYXRpb25EYXRlVGltZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBvcGVyYXRpb25EYXRlVGltZSh2YWx1ZTogRGF0ZSkge1xuXHRcdHRoaXMuX29wZXJhdGlvbkRhdGVUaW1lID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBvcGVyYXRpb25OdW1iZXJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBvcGVyYXRpb25OdW1iZXIodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX29wZXJhdGlvbk51bWJlciA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgdG90YWxcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCB0b3RhbCh2YWx1ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5fdG90YWwgPSB2YWx1ZTtcblx0fVxuXHRcbiAgICBcbn0iLCJleHBvcnQgY2xhc3MgU3RvY2sge1xuICAgIHByaXZhdGUgX2lzYm46IHN0cmluZztcbiAgICBwcml2YXRlIF9xdWFudGl0eTogbnVtYmVyO1xuICAgIHByaXZhdGUgX3NoZWxmTnVtYmVyOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3Rvcihpc2JuPzogc3RyaW5nLCBxdWFudGl0eT86IG51bWJlciwgc2hlbGZOdW1iZXI/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5faXNibiA9IGlzYm4hO1xuICAgICAgICB0aGlzLl9xdWFudGl0eSA9IHF1YW50aXR5ITtcbiAgICAgICAgdGhpcy5fc2hlbGZOdW1iZXIgPSBzaGVsZk51bWJlciE7XG4gICAgfVxuXG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBpc2JuXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgaXNibigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNibjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcXVhbnRpdHlcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCBxdWFudGl0eSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVhbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHNoZWxmTnVtYmVyXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgc2hlbGZOdW1iZXIoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NoZWxmTnVtYmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBpc2JuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBpc2JuKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5faXNibiA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBxdWFudGl0eVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcXVhbnRpdHkodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9xdWFudGl0eSA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzaGVsZk51bWJlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgc2hlbGZOdW1iZXIodmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9zaGVsZk51bWJlciA9IHZhbHVlO1xuICAgIH1cblxuXG59IiwiLy8gZXhwb3J0IE5PREVfT1BUSU9OUz0tLW9wZW5zc2wtbGVnYWN5LXByb3ZpZGVyXG5pbXBvcnQgeyBEYXRhQmFzZSB9IGZyb20gXCIuL2RiL2RhdGFiYXNlXCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4vZG9tYWluL2Jvb2stc3BlY2lmaWNhdGlvblwiO1xuaW1wb3J0IHsgQ2FuY2VsIH0gZnJvbSBcIi4vZG9tYWluL2NhbmNlbFwiO1xuaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi9kb21haW4vY3VzdG9tZXJcIjtcbmltcG9ydCB7IFJlbnQgfSBmcm9tIFwiLi9kb21haW4vcmVudFwiO1xuaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuL2RvbWFpbi9zYWxlXCI7XG5pbXBvcnQgeyBPcmRlckJvb2tJdGVtcyB9IGZyb20gXCIuL2RvbWFpbi9vcmRlci1ib29rLWl0ZW1cIjtcbmltcG9ydCB7IFN0b2NrIH0gZnJvbSBcIi4vZG9tYWluL3N0b2NrXCI7XG5pbXBvcnQgeyBCb29rU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvYm9vay1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBDYW5jZWxTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9jYW5jZWwtc2VydmljZVwiO1xuaW1wb3J0IHsgQ3VzdG9tZXJTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9jdXN0b21lci1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBSZW50U2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvcmVudC1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBTYWxlU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2Uvc2FsZS1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBTdG9ja1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL3N0b2NrLXNlcnZpY2VcIjtcblxuZXhwb3J0IGxldCBib29rU2VydmljZTogQm9va1NlcnZpY2U7XG5leHBvcnQgbGV0IGN1c3RvbWVyU2VydmljZTogQ3VzdG9tZXJTZXJ2aWNlO1xuZXhwb3J0IGxldCBjYW5jZWxTZXJ2aWNlOiBDYW5jZWxTZXJ2aWNlO1xuZXhwb3J0IGxldCByZW50U2VydmljZTogUmVudFNlcnZpY2U7XG5leHBvcnQgbGV0IHNhbGVTZXJ2aWNlOiBTYWxlU2VydmljZTtcbmV4cG9ydCBsZXQgc3RvY2tTZXJ2aWNlOiBTdG9ja1NlcnZpY2U7XG5cbmxldCBkYjogRGF0YUJhc2UgPSBuZXcgRGF0YUJhc2UoKTtcbmluaXRpbGlhemVTZXJ2aWNlcyhkYik7XG5pbml0aWxpYXplRGF0YSgpO1xuYWRkTGlzdGVuZXJGb3JNZW51SXRlbXMoKTtcblxuZnVuY3Rpb24gaW5pdGlsaWF6ZVNlcnZpY2VzKGRiOiBEYXRhQmFzZSkge1xuICBib29rU2VydmljZSA9IG5ldyBCb29rU2VydmljZShkYi5nZXRCb29rc0xpc3QsIGRiLmdldEJvb2tTcGVjaWZpY2F0aW9ucyk7XG4gIGN1c3RvbWVyU2VydmljZSA9IG5ldyBDdXN0b21lclNlcnZpY2UoZGIuZ2V0Q3VzdG9tZXJzTGlzdCk7XG4gIGNhbmNlbFNlcnZpY2UgPSBuZXcgQ2FuY2VsU2VydmljZShkYi5nZXRDYW5jYWxlZFNhbGVzKTtcbiAgcmVudFNlcnZpY2UgPSBuZXcgUmVudFNlcnZpY2UoZGIuZ2V0UmVudHMsIGRiLmdldFJlbnRDYXJ0KTtcbiAgc2FsZVNlcnZpY2UgPSBuZXcgU2FsZVNlcnZpY2UoZGIuZ2V0U2FsZXNMaXN0LCBkYi5nZXRTYWxlQ2FydCk7XG4gIHN0b2NrU2VydmljZSA9IG5ldyBTdG9ja1NlcnZpY2UoZGIuZ2V0U3RvY2tzTGlzdCk7XG4gIGNvbnNvbGUubG9nKFwiU2VydmljZXMgaW50aWxpYXplZC5cIik7XG5cbiAgY3VzdG9tZXJTZXJ2aWNlLmFkZEN1c3RvbWVyKG5ldyBDdXN0b21lcihcIlwiLCBcIlwiLCBcIlwiKSk7XG4gIGN1c3RvbWVyU2VydmljZS5hZGRDdXN0b21lcihuZXcgQ3VzdG9tZXIoXCJcIiwgXCJcIiwgXCJcIikpO1xuXG4gIHN0b2NrU2VydmljZS5hZGRTdG9jayhcIjEyMy00NVwiLCBcIkE0NS01MlwiLCAxMCk7XG4gIHN0b2NrU2VydmljZS5hZGRTdG9jayhcIjEyMy00NlwiLCBcIkE0NS01MlwiLCAxMCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluaXRpbGlhemVEYXRhKCkge1xuICBhd2FpdCBib29rU2VydmljZS5pbml0aWFsaXplRGF0YU1vY2soKTtcblxuXG59XG5cbmZ1bmN0aW9uIGFkZExpc3RlbmVyRm9yTWVudUl0ZW1zKCkge1xuICAvL3NhbGVTZXJ2aWNlLnVwZGF0ZVNhbGVDYXJ0KCk7XG4gIHNob3dBbmRIaWRlKFwiYWRkQm9va01lbnVJdGVtXCIsIFwiYWRkQm9va1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwic2hvd0Jvb2tzTWVudUl0ZW1cIiwgXCJsaXN0Qm9va3NTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImFkZEN1c3RvbWVyTWVudUl0ZW1cIiwgXCJhZGRDdXN0b21lclNlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwiYWRkU3RvY2tNZW51SXRlbVwiLCBcImFkZFN0b2NrU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJzYWxlQm9va01lbnVJdGVtXCIsIFwic2FsZUJvb2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcInJlbnRCb29rTWVudUl0ZW1cIiwgXCJyZW50Qm9va1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwiY2FuY2VsU2FsZU1lbnVJdGVtXCIsIFwiY2FuY2VsU2FsZVNlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwiY2FuY2VsUmVudE1lbnVJdGVtXCIsIFwiY2FuY2VsUmVudFNlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwicmVmdW5kQm9va01lbnVJdGVtXCIsIFwicmVmdW5kQm9va1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwicmVudE5vd1wiLCBcInJlbnRCb29rU2VjdGlvblwiKTtcblxufVxuXG5mdW5jdGlvbiBzaG93QW5kSGlkZShidG5JZDogc3RyaW5nLCBlbGVtZW50SWQ6IHN0cmluZykge1xuICAvL3NhbGVTZXJ2aWNlLnVwZGF0ZVNhbGVDYXJ0KCk7XG5cbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG4gIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ0bklkKTtcblxuICBpZiAoZWxlbWVudCAmJiBidG4pIHtcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmIChlbGVtZW50LnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IGFkZEJvb2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1ib29rLWZvcm1cIik7XG5pZiAoYWRkQm9va0Zvcm0gIT0gbnVsbCkge1xuICBhZGRCb29rRm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoYWRkQm9va0Zvcm0pO1xuXG4gICAgY29uc3QgdGl0bGUgPSBmb3JtRGF0YS5nZXQoXCJib29rVGl0bGVcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGF1dGhvciA9IGZvcm1EYXRhLmdldChcImJvb2tBdXRob3JcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJib29rSXNiblwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcHVibGlzaFllYXIgPSBmb3JtRGF0YS5nZXQoXCJib29rUHVibGlzaFllYXJcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IHBhZ2VzID0gZm9ybURhdGEuZ2V0KFwiYm9va1BhZ2VzXCIpIGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgIGNvbnN0IHByaWNlID0gZm9ybURhdGEuZ2V0KFwiYm9va1ByaWNlXCIpIGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKCdEZWMgMzEsIDk5OTkgMjM6NTk6NTknKTtcblxuICAgIHRpdGxlLm1hdGNoKFwiXCIpO1xuXG5cbiAgICBjb25zdCBib29rU3BlYyA9IG5ldyBCb29rU3BlY2lmaWNhdGlvbihpc2JuLCBwcmljZSwgc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICBjb25zdCBib29rID0gbmV3IEJvb2soaXNibiwgdGl0bGUsIGF1dGhvciwgcHVibGlzaFllYXIsIHBhZ2VzLCBib29rU3BlYyk7XG4gICAgLy9ib29rU2VydmljZS5hZGRCb29rKGJvb2spO1xuXG4gICAgbGV0IHN1Y2Nlc3MgPSBhd2FpdCBib29rU2VydmljZS5hZGRCb29rTW9jayhib29rKTtcbiAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgYWxlcnQoYm9vay5pc2JuICsgXCIgbnVtYXJhbMSxIGtpdGFwIEVrbGVtZSDEsMWfbGVtaSBCYcWfYXLEsSDEsGxlIFRhbWFtbGFubcSxxZ90xLFyLlwiKTtcbiAgICAgIGFkZEJvb2tGb3JtLnJlc2V0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KGJvb2suaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCBFa2xlbWUgxLDFn2xlbWkgU8SxcmFzxLFuZGEgQmlyIEhhdGEgb2x1xZ90dS5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlOyAvLyBwcmV2ZW50IHJlbG9hZFxuICB9O1xufVxuXG5jb25zdCBhZGRTdG9ja0Zvcm0gPSA8SFRNTEZvcm1FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1zdG9jay1mb3JtXCIpKTtcbmlmIChhZGRTdG9ja0Zvcm0pIHtcbiAgYWRkU3RvY2tGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoYWRkU3RvY2tGb3JtKTtcblxuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJib29rSXNibkZvckFkZFN0b2NrXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBxdWFudHRpeSA9IGZvcm1EYXRhLmdldChcInN0b2NrUXVhbnRpdHlcIikgYXMgdW5rbm93biBhcyBudW1iZXI7XG4gICAgY29uc3Qgc2hlbGZOdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJzaGVsZk51bWJlclwiKSBhcyBzdHJpbmc7XG5cbiAgICBjb25zdCBzdG9jayA9IG5ldyBTdG9jayhpc2JuLCBxdWFudHRpeSwgc2hlbGZOdW1iZXIpO1xuXG4gICAgY29uc3QgaXNDb250YWluc0Jvb2sgPSBib29rU2VydmljZS5ib29rTGlzdC5zb21lKGIgPT4gYi5pc2JuID09IGlzYm4pO1xuXG4gICAgaWYgKCFpc0NvbnRhaW5zQm9vaykge1xuICAgICAgYWxlcnQoXCJTdG9rIGVrbGVubWV5ZSDDp2FsxLHFn8SxbGFuIGtpdGFwLCBrYXnEsXRsxLEgZGXEn2lsZGlyLiBMw7x0ZmVuIMO2bmNlIGtpdGFwIGVrbGV5aW5pelwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsZXQgaXNPayA9IGF3YWl0IHN0b2NrU2VydmljZS5hZGRTdG9ja01vY2soc3RvY2spO1xuXG4gICAgICBpZiAoaXNPaykge1xuICAgICAgICBhbGVydChpc2JuICsgXCIgaXNibiBudW1hcmFsxLEga2l0YXB0YW4sIFwiICsgcXVhbnR0aXkgKyBcIiBrYWRhciBzaXN0ZW1lIHN0b2sgZWtsZW5tacWfdGlyLlwiKTtcbiAgICAgIH1cblxuXG4gICAgfVxuXG4gICAgYWRkU3RvY2tGb3JtLnJlc2V0KCk7XG4gICAgcmV0dXJuIGZhbHNlOyAvLyBwcmV2ZW50IHJlbG9hZFxuICB9O1xufVxuXG4vKipcbiAqIE3DvMWfdGVyaSBla2xlbWUgZm9ybXUgc3VibWl0IG9sYXnEsW7EsSBtb2NrIGN1c3RvbWVyU2VydmljZSBkZWtpIG1vY2sgc2VydmlzZSBiYcSfbGFkxLFtXG4gKi9cbmNvbnN0IGFkZEN1c3RvbWVyRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLWN1c3RvbWVyLWZvcm1cIikpO1xuaWYgKGFkZEN1c3RvbWVyRm9ybSkge1xuICBhZGRDdXN0b21lckZvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShhZGRDdXN0b21lckZvcm0pO1xuXG4gICAgY29uc3QgbmFtZSA9IGZvcm1EYXRhLmdldChcImN1c3RvbWVyTmFtZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3Qgc3VybmFtZSA9IGZvcm1EYXRhLmdldChcImN1c3RvbWVyU3VybmFtZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcGhvbmVOdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJjdXN0b21lclBob25lTnVtYmVyXCIpIGFzIHN0cmluZztcblxuICAgIGNvbnN0IGN1c3RvbWVyID0gbmV3IEN1c3RvbWVyKG5hbWUsIHN1cm5hbWUsIHBob25lTnVtYmVyKTtcbiAgICBsZXQgc3VjY2VzcyA9IGF3YWl0IGN1c3RvbWVyU2VydmljZS5hZGRDdXN0b21lck1vY2soY3VzdG9tZXIpO1xuXG4gICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgIGFsZXJ0KFwiTcO8xZ90ZXJpIEVrbGVtZSDEsMWfbGVtaSBCYcWfYXLEsSDEsGxlIFRhbWFtbGFubcSxxZ90xLFyLiBcIik7XG4gICAgICBhZGRDdXN0b21lckZvcm0ucmVzZXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQoXCJNw7zFn3RlcmkgRWtsZW1lIMSwxZ9sZW1pIFPEsXJhc8SxbmRhIGJpciBoYXRhIGlsZSBrYXLFn8SxbMSxbGTEsS4gXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTsgLy8gcHJldmVudCByZWxvYWRcbiAgfTtcbn1cblxuLyoqQnVyYWRhIG1vY2sgc2VydmlzaSB5b2sgw6fDvG5rw7wgYnVyYWRhIGtpdGFwIHNhdMSxxZ/EsSB5YXDEsWzEsXJrZW4sIGtpdGFwbGFyxLEgc2VwZXRlIGVrbGl5b3J1ei5cbiAqIFNlcGV0ZSBla2xlZGlrdGVuIHNvbnJhIGJ0blNhbGUgaWRsaSBidXRvbnVuIGNsaWNrIGV2ZW50aSwgbW9jayBzZXJ2aXNpIMOnYcSfxLFyxLF5b3JcbiAqL1xuY29uc3Qgc2FsZUJvb2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzYWxlLWJvb2stZm9ybVwiKSk7XG5pZiAoc2FsZUJvb2tGb3JtKSB7XG4gIHNhbGVCb29rRm9ybS5vbnN1Ym1pdCA9ICgpID0+IHtcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKHNhbGVCb29rRm9ybSk7XG5cbiAgICBjb25zdCBpc2JuID0gZm9ybURhdGEuZ2V0KFwiaXNibkZvclNhbGVcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGJvb2sgPSBib29rU2VydmljZS5nZXRCb29rKGlzYm4pO1xuICAgIGNvbnN0IGN1c3RvbWVySWQgPSBwYXJzZUludChmb3JtRGF0YS5nZXQoXCJjdXN0b21lcklkRm9yU2FsZVwiKSBhcyBzdHJpbmcpO1xuICAgIC8vaXNWYWxpZEN1c3RvbWVyIHJlc3Qgc2VydmlzdGVuIGTDtmVuZW4gdmVyaXllIGfDtnJlIMWfZWtpbGxlbmVjZWtcbiAgICBjb25zdCBpc1ZhbGlkQ3VzdG9tZXI6IGJvb2xlYW4gPSB0cnVlOyAvL2N1c3RvbWVyU2VydmljZS5pc1ZhbGlkQ3VzdG9tZXIoY3VzdG9tZXJJZCk7XG4gICAgY29uc3QgcXVhbnRpdHkgPSBwYXJzZUludChmb3JtRGF0YS5nZXQoXCJxdWFudGl0eUZvclNhbGVcIikgYXMgc3RyaW5nKTtcblxuICAgIGNvbnN0IHN0b2NrID0gc3RvY2tTZXJ2aWNlLmdldFN0b2NrKGlzYm4pITtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoYm9vaykge1xuICAgICAgICBpZiAoc3RvY2spIHtcbiAgICAgICAgICBpZiAoc3RvY2sucXVhbnRpdHkgPj0gcXVhbnRpdHkpIHtcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkQ3VzdG9tZXIpIHtcbiAgICAgICAgICAgICAgc2FsZVNlcnZpY2UuYWRkQm9va1RvQ2FydChib29rLCBxdWFudGl0eSwgY3VzdG9tZXJJZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhbGVydChjdXN0b21lcklkICsgXCIgbnVtYXJhbMSxIG3DvMWfdGVyaSBrYXnEsXRsxLEgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhbGVydChxdWFudGl0eSArIFwiIGthZGFyIGtpdGFwIGTDvGtrYW5kYSBtZXZjdXQgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxlcnQoYETDvGtrYW5kYSAke2lzYm59IG51bWFyYWzEsSBraXRhYsSxbiBzdG/En3UgbWV2Y3V0IGRlxJ9pbGRpci5gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQoaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCB5b2t0dXIuXCIpO1xuICAgICAgfVxuXG4gICAgICBzYWxlQm9va0Zvcm0ucmVzZXQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvcik7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogS2l0YXAgc2F0xLHFn8SxIGnDp2luIGnFn2xlbSB5YXDEsWzEsXJrZW4ga2l0YXBsYXIgc2VwZXRlIGVrbGVuaXlvci5cbiAqIEVrbGVtZSBpxZ9sZW1pIGJpdHRpa3RlbiBzb25yYSBzYXTEsW4gYWxtIGnDp2luIGJ1IGJ1dG9uYSB0xLFrbGFuZMSxxJ/EsW5kYSBzZXJ2aXNlIGdpZGlwIHNlcGV0dGVraSBraXRhcGxhcsSxbiBzYXTEscWfxLEgZ2Vyw6dla2xlxZ9peW9yXG4gKiBCdXJhZGEgZGnEn2VyIGJ1dG9ubGFyZGEgb2xkdcSfdSBnaWJpIGRpcmVrIG1vY2sgc2VydmlzaW5lIGJhxJ9sYW5tYWsgeWVyaW5lIHNlcnZpc2UgZ2l0bWVrIGR1cnVtdW5kYXnEsXouIFxuICogw4fDvG5rw7wgc2VydmlzdGUgU2FsZSBuZXNuZXNpbmkgb2x1xZ90dXJ1cCBtb2NrIHNlcnZpc2luZSBwYXJhbWV0cmUgb2xhcmFrIGdlw6dpeW9ydXouXG4gKi9cbmNvbnN0IGJ0blNhbGUgPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuU2FsZVwiKSk7XG5idG5TYWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGlmIChzYWxlU2VydmljZS5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPT09IDApIHtcblxuICAgIGFsZXJ0KFwiU2VwZXR0ZSDDvHLDvG4geW9rLiBMw7x0ZmVuIMO2bmNlIMO8csO8biBla2xleWluaXpcIik7XG4gIH0gZWxzZSB7XG5cbiAgICBsZXQgc3VjY2VzcyA9IHNhbGVTZXJ2aWNlLmNhcnRUb1NhbGUoKTtcbiAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgYWxlcnQoXCJTYXTEscWfIGnFn2xlbWkgYmHFn2FyxLF5bGEgZ2Vyw6dla2xlxZ90aXJpbG1pxZ90aXIuXCIpO1xuICAgIH1lbHNle1xuICAgICAgYWxlcnQoXCJTYXTEscWfIGnFn2xlbWkgc8SxcmFzxLFuZGEgaGF0YSBvbHXFn3R1LCBsw7x0ZmVuIHRla3JhciBkZW5leWluaXouXCIpO1xuICAgIH1cbiAgfVxuXG59KTtcblxuLyoqXG4gKiBLaXRhcGxhcsSxIGxpc3RlbGVtZWsgacOnaW4gdMSxa2xhbsSxbGFuIGJ1dG9uIGNsaWNrIGV2ZW50aVxuICovXG5jb25zdCBidG5TaG93Qm9va3NNZW51SXRlbSA9IDxIVE1MRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaG93Qm9va3NNZW51SXRlbVwiKSk7XG5idG5TaG93Qm9va3NNZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBib29rU2VydmljZS5saXN0Qm9va3MoKTtcbn0pXG5cbmNvbnN0IGNhbmNlbFNhbGVGb3JtID0gPEhUTUxGb3JtRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbmNlbC1zYWxlLWZvcm1cIik7XG5pZiAoY2FuY2VsU2FsZUZvcm0pIHtcbiAgY2FuY2VsU2FsZUZvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIC8vIMSwcHRhbCBpxZ9sZW1pbmluIMOnYWzEscWfYWJpbG1lc2kgacOnaW4gw7ZuY2Ugc2F0xLHFnyB2ZXJpc2kgZWtsZWRpbSwgc29ucmEgc2F0xLHFnyBpcHRhbGkgacWfbGVtaSDDp2FsxLHFn8SxeW9yXG4gICAgbGV0IHNiaSA9IG5ldyBBcnJheTxPcmRlckJvb2tJdGVtcz47XG4gICAgc2JpLnB1c2gobmV3IE9yZGVyQm9va0l0ZW1zKGJvb2tTZXJ2aWNlLmdldEJvb2soXCIxMjMtNDVcIiksIDMpKVxuXG4gICAgbGV0IGEgPSBuZXcgU2FsZShzYmksIDEsIG5ldyBEYXRlLCBcIlMwMjExMjIxNjMwNDVcIiwgMTIzKTtcbiAgICBzYWxlU2VydmljZS5zYWxlTGlzdC5wdXNoKGEpO1xuXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoY2FuY2VsU2FsZUZvcm0pO1xuICAgIGNvbnN0IHNhbGVOdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJzYWxlTnVtYmVyZm9yQ2FuY2VsXCIpIGFzIHN0cmluZztcblxuICAgIGxldCBzYWxlID0gc2FsZVNlcnZpY2UuZ2V0U2FsZShzYWxlTnVtYmVyKTtcblxuICAgIGlmIChzYWxlKSB7XG4gICAgICBsZXQgY2FuY2VsU2FsZTogQ2FuY2VsID0gbmV3IENhbmNlbChzYWxlLCBzYWxlLnRvdGFsLCBuZXcgRGF0ZSk7XG4gICAgICBsZXQgc3RhdGUgPSBhd2FpdCBjYW5jZWxTZXJ2aWNlLmNhbmNlbFNhbGVNb2NrKGNhbmNlbFNhbGUpO1xuXG4gICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgYWxlcnQoc2FsZS5vcGVyYXRpb25OdW1iZXIgKyBcIiBudW1hcmFsxLEgc2F0xLHFnyBpcHRhbCBlZGlsbWnFn3Rpci5cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChzYWxlLm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBzYXTEscWfIGlwdGFsIGVkaWxpcmtlbiBoYXRhIG1leWRhbmEgZ2VsZGkuXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydChzYWxlTnVtYmVyICsgXCIgbnVtYXJhbMSxIHNhdMSxxZ8gYnVsdW5hbWFtxLHFn3TEsXIuIFRla3JhciBkZW5leWluaXouXCIpO1xuICAgIH1cblxuICB9XG59XG5cbmNvbnN0IGNhbmNlbFJlbnRGb3JtID0gPEhUTUxGb3JtRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbmNlbC1yZW50LWZvcm1cIik7XG5pZiAoY2FuY2VsUmVudEZvcm0pIHtcbiAgY2FuY2VsUmVudEZvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIC8vIEtpcmFsYW1hIGlwdGFsaW5pbiDDp2FsxLHFn2FiaWxtZXNpIGnDp2luIMO2bmNlIHZlcmkgZWtsZWRpbSwgc29ucmEgaXB0YWwgacWfbGVtaSDDp2FsxLHFn8SxeW9yXG4gICAgbGV0IHNiaSA9IG5ldyBBcnJheTxPcmRlckJvb2tJdGVtcz47XG4gICAgc2JpLnB1c2gobmV3IE9yZGVyQm9va0l0ZW1zKGJvb2tTZXJ2aWNlLmdldEJvb2soXCIxMjMtNDVcIiksIDMpKTtcblxuICAgIGxldCByRGF0ZSA9IG5ldyBEYXRlO1xuICAgIHJEYXRlLnNldERhdGUockRhdGUuZ2V0RGF0ZSgpICsgMTQpO1xuXG4gICAgbGV0IGEgPSBuZXcgUmVudChzYmksIG5ldyBEYXRlLCAxLCBcIlIwMjExMjIxNjMwNDVcIiwgMTIzLCByRGF0ZSwgMjAwKTtcbiAgICByZW50U2VydmljZS5yZW50TGlzdC5wdXNoKGEpO1xuXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoY2FuY2VsUmVudEZvcm0pO1xuICAgIGNvbnN0IHJlbnROdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJyZW50TnVtYmVyZm9yQ2FuY2VsXCIpIGFzIHN0cmluZztcblxuICAgIGxldCByZW50ID0gcmVudFNlcnZpY2UuZ2V0UmVudChyZW50TnVtYmVyKTtcblxuICAgIGlmIChyZW50KSB7XG4gICAgICBsZXQgY2FuY2VsUmVudDogQ2FuY2VsID0gbmV3IENhbmNlbChyZW50LCByZW50LnRvdGFsLCBuZXcgRGF0ZSk7XG4gICAgICBsZXQgc3RhdGUgPSBhd2FpdCBjYW5jZWxTZXJ2aWNlLmNhbmNlbFJlbnRNb2NrKGNhbmNlbFJlbnQpO1xuXG4gICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgYWxlcnQocmVudC5vcGVyYXRpb25OdW1iZXIgKyBcIiBudW1hcmFsxLEga2lyYWxhbWEgaXB0YWwgZWRpbG1pxZ90aXIuXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQocmVudC5vcGVyYXRpb25OdW1iZXIgKyBcIiBudW1hcmFsxLEga2lyYWxhbWEgaXB0YWwgZWRpbGlya2VuIGhhdGEgbWV5ZGFuYSBnZWxkaS5cIik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KHJlbnROdW1iZXIgKyBcIiBudW1hcmFsxLEga2lyYWxtYSBidWx1bmFtYW3EscWfdMSxci4gVGVrcmFyIGRlbmV5aW5pei5cIik7XG4gICAgfVxuXG4gIH1cblxufVxuXG4vKipCdXJhZGEgbW9jayBzZXJ2aXNpIHlvayDDp8O8bmvDvCBidXJhZGEga2l0YXAga2lyYWxhbWFzxLEgeWFwxLFsxLFya2VuLCBraXRhcGxhcsSxIHNlcGV0ZSBla2xpeW9ydXouXG4gKiBTZXBldGUgZWtsZWRpa3RlbiBzb25yYSBidG5SZW50IGlkbGkgYnV0b251biBjbGljayBldmVudGksIG1vY2sgc2VydmlzaSDDp2HEn8SxcsSxeW9yXG4gKi9cbmNvbnN0IHJlbnRCb29rRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVudC1ib29rLWZvcm1cIikpO1xuaWYgKHJlbnRCb29rRm9ybSkge1xuICByZW50Qm9va0Zvcm0ub25zdWJtaXQgPSAoKSA9PiB7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShyZW50Qm9va0Zvcm0pO1xuXG4gICAgY29uc3QgaXNibiA9IGZvcm1EYXRhLmdldChcImlzYm5Gb3JSZW50XCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBib29rID0gYm9va1NlcnZpY2UuZ2V0Qm9vayhpc2JuKTtcbiAgICBjb25zdCBjdXN0b21lcklkID0gcGFyc2VJbnQoZm9ybURhdGEuZ2V0KFwiY3VzdG9tZXJJZEZvclJlbnRcIikgYXMgc3RyaW5nKTtcbiAgICAvL2lzVmFsaWRDdXN0b21lciByZXN0IHNlcnZpc3RlbiBkw7ZlbmVuIHZlcml5ZSBnw7ZyZSDFn2VraWxsZW5lY2VrXG4gICAgY29uc3QgaXNWYWxpZEN1c3RvbWVyOiBib29sZWFuID0gdHJ1ZTsgLy9jdXN0b21lclNlcnZpY2UuaXNWYWxpZEN1c3RvbWVyKGN1c3RvbWVySWQpO1xuICAgIGNvbnN0IHF1YW50aXR5ID0gcGFyc2VJbnQoZm9ybURhdGEuZ2V0KFwicXVhbnRpdHlGb3JSZW50XCIpIGFzIHN0cmluZyk7XG4gICAgY29uc3Qgc3RvY2sgPSBzdG9ja1NlcnZpY2UuZ2V0U3RvY2soaXNibikhO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChib29rKSB7XG4gICAgICAgIGlmIChzdG9jaykge1xuICAgICAgICAgIGlmIChzdG9jay5xdWFudGl0eSA+PSBxdWFudGl0eSkge1xuICAgICAgICAgICAgaWYgKGlzVmFsaWRDdXN0b21lcikge1xuICAgICAgICAgICAgICByZW50U2VydmljZS5hZGRCb29rVG9DYXJ0KGJvb2ssIHF1YW50aXR5LCBjdXN0b21lcklkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFsZXJ0KGN1c3RvbWVySWQgKyBcIiBudW1hcmFsxLEgbcO8xZ90ZXJpIGthecSxdGzEsSBkZcSfaWxkaXIuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFsZXJ0KHF1YW50aXR5ICsgXCIga2FkYXIga2l0YXAgZMO8a2thbmRhIG1ldmN1dCBkZcSfaWxkaXIuXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbGVydChgRMO8a2thbmRhICR7aXNibn0gbnVtYXJhbMSxIGtpdGFixLFuIHN0b8SfdSBtZXZjdXQgZGXEn2lsZGlyLmApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChpc2JuICsgXCIgbnVtYXJhbMSxIGtpdGFwIHlva3R1ci5cIik7XG4gICAgICB9XG5cbiAgICAgIHJlbnRCb29rRm9ybS5yZXNldCgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFsZXJ0KGVycm9yKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBLaXRhcCBzYXTEscWfxLEgacOnaW4gacWfbGVtIHlhcMSxbMSxcmtlbiBraXRhcGxhciBzZXBldGUgZWtsZW5peW9yLlxuICogRWtsZW1lIGnFn2xlbWkgYml0dGlrdGVuIHNvbnJhIHNhdMSxbiBhbG0gaWnDp2luIGJ1IGJ1dG9uYSB0xLFrbGFuZMSxxJ/EsW5kYSBzZXJ2aXNlIGdpZGlwIHNlcGV0dGVraSBraXRhcGxhcsSxbiBzYXTEscWfxLEgZ2Vyw6dla2xlxZ9peW9yXG4gKiBCdXJhZGEgZGnEn2VyIGJ1dG9ubGFyZGEgb2xkdcSfdSBnaWJpIGRpcmVrIG1vY2sgc2VydmlzaW5lIGJhxJ9sYW5tYWsgeWVyaW5lIHNlcnZpc2UgZ2l0bWVrIGR1cnVtdW5kYXnEsXouIFxuICogw4fDvG5rw7wgc2VydmlzdGUgU2FsZSBuZXNuZXNpbmkgb2x1xZ90dXJ1cCBtb2NrIHNlcnZpc2luZSBwYXJhbWV0cmUgb2xhcmsgZ2XDp2l5b3J1ei5cbiAqL1xuY29uc3QgYnRuUmVudCA9IDxIVE1MQnV0dG9uRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG5SZW50XCIpKTtcbmJ0blJlbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaWYgKHJlbnRTZXJ2aWNlLnJlbnRDYXJ0Lm9yZGVyQm9va0l0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgIGFsZXJ0KFwiU2VwZXR0ZSDDvHLDvG4geW9rLiBMw7x0ZmVuIMO2bmNlIMO8csO8biBla2xleWluaXpcIik7XG4gIH0gZWxzZSB7XG4gICAgcmVudFNlcnZpY2UuY2FydFRvUmVudCgpO1xuICB9XG5cbn0pO1xuXG5jb25zdCByZWZ1bmRCb29rRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVmdW5kLWJvb2stZm9ybVwiKSk7XG5pZiAocmVmdW5kQm9va0Zvcm0pIHtcbiAgcmVmdW5kQm9va0Zvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuXG4gICAgLy8gS2lyYWxhbWEgacWfbGVtaW5kZW4gZ2VyaSDDtmRlbWUgacWfbGVtaSDDp2FsxLHFn2FiaWxtZXNpIGnDp2luIMO2bmNlIGtpcmFsYW1hIHZlcmlzaSBla2xlZGltLCBcbiAgICAvLyBTb25yYSBnZXJpIMO2ZGVtZSBpxZ9sZW1pIMOnYWzEscWfxLF5b3JcbiAgICBsZXQgc2JpID0gbmV3IEFycmF5PE9yZGVyQm9va0l0ZW1zPjtcbiAgICBzYmkucHVzaChuZXcgT3JkZXJCb29rSXRlbXMoYm9va1NlcnZpY2UuZ2V0Qm9vayhcIjEyMy00NVwiKSwgMykpXG5cbiAgICBsZXQgckRhdGUgPSBuZXcgRGF0ZTtcbiAgICByRGF0ZS5zZXREYXRlKHJEYXRlLmdldERhdGUoKSArIDIzKTtcblxuICAgIGxldCBhID0gbmV3IFJlbnQoc2JpLCBuZXcgRGF0ZSwgMSwgXCJSMDIxMTIyMTYzMDQ1XCIsIDEyMywgckRhdGUsIDApO1xuICAgIGEucmVmdW5kID0gcmVudFNlcnZpY2UuY2FsY3VsYXRlUmVmdW5kQW1vdW50KGEpO1xuXG4gICAgcmVudFNlcnZpY2UucmVudExpc3QucHVzaChhKTtcbiAgICAvL1ZlcmkgR2lyacWfaSBzb24gYWxhbsSxXG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEocmVmdW5kQm9va0Zvcm0pO1xuICAgIGNvbnN0IHJlbnROdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJyZW50TnVtYmVyZm9yUmVmdW5kXCIpIGFzIHN0cmluZztcblxuICAgIGxldCByZW50ID0gcmVudFNlcnZpY2UuZ2V0UmVudChyZW50TnVtYmVyKTtcbiAgICBpZiAocmVudCkge1xuXG4gICAgICBsZXQgcmVmdW5kID0gYXdhaXQgcmVudFNlcnZpY2UucmVmdW5kUmVudE1vY2socmVudCk7XG5cbiAgICAgIGlmIChyZWZ1bmQpIHtcbiAgICAgICAgYWxlcnQocmVudC5vcGVyYXRpb25OdW1iZXIgKyBcIiBudW1hcmFsxLEga2lyYWxhbWEgZ2VyaSBhbMSxbm3EscWfdMSxci5cIik7XG4gICAgICAgIGFsZXJ0KFwiR2VyaSDDtmRlbWUgbWlrdGFyxLE6XCIgKyByZWZ1bmQgKyBcIiDigrogLlwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQocmVudC5vcGVyYXRpb25OdW1iZXIgKyBcIiBudW1hcmFsxLEga2lyYWxhbWEgaXB0YWwgZWRpbGlya2VuIGhhdGEgbWV5ZGFuYSBnZWxkaS5cIik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KHJlbnROdW1iZXIgKyBcIiBudW1hcmFsxLEga2lyYWxhbWEgYnVsdW5hbWFtxLHFn3TEsXIuIFRla3JhciBkZW5leWluaXouXCIpO1xuICAgIH1cblxuICB9O1xufSIsIi8qKlxuICogQGF1dGhvciBNZWhtZXQgRS4gQWtjYW4gLSAyMS4xMC4yMlxuICovXG5pbXBvcnQgeyBzdG9ja1NlcnZpY2UgfSBmcm9tIFwiLi5cIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rLXNwZWNpZmljYXRpb25cIjtcblxuZXhwb3J0IGNsYXNzIEJvb2tTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9ib29rTGlzdDogQXJyYXk8Qm9vaz47XG4gICAgcHJpdmF0ZSBfYm9va1NwZWNpZmljYXRpb246IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPjtcbiAgICBib29rQXBpOiBzdHJpbmcgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS92MS9ib29rcyc7XG5cbiAgICBjb25zdHJ1Y3Rvcihib29rTGlzdDogQXJyYXk8Qm9vaz4sIGJvb2tTcGVjaWZpY2F0aW9uOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4pIHtcbiAgICAgICAgdGhpcy5fYm9va0xpc3QgPSBib29rTGlzdDtcbiAgICAgICAgdGhpcy5fYm9va1NwZWNpZmljYXRpb24gPSBib29rU3BlY2lmaWNhdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYm9va0xpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxCb29rPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGJvb2tMaXN0KCk6IEFycmF5PEJvb2s+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBib29rU3BlY2lmaWNhdGlvblxuICAgICAqIEByZXR1cm4ge0FycmF5PEJvb2tTcGVjaWZpY2F0aW9uPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGJvb2tTcGVjaWZpY2F0aW9uKCk6IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgYm9va0xpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PEJvb2s+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgYm9va0xpc3QodmFsdWU6IEFycmF5PEJvb2s+KSB7XG4gICAgICAgIHRoaXMuX2Jvb2tMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGJvb2tTcGVjaWZpY2F0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheTxCb29rU3BlY2lmaWNhdGlvbj59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBib29rU3BlY2lmaWNhdGlvbih2YWx1ZTogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+KSB7XG4gICAgICAgIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9uID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcGFyYW1ldHJlIG9sYXJhayBnZWxlbiBpc2JuIGJpbGdpc2luZSBnw7ZyZSBpbGdpbGkga2l0YWLEsSBidWx1ci5cbiAgICAgKiBAcGFyYW0gaXNibiBCdWx1bmFjYWsgb2xhbiBraXRhYsSxbiBpc2JuIG51bWFyYXPEsVxuICAgICAqIEByZXR1cm5zIGlzYm4gbnVtYXJhc8SxbmEgZ8O2cmUgaWxnaWxpIGtpdGFixLEgQm9vayBuZXNuZXNpIG9sYXJhayBnZXJpIGTDtm5kw7xyw7xyXG4gICAgICovXG4gICAgcHVibGljIGdldEJvb2soaXNibjogc3RyaW5nKTogQm9vayB7XG4gICAgICAgIC8vQnVyYWRhbiBudWxsIGJpciBkZcSfZXIgZGUgZMO2bmViaWxlY2XEn2kgacOnaW4gaGF0YSB2ZXJpeW9yXG4gICAgICAgIC8vYW1hIGJpeiBzb25kYWtpICEgb3BlcmF0w7Zyw7wgaWxlIG51bGwgZGXEn2VyIGTDtm5tZXllY2VrIGRpeWUgZ2FyYW50aSB2ZXJpeW9ydXpcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9va0xpc3QuZmluZChiID0+IGIuaXNibiA9PT0gaXNibikhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcmFtZXRyZSBvbGFyYWsgZ2VsZW4gQm9vayBuZXNuZXNpbmkga2l0YXAgbmVzbmVzaW5lIGVrbGVyXG4gICAgICogQHBhcmFtIG5ld0Jvb2sgZWtsZW5lY2VrIG9sYW4ga2l0YXAgbmVzbmVzaVxuICAgICAqL1xuICAgIHB1YmxpYyBhZGRCb29rKG5ld0Jvb2s6IEJvb2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuYm9va0xpc3QucHVzaChuZXdCb29rKTtcbiAgICAgICAgICAgIHRoaXMuYm9va1NwZWNpZmljYXRpb24ucHVzaChuZXdCb29rLmJvb2tTcGVjaWZpY2F0aW9uKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIktpdGFwIGVrbGVuaXJrZW4gYmlyIGhhdGEgbWV5ZGFuYSBnZWxkaS5cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaXNWYWxpZEJvb2soaXNibjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGIgPSB0aGlzLmdldEJvb2soaXNibik7XG4gICAgICAgIHJldHVybiB0aGlzLmJvb2tMaXN0LmluY2x1ZGVzKGIpXG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZURhdGFNb2NrKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmJvb2tBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgIGNvbnN0IGdldFJlc3VsdCA9IDxCb29rW10+SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXN1bHQsIG51bGwsIDQpKTtcbiAgICAgICAgICAgIHRoaXMuYm9va0xpc3QgPSBnZXRSZXN1bHQgYXMgQXJyYXk8Qm9vaz47XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmJvb2tMaXN0KTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgbGlzdEJvb2tzKCkge1xuICAgICAgICBjb25zdCBsaXN0Qm9va3NEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxpc3RCb29rc1wiKTtcblxuICAgICAgICBpZiAobGlzdEJvb2tzRGl2KSB7XG4gICAgICAgICAgICBsZXQgcm93LCBjb2x1bW47XG5cbiAgICAgICAgICAgIHdoaWxlIChsaXN0Qm9va3NEaXYubGFzdENoaWxkICYmIGxpc3RCb29rc0Rpdi5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgbGlzdEJvb2tzRGl2LnJlbW92ZUNoaWxkKGxpc3RCb29rc0Rpdi5sYXN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmJvb2tMaXN0LmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gXCJyb3ctbGlzdC1ib29rXCI7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbGVtZW50LmlzYm4udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVsZW1lbnQubmFtZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJjb2x1bW4tbGlzdC1ib29rXCI7XG4gICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gZWxlbWVudC5hdXRob3IudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IHN0b2NrU2VydmljZS5nZXRTdG9ja1F1YW50aXR5KGVsZW1lbnQuaXNibikudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVsZW1lbnQuYm9va1NwZWNpZmljYXRpb24ucHJpY2UudG9TdHJpbmcoKSArIFwiIOKCulwiO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgbGlzdEJvb2tzRGl2LmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGFzeW5jIGFkZEJvb2tNb2NrKGI6IEJvb2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5ib29rQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBpc2JuOiBiLmlzYm4sXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yOiBiLmF1dGhvcixcbiAgICAgICAgICAgICAgICAgICAgcGFnZXM6IGIucGFnZXMsXG4gICAgICAgICAgICAgICAgICAgIHB1Ymxpc2hZZWFyOiBiLnB1Ymxpc2hZZWFyLFxuICAgICAgICAgICAgICAgICAgICBib29rU3BlY2lmaWNhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNibjogYi5ib29rU3BlY2lmaWNhdGlvbi5pc2JuLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IGIuYm9va1NwZWNpZmljYXRpb24ucHJpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydERhdGU6IGIuYm9va1NwZWNpZmljYXRpb24uc3RhcnREYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kRGF0ZTogYi5ib29rU3BlY2lmaWNhdGlvbi5lbmREYXRlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZXN0IHNlcnZpc2luZGVuIGTDtm5lbiBjZXZhcCA9PlwiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBDYW5jZWwgfSBmcm9tIFwiLi4vZG9tYWluL2NhbmNlbFwiO1xuXG5leHBvcnQgY2xhc3MgQ2FuY2VsU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfY2FuY2VsbGVkTGlzdDogQXJyYXk8Q2FuY2VsPjtcbiAgICBjYW5jZWxTYWxlQXBpOiBzdHJpbmcgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS9jYW5jZWxTYWxlJztcbiAgICBjYW5jZWxSZW50QXBpOiBzdHJpbmcgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS9jYW5jZWxSZW50JztcblxuICAgIGNvbnN0cnVjdG9yKGNhbmNlbGxlZExpc3Q6IEFycmF5PENhbmNlbD4pIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsbGVkTGlzdCA9IGNhbmNlbGxlZExpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGNhbmNlbGxlZFNhbGVzTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PENhbmNlbFNhbGU+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgY2FuY2VsbGVkTGlzdCgpOiBBcnJheTxDYW5jZWw+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbGxlZExpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGNhbmNlbGxlZFNhbGVzTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8Q2FuY2VsU2FsZT59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBjYW5jZWxsZWRMaXN0KHZhbHVlOiBBcnJheTxDYW5jZWw+KSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbGxlZExpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlRGlmZkhvdXJzKGQxOiBEYXRlLCBkMjogRGF0ZSk6IG51bWJlciB7XG5cbiAgICAgICAgbGV0IGRpZmZNaWxpczogbnVtYmVyID0gKGQxLmdldFRpbWUoKSAtIGQyLmdldFRpbWUoKSk7Ly8gbWlsaSBzZWNvbmRzXG4gICAgICAgIGxldCBkaWZmSG91ciA9IE1hdGguZmxvb3IoZGlmZk1pbGlzIC8gMTAwMCAvIDYwIC8gNjApOyAvLyAvMTAwMCA+IHNlY29uZCAvIDYwID4gbWluIC8gNjAgPiBob3VyXG4gICAgICAgIHJldHVybiBkaWZmSG91cjtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FuY2VsU2FsZShjYW5jZWw6IENhbmNlbCk6IHZvaWQge1xuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXIgPSB0aGlzLmNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQoY2FuY2VsKTtcbiAgICAgICAgY2FuY2VsLnJlZnVuZCA9IHJlZnVuZDtcbiAgICAgICAgdGhpcy5jYW5jZWxsZWRMaXN0LnB1c2goY2FuY2VsKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlQ2FuY2VsU2FsZVJlZnVuZChjYW5jZWxTYWxlOiBDYW5jZWwpOiBudW1iZXIge1xuICAgICAgICBsZXQgZGlmZiA9IHRoaXMuY2FsY3VsYXRlRGlmZkhvdXJzKGNhbmNlbFNhbGUuY2FuY2VsZWREYXRlVGltZSwgY2FuY2VsU2FsZS5jYW5jZWxUeXBlLm9wZXJhdGlvbkRhdGVUaW1lKVxuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKGRpZmYgPiAyNCkge1xuICAgICAgICAgICAgcmVmdW5kID0gY2FuY2VsU2FsZS5jYW5jZWxUeXBlLnRvdGFsICogMC43NTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IGNhbmNlbFNhbGUuY2FuY2VsVHlwZS50b3RhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVmdW5kO1xuICAgIH1cblxuICAgIGFzeW5jIGNhbmNlbFNhbGVNb2NrKGNhbmNlbFNhbGU6IENhbmNlbCkge1xuXG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlciA9IHRoaXMuY2FsY3VsYXRlQ2FuY2VsU2FsZVJlZnVuZChjYW5jZWxTYWxlKTtcblxuICAgICAgICBjYW5jZWxTYWxlLnJlZnVuZCA9IHJlZnVuZDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmNhbmNlbFNhbGVBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHNhbGU6IGNhbmNlbFNhbGUuY2FuY2VsVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmVmdW5kOiBjYW5jZWxTYWxlLnJlZnVuZCxcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsZWREYXRlVGltZTogY2FuY2VsU2FsZS5jYW5jZWxlZERhdGVUaW1lXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vVG9kbyBzYWxlIG1vY2sgc2VydmlzaW5lIGRlbGV0ZSBpc3RlxJ9pIGF0xLFwIG8gc2FsZSBuZXNuZXNpbmkgc2lsZWNla1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG5cblxuXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuXG5cbiAgICB9XG5cbiAgICBwdWJsaWMgY2FuY2VsUmVudChjYW5jZWw6IENhbmNlbCkge1xuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXIgPSB0aGlzLmNhbGN1bGF0ZUNhbmNlbFJlbnRSZWZ1bmQoY2FuY2VsKTtcbiAgICAgICAgY2FuY2VsLnJlZnVuZCA9IHJlZnVuZDtcbiAgICAgICAgdGhpcy5jYW5jZWxsZWRMaXN0LnB1c2goY2FuY2VsKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlQ2FuY2VsUmVudFJlZnVuZChjYW5jZWxSZW50OiBDYW5jZWwpOiBudW1iZXIge1xuICAgICAgICBsZXQgZGlmZiA9IHRoaXMuY2FsY3VsYXRlRGlmZkhvdXJzKGNhbmNlbFJlbnQuY2FuY2VsZWREYXRlVGltZSwgY2FuY2VsUmVudC5jYW5jZWxUeXBlLm9wZXJhdGlvbkRhdGVUaW1lKVxuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKGRpZmYgPiAyNCkge1xuICAgICAgICAgICAgcmVmdW5kID0gY2FuY2VsUmVudC5jYW5jZWxUeXBlLnRvdGFsICogMC43NTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IGNhbmNlbFJlbnQuY2FuY2VsVHlwZS50b3RhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVmdW5kO1xuICAgIH1cblxuICAgIGFzeW5jIGNhbmNlbFJlbnRNb2NrKGNhbmNlbFJlbnQ6IENhbmNlbCl7XG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlciA9IHRoaXMuY2FsY3VsYXRlQ2FuY2VsUmVudFJlZnVuZChjYW5jZWxSZW50KTtcblxuICAgICAgICBjYW5jZWxSZW50LnJlZnVuZCA9IHJlZnVuZDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmNhbmNlbFJlbnRBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHJlbnQ6IGNhbmNlbFJlbnQuY2FuY2VsVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmVmdW5kOiBjYW5jZWxSZW50LnJlZnVuZCxcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsZWREYXRlVGltZTogY2FuY2VsUmVudC5jYW5jZWxlZERhdGVUaW1lXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vVG9kbyBzYWxlIG1vY2sgc2VydmlzaW5lIGRlbGV0ZSBpc3RlxJ9pIGF0xLFwIG8gc2FsZSBuZXNuZXNpbmkgc2lsZWNla1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG5cblxuXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cblxufSIsImltcG9ydCB7IEN1c3RvbWVyIH0gZnJvbSBcIi4uL2RvbWFpbi9jdXN0b21lclwiO1xuXG5leHBvcnQgY2xhc3MgQ3VzdG9tZXJTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9jdXN0b21lckxpc3Q6IEFycmF5PEN1c3RvbWVyPjtcbiAgICBwcml2YXRlIGN1c3RvbWVyQXBpOiBzdHJpbmcgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvdjEvY3VzdG9tZXJzXCI7XG5cbiAgICBjb25zdHJ1Y3RvcihjdXN0b21lckxpc3Q6IEFycmF5PEN1c3RvbWVyPikge1xuICAgICAgICB0aGlzLl9jdXN0b21lckxpc3QgPSBjdXN0b21lckxpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGN1c3RvbWVyTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PEN1c3RvbWVyPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGN1c3RvbWVyTGlzdCgpOiBBcnJheTxDdXN0b21lcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tZXJMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBjdXN0b21lckxpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PEN1c3RvbWVyPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGN1c3RvbWVyTGlzdCh2YWx1ZTogQXJyYXk8Q3VzdG9tZXI+KSB7XG4gICAgICAgIHRoaXMuX2N1c3RvbWVyTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRDdXN0b21lcihuZXdDdXN0b21lcjogQ3VzdG9tZXIpIHtcbiAgICAgICAgdGhpcy5jdXN0b21lckxpc3QucHVzaChuZXdDdXN0b21lcik7XG4gICAgfVxuXG4gICAgLypcbiAgICAgICAgcHVibGljIGdldEN1c3RvbWVySW5mbyhpZDogbnVtYmVyKTogQ3VzdG9tZXIgfCB1bmRlZmluZWQge1xuICAgIFxuICAgICAgICAgICAgbGV0IGN1c3RvbWVyID0gdGhpcy5jdXN0b21lckxpc3QuZmluZChjdXN0b21lciA9PiBjdXN0b21lci5pZCA9PT0gaWQpO1xuICAgIFxuICAgICAgICAgICAgaWYgKGN1c3RvbWVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1c3RvbWVyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIHB1YmxpYyBpc1ZhbGlkQ3VzdG9tZXIoY3VzdG9tZXJJZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgXG4gICAgICAgICAgICBsZXQgaXNWYWxpZCA9IHRoaXMuY3VzdG9tZXJMaXN0LnNvbWUoY3VzdG9tZXIgPT4gY3VzdG9tZXIuaWQgPT09IGN1c3RvbWVySWQpO1xuICAgIFxuICAgICAgICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgKi9cblxuICAgIGFzeW5jIGFkZEN1c3RvbWVyTW9jayhuZXdDdXN0b21lcjogQ3VzdG9tZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5jdXN0b21lckFwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbmV3Q3VzdG9tZXIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc3VyTmFtZTogbmV3Q3VzdG9tZXIuc3VyTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IG5ld0N1c3RvbWVyLnBob25lTnVtYmVyXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVzdCBzZXJ2aXNpbmRlbiBkw7ZuZW4gY2V2YXAgPT5cIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgc3RvY2tTZXJ2aWNlIH0gZnJvbSBcIi4uXCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rXCI7XG5pbXBvcnQgeyBSZW50IH0gZnJvbSBcIi4uL2RvbWFpbi9yZW50XCI7XG5pbXBvcnQgeyBSZW50Q2FydCB9IGZyb20gXCIuLi9kb21haW4vcmVudC1jYXJ0XCI7XG5pbXBvcnQgeyBPcmRlckJvb2tJdGVtcyB9IGZyb20gXCIuLi9kb21haW4vb3JkZXItYm9vay1pdGVtXCI7XG5cbmV4cG9ydCBjbGFzcyBSZW50U2VydmljZSB7XG4gICAgcHJpdmF0ZSBfcmVudExpc3Q6IEFycmF5PFJlbnQ+O1xuXG4gICAgcHJpdmF0ZSBfcmVudENhcnQ6IFJlbnRDYXJ0O1xuICAgIHB1YmxpYyByZW50QXBpID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvdjEvcmVudHMnO1xuICAgIHJlZnVuZFBlcmNlbnQ6IG51bWJlcjtcblxuXG4gICAgY29uc3RydWN0b3IocmVudExpc3Q6IEFycmF5PFJlbnQ+LCByZW50Q2FydDogUmVudENhcnQpIHtcbiAgICAgICAgdGhpcy5fcmVudExpc3QgPSByZW50TGlzdDtcbiAgICAgICAgdGhpcy5yZWZ1bmRQZXJjZW50ID0gMC43NTtcbiAgICAgICAgdGhpcy5fcmVudENhcnQgPSByZW50Q2FydDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVudExpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxSZW50Pn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHJlbnRMaXN0KCk6IEFycmF5PFJlbnQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbnRMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZW50TGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8UmVudD59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCByZW50TGlzdCh2YWx1ZTogQXJyYXk8UmVudD4pIHtcbiAgICAgICAgdGhpcy5fcmVudExpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVudENhcnRcbiAgICAgKiBAcmV0dXJuIHtSZW50Q2FydH1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHJlbnRDYXJ0KCk6IFJlbnRDYXJ0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbnRDYXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZW50Q2FydFxuICAgICAqIEBwYXJhbSB7UmVudENhcnR9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCByZW50Q2FydCh2YWx1ZTogUmVudENhcnQpIHtcbiAgICAgICAgdGhpcy5fcmVudENhcnQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkUmVudChyZW50OiBSZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVudExpc3QucHVzaChyZW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBLaXRhcGxhcsSxbiBoZXBzaSBzZXBldGUgZWtsZW5kaWt0ZW4gc29ucmEgdG9wbG1hIMO8Y3JldGkgaGVzYXBsYXVhbiBmb25rc2l5b25cbiAgICAgKiBAcGFyYW0gcmVudCBLaXRhcGxhcsSxbiBsaXN0ZXNpbmluIGJ1bHVuZHXEn3UgbmVzbmVcbiAgICAgKiBAcmV0dXJucyBUb3BsYW0gw7xjcmV0XG4gICAgICovXG4gICAgcHVibGljIGNhbGN1bGF0ZVRvdGFsKHJlbnQ6IFJlbnQpOiBudW1iZXIge1xuICAgICAgICBsZXQgc3ViVG90YWw6IG51bWJlciA9IDA7XG5cbiAgICAgICAgLy9pdCBjYW4gYmUgPT4gbGV0IGVudHJ5IG9mIHJlbnQuYm9va0FuZFF1YW50aXR5TWFwLmVudHJpZXMoKVxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHJlbnQub3JkZXJCb29rSXRlbXMpIHtcbiAgICAgICAgICAgIHN1YlRvdGFsICs9IGl0ZW0uYm9vay5ib29rU3BlY2lmaWNhdGlvbi5wcmljZSAqIGl0ZW0ucXVhbnRpdHlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdWJUb3RhbDtcbiAgICB9XG5cbiAgICAvLyBSMDUxMDIyMTQ1NTA5ID0+IGRvbWFpbi5SZW50IDA1LjEwLjIwMjIgMTQ6NTUuMDlcbiAgICBnZW5lcmF0ZVJlbnROdW1iZXIoY3VzdG9tZXJJZDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IHJlY2VpcHROdW1iZXI6IHN0cmluZyA9IFwiUlwiICsgdG9kYXkuZ2V0RGF5KCkudG9TdHJpbmcoKSArIFxuICAgICAgICB0b2RheS5nZXRNb250aCgpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyBcbiAgICAgICAgdG9kYXkuZ2V0SG91cnMoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkgKyBcbiAgICAgICAgdG9kYXkuZ2V0U2Vjb25kcygpLnRvU3RyaW5nKCkgKyBjdXN0b21lcklkLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgcmV0dXJuIHJlY2VpcHROdW1iZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIGQxIEtpdGFwbGHEsW4ga2lyYWzEsWsgb2xhcmFrIGFsxLFuZMSxxJ/EsSB0YXJpaFxuICAgICAqIEBwYXJhbSBkMiBLaXRhcGxhcsSxbiBnZXJpIGdldGlyaWxkacSfaSB0YXJpaFxuICAgICAqIEByZXR1cm5zIMSwa2kgdGFyaWggYXJhc8SxbmRha2kgZmFyayAoc2FhdCBvbGFyYWspXG4gICAgICovXG4gICAgcHVibGljIGNhbGN1bGF0ZURpZmZIb3VycyhkMTogRGF0ZSwgZDI6IERhdGUpOiBudW1iZXIge1xuXG4gICAgICAgIGxldCBkaWZmTWlsaXM6IG51bWJlciA9IChkMS5nZXRUaW1lKCkgLSBkMi5nZXRUaW1lKCkpOy8vIG1pbGkgc2Vjb25kc1xuICAgICAgICBsZXQgZGlmZkhvdXIgPSBNYXRoLmZsb29yKGRpZmZNaWxpcyAvIDEwMDAgLyA2MCAvIDYwKTsgLy8gLzEwMDAgPiBzZWNvbmQgLyA2MCA+IG1pbiAvIDYwID4gaG91clxuICAgICAgICByZXR1cm4gZGlmZkhvdXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2l0YXAgaWxrIGtpcmFsYW5kxLHEn8SxIGFuZGEsIHphbWFuxLFuZGEgZ2V0aXJpbGRpxJ9pIGdpYmkgZMO8xZ/DvG7DvGxlcmVrIHZlcmlsZWNlayBvbGFuIHZhcnNhecSxbGFuIGdlcmkgw7ZkZW1lIG1pa3RhcsSxXG4gICAgICogQHBhcmFtIHJlbnQgSGVzYXBsYW5hY2FrIG9sYW4gZ2VyaSDDtmRlbWUgbWlrdGFyxLFuxLFuIGnDp2luZGUgYnVsdW5kdcSfdSBuZXNuZVxuICAgICAqL1xuICAgIHB1YmxpYyBjYWxjdWxhdGVSZWZ1bmQocmVudDogUmVudCk6IHZvaWQge1xuICAgICAgICByZW50LnJlZnVuZCA9IHJlbnQudG90YWwgKiB0aGlzLnJlZnVuZFBlcmNlbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2l0YXAga2lyYWxhbmTEsSwgb2t1bmR1IHZlIGdlcmkgZ2V0aXJpbGRpxJ9pIHphbWFuIG5lIGthZGFyIGdlcmkgw7ZkZW1lIHZlcmlsZWNlxJ9pbmkgaGVzYXBsYXJcbiAgICAgKiBAcGFyYW0gcmVudCBIZXNhcGxhbmFjYWsgb2xhbiBnZXJpIMO2ZGVtZSBtaWt0YXLEsW7EsW4gacOnaW5kZSBidWx1bmR1xJ91IG5lc25lXG4gICAgICogQHJldHVybnMgR2VyaSDDtmRlbWUgbWlrdGFyxLFcbiAgICAgKi9cbiAgICBwdWJsaWMgY2FsY3VsYXRlUmVmdW5kQW1vdW50KHJlbnQ6IFJlbnQpOiBudW1iZXIge1xuICAgICAgICBsZXQgZGlmZiA9IHRoaXMuY2FsY3VsYXRlRGlmZkhvdXJzKHJlbnQucmVmdW5kRGF0ZSwgcmVudC5vcGVyYXRpb25EYXRlVGltZSkgLyAyNDtcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyO1xuXG4gICAgICAgIGlmIChkaWZmIDw9IDE0KSB7XG4gICAgICAgICAgICByZWZ1bmQgPSByZW50LnRvdGFsICogMC43NTtcbiAgICAgICAgfSBlbHNlIGlmIChkaWZmIDw9IDI0KSB7XG4gICAgICAgICAgICBsZXQgZmluZSA9ICgwLjc1IC0gKChkaWZmIC0gMTQpICogMC4wNSkpO1xuICAgICAgICAgICAgcmVmdW5kID0gcmVudC50b3RhbCAqIGZpbmU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZWZ1bmQgPSByZW50LnRvdGFsICogMC4yNTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZWZ1bmQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJlbnQocmVudE51bWJlcjogc3RyaW5nKTogUmVudCB7XG4gICAgICAgIGxldCByZW50ID0gdGhpcy5yZW50TGlzdC5maW5kKHMgPT4gcy5vcGVyYXRpb25OdW1iZXIgPT09IHJlbnROdW1iZXIpO1xuICAgICAgICByZXR1cm4gcmVudCE7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZEJvb2tUb0NhcnQoYm9vazogQm9vaywgcXVhbnRpdHk6IG51bWJlciwgY3VzdG9tZXJJZDogbnVtYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbnRDYXJ0Lm9yZGVyQm9va0l0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5yZW50Q2FydC5jdXN0b21lcklkID0gY3VzdG9tZXJJZDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlbnRDYXJ0Lm9yZGVyQm9va0l0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbnRDYXJ0LmN1c3RvbWVySWQgIT09IGN1c3RvbWVySWQpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkZhcmtsxLEgbcO8xZ90ZXJpeWUga2l0YXAga2lyYWxhbm1heWEgw6dhbMSxxZ/EsWzEsXlvci4gTMO8dGZlbiB0ZWsgbcO8xZ90ZXJpIGnDp2luIGnFn2xlbSB5YXDEsW7EsXpcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW50Q2FydC5vcmRlckJvb2tJdGVtcy5wdXNoKG5ldyBPcmRlckJvb2tJdGVtcyhib29rLCBxdWFudGl0eSkpXG4gICAgICAgIHRoaXMudXBkYXRlUmVudENhcnQoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlUmVudENhcnQoKSB7XG4gICAgICAgIGNvbnN0IHJlbnRDYXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZW50Q2FydFwiKTtcbiAgICAgICAgY29uc3Qgc3ViVG90YWxTcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b3RhbFJlbnRBbW91bnRUbFwiKTtcblxuICAgICAgICBpZiAocmVudENhcnQpIHtcblxuICAgICAgICAgICAgbGV0IHJvdywgY29sdW1uLCBzdWJUb3RhbDogbnVtYmVyID0gMDtcblxuICAgICAgICAgICAgd2hpbGUgKHJlbnRDYXJ0Lmxhc3RDaGlsZCAmJiByZW50Q2FydC5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgcmVudENhcnQucmVtb3ZlQ2hpbGQocmVudENhcnQubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YlRvdGFsU3BhbiEudGV4dENvbnRlbnQgPSBcIlwiO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yZW50Q2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGg7IGluZGV4KyspIHtcblxuICAgICAgICAgICAgICAgIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgcm93LmNsYXNzTmFtZSA9IFwicmVudC1jYXJ0LXJvd1wiO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLnJlbnRDYXJ0Lm9yZGVyQm9va0l0ZW1zKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwicmVudC1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSB0aGlzLnJlbnRDYXJ0LmN1c3RvbWVySWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwicmVudC1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBpdGVtLmJvb2submFtZTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwicmVudC1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBpdGVtLnF1YW50aXR5LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gKGl0ZW0uYm9vay5ib29rU3BlY2lmaWNhdGlvbi5wcmljZSAqIGl0ZW0ucXVhbnRpdHkpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJvdyAmJiBzdWJUb3RhbFNwYW4pIHtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5yZW50Q2FydC5vcmRlckJvb2tJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBzdWJUb3RhbCArPSB0LmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiB0LnF1YW50aXR5O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlbnRDYXJ0LmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICAgICAgICAgc3ViVG90YWxTcGFuLnRleHRDb250ZW50ID0gc3ViVG90YWwudG9TdHJpbmcoKSArIFwiIFRMXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG5cbiAgICB9XG5cbiAgICBwdWJsaWMgY2FydFRvUmVudCgpIHtcbiAgICAgICAgbGV0IHJlbnRDYXJ0OiBSZW50Q2FydCA9IHRoaXMucmVudENhcnQ7XG4gICAgICAgIGxldCByZW50ID0gbmV3IFJlbnQoKTtcblxuICAgICAgICByZW50Lm9yZGVyQm9va0l0ZW1zID0gcmVudENhcnQub3JkZXJCb29rSXRlbXM7XG4gICAgICAgIHJlbnQuY3VzdG9tZXJJZCA9IHJlbnRDYXJ0LmN1c3RvbWVySWQ7XG4gICAgICAgIHJlbnQub3BlcmF0aW9uTnVtYmVyID0gdGhpcy5nZW5lcmF0ZVJlbnROdW1iZXIocmVudENhcnQuY3VzdG9tZXJJZCk7XG4gICAgICAgIHJlbnQub3BlcmF0aW9uRGF0ZVRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICByZW50LnRvdGFsID0gdGhpcy5jYWxjdWxhdGVUb3RhbChyZW50KTtcblxuICAgICAgICBmb3IgKGxldCBpIG9mIHJlbnQub3JkZXJCb29rSXRlbXMpIHtcbiAgICAgICAgICAgIHN0b2NrU2VydmljZS5pbmNyZWFzZVN0b2NrKGkuYm9vay5pc2JuLCAtaS5xdWFudGl0eSlcbiAgICAgICAgfVxuXG5cbiAgICAgICAgdGhpcy5yZW50Q2FydCA9IG5ldyBSZW50Q2FydDsgLy8gc2VwZXRpIGJvxZ9hbHRcbiAgICAgICAgdGhpcy51cGRhdGVSZW50Q2FydCgpO1xuXG4gICAgICAgIGxldCBzdWNjZXNzID0gdGhpcy5hZGRSZW50TW9jayhyZW50KTtcbiAgICB9XG5cbiAgICBhc3luYyBhZGRSZW50TW9jayhyOiBSZW50KTogUHJvbWlzZTxCb29sZWFuIHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMucmVudEFwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgc2FsZUJvb2tJdGVtczogQXJyYXkuZnJvbShyLm9yZGVyQm9va0l0ZW1zKSxcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJJZDogci5jdXN0b21lcklkLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25EYXRlVGltZTogci5vcGVyYXRpb25EYXRlVGltZSxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uTnVtYmVyOiByLm9wZXJhdGlvbk51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6IHIudG90YWxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBhbGVydChyZXN1bHQubWVzc2FnZSArIFwiIFwiICsgcmVzdWx0LnNhbGVOdW1iZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHJlZnVuZFJlbnRNb2NrKHI6IFJlbnQpIHtcblxuICAgICAgICAvL1BBVENIIEJlbGlybGkgYmlyIGtheW5ha3Rha2kgdmVyaWxlcmluIGJpciBrxLFzbcSxbsSxbiBkZcSfacWfdGlyaWxtZXNpIGnDp2luIGt1bGxhbsSxbGFuIG1ldG9kdHVyLlxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnJlbnRBcGkgKyBcIi9cIiArIHIub3BlcmF0aW9uTnVtYmVyLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcmVmdW5kRGF0ZTogci5yZWZ1bmREYXRlLFxuICAgICAgICAgICAgICAgICAgICByZWZ1bmQ6IHIucmVmdW5kXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIucmVmdW5kO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cblxufSIsImltcG9ydCB7IHN0b2NrU2VydmljZSB9IGZyb20gXCIuLlwiO1xuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuLi9kb21haW4vc2FsZVwiO1xuaW1wb3J0IHsgT3JkZXJCb29rSXRlbXMgfSBmcm9tIFwiLi4vZG9tYWluL29yZGVyLWJvb2staXRlbVwiO1xuaW1wb3J0IHsgU2FsZUNhcnQgfSBmcm9tIFwiLi4vZG9tYWluL3NhbGUtY2FydFwiO1xuXG5leHBvcnQgY2xhc3MgU2FsZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgX3NhbGVMaXN0OiBBcnJheTxTYWxlPjtcbiAgICBwcml2YXRlIF9zYWxlQ2FydDogU2FsZUNhcnQ7XG4gICAgcHVibGljIHNhbGVBcGkgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS92MS9zYWxlcyc7XG5cbiAgICBjb25zdHJ1Y3RvcihzYWxlTGlzdDogQXJyYXk8U2FsZT4sIHNhbGVDYXJ0OiBTYWxlQ2FydCkge1xuICAgICAgICB0aGlzLl9zYWxlTGlzdCA9IHNhbGVMaXN0O1xuICAgICAgICB0aGlzLl9zYWxlQ2FydCA9IHNhbGVDYXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzYWxlTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGU+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgc2FsZUxpc3QoKTogQXJyYXk8U2FsZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2FsZUxpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNhbGVMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxTYWxlPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHNhbGVMaXN0KHZhbHVlOiBBcnJheTxTYWxlPikge1xuICAgICAgICB0aGlzLl9zYWxlTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzYWxlQ2FydFxuICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGVDYXJ0Pn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHNhbGVDYXJ0KCk6IFNhbGVDYXJ0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NhbGVDYXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzYWxlQ2FydFxuICAgICAqIEBwYXJhbSB7QXJyYXk8U2FsZUNhcnQ+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgc2FsZUNhcnQodmFsdWU6IFNhbGVDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3NhbGVDYXJ0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFNhbGUoc2FsZTogU2FsZSk6IHZvaWQge1xuICAgICAgICB0aGlzLnNhbGVMaXN0LnB1c2goc2FsZSk7XG5cbiAgICB9XG5cbiAgICBjYWxjdWxhdGVUb3RhbChzYWxlOiBTYWxlKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHN1YlRvdGFsID0gMC4wO1xuXG4gICAgICAgIGZvciAobGV0IGVudHJ5IG9mIHNhbGUub3JkZXJCb29rSXRlbXMpIHtcbiAgICAgICAgICAgIHN1YlRvdGFsICs9IGVudHJ5LmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiBlbnRyeS5xdWFudGl0eTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdWJUb3RhbDtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZVNhbGVOdW1iZXIoY3VzdG9tZXJJZDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IHJlY2VpcHROdW1iZXI6IHN0cmluZyA9IFwiU1wiICsgdG9kYXkuZ2V0RGF5KCkudG9TdHJpbmcoKSArIHRvZGF5LmdldE1vbnRoKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldEhvdXJzKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldE1pbnV0ZXMoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0U2Vjb25kcygpLnRvU3RyaW5nKCkgKyBjdXN0b21lcklkLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgcmV0dXJuIHJlY2VpcHROdW1iZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNhbGUoc2FsZU51bWJlcjogc3RyaW5nKTogU2FsZSB7XG4gICAgICAgIGxldCBzYWxlID0gdGhpcy5zYWxlTGlzdC5maW5kKHMgPT4gcy5vcGVyYXRpb25OdW1iZXIgPT09IHNhbGVOdW1iZXIpO1xuICAgICAgICByZXR1cm4gc2FsZSE7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZVNhbGUoc2FsZTogU2FsZSkge1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnNhbGVMaXN0LmluZGV4T2Yoc2FsZSk7XG4gICAgICAgIHRoaXMuc2FsZUxpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQm9va1RvQ2FydChib29rOiBCb29rLCBxdWFudGl0eTogbnVtYmVyLCBjdXN0b21lcklkOiBudW1iZXIpIHtcblxuICAgICAgICBpZiAodGhpcy5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2FsZUNhcnQuY3VzdG9tZXJJZCA9IGN1c3RvbWVySWQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zYWxlQ2FydC5jdXN0b21lcklkICE9PSBjdXN0b21lcklkKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJGYXJrbMSxIG3DvMWfdGVyaXllIGtpdGFwIHNhdMSxbG1heWEgw6dhbMSxxZ/EsWzEsXlvci4gTMO8dGZlbiB0ZWsgbcO8xZ90ZXJpIGnDp2luIGnFn2xlbSB5YXDEsW7EsXpcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBvcmRlckJvb2tJdGVtczogT3JkZXJCb29rSXRlbXMgPSBuZXcgT3JkZXJCb29rSXRlbXMoYm9vaywgcXVhbnRpdHkpO1xuICAgICAgICB0aGlzLnNhbGVDYXJ0Lm9yZGVyQm9va0l0ZW1zLnB1c2gob3JkZXJCb29rSXRlbXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNhbGVDYXJ0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZVNhbGVDYXJ0KCkge1xuICAgICAgICBjb25zdCBzYWxlQ2FydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2FsZUNhcnRcIik7XG4gICAgICAgIGNvbnN0IHN1YlRvdGFsU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG90YWxTYWxlQW1vdW50VGxcIik7XG5cbiAgICAgICAgaWYgKHNhbGVDYXJ0KSB7XG5cbiAgICAgICAgICAgIGxldCByb3csIGNvbHVtbiwgc3ViVG90YWw6IG51bWJlciA9IDA7XG5cbiAgICAgICAgICAgIHdoaWxlIChzYWxlQ2FydC5sYXN0Q2hpbGQgJiYgc2FsZUNhcnQuY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHNhbGVDYXJ0LnJlbW92ZUNoaWxkKHNhbGVDYXJ0Lmxhc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJUb3RhbFNwYW4hLnRleHRDb250ZW50ID0gXCJcIjtcblxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc2FsZUNhcnQub3JkZXJCb29rSXRlbXMubGVuZ3RoOyBpbmRleCsrKSB7XG5cbiAgICAgICAgICAgICAgICByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1yb3dcIjtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcykge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gdGhpcy5zYWxlQ2FydC5jdXN0b21lcklkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gaXRlbS5ib29rLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gaXRlbS5xdWFudGl0eS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJzYWxlLWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IChpdGVtLmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiBpdGVtLnF1YW50aXR5KS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyb3cgJiYgc3ViVG90YWxTcGFuKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0IG9mIHRoaXMuc2FsZUNhcnQub3JkZXJCb29rSXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViVG90YWwgKz0gdC5ib29rLmJvb2tTcGVjaWZpY2F0aW9uLnByaWNlICogdC5xdWFudGl0eTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzYWxlQ2FydC5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgICAgIHN1YlRvdGFsU3Bhbi50ZXh0Q29udGVudCA9IHN1YlRvdGFsLnRvU3RyaW5nKCkgKyBcIiBUTFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGNhcnRUb1NhbGUoKTogYW55IHtcbiAgICAgICAgbGV0IHNhbGVDYXJ0OiBTYWxlQ2FydCA9IHRoaXMuc2FsZUNhcnQ7XG4gICAgICAgIGxldCBzYWxlID0gbmV3IFNhbGUoKTtcblxuICAgICAgICBzYWxlLm9yZGVyQm9va0l0ZW1zID0gc2FsZUNhcnQub3JkZXJCb29rSXRlbXM7XG4gICAgICAgIHNhbGUuY3VzdG9tZXJJZCA9IHNhbGVDYXJ0LmN1c3RvbWVySWQ7XG4gICAgICAgIHNhbGUub3BlcmF0aW9uTnVtYmVyID0gdGhpcy5nZW5lcmF0ZVNhbGVOdW1iZXIoc2FsZUNhcnQuY3VzdG9tZXJJZCk7XG4gICAgICAgIHNhbGUub3BlcmF0aW9uRGF0ZVRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBzYWxlLnRvdGFsID0gdGhpcy5jYWxjdWxhdGVUb3RhbChzYWxlKTtcblxuICAgICAgICBmb3IgKGxldCBxIG9mIHNhbGUub3JkZXJCb29rSXRlbXMpIHtcbiAgICAgICAgICAgIHN0b2NrU2VydmljZS5pbmNyZWFzZVN0b2NrKHEuYm9vay5pc2JuLCAtIHEucXVhbnRpdHkpXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3VjY2VzcyA9IHRoaXMuYWRkU2FsZU1vY2soc2FsZSk7XG4gICAgICAgIHRoaXMuc2FsZUNhcnQgPSBuZXcgU2FsZUNhcnQoKTsgLy8gc2VwZXRpIGJvxZ9hbHRcbiAgICAgICAgdGhpcy51cGRhdGVTYWxlQ2FydCgpO1xuICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgICB9XG5cbiAgICBhc3luYyBhZGRTYWxlTW9jayhzOiBTYWxlKSB7XG5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnNhbGVBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIG9yZGVyQm9va0l0ZW1zOiBBcnJheS5mcm9tKHMub3JkZXJCb29rSXRlbXMpLFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21lcklkOiBzLmN1c3RvbWVySWQsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbkRhdGVUaW1lOiBzLm9wZXJhdGlvbkRhdGVUaW1lLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25OdW1iZXI6IHMub3BlcmF0aW9uTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbDogcy50b3RhbFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJGacWfaW5pemkga2F5YmV0bWV5aW5pei4gRmnFnyBOdW1hcmFzxLE6IFwiICsgcy5vcGVyYXRpb25OdW1iZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxuIiwiaW1wb3J0IHsgU3RvY2sgfSBmcm9tIFwiLi4vZG9tYWluL3N0b2NrXCI7XG5cbmV4cG9ydCBjbGFzcyBTdG9ja1NlcnZpY2Uge1xuICAgIHByaXZhdGUgX3N0b2NrTGlzdDogQXJyYXk8U3RvY2s+O1xuICAgIHByaXZhdGUgc3RvY2tBcGk6IHN0cmluZyA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS9zdG9ja3NcIjtcblxuICAgIGNvbnN0cnVjdG9yKHN0b2NrTGlzdDogQXJyYXk8U3RvY2s+KSB7XG4gICAgICAgIHRoaXMuX3N0b2NrTGlzdCA9IHN0b2NrTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc3RvY2tMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8U3RvY2s+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgc3RvY2tMaXN0KCk6IEFycmF5PFN0b2NrPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdG9ja0xpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHN0b2NrTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8U3RvY2s+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgc3RvY2tMaXN0KHZhbHVlOiBBcnJheTxTdG9jaz4pIHtcbiAgICAgICAgdGhpcy5fc3RvY2tMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqICFhdHRlbnRpb24sICppbXBvcnRhbnQsID9xdWVzdGlvbiwgVE9ET1xuICAgICAqICEgw5ZuY2VsaWtsZSBpbmNyZWFzZVN0b2NrIGZvbmtzaXlvbnVuZGFuIGZhcmtsxLEgYmlyIGnFnyB5YXDEsXlvcixcbiAgICAgKiAqIEtpdGFwIGhlbsO8eiBla2xlbmRpa3RlbiBzb25yYSBoZW1lbiBnaXJpeW9yLFxuICAgICAqID8gS2l0YXAgaWxrIGRlZmEgZWtsZW5kaXlzZSBidSBmb25rc2l5b24gbXUgw6dhbMSxxZ9hY2FrID8gRVZFVC5cbiAgICAgKiBUT0RPIGluY3JlYXNlU3RvY2sgZm9ua3NpeW9udW51IGluY2VsZVxuICAgICAqIEVsaW1pemRlIGhpw6cgc3RvY2sga2F5ZMSxL25lc25lc2kgeW9rLCB5ZW5pIGthecSxdC9uZXNuZSBvbHXFn3R1cnV5b3J1elxuICAgICAqIFllbmkgZWtsZW5lbiBraXRhYmEgc3RvayBla2xlbWUgacWfbGVtaVxuICAgICAqIEBwYXJhbSBpc2JuICBzdG9rIGVrbGVuZWNlayBvbGFuIGtpdGFixLFuIGlzYm4gbnVtYXJhc8SxXG4gICAgICogQHBhcmFtIHNoZWxmTnVtYmVyIHN0b2sgZWtsZW5lY2VrIG9sYW4ga2l0YWLEsW4gcmFmIG51bWFyYXPEsVxuICAgICAqIEBwYXJhbSBxdWFudGl0eSBraXRhcGRhbiBrYcOnIGFkZXQgc3RvxJ9hIGVrbGVuZWNla1xuICAgICAqL1xuICAgIHB1YmxpYyBhZGRTdG9jayhpc2JuOiBzdHJpbmcsIHNoZWxmTnVtYmVyOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgbGV0IG5ld1N0b2NrID0gbmV3IFN0b2NrKGlzYm4sIHF1YW50aXR5LCBzaGVsZk51bWJlcik7XG4gICAgICAgICAgICB0aGlzLnN0b2NrTGlzdC5wdXNoKG5ld1N0b2NrKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBLaXRhcCB6YXRlbiBla2xpLCBoYWxpaGF6xLFyZGEgdmFyLCBkYWhhIHNvbnJhIHllbmkga2l0YXBsYXIgZ2VsZGksc3RvayBhcnTEsXJtYSBpxZ9sZW1pLFxuICAgICAqIEBwYXJhbSBpc2JuIHN0b2sgZWtsZW5lY2VrIG9sYW4ga2l0YWLEsW4gaXNibiBudW1hcmFzxLFcbiAgICAgKiBAcGFyYW0gcXVhbnRpdHkgc3RvayBla2xlbmVjZWsgb2xhbiBraXRhYsSxbiBhZGVkaVxuICAgICAqIEByZXR1cm5zIGnFn2xlbSBnZXLDp2VrbGXFn21lc2kgZHVydW11bmRhIHRydWUsIGRpxJ9lciBkdXJ1bWRhIGZhbHNlIGTDtm5lclxuICAgICAqL1xuICAgIHB1YmxpYyBpbmNyZWFzZVN0b2NrKGlzYm46IHN0cmluZywgcXVhbnRpdHk6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgc3RvY2sgPSB0aGlzLmdldFN0b2NrKGlzYm4pO1xuICAgICAgICBpZiAoc3RvY2spIHtcbiAgICAgICAgICAgIHN0b2NrLnF1YW50aXR5ID0gKHN0b2NrLnF1YW50aXR5ICsgcXVhbnRpdHkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzdG9jayBuZXNuZXNpbmkgZ2VyaSBkw7ZuZMO8csO8clxuICAgICAqIEBwYXJhbSBpc2JuIHN0b2NrIG5lc25lc2kgZ2V0aXJpbGVjZWsgb2xhbiBuZXNuZW5pbiBpc2JuIG5vc3UsXG4gICAgICogQHJldHVybnMgZGIgb2xhbiBzdG9jayBuZXNuZW5zaSBnZXJpIGTDtm5lciwgZGIgZGUgeW9rIGlzZSB0aHJvdyBpbGUgaGF0YSBmxLFybGF0xLFybMSxclxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTdG9jayhpc2JuOiBzdHJpbmcpIHtcbiAgICAgICAgbGV0IHN0b2NrID0gdGhpcy5zdG9ja0xpc3QuZmluZChzID0+IHMuaXNibiA9PT0gaXNibik7XG4gICAgICAgIGlmIChzdG9jaykge1xuICAgICAgICAgICAgcmV0dXJuIHN0b2NrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldFN0b2NrUXVhbnRpdHkoaXNibjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHM6IFN0b2NrID0gdGhpcy5nZXRTdG9jayhpc2JuKSE7XG5cbiAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICAgIHJldHVybiBzLnF1YW50aXR5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFxJ9lciBzdG9rIG5lc25lc2kgeW9rIGlzZSBzdG9rIG5lc25lc2ksIGJlbGlydGlsZW4gYWRldCBrYWRhciBzdG9rIGJpbGdpc2kgaWxlIGJlcmFiZXIgZWtsZW5peW9yLlxuICAgICAqIMSwxZ90ZSBidSBvbHXFn3R1cm1hL2NyZWF0ZSBpxZ9sZW1pIGJ1cmFkYSB5YXDEsWzEsXlvci5cbiAgICAgKiBAcGFyYW0gcyBpbmRleC50cyBkb3N5YXPEsW5kYW4gZ2VsZW4gc3RvayBuZXNuZXNpXG4gICAgICovXG4gICAgYXN5bmMgYWRkU3RvY2tNb2NrKHM6IFN0b2NrKTogUHJvbWlzZTxCb29sZWFuIHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuc3RvY2tBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGlzYm46IHMuaXNibixcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IHMucXVhbnRpdHksXG4gICAgICAgICAgICAgICAgICAgIHNoZWxmTnVtYmVyOiBzLnNoZWxmTnVtYmVyXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyArIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0b2sgZWtsZW5pcmtlbiBlxJ9lciBzdG9rIG5lc25lc2kgZGFoYSDDtm5jZWRlbiB2YXIgaXNlLCBzdG9rIGFydMSxcsSxbcSxbsSxIHB1dCBpbGUgeWFwYWNhxJ/EsXpcbiAgICAgKiBAcGFyYW0gcyBpbmRleC50cyBkb3N5YXPEsW5kYW4gZ2VsZW4gc3RvayBuZXNuZXNpXG4gICAgICovXG4gICAgYXN5bmMgaW5jcmVhc2VTdG9ja01vY2soczogU3RvY2spIHtcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnN0b2NrQXBpICsgXCIvXCIgKyBzLmlzYm4sIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaXNibjogcy5pc2JuLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogcy5xdWFudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgc2hlbGZOdW1iZXI6IHMuc2hlbGZOdW1iZXJcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInRoaXMiLCJfYm9va3MiLCJBcnJheSIsIl9zdG9ja3MiLCJfY3VzdG9tZXJzIiwiX3NhbGVzIiwiX3JlbnRzIiwiX2Jvb2tTcGVjaWZpY2F0aW9ucyIsIl9jYW5jZWxzIiwiX3NhbGVDYXJ0IiwiU2FsZUNhcnQiLCJfcmVudENhcnQiLCJSZW50Q2FydCIsImdldEJvb2tzTGlzdCIsImdldFN0b2Nrc0xpc3QiLCJnZXRDdXN0b21lcnNMaXN0IiwiZ2V0U2FsZXNMaXN0IiwiZ2V0UmVudHMiLCJnZXRCb29rU3BlY2lmaWNhdGlvbnMiLCJnZXRDYW5jYWxlZFNhbGVzIiwiZ2V0U2FsZUNhcnQiLCJnZXRSZW50Q2FydCIsInNldFNhbGVDYXJ0IiwidmFsdWUiLCJzZXRSZW50Q2FydCIsImlzYm4iLCJwcmljZSIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJfaXNibiIsIl9wcmljZSIsIl9zdGFydERhdGUiLCJfZW5kRGF0ZSIsIm5hbWUiLCJhdXRob3IiLCJwdWJsaXNoWWVhciIsInBhZ2VzIiwiYm9va1NwZWNpZmljYXRpb24iLCJfbmFtZSIsIl9hdXRob3IiLCJfcHVibGlzaFllYXIiLCJfcGFnZXMiLCJfYm9va1NwZWNpZmljYXRpb24iLCJjYW5jZWxUeXBlIiwicmVmdW5kIiwiY2FuY2VsZWREYXRlVGltZSIsIl9jYW5jZWxUeXBlIiwiX3JlZnVuZCIsIl9jYW5jZWxlZERhdGVUaW1lIiwic3VyTmFtZSIsInBob25lTnVtYmVyIiwiX3N1ck5hbWUiLCJfcGhvbmVOdW1iZXIiLCJib29rIiwicXVhbnRpdHkiLCJfYm9vayIsIl9xdWFudGl0eSIsInRvSlNPTiIsIm9yZGVyQm9va0l0ZW1zIiwiUmVudCIsIlNhbGUiLCJzYWxlQm9va0l0ZW1zIiwib3BlcmF0aW9uRGF0ZVRpbWUiLCJjdXN0b21lcklkIiwib3BlcmF0aW9uTnVtYmVyIiwidG90YWwiLCJyZWZ1bmREYXRlIiwic3VwZXIiLCJfcmVmdW5kRGF0ZSIsIl9vcmRlckJvb2tJdGVtcyIsIl9jdXN0b21lcklkIiwiX29wZXJhdGlvbkRhdGVUaW1lIiwiX29wZXJhdGlvbk51bWJlciIsIl90b3RhbCIsInNoZWxmTnVtYmVyIiwiX3NoZWxmTnVtYmVyIiwic2hvd0FuZEhpZGUiLCJidG5JZCIsImVsZW1lbnRJZCIsImVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0eWxlIiwiZGlzcGxheSIsImRiIiwiRGF0YUJhc2UiLCJib29rU2VydmljZSIsIkJvb2tTZXJ2aWNlIiwiY3VzdG9tZXJTZXJ2aWNlIiwiQ3VzdG9tZXJTZXJ2aWNlIiwiY2FuY2VsU2VydmljZSIsIkNhbmNlbFNlcnZpY2UiLCJyZW50U2VydmljZSIsIlJlbnRTZXJ2aWNlIiwic2FsZVNlcnZpY2UiLCJTYWxlU2VydmljZSIsInN0b2NrU2VydmljZSIsIlN0b2NrU2VydmljZSIsImNvbnNvbGUiLCJsb2ciLCJhZGRDdXN0b21lciIsIkN1c3RvbWVyIiwiYWRkU3RvY2siLCJpbml0aWFsaXplRGF0YU1vY2siLCJpbml0aWxpYXplRGF0YSIsImFkZEJvb2tGb3JtIiwib25zdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwidGl0bGUiLCJnZXQiLCJEYXRlIiwibWF0Y2giLCJib29rU3BlYyIsIkJvb2tTcGVjaWZpY2F0aW9uIiwiQm9vayIsImFkZEJvb2tNb2NrIiwiYWxlcnQiLCJyZXNldCIsImFkZFN0b2NrRm9ybSIsInF1YW50dGl5Iiwic3RvY2siLCJTdG9jayIsImJvb2tMaXN0Iiwic29tZSIsImIiLCJhZGRTdG9ja01vY2siLCJhZGRDdXN0b21lckZvcm0iLCJzdXJuYW1lIiwiY3VzdG9tZXIiLCJhZGRDdXN0b21lck1vY2siLCJzYWxlQm9va0Zvcm0iLCJnZXRCb29rIiwicGFyc2VJbnQiLCJnZXRTdG9jayIsImFkZEJvb2tUb0NhcnQiLCJlcnJvciIsInNhbGVDYXJ0IiwibGVuZ3RoIiwiY2FydFRvU2FsZSIsImxpc3RCb29rcyIsImNhbmNlbFNhbGVGb3JtIiwic2JpIiwicHVzaCIsIk9yZGVyQm9va0l0ZW1zIiwiYSIsInNhbGVMaXN0Iiwic2FsZU51bWJlciIsInNhbGUiLCJnZXRTYWxlIiwiY2FuY2VsU2FsZSIsIkNhbmNlbCIsImNhbmNlbFNhbGVNb2NrIiwiY2FuY2VsUmVudEZvcm0iLCJyRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwicmVudExpc3QiLCJyZW50TnVtYmVyIiwicmVudCIsImdldFJlbnQiLCJjYW5jZWxSZW50IiwiY2FuY2VsUmVudE1vY2siLCJyZW50Qm9va0Zvcm0iLCJyZW50Q2FydCIsImNhcnRUb1JlbnQiLCJyZWZ1bmRCb29rRm9ybSIsImNhbGN1bGF0ZVJlZnVuZEFtb3VudCIsInJlZnVuZFJlbnRNb2NrIiwiYm9va0FwaSIsIl9ib29rTGlzdCIsImZpbmQiLCJhZGRCb29rIiwibmV3Qm9vayIsIkV4Y2VwdGlvbiIsImlzVmFsaWRCb29rIiwiaW5jbHVkZXMiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkFjY2VwdCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJyZXN1bHQiLCJqc29uIiwiZ2V0UmVzdWx0IiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwibGlzdEJvb2tzRGl2Iiwicm93IiwiY29sdW1uIiwibGFzdENoaWxkIiwiY2hpbGRyZW4iLCJyZW1vdmVDaGlsZCIsImZvckVhY2giLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwidGV4dENvbnRlbnQiLCJ0b1N0cmluZyIsImFwcGVuZENoaWxkIiwiZ2V0U3RvY2tRdWFudGl0eSIsImJvZHkiLCJjYW5jZWxsZWRMaXN0IiwiY2FuY2VsU2FsZUFwaSIsImNhbmNlbFJlbnRBcGkiLCJfY2FuY2VsbGVkTGlzdCIsImNhbGN1bGF0ZURpZmZIb3VycyIsImQxIiwiZDIiLCJkaWZmTWlsaXMiLCJnZXRUaW1lIiwiTWF0aCIsImZsb29yIiwiY2FuY2VsIiwiY2FsY3VsYXRlQ2FuY2VsU2FsZVJlZnVuZCIsImNhbGN1bGF0ZUNhbmNlbFJlbnRSZWZ1bmQiLCJjdXN0b21lckxpc3QiLCJjdXN0b21lckFwaSIsIl9jdXN0b21lckxpc3QiLCJuZXdDdXN0b21lciIsInJlbnRBcGkiLCJfcmVudExpc3QiLCJyZWZ1bmRQZXJjZW50IiwiYWRkUmVudCIsImNhbGN1bGF0ZVRvdGFsIiwic3ViVG90YWwiLCJpdGVtIiwiZ2VuZXJhdGVSZW50TnVtYmVyIiwidG9kYXkiLCJnZXREYXkiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsImNhbGN1bGF0ZVJlZnVuZCIsImRpZmYiLCJmaW5lIiwicyIsInVwZGF0ZVJlbnRDYXJ0Iiwic3ViVG90YWxTcGFuIiwiaW5kZXgiLCJ0IiwiaSIsImluY3JlYXNlU3RvY2siLCJhZGRSZW50TW9jayIsInIiLCJmcm9tIiwibWVzc2FnZSIsInNhbGVBcGkiLCJfc2FsZUxpc3QiLCJhZGRTYWxlIiwiZW50cnkiLCJnZW5lcmF0ZVNhbGVOdW1iZXIiLCJyZW1vdmVTYWxlIiwiaW5kZXhPZiIsInNwbGljZSIsInVwZGF0ZVNhbGVDYXJ0IiwicSIsInN1Y2Nlc3MiLCJhZGRTYWxlTW9jayIsInN0b2NrTGlzdCIsInN0b2NrQXBpIiwiX3N0b2NrTGlzdCIsIm5ld1N0b2NrIiwiaW5jcmVhc2VTdG9ja01vY2siLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiXSwic291cmNlUm9vdCI6IiJ9