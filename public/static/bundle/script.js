(()=>{"use strict";var t={221:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataBase=void 0;const s=o(51);e.DataBase=class{constructor(){this._books=new Array,this._stocks=new Array,this._customers=new Array,this._sales=new Array,this._rents=new Array,this._bookSpecifications=new Array,this._cancelSales=new Array,this._saleCart=new s.SaleCart}get getBooksList(){return this._books}get getStocksList(){return this._stocks}get getCustomersList(){return this._customers}get getSalesList(){return this._sales}get getRents(){return this._rents}get getBookSpecifications(){return this._bookSpecifications}get getCancaledSales(){return this._cancelSales}get getSaleCart(){return this._saleCart}set setSaleCart(t){this._saleCart=t}}},39:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BookSpecification=void 0,e.BookSpecification=class{constructor(t,e,o,s){this._isbn=t,this._price=e,this._startDate=o,this._endDate=s}get isbn(){return this._isbn}get price(){return this._price}get startDate(){return this._startDate}get endDate(){return this._endDate}set isbn(t){this._isbn=t}set price(t){this._price=t}set startDate(t){this._startDate=t}set endDate(t){this._endDate=t}}},934:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Book=void 0,e.Book=class{constructor(t,e,o,s,i,a){this._name=e,this._author=o,this._isbn=t,this._publishYear=s,this._pages=i,this._bookSpec=a}get isbn(){return this._isbn}get name(){return this._name}get author(){return this._author}get publishYear(){return this._publishYear}get pages(){return this._pages}get bookSpec(){return this._bookSpec}set isbn(t){this._isbn=t}set name(t){this._name=t}set author(t){this._author=t}set publishYear(t){this._publishYear=t}set pages(t){this._pages=t}set bookSpec(t){this._bookSpec=t}}},916:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Customer=void 0,e.Customer=class{constructor(t,e,o,s){this._id=t,this._name=e,this._surName=o,this._phoneNumber=s}get id(){return this._id}get name(){return this._name}get surName(){return this._surName}get phoneNumber(){return this._phoneNumber}set id(t){this._id=t}set name(t){this._name=t}set surName(t){this._surName=t}set phoneNumber(t){this._phoneNumber=t}}},51:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SaleCart=void 0,e.SaleCart=class{constructor(){this.bookAndQuantityMap=new Map}}},354:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sale=void 0,e.Sale=class{constructor(t,e,o,s,i){this._bookAndQuantityMap=new Map,this._bookAndQuantityMap=t,this._operationDateTime=e,this._customerId=o,this._operationNumber=s,this._total=i}get bookAndQuantityMap(){return this._bookAndQuantityMap}get operationDateTime(){return this._operationDateTime}get customerId(){return this._customerId}get operationNumber(){return this._operationNumber}get total(){return this._total}set bookAndQuantityMap(t){this._bookAndQuantityMap=t}set operationDateTime(t){this._operationDateTime=t}set customerId(t){this._customerId=t}set operationNumber(t){this._operationNumber=t}set total(t){this._total=t}}},72:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Stock=void 0,e.Stock=class{constructor(t,e,o){this._isbn=t,this._quantity=e,this._shelfNumber=o}get isbn(){return this._isbn}get quantity(){return this._quantity}get shelfNumber(){return this._shelfNumber}set isbn(t){this._isbn=t}set quantity(t){this._quantity=t}set shelfNumber(t){this._shelfNumber=t}}},607:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stockService=e.saleService=e.rentService=e.cancelSaleService=e.customerService=e.bookService=void 0;const s=o(221),i=o(934),a=o(39),n=o(916),r=o(72),c=o(946),l=o(609),u=o(709),d=o(148),h=o(478),m=o(214);let k=new s.DataBase;function p(t,e){const o=document.getElementById(e),s=document.getElementById(t);o&&s&&s.addEventListener("click",(()=>{"none"===o.style.display?o.style.display="block":o.style.display="none"}))}!function(t){e.bookService=new c.BookService(t.getBooksList,t.getBookSpecifications),e.customerService=new u.CustomerService(t.getCustomersList),e.cancelSaleService=new l.CancelSaleService(t.getCancaledSales),e.rentService=new d.RentService(t.getRents),e.saleService=new h.SaleService(t.getSalesList,t.getSaleCart),e.stockService=new m.StockService(t.getStocksList),console.log("Services intiliazed."),e.customerService.addCustomer(new n.Customer(1,"","","")),e.customerService.addCustomer(new n.Customer(2,"","","")),e.stockService.addStock("123-45","A45-52",10),e.stockService.addStock("123-46","A45-52",10)}(k),e.bookService.initializeBooksDataMock(),p("addBookMenuItem","addBookSection"),p("showBooksMenuItem","listBooksSection"),p("addCustomerMenuItem","addCustomerSection"),p("addStockMenuItem","addStockSection"),p("saleBookMenuItem","saleBookSection");const S=document.getElementById("add-book-form");null!=S&&(S.onsubmit=()=>{const t=new FormData(S),o=t.get("bookTitle"),s=t.get("bookAuthor"),n=t.get("bookIsbn"),r=t.get("bookPublishYear"),c=t.get("bookPages"),l=t.get("bookPrice"),u=new Date,d=new Date("Dec 31, 9999 23:59:59"),h=new a.BookSpecification(n,l,u,d),m=new i.Book(n,o,s,r,c,h);return e.bookService.addBookMock(m),alert(m.isbn+" numaralı kitap Ekleme İşlemi Başarı İle Tamamlanmıştır."),S.reset(),!1});const b=document.getElementById("add-stock-form");b&&(b.onsubmit=()=>{const t=new FormData(b),o=t.get("bookIsbnForAddStock"),s=t.get("stockQuantity"),i=t.get("shelfNumber"),a=new r.Stock(o,s,i);return k.getBooksList.some((t=>t.isbn==o)),alert(o+" isbn numaralı kitaptan, "+s+" kadar sisteme stok eklenmiştir."),e.stockService.addStockMock(a),b.reset(),!1});const g=document.getElementById("add-customer-form");g&&(g.onsubmit=()=>{const t=new FormData(g),o=t.get("customerName"),s=t.get("customerSurname"),i=t.get("customerPhoneNumber"),a=new n.Customer(e.customerService.getNewCustomerId(),o,s,i);return e.customerService.addCustomer(a),alert("Müşteri Ekleme İşlemi Başarı İle Tamamlanmıştır. "),g.reset(),!1});const _=document.getElementById("sale-book-form");_&&(_.onsubmit=()=>{const t=new FormData(_),o=t.get("isbnForSale"),s=e.bookService.getBook(o),i=parseInt(t.get("customerIdForSale")),a=e.customerService.isValidCustomer(i),n=parseInt(t.get("quantityForSale")),r=e.stockService.getStock(o);try{return s?r?r.quantity>=n?a?e.saleService.addBookToCart(s,n,i):alert(i+" numaralı müşteri kayıtlı değildir."):alert(n+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${o} numaralı kitabın stoğu mevcut değildir.`):alert(o+" numaralı kitap yoktur."),_.reset(),!1}catch(t){alert(t)}}),document.getElementById("btnBuy").addEventListener("click",(()=>{0===e.saleService.saleCart.bookAndQuantityMap.size?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):e.saleService.cartToSale()})),document.getElementById("showBooksMenuItem").addEventListener("click",(()=>{e.bookService.initializeBooksDataMock()}))},946:function(t,e,o){var s=this&&this.__awaiter||function(t,e,o,s){return new(o||(o=Promise))((function(i,a){function n(t){try{c(s.next(t))}catch(t){a(t)}}function r(t){try{c(s.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(n,r)}c((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.BookService=void 0;const i=o(607);e.BookService=class{constructor(t,e){this._bookList=t,this._bookSpecList=e}get bookList(){return this._bookList}set bookList(t){this._bookList=t}get bookSpecList(){return this._bookSpecList}set bookSpecList(t){this._bookSpecList=t}getBook(t){return this.bookList.find((e=>e.isbn===t))}addBook(t){try{this.bookList.push(t),this._bookSpecList.push(t.bookSpec)}catch(t){console.log("Kitap eklenirken bir hata meydana geldi.")}}isValidBook(t){const e=this.getBook(t);return this.bookList.includes(e)}initializeBooksDataMock(){return s(this,void 0,void 0,(function*(){try{const t=yield fetch("http://localhost:3002/api/books",{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Hata oluştu, hata kodu: ${t.status} `);const e=yield t.json(),o=JSON.parse(JSON.stringify(e,null,4));this.bookList=o,this.listBooks()}catch(t){console.error(t)}}))}listBooks(){const t=document.getElementById("listBooks");if(t){let e,o;for(;t.lastChild&&t.children.length>1;)t.removeChild(t.lastChild);this.bookList.forEach((s=>{e=document.createElement("div"),e.className="row-list-book",o=document.createElement("div"),o.className="column-list-book",o.textContent=s.isbn.toString(),e.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=s.name.toString(),e.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=s.author.toString(),e.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=i.stockService.getStockQuantity(s.isbn).toString(),e.appendChild(o),o=document.createElement("div"),o.className="column-list-book",o.textContent=s.bookSpec.price.toString()+" ₺",e.appendChild(o),t.appendChild(e)}))}}addBookMock(t){return s(this,void 0,void 0,(function*(){try{const e=yield fetch("http://localhost:3002/api/books/",{method:"POST",body:JSON.stringify({isbn:t.isbn,name:t.name,author:t.author,pages:t.pages,publishYear:t.publishYear}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const o=yield e.json();console.log(o)}catch(t){console.log("Hata Oluştu.")}}))}}},609:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CancelSaleService=void 0,e.CancelSaleService=class{constructor(t){this._cancelledSalesList=t}get cancelledSalesList(){return this._cancelledSalesList}set cancelledSalesList(t){this._cancelledSalesList=t}cancelSale(t){this.cancelledSalesList.push(t);let e=this.calculateRefund(t);t.refund=e}calculateRefund(t){let e;return e=this.calculateDiffHours(t.canceledDateTime,t.sale.operationDateTime)>24?.75*t.sale.total:t.sale.total,e}calculateDiffHours(t,e){let o=t.getTime()-e.getTime();return Math.floor(o/1e3/60/60)}}},709:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CustomerService=void 0,e.CustomerService=class{constructor(t){this._customerList=t}get customerList(){return this._customerList}set customerList(t){this._customerList=t}addCustomer(t){this.customerList.push(t)}getNewCustomerId(){let t=0;return this.customerList.length>0&&(t=this.customerList.at(this.customerList.length-1).id),t+=1,t}getCustomerInfo(t){return this.customerList.find((e=>e.id===t))||void 0}isValidCustomer(t){return!!this.customerList.some((e=>e.id===t))}}},148:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RentService=void 0,e.RentService=class{constructor(t){this._rentList=t,this.refundPercent=.75}get rentList(){return this._rentList}set rentList(t){this._rentList=t}addRent(t){this.rentList.push(t)}calculateTotal(t){t.bookAndQuantityMap;let e=0;for(let o of t.bookAndQuantityMap)e+=o[0].bookSpec.price*o[1];return e}generateRentNumber(t){let e=new Date;return"R"+e.getDay().toString+e.getMonth().toString+e.getFullYear().toString+e.getHours().toString+e.getMinutes().toString+e.getSeconds().toString+t.toString}calculateRefund(t){t.refund=t.total*this.refundPercent}}},478:function(t,e,o){var s=this&&this.__awaiter||function(t,e,o,s){return new(o||(o=Promise))((function(i,a){function n(t){try{c(s.next(t))}catch(t){a(t)}}function r(t){try{c(s.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(n,r)}c((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SaleService=void 0;const i=o(607),a=o(354),n=o(51);e.SaleService=class{constructor(t,e){this.addSaleApi="http://localhost:3002/api/sales/",this._saleList=t,this._saleCart=e}get saleList(){return this._saleList}set saleList(t){this._saleList=t}get saleCart(){return this._saleCart}set saleCart(t){this._saleCart=t}addSale(t){this.saleList.push(t)}calculateTotal(t){let e=0;for(let o of t.bookAndQuantityMap.entries())e+=o[0].bookSpec.price*o[1];return e}generateSaleNumber(t){let e=new Date;return"S"+e.getDay().toString()+e.getMonth().toString()+e.getFullYear().toString()+e.getHours().toString()+e.getMinutes().toString()+e.getSeconds().toString()+t.toString()}getSale(t){let e=this.saleList.find((e=>e.operationNumber===t));if(e)return e;throw new Error}removeSale(t){let e=this.saleList.indexOf(t);this.saleList.splice(e,1)}addBookToCart(t,e,o){if(0===this.saleCart.bookAndQuantityMap.size)this.saleCart.customerId=o;else if(this.saleCart.bookAndQuantityMap.size>0&&this.saleCart.customerId!==o)return alert("Farklı müşteriye kitap satılmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;this.saleCart.bookAndQuantityMap.set(t,e),this.updateSaleCart()}updateSaleCart(){const t=document.getElementById("saleCart"),e=document.getElementById("totalAmountTl");if(t){let o,s,i=0;for(;t.lastChild&&t.children.length>1;)t.removeChild(t.lastChild);e.textContent="";for(let t=0;t<this.saleCart.bookAndQuantityMap.size;t++){o=document.createElement("div"),o.className="row-cart";for(let t of this.saleCart.bookAndQuantityMap.entries())s=document.createElement("div"),s.className="column-cart",s.textContent=this.saleCart.customerId.toString(),o.appendChild(s),s=document.createElement("div"),s.className="column-cart",s.textContent=t[0].name,o.appendChild(s),s=document.createElement("div"),s.className="column-cart",s.textContent=t[1].toString(),o.appendChild(s),s=document.createElement("div"),s.className="column-cart",s.textContent=(t[0].bookSpec.price*t[1]).toString(),o.appendChild(s)}if(o&&e){for(let t of this.saleCart.bookAndQuantityMap)i+=t[0].bookSpec.price*t[1];t.appendChild(o),e.textContent=i.toString()+" TL"}}}cartToSale(){let t=this.saleCart,e=new a.Sale;e.bookAndQuantityMap=t.bookAndQuantityMap,e.customerId=t.customerId,e.operationNumber=this.generateSaleNumber(t.customerId),e.operationDateTime=new Date,e.total=this.calculateTotal(e);for(let t of e.bookAndQuantityMap)i.stockService.increaseStock(t[0].isbn,-t[1]);this.addSaleMock(e),this.saleCart=new n.SaleCart,this.updateSaleCart()}addSaleMock(t){return s(this,void 0,void 0,(function*(){try{const e=yield fetch(this.addSaleApi,{method:"POST",body:JSON.stringify({bookAndQuantity:t.bookAndQuantityMap,customerId:t.customerId,operationDateTime:t.operationDateTime,operationNumber:t.operationNumber,total:t.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const o=yield e.json();console.log(o),alert(o.message+" "+o.saleNumber)}catch(t){console.log("Hata Oluştu.")}}))}}},214:function(t,e,o){var s=this&&this.__awaiter||function(t,e,o,s){return new(o||(o=Promise))((function(i,a){function n(t){try{c(s.next(t))}catch(t){a(t)}}function r(t){try{c(s.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(n,r)}c((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.StockService=void 0;const i=o(72);e.StockService=class{constructor(t){this._stockList=t}get stockList(){return this._stockList}set stockList(t){this._stockList=t}addStock(t,e,o){try{let s=new i.Stock(t,o,e);return this.stockList.push(s),!0}catch(t){return console.error(t),!1}}increaseStock(t,e){let o=this.getStock(t);return!!o&&(o.quantity=o.quantity+e,!0)}getStock(t){let e=this.stockList.find((e=>e.isbn===t));if(e)return e}getStockQuantity(t){let e=this.getStock(t);return e?e.quantity:0}addStockMock(t){!function(t){s(this,void 0,void 0,(function*(){try{const e=yield fetch("http://localhost:3002/api/stocks/"+t.isbn,{method:"POST",body:JSON.stringify({isbn:t.isbn,quantity:t.quantity}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const o=yield e.json();console.log(o)}catch(t){console.log("Hata Oluştu.")}}))}(t)}}}},e={};!function o(s){var i=e[s];if(void 0!==i)return i.exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,o),a.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MUosU0FFRixDQUVmLENBRU9zRCxhQUFhb0csSUFLeEIsU0FBZ0NBLEcsa0NBQzVCLElBQ0ksTUFBTTFFLFFBQWlCQyxNQUFNLG9DQUFzQ3lFLEVBQUU3TCxLQUFNLENBQ3ZFcUgsT0FBUSxPQUNSMkIsS0FBTWxCLEtBQUtFLFVBQVUsQ0FDakJoSSxLQUFNNkwsRUFBRTdMLEtBQ1JtQyxTQUFVMEosRUFBRTFKLFdBRWhCbUYsUUFBUyxDQUNMLGVBQWdCLG1CQUNoQkMsT0FBUSxzQkFJaEIsSUFBS0osRUFBU0ssR0FDVixNQUFNLElBQUlDLE1BQU0sMkJBQTJCTixFQUFTTyxXQUd4RCxNQUFNQyxRQUFnQlIsRUFBU1MsT0FDL0I3RCxRQUFRQyxJQUFJMkQsRSxDQUVkLE1BQU9YLEdBQ0xqRCxRQUFRQyxJQUFJLGUsQ0FFcEIsRyxDQTVCUStJLENBQWlCbEIsRUFDckIsRSxHQ25GQW1CLEVBQTJCLENBQUMsR0FHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CTCxHQUFVTSxLQUFLRixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTSixHQUdwRUssRUFBT0QsT0FDZixDQ25CMEJKLENBQW9CLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kYi9kYXRhYmFzZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vYm9vay1zcGVjaWZpY2F0aW9uLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9ib29rLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9jdXN0b21lci50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vc2FsZS1jYXJ0LnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9zYWxlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9zdG9jay50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL2Jvb2stc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL2NhbmNhbC1zYWxlLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvc2VydmljZS9jdXN0b21lci1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2UvcmVudC1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2Uvc2FsZS1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2Uvc3RvY2stc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgQm9va1NwZWNpZmljYXRpb24gfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2stc3BlY2lmaWNhdGlvblwiO1xuaW1wb3J0IHsgQ2FuY2VsU2FsZSB9IGZyb20gXCIuLi9kb21haW4vY2FuY2FsLXNhbGVcIjtcbmltcG9ydCB7IEN1c3RvbWVyIH0gZnJvbSBcIi4uL2RvbWFpbi9jdXN0b21lclwiO1xuaW1wb3J0IHsgUmVudCB9IGZyb20gXCIuLi9kb21haW4vcmVudFwiO1xuaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuLi9kb21haW4vc2FsZVwiO1xuaW1wb3J0IHsgU2FsZUNhcnQgfSBmcm9tIFwiLi4vZG9tYWluL3NhbGUtY2FydFwiO1xuaW1wb3J0IHsgU3RvY2sgfSBmcm9tIFwiLi4vZG9tYWluL3N0b2NrXCI7XG5cbmV4cG9ydCBjbGFzcyBEYXRhQmFzZSB7XG5cbiAgICAgcHJpdmF0ZSBfYm9va3M6IEFycmF5PEJvb2s+Oy8vXG4gICAgIHByaXZhdGUgX3N0b2NrczogQXJyYXk8U3RvY2s+O1xuICAgICBwcml2YXRlIF9jdXN0b21lcnM6IEFycmF5PEN1c3RvbWVyPjsvL1xuICAgICBwcml2YXRlIF9zYWxlczogQXJyYXk8U2FsZT47Ly9cbiAgICAgcHJpdmF0ZSBfcmVudHM6IEFycmF5PFJlbnQ+O1xuICAgICBwcml2YXRlIF9ib29rU3BlY2lmaWNhdGlvbnM6IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPjtcbiAgICAgcHJpdmF0ZSBfY2FuY2VsU2FsZXM6IEFycmF5PENhbmNlbFNhbGU+Oy8vXG4gICAgIHByaXZhdGUgX3NhbGVDYXJ0OiBTYWxlQ2FydDtcblxuICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICB0aGlzLl9ib29rcyA9IG5ldyBBcnJheTxCb29rPigpO1xuICAgICAgICAgIHRoaXMuX3N0b2NrcyA9IG5ldyBBcnJheTxTdG9jaz4oKTtcbiAgICAgICAgICB0aGlzLl9jdXN0b21lcnMgPSBuZXcgQXJyYXk8Q3VzdG9tZXI+KCk7XG4gICAgICAgICAgdGhpcy5fc2FsZXMgPSBuZXcgQXJyYXk8U2FsZT4oKTtcbiAgICAgICAgICB0aGlzLl9yZW50cyA9IG5ldyBBcnJheTxSZW50PigpO1xuICAgICAgICAgIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9ucyA9IG5ldyBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4oKTtcbiAgICAgICAgICB0aGlzLl9jYW5jZWxTYWxlcyA9IG5ldyBBcnJheTxDYW5jZWxTYWxlPigpO1xuICAgICAgICAgIHRoaXMuX3NhbGVDYXJ0ID0gbmV3IFNhbGVDYXJ0O1xuXG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIGJvb2tzXG4gICAgICAqIEByZXR1cm4ge0FycmF5PEJvb2s+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRCb29rc0xpc3QoKTogQXJyYXk8Qm9vaz4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9ib29rcztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgc3RvY2tzXG4gICAgICAqIEByZXR1cm4ge0FycmF5PFN0b2NrPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0U3RvY2tzTGlzdCgpOiBBcnJheTxTdG9jaz4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9zdG9ja3M7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIGN1c3RvbWVyc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxDdXN0b21lcj59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldEN1c3RvbWVyc0xpc3QoKTogQXJyYXk8Q3VzdG9tZXI+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tZXJzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBzYWxlc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxTYWxlPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0U2FsZXNMaXN0KCk6IEFycmF5PFNhbGU+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fc2FsZXM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHJlbnRzXG4gICAgICAqIEByZXR1cm4ge0FycmF5PFJlbnQ+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRSZW50cygpOiBBcnJheTxSZW50PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3JlbnRzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBib29rU3BlY2lmaWNhdGlvbnNcbiAgICAgICogQHJldHVybiB7QXJyYXk8Qm9va1NwZWNpZmljYXRpb24+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRCb29rU3BlY2lmaWNhdGlvbnMoKTogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fYm9va1NwZWNpZmljYXRpb25zO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBjYW5jZWxTYWxlc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxDYW5jZWxTYWxlPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Q2FuY2FsZWRTYWxlcygpOiBBcnJheTxDYW5jZWxTYWxlPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbFNhbGVzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBzYWxlQ2FydFxuICAgICAgKiBAcmV0dXJuIHtBcnJheTxTYWxlQ2FydD59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFNhbGVDYXJ0KCk6IFNhbGVDYXJ0IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fc2FsZUNhcnQ7XG4gICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzYWxlQ2FydFxuICAgICAqIEBwYXJhbSB7U2FsZUNhcnR9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgc2V0U2FsZUNhcnQodmFsdWU6IFNhbGVDYXJ0KSB7XG5cdFx0dGhpcy5fc2FsZUNhcnQgPSB2YWx1ZTtcblx0fVxuXG5cbn1cbiIsImV4cG9ydCBjbGFzcyBCb29rU3BlY2lmaWNhdGlvbiB7XG4gICAgcHJpdmF0ZSBfaXNibjogc3RyaW5nO1xuICAgIHByaXZhdGUgX3ByaWNlOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfc3RhcnREYXRlOiBEYXRlO1xuICAgIHByaXZhdGUgX2VuZERhdGU6IERhdGU7XG5cbiAgICBjb25zdHJ1Y3Rvcihpc2JuOiBzdHJpbmcsIHByaWNlOiBudW1iZXIsIHN0YXJ0RGF0ZTogRGF0ZSwgZW5kRGF0ZTogRGF0ZSkge1xuICAgICAgICB0aGlzLl9pc2JuID0gaXNibjtcbiAgICAgICAgdGhpcy5fcHJpY2UgPSBwcmljZTtcbiAgICAgICAgdGhpcy5fc3RhcnREYXRlID0gc3RhcnREYXRlO1xuICAgICAgICB0aGlzLl9lbmREYXRlID0gZW5kRGF0ZTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBpc2JuXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGlzYm4oKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5faXNibjtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHByaWNlXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IHByaWNlKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3ByaWNlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc3RhcnREYXRlXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cblx0cHVibGljIGdldCBzdGFydERhdGUoKTogRGF0ZSB7XG5cdFx0cmV0dXJuIHRoaXMuX3N0YXJ0RGF0ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGVuZERhdGVcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGVuZERhdGUoKTogRGF0ZSB7XG5cdFx0cmV0dXJuIHRoaXMuX2VuZERhdGU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBpc2JuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgaXNibih2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5faXNibiA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcHJpY2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBwcmljZSh2YWx1ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5fcHJpY2UgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHN0YXJ0RGF0ZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBzdGFydERhdGUodmFsdWU6IERhdGUpIHtcblx0XHR0aGlzLl9zdGFydERhdGUgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGVuZERhdGVcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgZW5kRGF0ZSh2YWx1ZTogRGF0ZSkge1xuXHRcdHRoaXMuX2VuZERhdGUgPSB2YWx1ZTtcblx0fVxuICAgIFxuXG4gICAgXG59IiwiaW1wb3J0IHsgQm9va1NwZWNpZmljYXRpb24gfSBmcm9tIFwiLi9ib29rLXNwZWNpZmljYXRpb25cIjtcblxuZXhwb3J0IGNsYXNzIEJvb2sge1xuICBwcml2YXRlIF9pc2JuOiBzdHJpbmc7XG4gIHByaXZhdGUgX25hbWU6IHN0cmluZztcbiAgcHJpdmF0ZSBfYXV0aG9yOiBzdHJpbmc7XG4gIHByaXZhdGUgX3B1Ymxpc2hZZWFyOiBzdHJpbmc7XG4gIHByaXZhdGUgX3BhZ2VzOiBudW1iZXI7XG4gIHByaXZhdGUgX2Jvb2tTcGVjOiBCb29rU3BlY2lmaWNhdGlvbjtcblxuICBjb25zdHJ1Y3Rvcihpc2JuOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgYXV0aG9yOiBzdHJpbmcsIHB1Ymxpc2hZZWFyOiBzdHJpbmcsIHBhZ2VzOiBudW1iZXIsIGJvb2tTcGVjOiBCb29rU3BlY2lmaWNhdGlvbikge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2F1dGhvciA9IGF1dGhvcjtcbiAgICB0aGlzLl9pc2JuID0gaXNibjtcbiAgICB0aGlzLl9wdWJsaXNoWWVhciA9IHB1Ymxpc2hZZWFyO1xuICAgIHRoaXMuX3BhZ2VzID0gcGFnZXM7XG4gICAgdGhpcy5fYm9va1NwZWMgPSBib29rU3BlYztcbiAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgaXNiblxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBpc2JuKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2lzYm47XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBuYW1lXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fbmFtZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGF1dGhvclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBhdXRob3IoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fYXV0aG9yO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcHVibGlzaFllYXJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcHVibGlzaFllYXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fcHVibGlzaFllYXI7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBwYWdlc1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCBwYWdlcygpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9wYWdlcztcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGJvb2tTcGVjXG4gICAgICogQHJldHVybiB7Qm9va1NwZWNpZmljYXRpb259XG4gICAgICovXG5cdHB1YmxpYyBnZXQgYm9va1NwZWMoKTogQm9va1NwZWNpZmljYXRpb24ge1xuXHRcdHJldHVybiB0aGlzLl9ib29rU3BlYztcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlzYm5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBpc2JuKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9pc2JuID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgbmFtZSh2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fbmFtZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgYXV0aG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgYXV0aG9yKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9hdXRob3IgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHB1Ymxpc2hZZWFyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcHVibGlzaFllYXIodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX3B1Ymxpc2hZZWFyID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBwYWdlc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHBhZ2VzKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLl9wYWdlcyA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgYm9va1NwZWNcbiAgICAgKiBAcGFyYW0ge0Jvb2tTcGVjaWZpY2F0aW9ufSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGJvb2tTcGVjKHZhbHVlOiBCb29rU3BlY2lmaWNhdGlvbikge1xuXHRcdHRoaXMuX2Jvb2tTcGVjID0gdmFsdWU7XG5cdH1cbiAgXG5cbn1cbiIsImV4cG9ydCBjbGFzcyBDdXN0b21lciB7XG4gIHByaXZhdGUgX2lkOiBudW1iZXI7XG4gIHByaXZhdGUgX25hbWU6IHN0cmluZztcbiAgcHJpdmF0ZSBfc3VyTmFtZTogc3RyaW5nO1xuICBwcml2YXRlIF9waG9uZU51bWJlcjogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGlkOiBudW1iZXIsIG5hbWU6IHN0cmluZywgc3VyTmFtZTogc3RyaW5nLCBwaG9uZU51bWJlcjogc3RyaW5nKSB7XG4gICAgdGhpcy5faWQgPSBpZDtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9zdXJOYW1lID0gc3VyTmFtZTtcbiAgICB0aGlzLl9waG9uZU51bWJlciA9IHBob25lTnVtYmVyO1xuICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBpZFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCBpZCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9pZDtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG5hbWVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgbmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9uYW1lO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc3VyTmFtZVxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBzdXJOYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX3N1ck5hbWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBwaG9uZU51bWJlclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBwaG9uZU51bWJlcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9waG9uZU51bWJlcjtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgaWQodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX2lkID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgbmFtZSh2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fbmFtZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc3VyTmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHN1ck5hbWUodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX3N1ck5hbWUgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHBob25lTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcGhvbmVOdW1iZXIodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX3Bob25lTnVtYmVyID0gdmFsdWU7XG5cdH1cblxuXG59XG4iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuXG5leHBvcnQgY2xhc3MgU2FsZUNhcnQge1xuICAgIGN1c3RvbWVySWQhOiBudW1iZXI7XG4gICAgYm9va0FuZFF1YW50aXR5TWFwOiBNYXA8Qm9vaywgbnVtYmVyPjtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJvb2tBbmRRdWFudGl0eU1hcCA9IG5ldyBNYXA8Qm9vaywgbnVtYmVyPigpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuXG5leHBvcnQgY2xhc3MgU2FsZSB7XG5cbiAgICBwcml2YXRlIF9ib29rQW5kUXVhbnRpdHlNYXA/ID0gbmV3IE1hcDxCb29rLCBudW1iZXI+KCk7XG4gICAgcHJpdmF0ZSBfY3VzdG9tZXJJZD86IG51bWJlcjtcbiAgICBwcml2YXRlIF9vcGVyYXRpb25EYXRlVGltZT86IERhdGU7XG4gICAgcHJpdmF0ZSBfb3BlcmF0aW9uTnVtYmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgX3RvdGFsPzogbnVtYmVyO1xuXG5cbiAgICBjb25zdHJ1Y3Rvcihib29rQW5kUXVhbnRpdHlNYXA/OiBNYXA8Qm9vaywgbnVtYmVyPiwgb3BlcmF0aW9uRGF0ZVRpbWU/OiBEYXRlLCBjdXN0b21lcklkPzogbnVtYmVyLCBvcGVyYXRpb25OdW1iZXI/OiBzdHJpbmcsIHRvdGFsPzogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX2Jvb2tBbmRRdWFudGl0eU1hcCA9IGJvb2tBbmRRdWFudGl0eU1hcDtcbiAgICAgICAgdGhpcy5fb3BlcmF0aW9uRGF0ZVRpbWUgPSBvcGVyYXRpb25EYXRlVGltZTtcbiAgICAgICAgdGhpcy5fY3VzdG9tZXJJZCA9IGN1c3RvbWVySWQ7XG4gICAgICAgIHRoaXMuX29wZXJhdGlvbk51bWJlciA9IG9wZXJhdGlvbk51bWJlcjtcbiAgICAgICAgdGhpcy5fdG90YWwgPSB0b3RhbDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBib29rQW5kUXVhbnRpdHlNYXBcbiAgICAgKiBAcmV0dXJuIHtNYXA8Qm9vaywgbnVtYmVyPigpfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgYm9va0FuZFF1YW50aXR5TWFwKCk6IE1hcDxCb29rLCBudW1iZXI+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tBbmRRdWFudGl0eU1hcCE7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgb3BlcmF0aW9uRGF0ZVRpbWVcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgb3BlcmF0aW9uRGF0ZVRpbWUoKTogRGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcGVyYXRpb25EYXRlVGltZSE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGN1c3RvbWVySWRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCBjdXN0b21lcklkKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXN0b21lcklkITtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgb3BlcmF0aW9uTnVtYmVyXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgb3BlcmF0aW9uTnVtYmVyKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcGVyYXRpb25OdW1iZXIhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciB0b3RhbFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHRvdGFsKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl90b3RhbCE7XG4gICAgfVxuXG5cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rQW5kUXVhbnRpdHlNYXBcbiAgICAgKiBAcGFyYW0ge01hcH0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGJvb2tBbmRRdWFudGl0eU1hcCh2YWx1ZTogTWFwPEJvb2ssIG51bWJlcj4pIHtcbiAgICAgICAgdGhpcy5fYm9va0FuZFF1YW50aXR5TWFwID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIG9wZXJhdGlvbkRhdGVUaW1lXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgb3BlcmF0aW9uRGF0ZVRpbWUodmFsdWU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5fb3BlcmF0aW9uRGF0ZVRpbWUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY3VzdG9tZXJJZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgY3VzdG9tZXJJZCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX2N1c3RvbWVySWQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgb3BlcmF0aW9uTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBvcGVyYXRpb25OdW1iZXIodmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9vcGVyYXRpb25OdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgdG90YWxcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHRvdGFsKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fdG90YWwgPSB2YWx1ZTtcbiAgICB9XG5cblxufSIsImV4cG9ydCBjbGFzcyBTdG9jayB7XG4gICAgcHJpdmF0ZSBfaXNibjogc3RyaW5nO1xuICAgIHByaXZhdGUgX3F1YW50aXR5OiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfc2hlbGZOdW1iZXI6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGlzYm4/OiBzdHJpbmcsIHF1YW50aXR5PzogbnVtYmVyLCBzaGVsZk51bWJlcj86IHN0cmluZykge1xuICAgICAgICB0aGlzLl9pc2JuID0gaXNibiE7XG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gcXVhbnRpdHkhO1xuICAgICAgICB0aGlzLl9zaGVsZk51bWJlciA9IHNoZWxmTnVtYmVyITtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGlzYm5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHVibGljIGdldCBpc2JuKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc2JuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBxdWFudGl0eVxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHF1YW50aXR5KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWFudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc2hlbGZOdW1iZXJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHVibGljIGdldCBzaGVsZk51bWJlcigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2hlbGZOdW1iZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlzYm5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGlzYm4odmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9pc2JuID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHF1YW50aXR5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBxdWFudGl0eSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNoZWxmTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBzaGVsZk51bWJlcih2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX3NoZWxmTnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG5cbn0iLCIvLyBleHBvcnQgTk9ERV9PUFRJT05TPS0tb3BlbnNzbC1sZWdhY3ktcHJvdmlkZXJcbmltcG9ydCB7IERhdGFCYXNlIH0gZnJvbSBcIi4vZGIvZGF0YWJhc2VcIjtcbmltcG9ydCBmZXRjaCBmcm9tICdub2RlLWZldGNoJ1xuXG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4vZG9tYWluL2Jvb2stc3BlY2lmaWNhdGlvblwiO1xuaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi9kb21haW4vY3VzdG9tZXJcIjtcbmltcG9ydCB7IFN0b2NrIH0gZnJvbSBcIi4vZG9tYWluL3N0b2NrXCI7XG5pbXBvcnQgeyBCb29rU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvYm9vay1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBDYW5jZWxTYWxlU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvY2FuY2FsLXNhbGUtc2VydmljZVwiO1xuaW1wb3J0IHsgQ3VzdG9tZXJTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9jdXN0b21lci1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBSZW50U2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvcmVudC1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBTYWxlU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2Uvc2FsZS1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBTdG9ja1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL3N0b2NrLXNlcnZpY2VcIjtcblxuZXhwb3J0IGxldCBib29rU2VydmljZTogQm9va1NlcnZpY2U7XG5leHBvcnQgbGV0IGN1c3RvbWVyU2VydmljZTogQ3VzdG9tZXJTZXJ2aWNlO1xuZXhwb3J0IGxldCBjYW5jZWxTYWxlU2VydmljZTogQ2FuY2VsU2FsZVNlcnZpY2U7XG5leHBvcnQgbGV0IHJlbnRTZXJ2aWNlOiBSZW50U2VydmljZTtcbmV4cG9ydCBsZXQgc2FsZVNlcnZpY2U6IFNhbGVTZXJ2aWNlO1xuZXhwb3J0IGxldCBzdG9ja1NlcnZpY2U6IFN0b2NrU2VydmljZTtcblxubGV0IGRiOiBEYXRhQmFzZSA9IG5ldyBEYXRhQmFzZSgpO1xuaW5pdGlsaWF6ZVNlcnZpY2VzKGRiKTtcbmluaXRpbGlhemVEYXRhKCk7XG5hZGRMaXN0ZW5lckZvck1lbnVJdGVtcygpO1xuXG4gZnVuY3Rpb24gaW5pdGlsaWF6ZURhdGEoKXtcbiBib29rU2VydmljZS5pbml0aWFsaXplQm9va3NEYXRhTW9jaygpO1xufVxuXG5cblxuZnVuY3Rpb24gaW5pdGlsaWF6ZVNlcnZpY2VzKGRiOiBEYXRhQmFzZSkge1xuICBib29rU2VydmljZSA9IG5ldyBCb29rU2VydmljZShkYi5nZXRCb29rc0xpc3QsIGRiLmdldEJvb2tTcGVjaWZpY2F0aW9ucyk7XG4gIGN1c3RvbWVyU2VydmljZSA9IG5ldyBDdXN0b21lclNlcnZpY2UoZGIuZ2V0Q3VzdG9tZXJzTGlzdCk7XG4gIGNhbmNlbFNhbGVTZXJ2aWNlID0gbmV3IENhbmNlbFNhbGVTZXJ2aWNlKGRiLmdldENhbmNhbGVkU2FsZXMpO1xuICByZW50U2VydmljZSA9IG5ldyBSZW50U2VydmljZShkYi5nZXRSZW50cyk7XG4gIHNhbGVTZXJ2aWNlID0gbmV3IFNhbGVTZXJ2aWNlKGRiLmdldFNhbGVzTGlzdCwgZGIuZ2V0U2FsZUNhcnQpO1xuICBzdG9ja1NlcnZpY2UgPSBuZXcgU3RvY2tTZXJ2aWNlKGRiLmdldFN0b2Nrc0xpc3QpO1xuICBjb25zb2xlLmxvZyhcIlNlcnZpY2VzIGludGlsaWF6ZWQuXCIpO1xuXG4gIGN1c3RvbWVyU2VydmljZS5hZGRDdXN0b21lcihuZXcgQ3VzdG9tZXIoMSwgXCJcIiwgXCJcIiwgXCJcIikpO1xuICBjdXN0b21lclNlcnZpY2UuYWRkQ3VzdG9tZXIobmV3IEN1c3RvbWVyKDIsIFwiXCIsIFwiXCIsIFwiXCIpKTtcblxuICBzdG9ja1NlcnZpY2UuYWRkU3RvY2soXCIxMjMtNDVcIiwgXCJBNDUtNTJcIiwgMTApO1xuICBzdG9ja1NlcnZpY2UuYWRkU3RvY2soXCIxMjMtNDZcIiwgXCJBNDUtNTJcIiwgMTApO1xufVxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lckZvck1lbnVJdGVtcygpIHtcbiAgLy9zYWxlU2VydmljZS51cGRhdGVTYWxlQ2FydCgpO1xuICBzaG93QW5kSGlkZShcImFkZEJvb2tNZW51SXRlbVwiLCBcImFkZEJvb2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcInNob3dCb29rc01lbnVJdGVtXCIsIFwibGlzdEJvb2tzU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJhZGRDdXN0b21lck1lbnVJdGVtXCIsIFwiYWRkQ3VzdG9tZXJTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImFkZFN0b2NrTWVudUl0ZW1cIiwgXCJhZGRTdG9ja1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwic2FsZUJvb2tNZW51SXRlbVwiLCBcInNhbGVCb29rU2VjdGlvblwiKTtcbn1cblxuZnVuY3Rpb24gc2hvd0FuZEhpZGUoYnRuSWQ6IHN0cmluZywgZWxlbWVudElkOiBzdHJpbmcpIHtcbiAgLy9zYWxlU2VydmljZS51cGRhdGVTYWxlQ2FydCgpO1xuXG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidG5JZCk7XG5cbiAgaWYgKGVsZW1lbnQgJiYgYnRuKSB7XG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBpZiAoZWxlbWVudC5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIikge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBhZGRCb29rRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtYm9vay1mb3JtXCIpO1xuaWYgKGFkZEJvb2tGb3JtICE9IG51bGwpIHtcbiAgYWRkQm9va0Zvcm0ub25zdWJtaXQgPSAoKSA9PiB7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoYWRkQm9va0Zvcm0pO1xuXG4gICAgY29uc3QgdGl0bGUgPSBmb3JtRGF0YS5nZXQoXCJib29rVGl0bGVcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGF1dGhvciA9IGZvcm1EYXRhLmdldChcImJvb2tBdXRob3JcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJib29rSXNiblwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcHVibGlzaFllYXIgPSBmb3JtRGF0YS5nZXQoXCJib29rUHVibGlzaFllYXJcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IHBhZ2VzID0gZm9ybURhdGEuZ2V0KFwiYm9va1BhZ2VzXCIpIGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgIGNvbnN0IHByaWNlID0gZm9ybURhdGEuZ2V0KFwiYm9va1ByaWNlXCIpIGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKCdEZWMgMzEsIDk5OTkgMjM6NTk6NTknKTtcblxuICAgIGNvbnN0IGJvb2tTcGVjID0gbmV3IEJvb2tTcGVjaWZpY2F0aW9uKGlzYm4sIHByaWNlLCBzdGFydERhdGUsIGVuZERhdGUpO1xuXG4gICAgY29uc3QgYm9vayA9IG5ldyBCb29rKGlzYm4sIHRpdGxlLCBhdXRob3IsIHB1Ymxpc2hZZWFyLCBwYWdlcywgYm9va1NwZWMpO1xuICAgIC8vYm9va1NlcnZpY2UuYWRkQm9vayhib29rKTtcblxuICAgIGJvb2tTZXJ2aWNlLmFkZEJvb2tNb2NrKGJvb2spO1xuICAgIGFsZXJ0KGJvb2suaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCBFa2xlbWUgxLDFn2xlbWkgQmHFn2FyxLEgxLBsZSBUYW1hbWxhbm3EscWfdMSxci5cIik7XG4gICAgYWRkQm9va0Zvcm0ucmVzZXQoKTtcblxuICAgIHJldHVybiBmYWxzZTsgLy8gcHJldmVudCByZWxvYWRcbiAgfTtcbn1cblxuY29uc3QgYWRkU3RvY2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtc3RvY2stZm9ybVwiKSk7XG5pZiAoYWRkU3RvY2tGb3JtKSB7XG4gIGFkZFN0b2NrRm9ybS5vbnN1Ym1pdCA9ICgpID0+IHtcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGFkZFN0b2NrRm9ybSk7XG5cbiAgICBjb25zdCBpc2JuID0gZm9ybURhdGEuZ2V0KFwiYm9va0lzYm5Gb3JBZGRTdG9ja1wiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcXVhbnR0aXkgPSBmb3JtRGF0YS5nZXQoXCJzdG9ja1F1YW50aXR5XCIpIGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgIGNvbnN0IHNoZWxmTnVtYmVyID0gZm9ybURhdGEuZ2V0KFwic2hlbGZOdW1iZXJcIikgYXMgc3RyaW5nO1xuXG4gICAgY29uc3Qgc3RvY2sgPSBuZXcgU3RvY2soaXNibiwgcXVhbnR0aXksIHNoZWxmTnVtYmVyKTtcblxuICAgIGNvbnN0IGlzQ29udGFpbnNCb29rID0gZGIuZ2V0Qm9va3NMaXN0LnNvbWUoYiA9PiBiLmlzYm4gPT0gaXNibik7XG5cbiAgICAvLyBpZiAoIWlzQ29udGFpbnNCb29rKSB7XG4gICAgLy8gICBhbGVydChcIlN0b2sgZWtsZW5tZXllIMOnYWzEscWfxLFsYW4ga2l0YXAsIGthecSxdGzEsSBkZcSfaWxkaXIuIEzDvHRmZW4gw7ZuY2Uga2l0YXAgZWtsZXlpbml6XCIpO1xuICAgIC8vIH1cbiAgICAvLyBlbHNlIHtcbiAgICAvLyAgIHN0b2NrU2VydmljZS5pbmNyZWFzZVN0b2NrKGlzYm4sIHF1YW50dGl5KTtcbiAgICAvLyAgIGFsZXJ0KGlzYm4gKyBcIiBpc2JuIG51bWFyYWzEsSBraXRhcHRhbiwgXCIgKyBxdWFudHRpeSArIFwiIGthZGFyIHNpc3RlbWUgc3RvayBla2xlbm1pxZ90aXIuXCIpO1xuICAgIC8vIH1cblxuICAgIGFsZXJ0KGlzYm4gKyBcIiBpc2JuIG51bWFyYWzEsSBraXRhcHRhbiwgXCIgKyBxdWFudHRpeSArIFwiIGthZGFyIHNpc3RlbWUgc3RvayBla2xlbm1pxZ90aXIuXCIpO1xuICAgIHN0b2NrU2VydmljZS5hZGRTdG9ja01vY2soc3RvY2spO1xuICAgIGFkZFN0b2NrRm9ybS5yZXNldCgpO1xuICAgIHJldHVybiBmYWxzZTsgLy8gcHJldmVudCByZWxvYWRcbiAgfTtcbn1cblxuY29uc3QgYWRkQ3VzdG9tZXJGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtY3VzdG9tZXItZm9ybVwiKSk7XG5pZiAoYWRkQ3VzdG9tZXJGb3JtKSB7XG5cbiAgYWRkQ3VzdG9tZXJGb3JtLm9uc3VibWl0ID0gKCkgPT4ge1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGFkZEN1c3RvbWVyRm9ybSk7XG5cbiAgICBjb25zdCBuYW1lID0gZm9ybURhdGEuZ2V0KFwiY3VzdG9tZXJOYW1lXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBzdXJuYW1lID0gZm9ybURhdGEuZ2V0KFwiY3VzdG9tZXJTdXJuYW1lXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBwaG9uZU51bWJlciA9IGZvcm1EYXRhLmdldChcImN1c3RvbWVyUGhvbmVOdW1iZXJcIikgYXMgc3RyaW5nO1xuXG4gICAgY29uc3QgY3VzdG9tZXIgPSBuZXcgQ3VzdG9tZXIoY3VzdG9tZXJTZXJ2aWNlLmdldE5ld0N1c3RvbWVySWQoKSwgbmFtZSwgc3VybmFtZSwgcGhvbmVOdW1iZXIpO1xuXG4gICAgY3VzdG9tZXJTZXJ2aWNlLmFkZEN1c3RvbWVyKGN1c3RvbWVyKTtcbiAgICBhbGVydChcIk3DvMWfdGVyaSBFa2xlbWUgxLDFn2xlbWkgQmHFn2FyxLEgxLBsZSBUYW1hbWxhbm3EscWfdMSxci4gXCIpO1xuXG4gICAgYWRkQ3VzdG9tZXJGb3JtLnJlc2V0KCk7XG5cbiAgICByZXR1cm4gZmFsc2U7IC8vIHByZXZlbnQgcmVsb2FkXG4gIH07XG5cblxufVxuXG5jb25zdCBzYWxlQm9va0Zvcm0gPSA8SFRNTEZvcm1FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNhbGUtYm9vay1mb3JtXCIpKTtcbmlmIChzYWxlQm9va0Zvcm0pIHtcbiAgc2FsZUJvb2tGb3JtLm9uc3VibWl0ID0gKCkgPT4ge1xuXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoc2FsZUJvb2tGb3JtKTtcblxuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJpc2JuRm9yU2FsZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgYm9vayA9IGJvb2tTZXJ2aWNlLmdldEJvb2soaXNibik7XG4gICAgY29uc3QgY3VzdG9tZXJJZCA9IHBhcnNlSW50KGZvcm1EYXRhLmdldChcImN1c3RvbWVySWRGb3JTYWxlXCIpIGFzIHN0cmluZyk7XG4gICAgY29uc3QgY3VzdG9tZXI6IGJvb2xlYW4gPSBjdXN0b21lclNlcnZpY2UuaXNWYWxpZEN1c3RvbWVyKGN1c3RvbWVySWQpO1xuICAgIGNvbnN0IHF1YW50aXR5ID0gcGFyc2VJbnQoZm9ybURhdGEuZ2V0KFwicXVhbnRpdHlGb3JTYWxlXCIpIGFzIHN0cmluZyk7XG5cbiAgICBjb25zdCBzdG9jayA9IHN0b2NrU2VydmljZS5nZXRTdG9jayhpc2JuKSE7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGJvb2spIHtcbiAgICAgICAgaWYgKHN0b2NrKSB7XG4gICAgICAgICAgaWYgKHN0b2NrLnF1YW50aXR5ID49IHF1YW50aXR5KSB7XG4gICAgICAgICAgICBpZiAoY3VzdG9tZXIpIHtcbiAgICAgICAgICAgICAgc2FsZVNlcnZpY2UuYWRkQm9va1RvQ2FydChib29rLCBxdWFudGl0eSwgY3VzdG9tZXJJZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhbGVydChjdXN0b21lcklkICsgXCIgbnVtYXJhbMSxIG3DvMWfdGVyaSBrYXnEsXRsxLEgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhbGVydChxdWFudGl0eSArIFwiIGthZGFyIGtpdGFwIGTDvGtrYW5kYSBtZXZjdXQgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxlcnQoYETDvGtrYW5kYSAke2lzYm59IG51bWFyYWzEsSBraXRhYsSxbiBzdG/En3UgbWV2Y3V0IGRlxJ9pbGRpci5gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQoaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCB5b2t0dXIuXCIpO1xuICAgICAgfVxuXG4gICAgICBzYWxlQm9va0Zvcm0ucmVzZXQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvcik7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGJ0bkJ1eSA9IDxIVE1MQnV0dG9uRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG5CdXlcIikpO1xuYnRuQnV5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGlmIChzYWxlU2VydmljZS5zYWxlQ2FydC5ib29rQW5kUXVhbnRpdHlNYXAuc2l6ZSA9PT0gMCkge1xuICAgIGFsZXJ0KFwiU2VwZXR0ZSDDvHLDvG4geW9rLiBMw7x0ZmVuIMO2bmNlIMO8csO8biBla2xleWluaXpcIik7XG4gIH0gZWxzZSB7XG4gICAgc2FsZVNlcnZpY2UuY2FydFRvU2FsZSgpO1xuICB9XG5cbn0pO1xuXG5jb25zdCBidG5TaG93Qm9va3NNZW51SXRlbSA9IDxIVE1MRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaG93Qm9va3NNZW51SXRlbVwiKSk7XG5idG5TaG93Qm9va3NNZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBib29rU2VydmljZS5pbml0aWFsaXplQm9va3NEYXRhTW9jaygpO1xufSlcblxuIiwiXG5pbXBvcnQgeyBzdG9ja1NlcnZpY2UgfSBmcm9tIFwiLi5cIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rLXNwZWNpZmljYXRpb25cIjtcblxuZXhwb3J0IGNsYXNzIEJvb2tTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9ib29rTGlzdDogQXJyYXk8Qm9vaz47XG4gICAgcHJpdmF0ZSBfYm9va1NwZWNMaXN0OiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj47XG5cbiAgICBjb25zdHJ1Y3Rvcihib29rTGlzdDogQXJyYXk8Qm9vaz4sIGJvb2tTcGVjTGlzdDogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+KSB7XG4gICAgICAgIHRoaXMuX2Jvb2tMaXN0ID0gYm9va0xpc3Q7XG4gICAgICAgIHRoaXMuX2Jvb2tTcGVjTGlzdCA9IGJvb2tTcGVjTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgZGF0YUJhc2VcbiAgICAgKiBAcmV0dXJuIHtEYXRhQmFzZX1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGJvb2tMaXN0KCk6IEFycmF5PEJvb2s+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBkYXRhQmFzZVxuICAgICAqIEBwYXJhbSB7RGF0YUJhc2V9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBib29rTGlzdCh2YWx1ZTogQXJyYXk8Qm9vaz4pIHtcbiAgICAgICAgdGhpcy5fYm9va0xpc3QgPSB2YWx1ZTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBib29rU3BlY0xpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxCb29rU3BlY2lmaWNhdGlvbj59XG4gICAgICovXG4gICAgcHVibGljIGdldCBib29rU3BlY0xpc3QoKTogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tTcGVjTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgYm9va1NwZWNMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxCb29rU3BlY2lmaWNhdGlvbj59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBib29rU3BlY0xpc3QodmFsdWU6IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPikge1xuICAgICAgICB0aGlzLl9ib29rU3BlY0xpc3QgPSB2YWx1ZTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBnZXRCb29rKGlzYm46IHN0cmluZyk6IEJvb2sge1xuICAgICAgICAvL0J1cmFkYW4gbnVsbCBiaXIgZGXEn2VyIGRlIGTDtm5lYmlsZWNlxJ9pIGnDp2luIGhhdGEgdmVyaXlvclxuICAgICAgICAvL2FtYSBiaXogc29uZGFraSAhIG9wZXJhdMO2csO8IGlsZSBudWxsIGRlxJ9lciBkw7ZubWV5ZWNlayBkaXllIGdhcmFudGkgdmVyaXlvcnV6XG4gICAgICAgIHJldHVybiB0aGlzLmJvb2tMaXN0LmZpbmQoYiA9PiBiLmlzYm4gPT09IGlzYm4pITtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQm9vayhuZXdCb29rOiBCb29rKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmJvb2tMaXN0LnB1c2gobmV3Qm9vayk7XG4gICAgICAgICAgICB0aGlzLl9ib29rU3BlY0xpc3QucHVzaChuZXdCb29rLmJvb2tTcGVjKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIktpdGFwIGVrbGVuaXJrZW4gYmlyIGhhdGEgbWV5ZGFuYSBnZWxkaS5cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaXNWYWxpZEJvb2soaXNibjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGIgPSB0aGlzLmdldEJvb2soaXNibik7XG4gICAgICAgIHJldHVybiB0aGlzLmJvb2tMaXN0LmluY2x1ZGVzKGIpXG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZUJvb2tzRGF0YU1vY2soKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL2Jvb2tzJywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgY29uc3QgZ2V0UmVzdWx0ID0gPEJvb2tbXT5KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3VsdCwgbnVsbCwgNCkpO1xuICAgICAgICAgICAgdGhpcy5ib29rTGlzdCA9IGdldFJlc3VsdCBhcyBBcnJheTxCb29rPjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5saXN0Qm9va3MoKTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgbGlzdEJvb2tzKCkge1xuICAgICAgICBjb25zdCBsaXN0Qm9va3NEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxpc3RCb29rc1wiKTtcblxuICAgICAgICBpZiAobGlzdEJvb2tzRGl2KSB7XG4gICAgICAgICAgICBsZXQgcm93LCBjb2x1bW47XG5cbiAgICAgICAgICAgIHdoaWxlIChsaXN0Qm9va3NEaXYubGFzdENoaWxkICYmIGxpc3RCb29rc0Rpdi5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgbGlzdEJvb2tzRGl2LnJlbW92ZUNoaWxkKGxpc3RCb29rc0Rpdi5sYXN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmJvb2tMaXN0LmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gXCJyb3ctbGlzdC1ib29rXCI7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbGVtZW50LmlzYm4udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVsZW1lbnQubmFtZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJjb2x1bW4tbGlzdC1ib29rXCI7XG4gICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gZWxlbWVudC5hdXRob3IudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IHN0b2NrU2VydmljZS5nZXRTdG9ja1F1YW50aXR5KGVsZW1lbnQuaXNibikudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVsZW1lbnQuYm9va1NwZWMucHJpY2UudG9TdHJpbmcoKSArIFwiIOKCulwiO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgbGlzdEJvb2tzRGl2LmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGFzeW5jIGFkZEJvb2tNb2NrKGI6IEJvb2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvYm9va3MvJywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaXNibjogYi5pc2JuLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBiLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcjogYi5hdXRob3IsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VzOiBiLnBhZ2VzLFxuICAgICAgICAgICAgICAgICAgICBwdWJsaXNoWWVhcjogYi5wdWJsaXNoWWVhclxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IERhdGFCYXNlIH0gZnJvbSBcIi4uL2RiL2RhdGFiYXNlXCI7XG5pbXBvcnQgeyBDYW5jZWxTYWxlIH0gZnJvbSBcIi4uL2RvbWFpbi9jYW5jYWwtc2FsZVwiO1xuXG5leHBvcnQgY2xhc3MgQ2FuY2VsU2FsZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgX2NhbmNlbGxlZFNhbGVzTGlzdDogQXJyYXk8Q2FuY2VsU2FsZT47XG5cblxuXHRjb25zdHJ1Y3RvcihjYW5jZWxsZWRTYWxlc0xpc3Q6IEFycmF5PENhbmNlbFNhbGU+KSB7XG5cdFx0dGhpcy5fY2FuY2VsbGVkU2FsZXNMaXN0ID0gY2FuY2VsbGVkU2FsZXNMaXN0O1xuXHR9XG4gICAgXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgY2FuY2VsbGVkU2FsZXNMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8Q2FuY2VsU2FsZT59XG4gICAgICovXG5cdHB1YmxpYyBnZXQgY2FuY2VsbGVkU2FsZXNMaXN0KCk6IEFycmF5PENhbmNlbFNhbGU+IHtcblx0XHRyZXR1cm4gdGhpcy5fY2FuY2VsbGVkU2FsZXNMaXN0O1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY2FuY2VsbGVkU2FsZXNMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxDYW5jZWxTYWxlPn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBjYW5jZWxsZWRTYWxlc0xpc3QodmFsdWU6IEFycmF5PENhbmNlbFNhbGU+KSB7XG5cdFx0dGhpcy5fY2FuY2VsbGVkU2FsZXNMaXN0ID0gdmFsdWU7XG5cdH1cblxuXG5cbiAgICBwdWJsaWMgY2FuY2VsU2FsZShjYW5jZWxTYWxlOiBDYW5jZWxTYWxlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2FuY2VsbGVkU2FsZXNMaXN0LnB1c2goY2FuY2VsU2FsZSk7XG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlciA9IHRoaXMuY2FsY3VsYXRlUmVmdW5kKGNhbmNlbFNhbGUpO1xuICAgICAgICBjYW5jZWxTYWxlLnJlZnVuZCA9IHJlZnVuZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlUmVmdW5kKGNhbmNlbFNhbGU6IENhbmNlbFNhbGUpOiBudW1iZXIge1xuXG5cbiAgICAgICAgbGV0IGRpZmYgPSB0aGlzLmNhbGN1bGF0ZURpZmZIb3VycyhjYW5jZWxTYWxlLmNhbmNlbGVkRGF0ZVRpbWUsIGNhbmNlbFNhbGUuc2FsZS5vcGVyYXRpb25EYXRlVGltZSlcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyO1xuXG4gICAgICAgIGlmIChkaWZmID4gMjQpIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IGNhbmNlbFNhbGUuc2FsZS50b3RhbCAqIDAuNzU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWZ1bmQgPSBjYW5jZWxTYWxlLnNhbGUudG90YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlZnVuZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlRGlmZkhvdXJzKGQxOiBEYXRlLCBkMjogRGF0ZSk6IG51bWJlciB7XG5cbiAgICAgICAgbGV0IGRpZmZNaWxpczogbnVtYmVyID0gKGQxLmdldFRpbWUoKSAtIGQyLmdldFRpbWUoKSk7Ly8gbWlsaSBzZWNvbmRzXG4gICAgICAgIGxldCBkaWZmSG91ciA9IE1hdGguZmxvb3IoZGlmZk1pbGlzIC8gMTAwMCAvIDYwIC8gNjAgKTsgLy8gLzEwMDAgPiBzZWNvbmQgLyA2MCA+IG1pbiAvIDYwID4gaG91clxuICAgICAgICByZXR1cm4gZGlmZkhvdXI7XG4gICAgfVxuXG59IiwiaW1wb3J0IHsgRGF0YUJhc2UgfSBmcm9tIFwiLi4vZGIvZGF0YWJhc2VcIjtcbmltcG9ydCB7IEN1c3RvbWVyIH0gZnJvbSBcIi4uL2RvbWFpbi9jdXN0b21lclwiO1xuXG5leHBvcnQgY2xhc3MgQ3VzdG9tZXJTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9jdXN0b21lckxpc3Q6IEFycmF5PEN1c3RvbWVyPjtcblxuICAgIGNvbnN0cnVjdG9yKGN1c3RvbWVyTGlzdDogQXJyYXk8Q3VzdG9tZXI+KSB7XG4gICAgICAgIHRoaXMuX2N1c3RvbWVyTGlzdCA9IGN1c3RvbWVyTGlzdDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjdXN0b21lckxpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxDdXN0b21lcj59XG4gICAgICovXG5cdHB1YmxpYyBnZXQgY3VzdG9tZXJMaXN0KCk6IEFycmF5PEN1c3RvbWVyPiB7XG5cdFx0cmV0dXJuIHRoaXMuX2N1c3RvbWVyTGlzdDtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGN1c3RvbWVyTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8Q3VzdG9tZXI+fSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGN1c3RvbWVyTGlzdCh2YWx1ZTogQXJyYXk8Q3VzdG9tZXI+KSB7XG5cdFx0dGhpcy5fY3VzdG9tZXJMaXN0ID0gdmFsdWU7XG5cdH1cbiAgIFxuXG4gICAgcHVibGljIGFkZEN1c3RvbWVyKG5ld0N1c3RvbWVyOiBDdXN0b21lcikge1xuICAgICAgICB0aGlzLmN1c3RvbWVyTGlzdC5wdXNoKG5ld0N1c3RvbWVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TmV3Q3VzdG9tZXJJZCgpOiBudW1iZXIge1xuICAgICAgICBsZXQgbGFzdEN1c3RvbWVySWQ6IG51bWJlciA9IDA7XG5cbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tZXJMaXN0Lmxlbmd0aCA+IDApIHtcblxuICAgICAgICAgICAgbGFzdEN1c3RvbWVySWQgPSB0aGlzLmN1c3RvbWVyTGlzdC5hdCh0aGlzLmN1c3RvbWVyTGlzdC5sZW5ndGggLSAxKSEuaWQ7XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0Q3VzdG9tZXJJZCA9IGxhc3RDdXN0b21lcklkICsgMTtcblxuICAgICAgICByZXR1cm4gbGFzdEN1c3RvbWVySWQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEN1c3RvbWVySW5mbyhpZDogbnVtYmVyKTogQ3VzdG9tZXIgfCB1bmRlZmluZWQge1xuXG4gICAgICAgIGxldCBjdXN0b21lciA9IHRoaXMuY3VzdG9tZXJMaXN0LmZpbmQoY3VzdG9tZXIgPT4gY3VzdG9tZXIuaWQgPT09IGlkKTtcblxuICAgICAgICBpZiAoY3VzdG9tZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXN0b21lcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaXNWYWxpZEN1c3RvbWVyKGN1c3RvbWVySWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuXG4gICAgICAgIGxldCBpc1ZhbGlkID0gdGhpcy5jdXN0b21lckxpc3Quc29tZShjdXN0b21lciA9PiBjdXN0b21lci5pZCA9PT0gY3VzdG9tZXJJZCk7XG5cbiAgICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IERhdGFCYXNlIH0gZnJvbSBcIi4uL2RiL2RhdGFiYXNlXCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rXCI7XG5pbXBvcnQgeyBSZW50IH0gZnJvbSBcIi4uL2RvbWFpbi9yZW50XCI7XG5cbmV4cG9ydCBjbGFzcyBSZW50U2VydmljZSB7XG4gICAgcHJpdmF0ZSBfcmVudExpc3Q6IEFycmF5PFJlbnQ+O1xuICAgIHJlZnVuZFBlcmNlbnQ6IG51bWJlcjtcblxuXG4gICAgY29uc3RydWN0b3IocmVudExpc3Q6IEFycmF5PFJlbnQ+KSB7XG4gICAgICAgIHRoaXMuX3JlbnRMaXN0ID0gcmVudExpc3Q7XG4gICAgICAgIHRoaXMucmVmdW5kUGVyY2VudCA9IDAuNzU7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVudExpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxSZW50Pn1cbiAgICAgKi9cblx0cHVibGljIGdldCByZW50TGlzdCgpOiBBcnJheTxSZW50PiB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlbnRMaXN0O1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVudExpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PFJlbnQ+fSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHJlbnRMaXN0KHZhbHVlOiBBcnJheTxSZW50Pikge1xuXHRcdHRoaXMuX3JlbnRMaXN0ID0gdmFsdWU7XG5cdH1cblxuXG5cbiAgICBwdWJsaWMgYWRkUmVudChyZW50OiBSZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVudExpc3QucHVzaChyZW50KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlVG90YWwocmVudDogUmVudCk6IG51bWJlciB7XG5cbiAgICAgICAgbGV0IG1hcDogTWFwPEJvb2ssIG51bWJlcj4gPSByZW50LmJvb2tBbmRRdWFudGl0eU1hcDtcblxuICAgICAgICBsZXQgc3ViVG90YWw6IG51bWJlciA9IDA7XG5cbiAgICAgICAgLy9pdCBjYW4gYmUgPT4gbGV0IGVudHJ5IG9mIHJlbnQuYm9va0FuZFF1YW50aXR5TWFwLmVudHJpZXMoKVxuICAgICAgICBmb3IgKGxldCBlbnRyeSBvZiByZW50LmJvb2tBbmRRdWFudGl0eU1hcCkge1xuICAgICAgICAgICAgc3ViVG90YWwgKz0gZW50cnlbMF0uYm9va1NwZWMucHJpY2UgKiBlbnRyeVsxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdWJUb3RhbDtcbiAgICB9XG5cbiAgICAvLyBSMDUxMDIyMTQ1NTA5ID0+IGRvbWFpbi5SZW50IDA1LjEwLjIwMjIgMTQ6NTUuMDlcbiAgICBnZW5lcmF0ZVJlbnROdW1iZXIoY3VzdG9tZXJJZDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IHJlY2VpcHROdW1iZXI6IHN0cmluZyA9IFwiUlwiICsgdG9kYXkuZ2V0RGF5KCkudG9TdHJpbmcgKyB0b2RheS5nZXRNb250aCgpLnRvU3RyaW5nICsgdG9kYXkuZ2V0RnVsbFllYXIoKS50b1N0cmluZyArIHRvZGF5LmdldEhvdXJzKCkudG9TdHJpbmcgKyB0b2RheS5nZXRNaW51dGVzKCkudG9TdHJpbmcgKyB0b2RheS5nZXRTZWNvbmRzKCkudG9TdHJpbmcgKyBjdXN0b21lcklkLnRvU3RyaW5nO1xuXG4gICAgICAgIHJldHVybiByZWNlaXB0TnVtYmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVSZWZ1bmQocmVudDogUmVudCk6IHZvaWQge1xuICAgICAgICByZW50LnJlZnVuZCA9IHJlbnQudG90YWwgKiB0aGlzLnJlZnVuZFBlcmNlbnQ7XG4gICAgfVxuXG5cbn0iLCJpbXBvcnQgeyBzdG9ja1NlcnZpY2UgfSBmcm9tIFwiLi5cIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IFNhbGUgfSBmcm9tIFwiLi4vZG9tYWluL3NhbGVcIjtcbmltcG9ydCB7IFNhbGVDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlLWNhcnRcIjtcblxuZXhwb3J0IGNsYXNzIFNhbGVTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9zYWxlTGlzdDogQXJyYXk8U2FsZT47XG4gICAgcHJpdmF0ZSBfc2FsZUNhcnQ6IFNhbGVDYXJ0O1xuICAgIHB1YmxpYyBhZGRTYWxlQXBpID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvc2FsZXMvJztcblxuICAgIGNvbnN0cnVjdG9yKHNhbGVMaXN0OiBBcnJheTxTYWxlPiwgc2FsZUNhcnQ6IFNhbGVDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3NhbGVMaXN0ID0gc2FsZUxpc3Q7XG4gICAgICAgIHRoaXMuX3NhbGVDYXJ0ID0gc2FsZUNhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHNhbGVMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8U2FsZT59XG4gICAgICovXG4gICAgcHVibGljIGdldCBzYWxlTGlzdCgpOiBBcnJheTxTYWxlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zYWxlTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc2FsZUxpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PFNhbGU+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgc2FsZUxpc3QodmFsdWU6IEFycmF5PFNhbGU+KSB7XG4gICAgICAgIHRoaXMuX3NhbGVMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc2FsZUNhcnRcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxTYWxlQ2FydD59XG4gICAgICovXG4gICAgcHVibGljIGdldCBzYWxlQ2FydCgpOiBTYWxlQ2FydCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zYWxlQ2FydDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc2FsZUNhcnRcbiAgICAgKiBAcGFyYW0ge0FycmF5PFNhbGVDYXJ0Pn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHNhbGVDYXJ0KHZhbHVlOiBTYWxlQ2FydCkge1xuICAgICAgICB0aGlzLl9zYWxlQ2FydCA9IHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRTYWxlKHNhbGU6IFNhbGUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zYWxlTGlzdC5wdXNoKHNhbGUpO1xuXG4gICAgfVxuXG4gICAgY2FsY3VsYXRlVG90YWwoc2FsZTogU2FsZSk6IG51bWJlciB7XG4gICAgICAgIGxldCBzdWJUb3RhbCA9IDAuMDtcblxuICAgICAgICBmb3IgKGxldCBlbnRyeSBvZiBzYWxlLmJvb2tBbmRRdWFudGl0eU1hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIHN1YlRvdGFsICs9IGVudHJ5WzBdLmJvb2tTcGVjLnByaWNlICogZW50cnlbMV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3ViVG90YWw7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVTYWxlTnVtYmVyKGN1c3RvbWVySWQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGxldCByZWNlaXB0TnVtYmVyOiBzdHJpbmcgPSBcIlNcIiArIHRvZGF5LmdldERheSgpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRNb250aCgpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRIb3VycygpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldFNlY29uZHMoKS50b1N0cmluZygpICsgY3VzdG9tZXJJZC50b1N0cmluZygpO1xuXG4gICAgICAgIHJldHVybiByZWNlaXB0TnVtYmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTYWxlKHNhbGVOdW1iZXI6IHN0cmluZyk6IFNhbGUge1xuXG4gICAgICAgIGxldCBzYWxlID0gdGhpcy5zYWxlTGlzdC5maW5kKHMgPT4gcy5vcGVyYXRpb25OdW1iZXIgPT09IHNhbGVOdW1iZXIpO1xuXG4gICAgICAgIGlmIChzYWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gc2FsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVTYWxlKHNhbGU6IFNhbGUpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5zYWxlTGlzdC5pbmRleE9mKHNhbGUpO1xuICAgICAgICB0aGlzLnNhbGVMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZEJvb2tUb0NhcnQoYm9vazogQm9vaywgcXVhbnRpdHk6IG51bWJlciwgY3VzdG9tZXJJZDogbnVtYmVyKSB7XG5cbiAgICAgICAgaWYgKHRoaXMuc2FsZUNhcnQuYm9va0FuZFF1YW50aXR5TWFwLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2FsZUNhcnQuY3VzdG9tZXJJZCA9IGN1c3RvbWVySWQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zYWxlQ2FydC5ib29rQW5kUXVhbnRpdHlNYXAuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNhbGVDYXJ0LmN1c3RvbWVySWQgIT09IGN1c3RvbWVySWQpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkZhcmtsxLEgbcO8xZ90ZXJpeWUga2l0YXAgc2F0xLFsbWF5YSDDp2FsxLHFn8SxbMSxeW9yLiBMw7x0ZmVuIHRlayBtw7zFn3RlcmkgacOnaW4gacWfbGVtIHlhcMSxbsSxelwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNhbGVDYXJ0LmJvb2tBbmRRdWFudGl0eU1hcC5zZXQoYm9vaywgcXVhbnRpdHkpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNhbGVDYXJ0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZVNhbGVDYXJ0KCkge1xuICAgICAgICBjb25zdCBzYWxlQ2FydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2FsZUNhcnRcIik7XG4gICAgICAgIGNvbnN0IHN1YlRvdGFsU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG90YWxBbW91bnRUbFwiKTtcblxuICAgICAgICBpZiAoc2FsZUNhcnQpIHtcblxuICAgICAgICAgICAgbGV0IHJvdywgY29sdW1uLCBzdWJUb3RhbDogbnVtYmVyID0gMDtcblxuICAgICAgICAgICAgd2hpbGUgKHNhbGVDYXJ0Lmxhc3RDaGlsZCAmJiBzYWxlQ2FydC5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgc2FsZUNhcnQucmVtb3ZlQ2hpbGQoc2FsZUNhcnQubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YlRvdGFsU3BhbiEudGV4dENvbnRlbnQgPSBcIlwiO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5zYWxlQ2FydC5ib29rQW5kUXVhbnRpdHlNYXAuc2l6ZTsgaW5kZXgrKykge1xuXG4gICAgICAgICAgICAgICAgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gXCJyb3ctY2FydFwiO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZW50cnkgb2YgdGhpcy5zYWxlQ2FydC5ib29rQW5kUXVhbnRpdHlNYXAuZW50cmllcygpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWNhcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gdGhpcy5zYWxlQ2FydC5jdXN0b21lcklkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1jYXJ0XCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVudHJ5WzBdLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1jYXJ0XCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVudHJ5WzFdLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1jYXJ0XCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IChlbnRyeVswXS5ib29rU3BlYy5wcmljZSAqIGVudHJ5WzFdKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyb3cgJiYgc3ViVG90YWxTcGFuKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0IG9mIHRoaXMuc2FsZUNhcnQuYm9va0FuZFF1YW50aXR5TWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YlRvdGFsICs9IHRbMF0uYm9va1NwZWMucHJpY2UgKiB0WzFdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNhbGVDYXJ0LmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICAgICAgICAgc3ViVG90YWxTcGFuLnRleHRDb250ZW50ID0gc3ViVG90YWwudG9TdHJpbmcoKSArIFwiIFRMXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG5cbiAgICB9XG5cbiAgICBwdWJsaWMgY2FydFRvU2FsZSgpIHtcbiAgICAgICAgbGV0IHNhbGVDYXJ0OiBTYWxlQ2FydCA9IHRoaXMuc2FsZUNhcnQ7XG4gICAgICAgIGxldCBzYWxlID0gbmV3IFNhbGUoKTtcblxuICAgICAgICBzYWxlLmJvb2tBbmRRdWFudGl0eU1hcCA9IHNhbGVDYXJ0LmJvb2tBbmRRdWFudGl0eU1hcDtcbiAgICAgICAgc2FsZS5jdXN0b21lcklkID0gc2FsZUNhcnQuY3VzdG9tZXJJZDtcbiAgICAgICAgc2FsZS5vcGVyYXRpb25OdW1iZXIgPSB0aGlzLmdlbmVyYXRlU2FsZU51bWJlcihzYWxlQ2FydC5jdXN0b21lcklkKTtcbiAgICAgICAgc2FsZS5vcGVyYXRpb25EYXRlVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHNhbGUudG90YWwgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsKHNhbGUpO1xuXG4gICAgICAgIGZvciAobGV0IHEgb2Ygc2FsZS5ib29rQW5kUXVhbnRpdHlNYXApIHtcbiAgICAgICAgICAgIHN0b2NrU2VydmljZS5pbmNyZWFzZVN0b2NrKHFbMF0uaXNibiwgLXFbMV0pXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFkZFNhbGVNb2NrKHNhbGUpO1xuICAgICAgICB0aGlzLnNhbGVDYXJ0ID0gbmV3IFNhbGVDYXJ0OyAvLyBzZXBldGkgYm/Fn2FsdFxuICAgICAgICB0aGlzLnVwZGF0ZVNhbGVDYXJ0KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgYWRkU2FsZU1vY2soczogU2FsZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmFkZFNhbGVBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGJvb2tBbmRRdWFudGl0eTogcy5ib29rQW5kUXVhbnRpdHlNYXAsXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbWVySWQ6IHMuY3VzdG9tZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uRGF0ZVRpbWU6IHMub3BlcmF0aW9uRGF0ZVRpbWUsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbk51bWJlcjogcy5vcGVyYXRpb25OdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiBzLnRvdGFsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWxlcnQocmVzdWx0Lm1lc3NhZ2UgKyBcIiBcIisgcmVzdWx0LnNhbGVOdW1iZXIpO1xuXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbiIsImltcG9ydCB7IERhdGFCYXNlIH0gZnJvbSBcIi4uL2RiL2RhdGFiYXNlXCI7XG5pbXBvcnQgeyBTdG9jayB9IGZyb20gXCIuLi9kb21haW4vc3RvY2tcIjtcblxuZXhwb3J0IGNsYXNzIFN0b2NrU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfc3RvY2tMaXN0OiBBcnJheTxTdG9jaz47XG5cbiAgICBjb25zdHJ1Y3RvcihzdG9ja0xpc3Q6IEFycmF5PFN0b2NrPikge1xuICAgICAgICB0aGlzLl9zdG9ja0xpc3QgPSBzdG9ja0xpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHN0b2NrTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PFN0b2NrPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHN0b2NrTGlzdCgpOiBBcnJheTxTdG9jaz4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RvY2tMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzdG9ja0xpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PFN0b2NrPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHN0b2NrTGlzdCh2YWx1ZTogQXJyYXk8U3RvY2s+KSB7XG4gICAgICAgIHRoaXMuX3N0b2NrTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwIGhlbsO8eiBla2xlbmRpa3RlbiBzb25yYSBoZW1lbiBnaXJpeW9yLFxuICAgICAqIEVsaW1pemRlIGhpw6cgc3RvY2sga2F5ZMSxL25lc25lc2kgeW9rLCB5ZW5pIGthecSxdC9uZXNuZSBvbHXFn3R1cnV5b3J1elxuICAgICAqIFllbmkgZWtsZW5lbiBraXRhYmEgc3RvayBla2xlbWUgacWfbGVtaVxuICAgICAqIEBwYXJhbSBpc2JuICBzdG9rIGVrbGVuZWNlayBvbGFuIGtpdGFixLFuIGlzYm4gbnVtYXJhc8SxXG4gICAgICovXG4gICAgcHVibGljIGFkZFN0b2NrKGlzYm46IHN0cmluZywgc2hlbGZOdW1iZXI6IHN0cmluZywgcXVhbnRpdHk6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICBsZXQgbmV3U3RvY2sgPSBuZXcgU3RvY2soaXNibiwgcXVhbnRpdHksIHNoZWxmTnVtYmVyKTtcbiAgICAgICAgICAgIHRoaXMuc3RvY2tMaXN0LnB1c2gobmV3U3RvY2spO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwIHphdGVuIGVrbGksIGhhbGloYXrEsXJkYSB2YXIsIGRhaGEgc29ucmEgeWVuaSBraXRhcGxhciBnZWxkaSxzdG9rIGFydMSxcm1hIGnFn2xlbWksXG4gICAgICogQHBhcmFtIGlzYm4gc3RvayBla2xlbmVjZWsgb2xhbiBraXRhYsSxbiBpc2JuIG51bWFyYXPEsVxuICAgICAqIEBwYXJhbSBxdWFudGl0eSBzdG9rIGVrbGVuZWNlayBvbGFuIGtpdGFixLFuIGFkZWRpXG4gICAgICogQHJldHVybnMgacWfbGVtIGdlcsOnZWtsZcWfbWVzaSBkdXJ1bXVuZGEgdHJ1ZSwgZGnEn2VyIGR1cnVtZGEgZmFsc2UgZMO2bmVyXG4gICAgICovXG4gICAgcHVibGljIGluY3JlYXNlU3RvY2soaXNibjogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBzdG9jayA9IHRoaXMuZ2V0U3RvY2soaXNibik7XG4gICAgICAgIGlmIChzdG9jaykge1xuICAgICAgICAgICAgc3RvY2sucXVhbnRpdHkgPSAoc3RvY2sucXVhbnRpdHkgKyBxdWFudGl0eSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHN0b2NrIG5lc25lc2luaSBnZXJpIGTDtm5kw7xyw7xyXG4gICAgICogQHBhcmFtIGlzYm4gc3RvY2sgbmVzbmVzaSBnZXRpcmlsZWNlayBvbGFuIG5lc25lbmluIGlzYm4gbm9zdSxcbiAgICAgKiBAcmV0dXJucyBkYiBvbGFuIHN0b2NrIG5lc25lbnNpIGdlcmkgZMO2bmVyLCBkYiBkZSB5b2sgaXNlIHRocm93IGlsZSBoYXRhIGbEsXJsYXTEsXJsxLFyXG4gICAgICovXG4gICAgcHVibGljIGdldFN0b2NrKGlzYm46IHN0cmluZykge1xuICAgICAgICBsZXQgc3RvY2sgPSB0aGlzLnN0b2NrTGlzdC5maW5kKHMgPT4gcy5pc2JuID09PSBpc2JuKTtcbiAgICAgICAgaWYgKHN0b2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RvY2s7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U3RvY2tRdWFudGl0eShpc2JuOiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICBsZXQgczogU3RvY2sgPSB0aGlzLmdldFN0b2NrKGlzYm4pITtcblxuICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgcmV0dXJuIHMucXVhbnRpdHk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhZGRTdG9ja01vY2soczogU3RvY2spIHtcbiAgICAgICAgcG9zdEFkZFN0b2NrTW9jayhzKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHBvc3RBZGRTdG9ja01vY2soczogU3RvY2spIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3N0b2Nrcy8nICsgcy5pc2JuLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBpc2JuOiBzLmlzYm4sXG4gICAgICAgICAgICAgICAgcXVhbnRpdHk6IHMucXVhbnRpdHlcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcblxuICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgIH1cbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwNyk7XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJ0aGlzIiwiX2Jvb2tzIiwiQXJyYXkiLCJfc3RvY2tzIiwiX2N1c3RvbWVycyIsIl9zYWxlcyIsIl9yZW50cyIsIl9ib29rU3BlY2lmaWNhdGlvbnMiLCJfY2FuY2VsU2FsZXMiLCJfc2FsZUNhcnQiLCJTYWxlQ2FydCIsImdldEJvb2tzTGlzdCIsImdldFN0b2Nrc0xpc3QiLCJnZXRDdXN0b21lcnNMaXN0IiwiZ2V0U2FsZXNMaXN0IiwiZ2V0UmVudHMiLCJnZXRCb29rU3BlY2lmaWNhdGlvbnMiLCJnZXRDYW5jYWxlZFNhbGVzIiwiZ2V0U2FsZUNhcnQiLCJzZXRTYWxlQ2FydCIsInZhbHVlIiwiaXNibiIsInByaWNlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsIl9pc2JuIiwiX3ByaWNlIiwiX3N0YXJ0RGF0ZSIsIl9lbmREYXRlIiwibmFtZSIsImF1dGhvciIsInB1Ymxpc2hZZWFyIiwicGFnZXMiLCJib29rU3BlYyIsIl9uYW1lIiwiX2F1dGhvciIsIl9wdWJsaXNoWWVhciIsIl9wYWdlcyIsIl9ib29rU3BlYyIsImlkIiwic3VyTmFtZSIsInBob25lTnVtYmVyIiwiX2lkIiwiX3N1ck5hbWUiLCJfcGhvbmVOdW1iZXIiLCJib29rQW5kUXVhbnRpdHlNYXAiLCJNYXAiLCJvcGVyYXRpb25EYXRlVGltZSIsImN1c3RvbWVySWQiLCJvcGVyYXRpb25OdW1iZXIiLCJ0b3RhbCIsIl9ib29rQW5kUXVhbnRpdHlNYXAiLCJfb3BlcmF0aW9uRGF0ZVRpbWUiLCJfY3VzdG9tZXJJZCIsIl9vcGVyYXRpb25OdW1iZXIiLCJfdG90YWwiLCJxdWFudGl0eSIsInNoZWxmTnVtYmVyIiwiX3F1YW50aXR5IiwiX3NoZWxmTnVtYmVyIiwiZGIiLCJEYXRhQmFzZSIsInNob3dBbmRIaWRlIiwiYnRuSWQiLCJlbGVtZW50SWQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdHlsZSIsImRpc3BsYXkiLCJib29rU2VydmljZSIsIkJvb2tTZXJ2aWNlIiwiY3VzdG9tZXJTZXJ2aWNlIiwiQ3VzdG9tZXJTZXJ2aWNlIiwiY2FuY2VsU2FsZVNlcnZpY2UiLCJDYW5jZWxTYWxlU2VydmljZSIsInJlbnRTZXJ2aWNlIiwiUmVudFNlcnZpY2UiLCJzYWxlU2VydmljZSIsIlNhbGVTZXJ2aWNlIiwic3RvY2tTZXJ2aWNlIiwiU3RvY2tTZXJ2aWNlIiwiY29uc29sZSIsImxvZyIsImFkZEN1c3RvbWVyIiwiQ3VzdG9tZXIiLCJhZGRTdG9jayIsImluaXRpbGlhemVTZXJ2aWNlcyIsImluaXRpYWxpemVCb29rc0RhdGFNb2NrIiwiYWRkQm9va0Zvcm0iLCJvbnN1Ym1pdCIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJ0aXRsZSIsImdldCIsIkRhdGUiLCJCb29rU3BlY2lmaWNhdGlvbiIsImJvb2siLCJCb29rIiwiYWRkQm9va01vY2siLCJhbGVydCIsInJlc2V0IiwiYWRkU3RvY2tGb3JtIiwicXVhbnR0aXkiLCJzdG9jayIsIlN0b2NrIiwic29tZSIsImIiLCJhZGRTdG9ja01vY2siLCJhZGRDdXN0b21lckZvcm0iLCJzdXJuYW1lIiwiY3VzdG9tZXIiLCJnZXROZXdDdXN0b21lcklkIiwic2FsZUJvb2tGb3JtIiwiZ2V0Qm9vayIsInBhcnNlSW50IiwiaXNWYWxpZEN1c3RvbWVyIiwiZ2V0U3RvY2siLCJhZGRCb29rVG9DYXJ0IiwiZXJyb3IiLCJzYWxlQ2FydCIsInNpemUiLCJjYXJ0VG9TYWxlIiwiYm9va0xpc3QiLCJib29rU3BlY0xpc3QiLCJfYm9va0xpc3QiLCJfYm9va1NwZWNMaXN0IiwiZmluZCIsImFkZEJvb2siLCJuZXdCb29rIiwicHVzaCIsIkV4Y2VwdGlvbiIsImlzVmFsaWRCb29rIiwiaW5jbHVkZXMiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkFjY2VwdCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJyZXN1bHQiLCJqc29uIiwiZ2V0UmVzdWx0IiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwibGlzdEJvb2tzIiwibGlzdEJvb2tzRGl2Iiwicm93IiwiY29sdW1uIiwibGFzdENoaWxkIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJyZW1vdmVDaGlsZCIsImZvckVhY2giLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwidGV4dENvbnRlbnQiLCJ0b1N0cmluZyIsImFwcGVuZENoaWxkIiwiZ2V0U3RvY2tRdWFudGl0eSIsImJvZHkiLCJjYW5jZWxsZWRTYWxlc0xpc3QiLCJfY2FuY2VsbGVkU2FsZXNMaXN0IiwiY2FuY2VsU2FsZSIsInJlZnVuZCIsImNhbGN1bGF0ZVJlZnVuZCIsImNhbGN1bGF0ZURpZmZIb3VycyIsImNhbmNlbGVkRGF0ZVRpbWUiLCJzYWxlIiwiZDEiLCJkMiIsImRpZmZNaWxpcyIsImdldFRpbWUiLCJNYXRoIiwiZmxvb3IiLCJjdXN0b21lckxpc3QiLCJfY3VzdG9tZXJMaXN0IiwibmV3Q3VzdG9tZXIiLCJsYXN0Q3VzdG9tZXJJZCIsImF0IiwiZ2V0Q3VzdG9tZXJJbmZvIiwicmVudExpc3QiLCJfcmVudExpc3QiLCJyZWZ1bmRQZXJjZW50IiwiYWRkUmVudCIsInJlbnQiLCJjYWxjdWxhdGVUb3RhbCIsInN1YlRvdGFsIiwiZW50cnkiLCJnZW5lcmF0ZVJlbnROdW1iZXIiLCJ0b2RheSIsImdldERheSIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwic2FsZUxpc3QiLCJhZGRTYWxlQXBpIiwiX3NhbGVMaXN0IiwiYWRkU2FsZSIsImVudHJpZXMiLCJnZW5lcmF0ZVNhbGVOdW1iZXIiLCJnZXRTYWxlIiwic2FsZU51bWJlciIsInMiLCJyZW1vdmVTYWxlIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwic2V0IiwidXBkYXRlU2FsZUNhcnQiLCJzdWJUb3RhbFNwYW4iLCJ0IiwiU2FsZSIsInEiLCJpbmNyZWFzZVN0b2NrIiwiYWRkU2FsZU1vY2siLCJib29rQW5kUXVhbnRpdHkiLCJtZXNzYWdlIiwic3RvY2tMaXN0IiwiX3N0b2NrTGlzdCIsIm5ld1N0b2NrIiwicG9zdEFkZFN0b2NrTW9jayIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=